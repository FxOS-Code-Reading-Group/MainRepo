<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>FxOS Code Reading: Opus Encoder</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">FxOS Code Reading
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- 作成： Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'検索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>メインページ</span></a></li>
      <li><a href="../../pages.html"><span>関連ページ</span></a></li>
      <li><a href="../../modules.html"><span>モジュール</span></a></li>
      <li><a href="../../namespaces.html"><span>パッケージ</span></a></li>
      <li><a href="../../annotated.html"><span>データ構造</span></a></li>
      <li><a href="../../files.html"><span>ファイル</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('dc/db7/group__opusencoder.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#typedef-members">型定義</a> &#124;
<a href="#func-members">関数</a>  </div>
  <div class="headertitle">
<div class="title">Opus Encoder</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="typedef-members"></a>
型定義</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../dc/db7/group__opusencoder.html#gaf461a3ef2f10c2fe8b994a176f06c9bd">OpusEncoder</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db7/group__opusencoder.html#gaf461a3ef2f10c2fe8b994a176f06c9bd">OpusEncoder</a></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
関数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db7/group__opusencoder.html#gac326a1958cec519aa6485a2d65c43ab2">opus_encoder_get_size</a> (<a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a> channels)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT <a class="el" href="../../dc/db7/group__opusencoder.html#gaf461a3ef2f10c2fe8b994a176f06c9bd">OpusEncoder</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db7/group__opusencoder.html#ga05a87a612c5f57c8efdee500fdb5e65b">opus_encoder_create</a> (<a class="el" href="../../d4/d94/opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a> Fs, <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a> channels, <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a> application, <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a> *<a class="el" href="../../db/df4/geoloc_8js.html#ac3dbd5af3a73f4aa69249dd1c6b9c980">error</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db7/group__opusencoder.html#ga7a21a7395021b361b52c67e30066743d">opus_encoder_init</a> (<a class="el" href="../../dc/db7/group__opusencoder.html#gaf461a3ef2f10c2fe8b994a176f06c9bd">OpusEncoder</a> *st, <a class="el" href="../../d4/d94/opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a> Fs, <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a> channels, <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a> application)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db7/group__opusencoder.html#ga74f1bb6adc8fef3adcfb502932e6021b">opus_encode</a> (<a class="el" href="../../dc/db7/group__opusencoder.html#gaf461a3ef2f10c2fe8b994a176f06c9bd">OpusEncoder</a> *st, <a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d4/d94/opus__types_8h.html#acc9ed7cf60479eb81f9648c6ec27dc26">opus_int16</a> *pcm, <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a> frame_size, unsigned char *<a class="el" href="../../d9/d04/expat_8h.html#aa11c5d56dba0976f16f07ea50b1999ba">data</a>, <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a> max_data_bytes)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db7/group__opusencoder.html#gabf17f3e2df1d4517b7e56e94ea5659bf">opus_encode_float</a> (<a class="el" href="../../dc/db7/group__opusencoder.html#gaf461a3ef2f10c2fe8b994a176f06c9bd">OpusEncoder</a> *st, <a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a41c4c29f6d7869f7621f2549cecccbf0">float</a> *pcm, <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a> frame_size, unsigned char *<a class="el" href="../../d9/d04/expat_8h.html#aa11c5d56dba0976f16f07ea50b1999ba">data</a>, <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a> max_data_bytes)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT <a class="el" href="../../dc/d2c/prtpool_8h.html#a7797d332996f57719d6d316bee73873d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db7/group__opusencoder.html#ga899c69582a1cad2a168aedc99cab7be0">opus_encoder_destroy</a> (<a class="el" href="../../dc/db7/group__opusencoder.html#gaf461a3ef2f10c2fe8b994a176f06c9bd">OpusEncoder</a> *st)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">OPUS_EXPORT <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/db7/group__opusencoder.html#gab85837d82b4b4f654c7ad87743c0b7c2">opus_encoder_ctl</a> (<a class="el" href="../../dc/db7/group__opusencoder.html#gaf461a3ef2f10c2fe8b994a176f06c9bd">OpusEncoder</a> *st, <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a> <a class="el" href="../../df/d44/permission__manager_8js.html#ad9abb423164fcb98d6ad9333893e4682">request</a>,...)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>説明</h2>
<p>Since Opus is a stateful codec, the encoding process starts with creating an encoder state. This can be done with:</p>
<div class="fragment"><pre class="fragment"> <span class="keywordtype">int</span>          <a class="code" href="../../d0/de6/fake-oncall-desktop_8js.html#a6efd5e1eedff09b640ec574dc6dd2879">error</a>;
 <a class="code" href="../../dc/db7/group__opusencoder.html#gaf461a3ef2f10c2fe8b994a176f06c9bd">OpusEncoder</a> *enc;
 enc = <a class="code" href="../../dc/db7/group__opusencoder.html#ga05a87a612c5f57c8efdee500fdb5e65b">opus_encoder_create</a>(Fs, channels, application, &amp;error);
</pre></div><p>From this point, <code>enc</code> can be used for encoding an audio stream. An encoder state <b>must</b> <b>not</b> be used for more than one stream at the same time. Similarly, the encoder state <b>must</b> <b>not</b> be re-initialized for each frame.</p>
<p>While <a class="el" href="../../dc/db7/group__opusencoder.html#ga05a87a612c5f57c8efdee500fdb5e65b">opus_encoder_create()</a> allocates memory for the state, it's also possible to initialize pre-allocated memory:</p>
<div class="fragment"><pre class="fragment"> <span class="keywordtype">int</span>          <a class="code" href="../../d5/dbd/camera_2js_2camera_8js.html#a6d7e27eaec1e5f6600e65858be43c18b">size</a>;
 <span class="keywordtype">int</span>          <a class="code" href="../../d0/de6/fake-oncall-desktop_8js.html#a6efd5e1eedff09b640ec574dc6dd2879">error</a>;
 <a class="code" href="../../dc/db7/group__opusencoder.html#gaf461a3ef2f10c2fe8b994a176f06c9bd">OpusEncoder</a> *enc;
 size = <a class="code" href="../../dc/db7/group__opusencoder.html#gac326a1958cec519aa6485a2d65c43ab2">opus_encoder_get_size</a>(channels);
 enc = <a class="code" href="../../d1/de4/mozalloc__macro__wrappers_8h.html#a68f164c7f434e3aba70e81776e28376f">malloc</a>(size);
 error = <a class="code" href="../../dc/db7/group__opusencoder.html#ga7a21a7395021b361b52c67e30066743d">opus_encoder_init</a>(enc, Fs, channels, application);
</pre></div><p>where <a class="el" href="../../dc/db7/group__opusencoder.html#gac326a1958cec519aa6485a2d65c43ab2">opus_encoder_get_size()</a> returns the required size for the encoder state. Note that future versions of this code may change the size, so no assuptions should be made about it.</p>
<p>The encoder state is always continuous in memory and only a shallow copy is sufficient to copy it (e.g. memcpy())</p>
<p>It is possible to change some of the encoder's settings using the <a class="el" href="../../dc/db7/group__opusencoder.html#gab85837d82b4b4f654c7ad87743c0b7c2">opus_encoder_ctl()</a> interface. All these settings already default to the recommended value, so they should only be changed when necessary. The most common settings one may want to change are:</p>
<div class="fragment"><pre class="fragment"> <a class="code" href="../../dc/db7/group__opusencoder.html#gab85837d82b4b4f654c7ad87743c0b7c2">opus_encoder_ctl</a>(enc, <a class="code" href="../../df/d4b/group__encoderctls.html#ga0bb51947e355b33d0cb358463b5101a7">OPUS_SET_BITRATE</a>(bitrate));
 <a class="code" href="../../dc/db7/group__opusencoder.html#gab85837d82b4b4f654c7ad87743c0b7c2">opus_encoder_ctl</a>(enc, <a class="code" href="../../df/d4b/group__encoderctls.html#ga3483877bf1687a75dd4a1de6f85f291c">OPUS_SET_COMPLEXITY</a>(complexity));
 <a class="code" href="../../dc/db7/group__opusencoder.html#gab85837d82b4b4f654c7ad87743c0b7c2">opus_encoder_ctl</a>(enc, <a class="code" href="../../df/d4b/group__encoderctls.html#gaaa87ccee4ae46aa6c9528e03c5122b89">OPUS_SET_SIGNAL</a>(signal_type));
</pre></div><p>where</p>
<ul>
<li>bitrate is in bits per second (b/s) </li>
<li>complexity is a value from 1 to 10, where 1 is the lowest complexity and 10 is the highest </li>
<li>signal_type is either OPUS_AUTO (default), OPUS_SIGNAL_VOICE, or OPUS_SIGNAL_MUSIC</li>
</ul>
<p>See <a class="el" href="../../df/d4b/group__encoderctls.html">Encoder related CTLs</a> and <a class="el" href="../../dc/d26/group__genericctls.html">Generic CTLs</a> for a complete list of parameters that can be set or queried. Most parameters can be set or changed at any time during a stream.</p>
<p>To encode a frame, <a class="el" href="../../dc/db7/group__opusencoder.html#ga74f1bb6adc8fef3adcfb502932e6021b">opus_encode()</a> or <a class="el" href="../../dc/db7/group__opusencoder.html#gabf17f3e2df1d4517b7e56e94ea5659bf">opus_encode_float()</a> must be called with exactly one frame (2.5, 5, 10, 20, 40 or 60 ms) of audio data: </p>
<div class="fragment"><pre class="fragment"> <a class="code" href="../../d9/d04/expat_8h.html#a5df20ff5bc70fb664abe3912796e90df">len</a> = <a class="code" href="../../dc/db7/group__opusencoder.html#ga74f1bb6adc8fef3adcfb502932e6021b">opus_encode</a>(enc, audio_frame, frame_size, packet, max_packet);
</pre></div><p>where </p>
<ul>
<li>
audio_frame is the audio data in opus_int16 (or float for <a class="el" href="../../dc/db7/group__opusencoder.html#gabf17f3e2df1d4517b7e56e94ea5659bf">opus_encode_float()</a>) </li>
<li>
frame_size is the duration of the frame in samples (per channel) </li>
<li>
packet is the byte array to which the compressed data is written </li>
<li>
max_packet is the maximum number of bytes that can be written in the packet (1276 bytes is recommended) </li>
</ul>
<p><a class="el" href="../../dc/db7/group__opusencoder.html#ga74f1bb6adc8fef3adcfb502932e6021b">opus_encode()</a> and opus_encode_frame() return the number of bytes actually written to the packet. The return value <b>can be negative</b>, which indicates that an error has occurred. If the return value is 1 byte, then the packet does not need to be transmitted (DTX).</p>
<p>Once the encoder state if no longer needed, it can be destroyed with</p>
<div class="fragment"><pre class="fragment"> <a class="code" href="../../dc/db7/group__opusencoder.html#ga899c69582a1cad2a168aedc99cab7be0">opus_encoder_destroy</a>(enc);
</pre></div><p>If the encoder was created with <a class="el" href="../../dc/db7/group__opusencoder.html#ga7a21a7395021b361b52c67e30066743d">opus_encoder_init()</a> rather than <a class="el" href="../../dc/db7/group__opusencoder.html#ga05a87a612c5f57c8efdee500fdb5e65b">opus_encoder_create()</a>, then no action is required aside from potentially freeing the memory that was manually allocated for it (calling <a class="el" href="../../d1/de4/mozalloc__macro__wrappers_8h.html#a3194dc214682024d727de5f9b358fb3d">free(enc)</a> for the example above) </p>
<hr/><h2>型定義</h2>
<a class="anchor" id="gaf461a3ef2f10c2fe8b994a176f06c9bd"></a><!-- doxytag: member="opus.h::OpusEncoder" ref="gaf461a3ef2f10c2fe8b994a176f06c9bd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../dc/db7/group__opusencoder.html#gaf461a3ef2f10c2fe8b994a176f06c9bd">OpusEncoder</a> <a class="el" href="../../dc/db7/group__opusencoder.html#gaf461a3ef2f10c2fe8b994a176f06c9bd">OpusEncoder</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Opus encoder state. This contains the complete state of an Opus encoder. It is position independent and can be freely copied. </p>
<dl class="see"><dt><b>参照:</b></dt><dd><a class="el" href="../../dc/db7/group__opusencoder.html#ga05a87a612c5f57c8efdee500fdb5e65b">opus_encoder_create</a>,<a class="el" href="../../dc/db7/group__opusencoder.html#ga7a21a7395021b361b52c67e30066743d">opus_encoder_init</a> </dd></dl>

<p> <a class="el" href="../../d0/d85/opus_8h_source.html">opus.h</a> の <a class="el" href="../../d0/d85/opus_8h_source.html#l00167">167</a> 行で定義されています。</p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="ga74f1bb6adc8fef3adcfb502932e6021b"></a><!-- doxytag: member="opus.h::opus_encode" ref="ga74f1bb6adc8fef3adcfb502932e6021b" args="(OpusEncoder *st, const opus_int16 *pcm, int frame_size, unsigned char *data, int max_data_bytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a> <a class="el" href="../../dc/db7/group__opusencoder.html#ga74f1bb6adc8fef3adcfb502932e6021b">opus_encode</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/db7/group__opusencoder.html#gaf461a3ef2f10c2fe8b994a176f06c9bd">OpusEncoder</a> *&#160;</td>
          <td class="paramname"><em>st</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d4/d94/opus__types_8h.html#acc9ed7cf60479eb81f9648c6ec27dc26">opus_int16</a> *&#160;</td>
          <td class="paramname"><em>pcm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a>&#160;</td>
          <td class="paramname"><em>frame_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a>&#160;</td>
          <td class="paramname"><em>max_data_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Encodes an Opus frame. The passed frame_size must an opus frame size for the encoder's sampling rate. For example, at 48kHz the permitted values are 120, 240, 480, or 960. Passing in a duration of less than 10ms (480 samples at 48kHz) will prevent the encoder from using the LPC or hybrid modes. </p>
<dl class="params"><dt><b>引数:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">st</td><td><code>OpusEncoder*</code>: Encoder state </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pcm</td><td><code>opus_int16*</code>: Input signal (interleaved if 2 channels). length is frame_size*channels*sizeof(opus_int16) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">frame_size</td><td><code>int</code>: Number of samples per frame of input signal </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td><code>char*</code>: Output payload (at least max_data_bytes long) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_data_bytes</td><td><code>int</code>: Allocated memory for payload; don't use for controlling bitrate </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>戻り値:</b></dt><dd>length of the data payload (in bytes) or <a class="el" href="../../de/d95/group__errorcodes.html">Error codes</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gabf17f3e2df1d4517b7e56e94ea5659bf"></a><!-- doxytag: member="opus.h::opus_encode_float" ref="gabf17f3e2df1d4517b7e56e94ea5659bf" args="(OpusEncoder *st, const float *pcm, int frame_size, unsigned char *data, int max_data_bytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a> <a class="el" href="../../dc/db7/group__opusencoder.html#gabf17f3e2df1d4517b7e56e94ea5659bf">opus_encode_float</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/db7/group__opusencoder.html#gaf461a3ef2f10c2fe8b994a176f06c9bd">OpusEncoder</a> *&#160;</td>
          <td class="paramname"><em>st</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a41c4c29f6d7869f7621f2549cecccbf0">float</a> *&#160;</td>
          <td class="paramname"><em>pcm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a>&#160;</td>
          <td class="paramname"><em>frame_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a>&#160;</td>
          <td class="paramname"><em>max_data_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Encodes an Opus frame from floating point input. The passed frame_size must an opus frame size for the encoder's sampling rate. For example, at 48kHz the permitted values are 120, 240, 480, or 960. Passing in a duration of less than 10ms (480 samples at 48kHz) will prevent the encoder from using the LPC or hybrid modes. </p>
<dl class="params"><dt><b>引数:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">st</td><td><code>OpusEncoder*</code>: Encoder state </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pcm</td><td><code>float*</code>: Input signal (interleaved if 2 channels). length is frame_size*channels*sizeof(float) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">frame_size</td><td><code>int</code>: Number of samples per frame of input signal </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td><code>char*</code>: Output payload (at least max_data_bytes long) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_data_bytes</td><td><code>int</code>: Allocated memory for payload; don't use for controlling bitrate </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>戻り値:</b></dt><dd>length of the data payload (in bytes) or <a class="el" href="../../de/d95/group__errorcodes.html">Error codes</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga05a87a612c5f57c8efdee500fdb5e65b"></a><!-- doxytag: member="opus.h::opus_encoder_create" ref="ga05a87a612c5f57c8efdee500fdb5e65b" args="(opus_int32 Fs, int channels, int application, int *error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT <a class="el" href="../../dc/db7/group__opusencoder.html#gaf461a3ef2f10c2fe8b994a176f06c9bd">OpusEncoder</a>* <a class="el" href="../../dc/db7/group__opusencoder.html#ga05a87a612c5f57c8efdee500fdb5e65b">opus_encoder_create</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/d94/opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a>&#160;</td>
          <td class="paramname"><em>Fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a>&#160;</td>
          <td class="paramname"><em>channels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a>&#160;</td>
          <td class="paramname"><em>application</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a> *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Allocates and initializes an encoder state. There are three coding modes:</p>
<p><a class="el" href="../../da/d11/group__ctlvalues.html#ga07884aa018303a419d1f7acb2f3fa669">OPUS_APPLICATION_VOIP</a> gives best quality at a given bitrate for voice signals. It enhances the input signal by high-pass filtering and emphasizing formants and harmonics. Optionally it includes in-band forward error correction to protect against packet loss. Use this mode for typical VoIP applications. Because of the enhancement, even at high bitrates the output may sound different from the input.</p>
<p><a class="el" href="../../da/d11/group__ctlvalues.html#ga5909f7cb35c04f1110026c6889edd345">OPUS_APPLICATION_AUDIO</a> gives best quality at a given bitrate for most non-voice signals like music. Use this mode for music and mixed (music/voice) content, broadcast, and applications requiring less than 15 ms of coding delay.</p>
<p><a class="el" href="../../da/d11/group__ctlvalues.html#ga592232fb39db60c1369989c5c5d19a07">OPUS_APPLICATION_RESTRICTED_LOWDELAY</a> configures low-delay mode that disables the speech-optimized mode in exchange for slightly reduced delay.</p>
<p>This is useful when the caller knows that the speech-optimized modes will not be needed (use with caution). </p>
<dl class="params"><dt><b>引数:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">Fs</td><td><code>opus_int32</code>: Sampling rate of input signal (Hz) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">channels</td><td><code>int</code>: Number of channels (1/2) in input signal </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">application</td><td><code>int</code>: Coding mode (<a class="el" href="../../da/d11/group__ctlvalues.html#ga07884aa018303a419d1f7acb2f3fa669">OPUS_APPLICATION_VOIP</a>/<a class="el" href="../../da/d11/group__ctlvalues.html#ga5909f7cb35c04f1110026c6889edd345">OPUS_APPLICATION_AUDIO</a>/<a class="el" href="../../da/d11/group__ctlvalues.html#ga592232fb39db60c1369989c5c5d19a07">OPUS_APPLICATION_RESTRICTED_LOWDELAY</a>) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">error</td><td><code>int*</code>: <a class="el" href="../../de/d95/group__errorcodes.html">Error codes</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>覚え書き:</b></dt><dd>Regardless of the sampling rate and number channels selected, the Opus encoder can switch to a lower audio audio bandwidth or number of channels if the bitrate selected is too low. This also means that it is safe to always use 48 kHz stereo input and let the encoder optimize the encoding. </dd></dl>

</div>
</div>
<a class="anchor" id="gab85837d82b4b4f654c7ad87743c0b7c2"></a><!-- doxytag: member="opus.h::opus_encoder_ctl" ref="gab85837d82b4b4f654c7ad87743c0b7c2" args="(OpusEncoder *st, int request,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a> <a class="el" href="../../dc/db7/group__opusencoder.html#gab85837d82b4b4f654c7ad87743c0b7c2">opus_encoder_ctl</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/db7/group__opusencoder.html#gaf461a3ef2f10c2fe8b994a176f06c9bd">OpusEncoder</a> *&#160;</td>
          <td class="paramname"><em>st</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a>&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Perform a CTL function on an Opus encoder.</p>
<p>Generally the request and subsequent arguments are generated by a convenience macro. </p>
<dl class="see"><dt><b>参照:</b></dt><dd><a class="el" href="../../df/d4b/group__encoderctls.html">Encoder related CTLs</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga899c69582a1cad2a168aedc99cab7be0"></a><!-- doxytag: member="opus.h::opus_encoder_destroy" ref="ga899c69582a1cad2a168aedc99cab7be0" args="(OpusEncoder *st)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT <a class="el" href="../../dc/d2c/prtpool_8h.html#a7797d332996f57719d6d316bee73873d">void</a> <a class="el" href="../../dc/db7/group__opusencoder.html#ga899c69582a1cad2a168aedc99cab7be0">opus_encoder_destroy</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/db7/group__opusencoder.html#gaf461a3ef2f10c2fe8b994a176f06c9bd">OpusEncoder</a> *&#160;</td>
          <td class="paramname"><em>st</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Frees an OpusEncoder allocated by opus_encoder_create. </p>
<dl class="params"><dt><b>引数:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">st</td><td><code>OpusEncoder*</code>: State to be freed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gac326a1958cec519aa6485a2d65c43ab2"></a><!-- doxytag: member="opus.h::opus_encoder_get_size" ref="gac326a1958cec519aa6485a2d65c43ab2" args="(int channels)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a> <a class="el" href="../../dc/db7/group__opusencoder.html#gac326a1958cec519aa6485a2d65c43ab2">opus_encoder_get_size</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a>&#160;</td>
          <td class="paramname"><em>channels</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga7a21a7395021b361b52c67e30066743d"></a><!-- doxytag: member="opus.h::opus_encoder_init" ref="ga7a21a7395021b361b52c67e30066743d" args="(OpusEncoder *st, opus_int32 Fs, int channels, int application)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OPUS_EXPORT <a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a> <a class="el" href="../../dc/db7/group__opusencoder.html#ga7a21a7395021b361b52c67e30066743d">opus_encoder_init</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/db7/group__opusencoder.html#gaf461a3ef2f10c2fe8b994a176f06c9bd">OpusEncoder</a> *&#160;</td>
          <td class="paramname"><em>st</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d94/opus__types_8h.html#aa4d309d6f80b99dbabebc8f98879ab9a">opus_int32</a>&#160;</td>
          <td class="paramname"><em>Fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a>&#160;</td>
          <td class="paramname"><em>channels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d04/expat_8h.html#a14bb8924daea0b48c7803f281f66e390">int</a>&#160;</td>
          <td class="paramname"><em>application</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes a previously allocated encoder state The memory pointed to by st must be the size returned by opus_encoder_get_size. This is intended for applications which use their own allocator instead of malloc. </p>
<dl class="see"><dt><b>参照:</b></dt><dd><a class="el" href="../../dc/db7/group__opusencoder.html#ga05a87a612c5f57c8efdee500fdb5e65b">opus_encoder_create()</a>,<a class="el" href="../../dc/db7/group__opusencoder.html#gac326a1958cec519aa6485a2d65c43ab2">opus_encoder_get_size()</a> To <a class="el" href="../../df/d12/latin__test_8js.html#aa01b7cbc60d07525859f73a229026697">reset</a> <a class="el" href="../../d5/de7/jquery_8js.html#aa4d4888597588a84fd5b1184d00c91f3">a</a> previously initialized <a class="el" href="../../d2/df8/prthread_8h.html#a22ec211475b54a8de0468990ea9654da">state</a> <a class="el" href="../../d7/d1b/test-agent-server_8js.html#aab71dcc804ca4aa3ed2bf7ba887635db">use</a> the <a class="el" href="../../dc/d26/group__genericctls.html#gadc74e4fa8bcdf9994187d52d92207337">OPUS_RESET_STATE</a> CTL. </dd></dl>
<dl class="params"><dt><b>引数:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">st</td><td><code>OpusEncoder*</code>: Encoder state </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Fs</td><td><code>opus_int32</code>: Sampling rate of input signal (Hz) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">channels</td><td><code>int</code>: Number of channels (1/2) in input signal </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">application</td><td><code>int</code>: Coding mode (OPUS_APPLICATION_VOIP/OPUS_APPLICATION_AUDIO/OPUS_APPLICATION_RESTRICTED_LOWDELAY) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt><b>戻り値:</b></dt><dd>
  <table class="retval">
    <tr><td class="paramname">OPUS_OK</td><td>Success or <a class="el" href="../../de/d95/group__errorcodes.html">Error codes</a> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全て</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>データ構造</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>ネームスペース</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>ファイル</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>関数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>変数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>型定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>列挙型</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>列挙型の値</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>フレンド</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>マクロ定義</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer">FxOS Code Readingに対してSat Oct 19 2013 00:58:14に生成されました。
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
