<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>FxOS Code Reading: page.js ソースファイル</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">FxOS Code Reading
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- 作成： Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'検索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>メインページ</span></a></li>
      <li><a href="../../pages.html"><span>関連ページ</span></a></li>
      <li><a href="../../modules.html"><span>モジュール</span></a></li>
      <li><a href="../../namespaces.html"><span>パッケージ</span></a></li>
      <li><a href="../../annotated.html"><span>データ構造</span></a></li>
      <li class="current"><a href="../../files.html"><span>ファイル</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>ファイル一覧</span></a></li>
      <li><a href="../../globals.html"><span>グローバル</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('d2/d5b/calendar_2js_2ext_2page_8js.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">page.js</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d2/d5b/calendar_2js_2ext_2page_8js.html">説明を見る。</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">(The MIT License)</span>
<a name="l00003"></a>00003 <span class="comment"></span>
<a name="l00004"></a>00004 <span class="comment">Copyright (c) 2012 TJ Holowaychuk &lt;tj@vision-media.ca&gt;</span>
<a name="l00005"></a>00005 <span class="comment"></span>
<a name="l00006"></a>00006 <span class="comment">Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &#39;Software&#39;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</span>
<a name="l00007"></a>00007 <span class="comment"></span>
<a name="l00008"></a>00008 <span class="comment">The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</span>
<a name="l00009"></a>00009 <span class="comment"></span>
<a name="l00010"></a>00010 <span class="comment">THE SOFTWARE IS PROVIDED &#39;AS IS&#39;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span>
<a name="l00011"></a>00011 <span class="comment">*/</span>
<a name="l00012"></a>00012 ;(<span class="keyword">function</span>(){
<a name="l00013"></a>00013 
<a name="l00018"></a>00018   var dispatch = <span class="keyword">true</span>;
<a name="l00019"></a>00019 
<a name="l00024"></a>00024   var <a class="code" href="../../d9/d04/expat_8h.html#a938e186c531ea86ae9adf3c0a649d8fc">base</a> = <span class="stringliteral">&#39;&#39;</span>;
<a name="l00025"></a>00025 
<a name="l00030"></a>00030   var <a class="code" href="../../db/df4/geoloc_8js.html#a08a95dece9b7b422eeaa5f226581e51e">running</a>;
<a name="l00031"></a>00031 
<a name="l00046"></a>00046   <span class="keyword">function</span> <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>(<a class="code" href="../../db/d6d/mkdirp_8js.html#aa72e0c8a20e6bcc571d3a1c51846e627">path</a>, fn) {
<a name="l00047"></a>00047     <span class="comment">// route &lt;path&gt; to &lt;callback ...&gt;</span>
<a name="l00048"></a>00048     <span class="keywordflow">if</span> (<span class="stringliteral">&#39;function&#39;</span> == <a class="code" href="../../d1/d22/ical_8js.html#a6053319846c80bf9561a1958bb817380">typeof</a> fn) {
<a name="l00049"></a>00049       var route = <span class="keyword">new</span> Route(<a class="code" href="../../db/d6d/mkdirp_8js.html#aa72e0c8a20e6bcc571d3a1c51846e627">path</a>);
<a name="l00050"></a>00050       <span class="keywordflow">for</span> (var <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a> = 1; <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a> &lt; arguments.length; ++<a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>) {
<a name="l00051"></a>00051         <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>.callbacks.push(route.middleware(arguments[<a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>]));
<a name="l00052"></a>00052       }
<a name="l00053"></a>00053     <span class="comment">// show &lt;path&gt; with [state]</span>
<a name="l00054"></a>00054     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="stringliteral">&#39;string&#39;</span> == <a class="code" href="../../d1/d22/ical_8js.html#a6053319846c80bf9561a1958bb817380">typeof</a> <a class="code" href="../../db/d6d/mkdirp_8js.html#aa72e0c8a20e6bcc571d3a1c51846e627">path</a>) {
<a name="l00055"></a>00055       <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>.show(path, fn);
<a name="l00056"></a>00056     <span class="comment">// start [options]</span>
<a name="l00057"></a>00057     } <span class="keywordflow">else</span> {
<a name="l00058"></a>00058       <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>.start(path);
<a name="l00059"></a>00059     }
<a name="l00060"></a>00060   }
<a name="l00061"></a>00061 
<a name="l00066"></a>00066   <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>.callbacks = [];
<a name="l00067"></a>00067 
<a name="l00075"></a>00075   <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>.base = <span class="keyword">function</span>(<a class="code" href="../../db/d6d/mkdirp_8js.html#aa72e0c8a20e6bcc571d3a1c51846e627">path</a>){
<a name="l00076"></a>00076     <span class="keywordflow">if</span> (0 == arguments.length) <span class="keywordflow">return</span> <a class="code" href="../../d9/d04/expat_8h.html#a938e186c531ea86ae9adf3c0a649d8fc">base</a>;
<a name="l00077"></a>00077     base = <a class="code" href="../../db/d6d/mkdirp_8js.html#aa72e0c8a20e6bcc571d3a1c51846e627">path</a>;
<a name="l00078"></a>00078   };
<a name="l00079"></a>00079 
<a name="l00093"></a>00093   <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>.start = <span class="keyword">function</span>(<a class="code" href="../../d6/d46/system_2js_2icc_8js.html#a77e4041f4236c111378c64001ea99114">options</a>){
<a name="l00094"></a>00094     <a class="code" href="../../d6/d46/system_2js_2icc_8js.html#a77e4041f4236c111378c64001ea99114">options</a> = <a class="code" href="../../d6/d46/system_2js_2icc_8js.html#a77e4041f4236c111378c64001ea99114">options</a> || {};
<a name="l00095"></a>00095     <span class="keywordflow">if</span> (running) <span class="keywordflow">return</span>;
<a name="l00096"></a>00096     running = <span class="keyword">true</span>;
<a name="l00097"></a>00097     <span class="keywordflow">if</span> (<span class="keyword">false</span> === <a class="code" href="../../d6/d46/system_2js_2icc_8js.html#a77e4041f4236c111378c64001ea99114">options</a>.dispatch) dispatch = <span class="keyword">false</span>;
<a name="l00098"></a>00098     <span class="keywordflow">if</span> (<span class="keyword">false</span> !== <a class="code" href="../../d6/d46/system_2js_2icc_8js.html#a77e4041f4236c111378c64001ea99114">options</a>.popstate) <a class="code" href="../../d8/d0d/transfer_8js.html#abd169909fbdd66534e2d19bf20938d8b">addEventListener</a>(<span class="stringliteral">&#39;popstate&#39;</span>, onpopstate, <span class="keyword">false</span>);
<a name="l00099"></a>00099     <span class="keywordflow">if</span> (<span class="keyword">false</span> !== <a class="code" href="../../d6/d46/system_2js_2icc_8js.html#a77e4041f4236c111378c64001ea99114">options</a>.click) <a class="code" href="../../d8/d0d/transfer_8js.html#abd169909fbdd66534e2d19bf20938d8b">addEventListener</a>(<span class="stringliteral">&#39;click&#39;</span>, <a class="code" href="../../d8/df0/frames_8js.html#a2581b031a10db324ce49c6a804c5f20a">onclick</a>, <span class="keyword">false</span>);
<a name="l00100"></a>00100     <span class="keywordflow">if</span> (!dispatch) <span class="keywordflow">return</span>;
<a name="l00101"></a>00101     <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>.replace(<a class="code" href="../../d1/d03/locales_2_r_e_a_d_m_e_8md.html#a009e1b25f7059061a6508b10c9435823">location</a>.pathname + <a class="code" href="../../d1/d03/locales_2_r_e_a_d_m_e_8md.html#a009e1b25f7059061a6508b10c9435823">location</a>.search, <a class="code" href="../../d1/d04/app__install__manager_8js.html#a66d98f9009f0502b9a5ce70e907f8f27">null</a>, <span class="keyword">true</span>, dispatch);
<a name="l00102"></a>00102   };
<a name="l00103"></a>00103 
<a name="l00110"></a>00110   <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>.stop = <span class="keyword">function</span>(){
<a name="l00111"></a>00111     running = <span class="keyword">false</span>;
<a name="l00112"></a>00112     <a class="code" href="../../df/d44/permission__manager_8js.html#acf9987ef04ab3791e7ff8b28d748ebcc">removeEventListener</a>(<span class="stringliteral">&#39;click&#39;</span>, <a class="code" href="../../d8/df0/frames_8js.html#a2581b031a10db324ce49c6a804c5f20a">onclick</a>, <span class="keyword">false</span>);
<a name="l00113"></a>00113     <a class="code" href="../../df/d44/permission__manager_8js.html#acf9987ef04ab3791e7ff8b28d748ebcc">removeEventListener</a>(<span class="stringliteral">&#39;popstate&#39;</span>, onpopstate, <span class="keyword">false</span>);
<a name="l00114"></a>00114   };
<a name="l00115"></a>00115 
<a name="l00125"></a>00125   <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>.show = <span class="keyword">function</span>(<a class="code" href="../../db/d6d/mkdirp_8js.html#aa72e0c8a20e6bcc571d3a1c51846e627">path</a>, <a class="code" href="../../d2/d7d/jsapi_8h.html#afa45f986123242ddd418c959eb87e242">state</a>){
<a name="l00126"></a>00126     var ctx = <span class="keyword">new</span> Context(path, <a class="code" href="../../d2/d7d/jsapi_8h.html#afa45f986123242ddd418c959eb87e242">state</a>);
<a name="l00127"></a>00127     <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>.dispatch(ctx);
<a name="l00128"></a>00128     <span class="keywordflow">if</span> (!ctx.unhandled) ctx.pushState();
<a name="l00129"></a>00129     <span class="keywordflow">return</span> ctx;
<a name="l00130"></a>00130   };
<a name="l00131"></a>00131 
<a name="l00141"></a>00141   <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>.replace = <span class="keyword">function</span>(<a class="code" href="../../db/d6d/mkdirp_8js.html#aa72e0c8a20e6bcc571d3a1c51846e627">path</a>, <a class="code" href="../../d2/d7d/jsapi_8h.html#afa45f986123242ddd418c959eb87e242">state</a>, <a class="code" href="../../db/dc0/mock__fb_8js.html#ae9b28e7b58edd8f38cd717eed7b3deb4">init</a>, dispatch){
<a name="l00142"></a>00142     var ctx = <span class="keyword">new</span> Context(path, state);
<a name="l00143"></a>00143     ctx.init = <a class="code" href="../../db/dc0/mock__fb_8js.html#ae9b28e7b58edd8f38cd717eed7b3deb4">init</a>;
<a name="l00144"></a>00144     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d04/app__install__manager_8js.html#a66d98f9009f0502b9a5ce70e907f8f27">null</a> == dispatch) dispatch = <span class="keyword">true</span>;
<a name="l00145"></a>00145     <span class="keywordflow">if</span> (dispatch) <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>.dispatch(ctx);
<a name="l00146"></a>00146     ctx.save();
<a name="l00147"></a>00147     <span class="keywordflow">return</span> ctx;
<a name="l00148"></a>00148   };
<a name="l00149"></a>00149 
<a name="l00157"></a>00157   <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>.dispatch = <span class="keyword">function</span>(ctx){
<a name="l00158"></a>00158     var <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a> = 0;
<a name="l00159"></a>00159 
<a name="l00160"></a>00160     <span class="keyword">function</span> next() {
<a name="l00161"></a>00161       var fn = <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>.callbacks[i++];
<a name="l00162"></a>00162       <span class="keywordflow">if</span> (!fn) <span class="keywordflow">return</span> unhandled(ctx);
<a name="l00163"></a>00163       fn(ctx, next);
<a name="l00164"></a>00164     }
<a name="l00165"></a>00165 
<a name="l00166"></a>00166     next();
<a name="l00167"></a>00167   };
<a name="l00168"></a>00168 
<a name="l00178"></a>00178   <span class="keyword">function</span> unhandled(ctx) {
<a name="l00179"></a>00179     <span class="keywordflow">if</span> (<a class="code" href="../../dd/d64/apps_2email_2js_2ext_2mailapi_2worker-bootstrap_8js.html#a1f5517920aaab1f97bda91f10438fb05">window</a>.location.pathname == ctx.canonicalPath) <span class="keywordflow">return</span>;
<a name="l00180"></a>00180     <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>.stop();
<a name="l00181"></a>00181     ctx.unhandled = <span class="keyword">true</span>;
<a name="l00182"></a>00182     <a class="code" href="../../dd/d64/apps_2email_2js_2ext_2mailapi_2worker-bootstrap_8js.html#a1f5517920aaab1f97bda91f10438fb05">window</a>.location = ctx.canonicalPath;
<a name="l00183"></a>00183   }
<a name="l00184"></a>00184 
<a name="l00194"></a>00194   <span class="keyword">function</span> Context(path, state) {
<a name="l00195"></a>00195     <span class="keywordflow">if</span> (<span class="charliteral">&#39;/&#39;</span> == path[0] &amp;&amp; 0 != path.indexOf(base)) path = base + path;
<a name="l00196"></a>00196     var i = path.indexOf(<span class="charliteral">&#39;?&#39;</span>);
<a name="l00197"></a>00197     this.canonicalPath = <a class="code" href="../../db/d6d/mkdirp_8js.html#aa72e0c8a20e6bcc571d3a1c51846e627">path</a>;
<a name="l00198"></a>00198     this.path = path.replace(base, <span class="stringliteral">&#39;&#39;</span>) || <span class="charliteral">&#39;/&#39;</span>;
<a name="l00199"></a>00199     this.<a class="code" href="../../d1/d04/app__install__manager_8js.html#aa5a506cf1e53b91549e35a5d3bc3dc06">title</a> = <a class="code" href="../../dd/d64/apps_2email_2js_2ext_2mailapi_2worker-bootstrap_8js.html#af61dbe660d8213297c7fed5b5c99d223">document</a>.title;
<a name="l00200"></a>00200     this.state = state || {};
<a name="l00201"></a>00201     this.state.path = <a class="code" href="../../db/d6d/mkdirp_8js.html#aa72e0c8a20e6bcc571d3a1c51846e627">path</a>;
<a name="l00202"></a>00202     this.querystring = ~i ? path.slice(i + 1) : <span class="stringliteral">&#39;&#39;</span>;
<a name="l00203"></a>00203     this.pathname = ~i ? path.slice(0, i) : <a class="code" href="../../db/d6d/mkdirp_8js.html#aa72e0c8a20e6bcc571d3a1c51846e627">path</a>;
<a name="l00204"></a>00204     this.<a class="code" href="../../d6/d54/parameters_8js.html#a4ad646d0ee2fc69a53b50783ca7465dc">params</a> = [];
<a name="l00205"></a>00205   }
<a name="l00206"></a>00206 
<a name="l00213"></a>00213   Context.prototype.pushState = <span class="keyword">function</span>(){
<a name="l00214"></a>00214     history.pushState(this.state, this.<a class="code" href="../../d1/d04/app__install__manager_8js.html#aa5a506cf1e53b91549e35a5d3bc3dc06">title</a>, this.canonicalPath);
<a name="l00215"></a>00215   };
<a name="l00216"></a>00216 
<a name="l00223"></a>00223   Context.prototype.save = <span class="keyword">function</span>(){
<a name="l00224"></a>00224     history.replaceState(this.state, this.<a class="code" href="../../d1/d04/app__install__manager_8js.html#aa5a506cf1e53b91549e35a5d3bc3dc06">title</a>, this.canonicalPath);
<a name="l00225"></a>00225   };
<a name="l00226"></a>00226 
<a name="l00241"></a>00241   <span class="keyword">function</span> Route(path, <a class="code" href="../../d6/d46/system_2js_2icc_8js.html#a77e4041f4236c111378c64001ea99114">options</a>) {
<a name="l00242"></a>00242     <a class="code" href="../../d6/d46/system_2js_2icc_8js.html#a77e4041f4236c111378c64001ea99114">options</a> = <a class="code" href="../../d6/d46/system_2js_2icc_8js.html#a77e4041f4236c111378c64001ea99114">options</a> || {};
<a name="l00243"></a>00243     this.path = <a class="code" href="../../db/d6d/mkdirp_8js.html#aa72e0c8a20e6bcc571d3a1c51846e627">path</a>;
<a name="l00244"></a>00244     this.method = <span class="stringliteral">&#39;GET&#39;</span>;
<a name="l00245"></a>00245     this.regexp = pathtoRegexp(path
<a name="l00246"></a>00246       , this.<a class="code" href="../../dc/d33/namespaceread_j_s_o_n.html#a5b3073959c18dcb060a912824297e59d">keys</a> = []
<a name="l00247"></a>00247       , <a class="code" href="../../d6/d46/system_2js_2icc_8js.html#a77e4041f4236c111378c64001ea99114">options</a>.sensitive
<a name="l00248"></a>00248       , <a class="code" href="../../d6/d46/system_2js_2icc_8js.html#a77e4041f4236c111378c64001ea99114">options</a>.strict);
<a name="l00249"></a>00249   }
<a name="l00250"></a>00250 
<a name="l00260"></a>00260   Route.prototype.middleware = <span class="keyword">function</span>(fn){
<a name="l00261"></a>00261     var <span class="keyword">self</span> = <span class="keyword">this</span>;
<a name="l00262"></a>00262     <span class="keywordflow">return</span> <span class="keyword">function</span>(ctx, next){
<a name="l00263"></a>00263       <span class="keywordflow">if</span> (<span class="keyword">self</span>.<a class="code" href="../../d2/d7d/jsapi_8h.html#a99e36b20cb6cf83fe7c1f4bff6902ab6">match</a>(ctx.path, ctx.params)) <span class="keywordflow">return</span> fn(ctx, next);
<a name="l00264"></a>00264       next();
<a name="l00265"></a>00265     }
<a name="l00266"></a>00266   };
<a name="l00267"></a>00267 
<a name="l00278"></a>00278   Route.prototype.match = <span class="keyword">function</span>(<a class="code" href="../../db/d6d/mkdirp_8js.html#aa72e0c8a20e6bcc571d3a1c51846e627">path</a>, <a class="code" href="../../d6/d54/parameters_8js.html#a4ad646d0ee2fc69a53b50783ca7465dc">params</a>){
<a name="l00279"></a>00279     var <a class="code" href="../../dc/d33/namespaceread_j_s_o_n.html#a5b3073959c18dcb060a912824297e59d">keys</a> = this.<a class="code" href="../../dc/d33/namespaceread_j_s_o_n.html#a5b3073959c18dcb060a912824297e59d">keys</a>
<a name="l00280"></a>00280       , qsIndex = path.indexOf(<span class="charliteral">&#39;?&#39;</span>)
<a name="l00281"></a>00281       , pathname = ~qsIndex ? path.slice(0, qsIndex) : <a class="code" href="../../db/d6d/mkdirp_8js.html#aa72e0c8a20e6bcc571d3a1c51846e627">path</a>
<a name="l00282"></a>00282       , m = this.regexp.exec(pathname);
<a name="l00283"></a>00283   
<a name="l00284"></a>00284     <span class="keywordflow">if</span> (!m) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00285"></a>00285 
<a name="l00286"></a>00286     <span class="keywordflow">for</span> (var i = 1, <a class="code" href="../../d9/d04/expat_8h.html#a5df20ff5bc70fb664abe3912796e90df">len</a> = m.length; i &lt; <a class="code" href="../../d9/d04/expat_8h.html#a5df20ff5bc70fb664abe3912796e90df">len</a>; ++i) {
<a name="l00287"></a>00287       var <a class="code" href="../../d2/d7d/jsapi_8h.html#a02d8cbd1392e102198d5bb521715f608">key</a> = keys[i - 1];
<a name="l00288"></a>00288 
<a name="l00289"></a>00289       var <a class="code" href="../../d7/d27/jpeglib_8h.html#abde23394a8cafaa525be2efd5c6d4b2e">val</a> = <span class="stringliteral">&#39;string&#39;</span> == <a class="code" href="../../d1/d22/ical_8js.html#a6053319846c80bf9561a1958bb817380">typeof</a> m[<a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>]
<a name="l00290"></a>00290         ? decodeURIComponent(m[i])
<a name="l00291"></a>00291         : m[i];
<a name="l00292"></a>00292 
<a name="l00293"></a>00293       <span class="keywordflow">if</span> (key) {
<a name="l00294"></a>00294         <a class="code" href="../../d6/d54/parameters_8js.html#a4ad646d0ee2fc69a53b50783ca7465dc">params</a>[key.name] = undefined !== <a class="code" href="../../d6/d54/parameters_8js.html#a4ad646d0ee2fc69a53b50783ca7465dc">params</a>[key.name]
<a name="l00295"></a>00295           ? <a class="code" href="../../d6/d54/parameters_8js.html#a4ad646d0ee2fc69a53b50783ca7465dc">params</a>[key.name]
<a name="l00296"></a>00296           : <a class="code" href="../../d7/d27/jpeglib_8h.html#abde23394a8cafaa525be2efd5c6d4b2e">val</a>;
<a name="l00297"></a>00297       } <span class="keywordflow">else</span> {
<a name="l00298"></a>00298         <a class="code" href="../../d6/d54/parameters_8js.html#a4ad646d0ee2fc69a53b50783ca7465dc">params</a>.push(val);
<a name="l00299"></a>00299       }
<a name="l00300"></a>00300     }
<a name="l00301"></a>00301 
<a name="l00302"></a>00302     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00303"></a>00303   };
<a name="l00304"></a>00304 
<a name="l00322"></a>00322   <span class="keyword">function</span> pathtoRegexp(path, keys, sensitive, <a class="code" href="../../dc/d42/device_list_8js.html#ae2475e10618961c050dcba04e8c42331">strict</a>) {
<a name="l00323"></a>00323     <span class="keywordflow">if</span> (path instanceof RegExp) <span class="keywordflow">return</span> <a class="code" href="../../db/d6d/mkdirp_8js.html#aa72e0c8a20e6bcc571d3a1c51846e627">path</a>;
<a name="l00324"></a>00324     <span class="keywordflow">if</span> (path instanceof Array) path = <span class="charliteral">&#39;(&#39;</span> + path.join(<span class="charliteral">&#39;|&#39;</span>) + <span class="charliteral">&#39;)&#39;</span>;
<a name="l00325"></a>00325     path = path
<a name="l00326"></a>00326       .concat(<a class="code" href="../../dc/d42/device_list_8js.html#ae2475e10618961c050dcba04e8c42331">strict</a> ? <span class="stringliteral">&#39;&#39;</span> : <span class="stringliteral">&#39;/?&#39;</span>)
<a name="l00327"></a>00327       .replace(/\/\(/<a class="code" href="../../d8/dad/apps_2email_2js_2ext_2mailapi_2chewlayer_8js.html#a73c18c59a39b18382081ec00bb456d43">g</a>, <span class="stringliteral">&#39;(?:/&#39;</span>)
<a name="l00328"></a>00328       .<a class="code" href="../../dc/d89/wappush_2js_2message_8js.html#a7c5f9536f6c7849a4a7a592bfedf18f1">replace</a>(/\+/<a class="code" href="../../d8/dad/apps_2email_2js_2ext_2mailapi_2chewlayer_8js.html#a73c18c59a39b18382081ec00bb456d43">g</a>, <span class="stringliteral">&#39;__plus__&#39;</span>)
<a name="l00329"></a>00329       .<a class="code" href="../../dc/d89/wappush_2js_2message_8js.html#a7c5f9536f6c7849a4a7a592bfedf18f1">replace</a>(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/<a class="code" href="../../d8/dad/apps_2email_2js_2ext_2mailapi_2chewlayer_8js.html#a73c18c59a39b18382081ec00bb456d43">g</a>, <span class="keyword">function</span>(<a class="code" href="../../d6/d52/js_2browser_8js.html#a6e69a5af94d7d53886e51f89fb3bd6b4">_</a>, slash, <a class="code" href="../../d5/dca/reply__imap__email__test_8js.html#a63214d8f1727e71292b73e09dc39644f">format</a>, key, capture, optional){
<a name="l00330"></a>00330         keys.push({ <a class="code" href="../../d9/d04/expat_8h.html#a4a7cccd86625791f7f2ce3fb477aa9c1">name</a>: <a class="code" href="../../d2/d7d/jsapi_8h.html#a02d8cbd1392e102198d5bb521715f608">key</a>, optional: !! optional });
<a name="l00331"></a>00331         slash = slash || <span class="stringliteral">&#39;&#39;</span>;
<a name="l00332"></a>00332         <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>
<a name="l00333"></a>00333           + (optional ? <span class="stringliteral">&#39;&#39;</span> : slash)
<a name="l00334"></a>00334           + <span class="stringliteral">&#39;(?:&#39;</span>
<a name="l00335"></a>00335           + (optional ? slash : <span class="stringliteral">&#39;&#39;</span>)
<a name="l00336"></a>00336           + (<a class="code" href="../../d5/dca/reply__imap__email__test_8js.html#a63214d8f1727e71292b73e09dc39644f">format</a> || <span class="stringliteral">&#39;&#39;</span>) + (capture || (<a class="code" href="../../d5/dca/reply__imap__email__test_8js.html#a63214d8f1727e71292b73e09dc39644f">format</a> &amp;&amp; <span class="stringliteral">&#39;([^/.]+?)&#39;</span> || <span class="stringliteral">&#39;([^/]+?)&#39;</span>)) + <span class="charliteral">&#39;)&#39;</span>
<a name="l00337"></a>00337           + (optional || <span class="stringliteral">&#39;&#39;</span>);
<a name="l00338"></a>00338       })
<a name="l00339"></a>00339       .<a class="code" href="../../dc/d89/wappush_2js_2message_8js.html#a7c5f9536f6c7849a4a7a592bfedf18f1">replace</a>(/([\/.])/<a class="code" href="../../d8/dad/apps_2email_2js_2ext_2mailapi_2chewlayer_8js.html#a73c18c59a39b18382081ec00bb456d43">g</a>, <span class="stringliteral">&#39;\\$1&#39;</span>)
<a name="l00340"></a>00340       .<a class="code" href="../../dc/d89/wappush_2js_2message_8js.html#a7c5f9536f6c7849a4a7a592bfedf18f1">replace</a>(/__plus__/<a class="code" href="../../d8/dad/apps_2email_2js_2ext_2mailapi_2chewlayer_8js.html#a73c18c59a39b18382081ec00bb456d43">g</a>, <span class="stringliteral">&#39;(.+)&#39;</span>)
<a name="l00341"></a>00341       .replace(/\*/<a class="code" href="../../d8/dad/apps_2email_2js_2ext_2mailapi_2chewlayer_8js.html#a73c18c59a39b18382081ec00bb456d43">g</a>, <span class="stringliteral">&#39;(.*)&#39;</span>);
<a name="l00342"></a>00342     <span class="keywordflow">return</span> <span class="keyword">new</span> RegExp(<span class="charliteral">&#39;^&#39;</span> + path + <span class="charliteral">&#39;$&#39;</span>, sensitive ? <span class="stringliteral">&#39;&#39;</span> : <span class="charliteral">&#39;i&#39;</span>);
<a name="l00343"></a>00343   };
<a name="l00344"></a>00344 
<a name="l00349"></a>00349   <span class="keyword">function</span> onpopstate(<a class="code" href="../../d1/d04/app__install__manager_8js.html#ab5902775854a8b8440bcd25e0fe1c120">e</a>) {
<a name="l00350"></a>00350     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d04/app__install__manager_8js.html#ab5902775854a8b8440bcd25e0fe1c120">e</a>.state) {
<a name="l00351"></a>00351       var path = <a class="code" href="../../d1/d04/app__install__manager_8js.html#ab5902775854a8b8440bcd25e0fe1c120">e</a>.state.path;
<a name="l00352"></a>00352       <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>.replace(path, <a class="code" href="../../d1/d04/app__install__manager_8js.html#ab5902775854a8b8440bcd25e0fe1c120">e</a>.state);
<a name="l00353"></a>00353     }
<a name="l00354"></a>00354   }
<a name="l00355"></a>00355 
<a name="l00360"></a>00360   <span class="keyword">function</span> <a class="code" href="../../d8/df0/frames_8js.html#a2581b031a10db324ce49c6a804c5f20a">onclick</a>(<a class="code" href="../../d1/d04/app__install__manager_8js.html#ab5902775854a8b8440bcd25e0fe1c120">e</a>) {
<a name="l00361"></a>00361     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d04/app__install__manager_8js.html#ab5902775854a8b8440bcd25e0fe1c120">e</a>.defaultPrevented) <span class="keywordflow">return</span>; 
<a name="l00362"></a>00362     var el = <a class="code" href="../../d1/d04/app__install__manager_8js.html#ab5902775854a8b8440bcd25e0fe1c120">e</a>.target;
<a name="l00363"></a>00363     <span class="keywordflow">while</span> (el &amp;&amp; <span class="charliteral">&#39;A&#39;</span> != el.nodeName) el = el.parentNode;
<a name="l00364"></a>00364     <span class="keywordflow">if</span> (!el || <span class="charliteral">&#39;A&#39;</span> != el.nodeName) <span class="keywordflow">return</span>;
<a name="l00365"></a>00365     var href = el.href;
<a name="l00366"></a>00366     var path = el.pathname + el.search;
<a name="l00367"></a>00367     <span class="keywordflow">if</span> (el.hash) <span class="keywordflow">return</span>;
<a name="l00368"></a>00368     <span class="keywordflow">if</span> (!sameOrigin(href)) <span class="keywordflow">return</span>;
<a name="l00369"></a>00369     var orig = <a class="code" href="../../db/d6d/mkdirp_8js.html#aa72e0c8a20e6bcc571d3a1c51846e627">path</a>;
<a name="l00370"></a>00370     path = path.replace(base, <span class="stringliteral">&#39;&#39;</span>);
<a name="l00371"></a>00371     <span class="keywordflow">if</span> (base &amp;&amp; orig == path) <span class="keywordflow">return</span>;
<a name="l00372"></a>00372     <a class="code" href="../../d1/d04/app__install__manager_8js.html#ab5902775854a8b8440bcd25e0fe1c120">e</a>.preventDefault();
<a name="l00373"></a>00373     <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>.show(orig);
<a name="l00374"></a>00374   }
<a name="l00375"></a>00375 
<a name="l00380"></a>00380   <span class="keyword">function</span> sameOrigin(href) {
<a name="l00381"></a>00381     var origin = <a class="code" href="../../d1/d03/locales_2_r_e_a_d_m_e_8md.html#a009e1b25f7059061a6508b10c9435823">location</a>.protocol + <span class="stringliteral">&#39;//&#39;</span> + <a class="code" href="../../d1/d03/locales_2_r_e_a_d_m_e_8md.html#a009e1b25f7059061a6508b10c9435823">location</a>.hostname;
<a name="l00382"></a>00382     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d03/locales_2_r_e_a_d_m_e_8md.html#a009e1b25f7059061a6508b10c9435823">location</a>.port) origin += <span class="charliteral">&#39;:&#39;</span> + <a class="code" href="../../d1/d03/locales_2_r_e_a_d_m_e_8md.html#a009e1b25f7059061a6508b10c9435823">location</a>.port;
<a name="l00383"></a>00383     <span class="keywordflow">return</span> 0 == href.indexOf(origin);
<a name="l00384"></a>00384   }
<a name="l00385"></a>00385 
<a name="l00390"></a>00390   <span class="keywordflow">if</span> (<span class="stringliteral">&#39;undefined&#39;</span> == <a class="code" href="../../d1/d22/ical_8js.html#a6053319846c80bf9561a1958bb817380">typeof</a> <a class="code" href="../../dc/dd7/ext_2caldav_8js.html#a84770557f73663cbea2a9e12e7d45257">module</a>) {
<a name="l00391"></a>00391     <a class="code" href="../../dd/d64/apps_2email_2js_2ext_2mailapi_2worker-bootstrap_8js.html#a1f5517920aaab1f97bda91f10438fb05">window</a>.page = <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>;
<a name="l00392"></a>00392   } <span class="keywordflow">else</span> {
<a name="l00393"></a>00393     module.exports = <a class="code" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>;
<a name="l00394"></a>00394   }
<a name="l00395"></a>00395 
<a name="l00396"></a>00396 })();
</pre></div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全て</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>データ構造</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>ネームスペース</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>ファイル</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>関数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>変数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>型定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>列挙型</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>列挙型の値</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>フレンド</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>マクロ定義</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../d2/d5b/calendar_2js_2ext_2page_8js.html">page.js</a>      </li>

    <li class="footer">FxOS Code Readingに対してSat Oct 19 2013 00:54:31に生成されました。
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
