<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>FxOS Code Reading: grid_test.js</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">FxOS Code Reading
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- 作成： Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'検索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>メインページ</span></a></li>
      <li><a href="../../pages.html"><span>関連ページ</span></a></li>
      <li><a href="../../modules.html"><span>モジュール</span></a></li>
      <li><a href="../../namespaces.html"><span>パッケージ</span></a></li>
      <li><a href="../../annotated.html"><span>データ構造</span></a></li>
      <li class="current"><a href="../../files.html"><span>ファイル</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>ファイル一覧</span></a></li>
      <li><a href="../../globals.html"><span>グローバル</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('d7/d15/grid__test_8js.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">関数</a> &#124;
<a href="#var-members">変数</a>  </div>
  <div class="headertitle">
<div class="title">grid_test.js</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="../../d7/d15/grid__test_8js_source.html">ソースコードを見る。</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
関数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">mocha&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d15/grid__test_8js.html#a8e3382f1867ae5054e327fca51393882">globals</a> (['mozRequestAnimationFrame'])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d15/grid__test_8js.html#a08cd070e99a4031437721a673e39e99a">require</a> ('/<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a88b8a0ec29ea19ab8a79e10dd9cf3c04">shared</a>/<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>/unit/mocks/mock_navigator_moz_settings.js')</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d15/grid__test_8js.html#aa35bad68ec8e65cc234d091ddabadf73">requireApp</a> ('<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#a13982af583a1453654c85f88e370f387">homescreen</a>/<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>/unit/mock_l10n.js')</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d15/grid__test_8js.html#a7d12cbb16035653dd6d39710f4979452">mocksHelperForGrid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d15/grid__test_8js.html#a53933f4fbf80b8ffef94623387c29d58">init</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d15/grid__test_8js.html#a8b9ad83e9ed2e6bee121ab7839eb18e8">suite</a> ('grid.js &gt;', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var TAP_THRESHOLD=10;var SWIPE_THRESHOLD=0.5;var SAVE_STATE_WAIT_TIMEOUT=200;var wrapperNode, containerNode;var realMozApps;var realMozSettings;var <a class="el" href="../../d9/d7f/compose__test_8js.html#a0febeec624e264448191b704321c7df1">mocksHelper</a>=<a class="el" href="../../d7/d15/grid__test_8js.html#a7d12cbb16035653dd6d39710f4979452">mocksHelperForGrid</a>;suiteSetup(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){mocksHelper.suiteSetup();realMozApps=window.navigator.mozApps;window.navigator.mozApps={mgmt:MockAppsMgmt};realMozSettings=<a class="el" href="../../dc/da7/fm_8js.html#a46efbc9e28313d5603af4022d6352293">navigator.mozSettings</a>;<a class="el" href="../../dc/da7/fm_8js.html#a46efbc9e28313d5603af4022d6352293">navigator.mozSettings</a>=MockNavigatorSettings;});suiteTeardown(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){window.navigator.mozApps=realMozApps;<a class="el" href="../../dc/da7/fm_8js.html#a46efbc9e28313d5603af4022d6352293">navigator.mozSettings</a>=realMozSettings;mocksHelper.suiteTeardown();});<a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a>('Default icons have be initialized correctly &gt;', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('<a class="el" href="../../d9/d34/apps_2calendar_2js_2app_8js.html#a43529e8e1890d6b0b98f7f88ff865e38">App</a> icon by default is defined', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var appBlob=GridManager.getBlobByDefault(new <a class="el" href="../../de/d66/system_2test_2unit_2mock__app_8js.html#a1421952544f7eb7f0a1e8b18d7317125">MockApp</a>());<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(appBlob);});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('<a class="el" href="../../d5/d63/bookmark_8js.html#a27eaca46dbd65e0a113eba9296a66902">Bookmark</a> icon by default is defined', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var bookmarkBlob=GridManager.getBlobByDefault(new <a class="el" href="../../de/d66/system_2test_2unit_2mock__app_8js.html#a1421952544f7eb7f0a1e8b18d7317125">MockApp</a>({iconable:true}));<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(bookmarkBlob);});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('<a class="el" href="../../d9/d34/apps_2calendar_2js_2app_8js.html#a43529e8e1890d6b0b98f7f88ff865e38">App</a> and bookmark icons by default are different', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var appBlob=GridManager.getBlobByDefault(new <a class="el" href="../../de/d66/system_2test_2unit_2mock__app_8js.html#a1421952544f7eb7f0a1e8b18d7317125">MockApp</a>());var bookmarkBlob=GridManager.getBlobByDefault(new <a class="el" href="../../de/d66/system_2test_2unit_2mock__app_8js.html#a1421952544f7eb7f0a1e8b18d7317125">MockApp</a>({iconable:true}));<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ac3f85391e7b9d85d3879b84b90623375">assert.isTrue</a>(appBlob!==bookmarkBlob);});});<a class="el" href="../../da/db6/ime__test_8js.html#a499aeb7e1826da3a383e443025bfc846">setup</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(<a class="el" href="../../de/dc7/share-receiver_8js.html#af9c6eaaef1f3af067f5ea1aff90ff861">done</a>){<a class="el" href="../../da/db6/ime__test_8js.html#a499aeb7e1826da3a383e443025bfc846">mocksHelper.setup</a>();var fakeMarkup= '&lt; div <a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a>=&quot;icongrid&quot;class=&quot;apps&quot;role=&quot;main&quot;&gt;'+ '&lt; div <a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a>=&quot;landing-<a class="el" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>&quot;data-current-<a class="el" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>=&quot;true&quot;&gt;'+ '&lt;/div &gt;'+ '&lt;/div &gt;'+ '&lt; div class=&quot;dockWrapper&quot;&gt;&lt;/div &gt;'+ '&lt; div <a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a>=&quot;landing-<a class="el" href="../../d3/d4b/lockscreen_8js.html#a071ea38270614fdc4968e0f755fc8b79">overlay</a>&quot;&gt;&lt;/div &gt;';wrapperNode=document.createElement('div');<a class="el" href="../../d1/d04/app__install__manager_8js.html#acd145aedb51101ac15a526f73673b0b9">wrapperNode.innerHTML</a>=fakeMarkup;document.body.appendChild(wrapperNode);containerNode=<a class="el" href="../../d4/d8c/viewphoto_8js.html#a6d08c5d82e2ca7c6042afb9f8ae078c1">document.getElementById</a>('icongrid');var <a class="el" href="../../dc/df3/plgetopt_8h.html#af88bfb344db31578251e79bdf8cbf4bc">options</a>={gridSelector: '.apps', dockSelector: '.dockWrapper', tapThreshold:TAP_THRESHOLD, swipeThreshold:SWIPE_THRESHOLD, swipeFriction:0.1, swipeTransitionDuration:300};<a class="el" href="../../d5/d0d/pay_8js.html#af619d0ad365b66772212901ccd40466c">GridManager.init</a>(<a class="el" href="../../dc/df3/plgetopt_8h.html#af88bfb344db31578251e79bdf8cbf4bc">options</a>, <a class="el" href="../../de/dc7/share-receiver_8js.html#af9c6eaaef1f3af067f5ea1aff90ff861">done</a>);});teardown(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){mocksHelper.teardown();<a class="el" href="../../d1/d04/app__install__manager_8js.html#a5ebdda199bee63b9cb8dc969a17d4a9e">wrapperNode.parentNode.removeChild</a>(wrapperNode);});<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> sendTouchEvent(<a class="el" href="../../de/d81/xpt__struct_8h.html#ac827fa5fbcdd05dd9ed05984a80679b8">type</a>, <a class="el" href="../../df/db4/_h_i_s_t_o_r_y_8md.html#a766be2d162a033dbb9c6a21d3a0175d9">node</a>, coords){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../d7/d9f/thread_8js.html#aa8dea74882346c7746113d234836bb3a">typeof</a> document.createTouch=== '<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>'){var touch=document.createTouch(<a class="el" href="../../d0/d94/tools_2xpcwindow_2lib_2loader_8js.html#a1f5517920aaab1f97bda91f10438fb05">window</a>, <a class="el" href="../../df/db4/_h_i_s_t_o_r_y_8md.html#a766be2d162a033dbb9c6a21d3a0175d9">node</a>, 1, coords.x, coords.y, coords.x, coords.y);var touchList=document.createTouchList(touch);var evt=document.createEvent('TouchEvent');evt.initTouchEvent(<a class="el" href="../../de/d81/xpt__struct_8h.html#ac827fa5fbcdd05dd9ed05984a80679b8">type</a>, <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>, <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>, <a class="el" href="../../d0/d94/tools_2xpcwindow_2lib_2loader_8js.html#a1f5517920aaab1f97bda91f10438fb05">window</a>, 0, <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>, <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>, <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>, <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>, touchList, touchList, touchList);<a class="el" href="../../d1/d04/app__install__manager_8js.html#a5e67712f1e4602312c66bda052a6f6c4">node.dispatchEvent</a>(evt);}}<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> sendMouseEvent(<a class="el" href="../../de/d81/xpt__struct_8h.html#ac827fa5fbcdd05dd9ed05984a80679b8">type</a>, <a class="el" href="../../df/db4/_h_i_s_t_o_r_y_8md.html#a766be2d162a033dbb9c6a21d3a0175d9">node</a>, coords){var evt=document.createEvent('MouseEvent');evt.initMouseEvent(<a class="el" href="../../de/d81/xpt__struct_8h.html#ac827fa5fbcdd05dd9ed05984a80679b8">type</a>, <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>, <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>, <a class="el" href="../../d0/d94/tools_2xpcwindow_2lib_2loader_8js.html#a1f5517920aaab1f97bda91f10438fb05">window</a>, 0, coords.x, coords.y, coords.x, coords.y, <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>, <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>, <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>, <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>, 0, <a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>);<a class="el" href="../../d1/d04/app__install__manager_8js.html#a5e67712f1e4602312c66bda052a6f6c4">containerNode.dispatchEvent</a>(evt);}<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> ensurePanningSuite(){<a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a>('ensurePanning &gt;', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var realRequestAnimationFrame;suiteSetup(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){realRequestAnimationFrame=window.mozRequestAnimationFrame;window.mozRequestAnimationFrame=<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(<a class="el" href="../../d1/d70/prinit_8h.html#ad84b078786561118564537030cd7a8b1">func</a>){<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#adf7ce41cd256eda7ce1f6adeea723bd3">setTimeout</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../d1/d70/prinit_8h.html#ad84b078786561118564537030cd7a8b1">func</a>();});};});<a class="el" href="../../da/db6/ime__test_8js.html#a499aeb7e1826da3a383e443025bfc846">setup</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){GridManager.ensurePanning();<a class="el" href="../../d7/d13/mock__updatable_8js.html#a3d0fcb481c5d651d1f7a83fa7896504d">MockPage.mTeardown</a>();});suiteTeardown(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){window.mozRequestAnimationFrame=realRequestAnimationFrame;realRequestAnimationFrame=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>;});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('should not be able <a class="el" href="../../da/d32/prio_8h.html#a5d467a63df9ff99d33d6749038f6f421">to</a> <a class="el" href="../../d5/d62/shared_2js_2media_2media__frame_8js.html#a0118c22264bfb2702043c95ec9a8e6b2">pan</a> <a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a> <a class="el" href="../../de/d8f/jsdebug_8h.html#ad8babe1ecde8f9f6d224a06ea1a99480">user</a> is <a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#ac00bf23adf7cb4c5253268889722ca05">on</a> landing <a class="el" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){this.sinon.useFakeTimers();var <a class="el" href="../../d6/d1b/pprthred_8h.html#a0798cf327c99b856b5ecf03e5f4deb4d">start</a>={x:100, y:100};var move={x:200, y:100};sendTouchEvent('touchstart', containerNode, <a class="el" href="../../d6/d1b/pprthred_8h.html#a0798cf327c99b856b5ecf03e5f4deb4d">start</a>);sendMouseEvent('mousedown', containerNode, <a class="el" href="../../d6/d1b/pprthred_8h.html#a0798cf327c99b856b5ecf03e5f4deb4d">start</a>);sendTouchEvent('touchmove', containerNode, move);sendMouseEvent('mousemove', containerNode, move);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(<a class="el" href="../../d8/df0/frames_8js.html#a6dd335ba65f38ed72cb9599732a2ce52">document.body.dataset.transitioning</a>, '<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>');<a class="el" href="../../d3/d91/j3d_8js.html#aeba439cf129372b4ebc312b3a29efe66">this.sinon.clock.tick</a>();var <a class="el" href="../../d7/df6/mock__grid__manager_8js.html#abbd13e9e2f1dc5f8a3eed8d089332d40">currentPage</a>=<a class="el" href="../../d4/d8c/viewphoto_8js.html#a6d08c5d82e2ca7c6042afb9f8ae078c1">document.getElementById</a>('landing-<a class="el" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>');<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(currentPage.style.MozTransform, '');sendTouchEvent('touchend', containerNode, move);sendMouseEvent('mouseup', containerNode, move);});});}ensurePanningSuite();<a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a>('ensureTapping &gt;', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>, icons=[];<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> createIcons(<a class="el" href="../../de/d81/xpt__struct_8h.html#af23ba264fc6071dcd37179d8a2b5440b">num</a>){<a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a089b2988a149c0d135aaab57e2231481">for</a>(var <a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>=0;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>&lt; <a class="el" href="../../de/d81/xpt__struct_8h.html#af23ba264fc6071dcd37179d8a2b5440b">num</a>;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>++){var icon=(new <a class="el" href="../../d9/da0/mock__icon_8js.html#a69ad9324a1f2ccee3bdec82967cc750d">MockIcon</a>()).<a class="el" href="../../d3/d91/j3d_8js.html#ae7817194480cfc900873938c8e7dd602">render</a>();<a class="el" href="../../d5/da4/preferences_8js.html#a04cdfd02512383b1feea0e6fa7f5d3a3">icons.push</a>(icon);page.appendChild(icon);}}<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> removeIcons(){<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#aae3803cf3819ae1182550b783e1ea692">icons.forEach</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(icon){<a class="el" href="../../d1/d04/app__install__manager_8js.html#a5ebdda199bee63b9cb8dc969a17d4a9e">page.removeChild</a>(icon);});}suiteSetup(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>=<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9bd72b771a78ff04c5bb1d670f034005">wrapperNode.querySelector</a>('.<a class="el" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>');createIcons(2);});suiteTeardown(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){removeIcons();});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('Clicking <a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#ac00bf23adf7cb4c5253268889722ca05">on</a> an icon &gt; it should be active ', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){this.sinon.useFakeTimers();var icon=icons[0];var rect=icon.getBoundingClientRect();var point={<a class="el" href="../../d2/d7d/jsapi_8h.html#ad27f9f4708ee464a31e9c01eb21f1b28">x:rect.left</a>+1, <a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">y:rect.top</a>+1};sendTouchEvent('touchstart', icon, point);sendMouseEvent('mousedown', icon, point);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ac3f85391e7b9d85d3879b84b90623375">assert.isTrue</a>(icon.classList.contains('active'));<a class="el" href="../../d3/d91/j3d_8js.html#aeba439cf129372b4ebc312b3a29efe66">this.sinon.clock.tick</a>();sendTouchEvent('touchend', containerNode, point);sendMouseEvent('mouseup', containerNode, point);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#a8e4d922ae3532f8bdfcadccef0881707">assert.isFalse</a>(icon.classList.contains('active'));});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('Clicking two icons at the <a class="el" href="../../d2/d7d/jsapi_8h.html#abfba8fa3513c8942905cf6144b77a52d">same</a> <a class="el" href="../../d6/da5/certt_8h.html#a5e84b1bdd0770310d2a7fd739ab6dbee">time</a> &gt; just one is active ', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){this.sinon.useFakeTimers();var icon1=icons[0];var icon2=icons[1];var rect=icon1.getBoundingClientRect();var point1={<a class="el" href="../../d2/d7d/jsapi_8h.html#ad27f9f4708ee464a31e9c01eb21f1b28">x:rect.left</a>+1, <a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">y:rect.top</a>+1};sendTouchEvent('touchstart', icon1, point1);sendMouseEvent('mousedown', icon1, point1);rect=icon2.getBoundingClientRect();var point2={<a class="el" href="../../d2/d7d/jsapi_8h.html#ad27f9f4708ee464a31e9c01eb21f1b28">x:rect.left</a>+1, <a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">y:rect.top</a>+1};<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ac3f85391e7b9d85d3879b84b90623375">assert.isTrue</a>(icon1.classList.contains('active'));sendTouchEvent('touchstart', icon2, point2);sendMouseEvent('mousedown', icon2, point2);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#a8e4d922ae3532f8bdfcadccef0881707">assert.isFalse</a>(icon1.classList.contains('active'));<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ac3f85391e7b9d85d3879b84b90623375">assert.isTrue</a>(icon2.classList.contains('active'));<a class="el" href="../../d3/d91/j3d_8js.html#aeba439cf129372b4ebc312b3a29efe66">this.sinon.clock.tick</a>();sendTouchEvent('touchend', containerNode, point2);sendMouseEvent('mouseup', containerNode, point2);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#a8e4d922ae3532f8bdfcadccef0881707">assert.isFalse</a>(icon1.classList.contains('active'));<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#a8e4d922ae3532f8bdfcadccef0881707">assert.isFalse</a>(icon2.classList.contains('active'));});});<a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a>('onDragStart &gt;', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../da/db6/ime__test_8js.html#a499aeb7e1826da3a383e443025bfc846">setup</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){GridManager.onDragStart();});ensurePanningSuite();});<a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a>('<a class="el" href="../../d0/dda/tools_2extensions_2httpd_2bootstrap_8js.html#a62c0c990db107f65eb2faf422eaea2c1">install</a> <a class="el" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a> &gt;', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var mockApp;<a class="el" href="../../da/db6/ime__test_8js.html#a499aeb7e1826da3a383e443025bfc846">setup</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(<a class="el" href="../../de/dc7/share-receiver_8js.html#af9c6eaaef1f3af067f5ea1aff90ff861">done</a>){MockHomeState.mLastSavedGrid=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>;mockApp=new <a class="el" href="../../de/d66/system_2test_2unit_2mock__app_8js.html#a1421952544f7eb7f0a1e8b18d7317125">MockApp</a>();MockAppsMgmt.mTriggerOninstall(mockApp);<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#adf7ce41cd256eda7ce1f6adeea723bd3">setTimeout</a>(<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">done.bind</a>(<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>, undefined), SAVE_STATE_WAIT_TIMEOUT);});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('should <a class="el" href="../../da/db9/savebookmark_8js.html#aff8bdb5ae1d006c066ccbea289f8e863">save</a> the <a class="el" href="../../d2/df8/prthread_8h.html#a22ec211475b54a8de0468990ea9654da">state</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(MockHomeState.mLastSavedGrid);});<a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a>('updating <a class="el" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a> &gt;', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../da/db6/ime__test_8js.html#a499aeb7e1826da3a383e443025bfc846">setup</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(<a class="el" href="../../de/dc7/share-receiver_8js.html#af9c6eaaef1f3af067f5ea1aff90ff861">done</a>){MockHomeState.mLastSavedGrid=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>;<a class="el" href="../../de/d66/system_2test_2unit_2mock__app_8js.html#ae45a0ef60f64b189dbb78f163a1fc2fe">mockApp.mTriggerDownloadApplied</a>();<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#adf7ce41cd256eda7ce1f6adeea723bd3">setTimeout</a>(<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">done.bind</a>(<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>, undefined), SAVE_STATE_WAIT_TIMEOUT);});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('should <a class="el" href="../../da/db9/savebookmark_8js.html#aff8bdb5ae1d006c066ccbea289f8e863">save</a> the <a class="el" href="../../d2/df8/prthread_8h.html#a22ec211475b54a8de0468990ea9654da">state</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(MockHomeState.mLastSavedGrid);});});});<a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a>('<a class="el" href="../../d0/dda/tools_2extensions_2httpd_2bootstrap_8js.html#a62c0c990db107f65eb2faf422eaea2c1">install</a> single variant apps &gt;', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var prevMaxIconNumber;suiteSetup(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){prevMaxIconNumber=MockPage.prototype.mMAX_ICON_NUMBER;MockPage.prototype.mMAX_ICON_NUMBER=3;});suiteTeardown(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){MockPage.prototype.mMAX_ICON_NUMBER=prevMaxIconNumber;});var mockAppSV;var svApps=[{ '<a class="el" href="../../dc/db8/system_2test_2unit_2action__menu__test_8js.html#a143b83738f9fab453e3116d14dfac0e7">screen</a>':1, '<a class="el" href="../../d1/d04/app__install__manager_8js.html#a3c65d07fe933acaaf1205d12ce79b115">manifest</a>': 'https: '<a class="el" href="../../d5/d35/tools_2xpcwindow_2lib_2window_2window_8js.html#a009e1b25f7059061a6508b10c9435823">location</a>':15},{ '<a class="el" href="../../dc/db8/system_2test_2unit_2action__menu__test_8js.html#a143b83738f9fab453e3116d14dfac0e7">screen</a>':2, '<a class="el" href="../../d1/d04/app__install__manager_8js.html#a3c65d07fe933acaaf1205d12ce79b115">manifest</a>': 'https: '<a class="el" href="../../d5/d35/tools_2xpcwindow_2lib_2window_2window_8js.html#a009e1b25f7059061a6508b10c9435823">location</a>':6},{ '<a class="el" href="../../dc/db8/system_2test_2unit_2action__menu__test_8js.html#a143b83738f9fab453e3116d14dfac0e7">screen</a>':2, '<a class="el" href="../../d1/d04/app__install__manager_8js.html#a3c65d07fe933acaaf1205d12ce79b115">manifest</a>': 'https: '<a class="el" href="../../d5/d35/tools_2xpcwindow_2lib_2window_2window_8js.html#a009e1b25f7059061a6508b10c9435823">location</a>':0}];<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#aae3803cf3819ae1182550b783e1ea692">svApps.forEach</a>((<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(svApp){<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('Should <a class="el" href="../../da/db9/savebookmark_8js.html#aff8bdb5ae1d006c066ccbea289f8e863">save</a> the icon with desiredPos in the correct <a class="el" href="../../d7/d9d/time__test_8js.html#a9b03e8a9f4440c3c0c605b05ef1b0885">page</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(<a class="el" href="../../de/dc7/share-receiver_8js.html#af9c6eaaef1f3af067f5ea1aff90ff861">done</a>){Configurator.mSimPresentOnFirstBoot=<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>;MockHomeState.mLastSavedGrid=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>;mockAppSV=new <a class="el" href="../../de/d66/system_2test_2unit_2mock__app_8js.html#a1421952544f7eb7f0a1e8b18d7317125">MockApp</a>({'<a class="el" href="../../d1/d04/app__install__manager_8js.html#a5983b6d50c2fbf95ffe3907399e83a3c">manifestURL</a>':<a class="el" href="../../d1/d04/app__install__manager_8js.html#a3c65d07fe933acaaf1205d12ce79b115">svApp.manifest</a>});MockAppsMgmt.mTriggerOninstall(mockAppSV);<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#adf7ce41cd256eda7ce1f6adeea723bd3">setTimeout</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var grd=MockHomeState.mLastSavedGrid;<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(grd, 'Grid is not <a class="el" href="../../d8/d64/ns_u_r_l_helper_8h.html#a7d50e9587913d4f6634c0b0c8de693c7">set</a>');<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">grd.length</a>, <a class="el" href="../../dc/db8/system_2test_2unit_2action__menu__test_8js.html#a143b83738f9fab453e3116d14dfac0e7">svApp.screen</a>+2, 'Grid does not have the <a class="el" href="../../d2/d7d/jsapi_8h.html#a06a61119547d88fbcdf5e877c6c9057e">right</a> number of screens');<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(grd[<a class="el" href="../../dc/db8/system_2test_2unit_2action__menu__test_8js.html#a143b83738f9fab453e3116d14dfac0e7">svApp.screen</a>].<a class="el" href="../../d2/d7d/jsapi_8h.html#aafd95f8c7a99b9189ede7cdf0871ebe8">index</a>, <a class="el" href="../../dc/db8/system_2test_2unit_2action__menu__test_8js.html#a143b83738f9fab453e3116d14dfac0e7">svApp.screen</a>, '<a class="el" href="../../d9/d34/apps_2calendar_2js_2app_8js.html#a43529e8e1890d6b0b98f7f88ff865e38">App</a> was not installed <a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#ac00bf23adf7cb4c5253268889722ca05">on</a> the correct <a class="el" href="../../dc/db8/system_2test_2unit_2action__menu__test_8js.html#a143b83738f9fab453e3116d14dfac0e7">screen</a>');<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(grd[<a class="el" href="../../dc/db8/system_2test_2unit_2action__menu__test_8js.html#a143b83738f9fab453e3116d14dfac0e7">svApp.screen</a>].icons, 'The <a class="el" href="../../dc/db8/system_2test_2unit_2action__menu__test_8js.html#a143b83738f9fab453e3116d14dfac0e7">screen</a> does not have <a class="el" href="../../d5/de7/jquery_8js.html#aa4d4888597588a84fd5b1184d00c91f3">a</a> icons structure');var icns=grd[<a class="el" href="../../dc/db8/system_2test_2unit_2action__menu__test_8js.html#a143b83738f9fab453e3116d14dfac0e7">svApp.screen</a>+1].icons[0];<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(icns, 'The <a class="el" href="../../dc/db8/system_2test_2unit_2action__menu__test_8js.html#a143b83738f9fab453e3116d14dfac0e7">screen</a> does not have any icons');<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ac3f85391e7b9d85d3879b84b90623375">assert.isTrue</a>(icns.desiredPos!==undefined, 'The single variant <a class="el" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a> does not have <a class="el" href="../../d5/de7/jquery_8js.html#aa4d4888597588a84fd5b1184d00c91f3">a</a> desiredPos');<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(icns.desiredPos, <a class="el" href="../../d5/d35/tools_2xpcwindow_2lib_2window_2window_8js.html#a009e1b25f7059061a6508b10c9435823">svApp.location</a>, '<a class="el" href="../../d9/d34/apps_2calendar_2js_2app_8js.html#a43529e8e1890d6b0b98f7f88ff865e38">App</a> does not have the correct DesiredPosition');<a class="el" href="../../de/dc7/share-receiver_8js.html#af9c6eaaef1f3af067f5ea1aff90ff861">done</a>();}, SAVE_STATE_WAIT_TIMEOUT);});}));});<a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a>('<a class="el" href="../../d0/dda/tools_2extensions_2httpd_2bootstrap_8js.html#a62c0c990db107f65eb2faf422eaea2c1">install</a> single variant apps without SIM <a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#ac00bf23adf7cb4c5253268889722ca05">on</a> <a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#aab9764d7f9e519400127ef5189844ed3">first</a> <a class="el" href="../../da/db6/ime__test_8js.html#a3fca0c41c653bbc4f464686334ca226f">run</a> &gt;', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var prevMaxIconNumber;var mockAppSV;suiteSetup(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){prevMaxIconNumber=MockPage.prototype.mMAX_ICON_NUMBER;MockPage.prototype.mMAX_ICON_NUMBER=3;MockHomeState.mUseTestGrids=<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>;});suiteTeardown(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){MockPage.prototype.mMAX_ICON_NUMBER=prevMaxIconNumber;MockHomeState.mUseTestGrids=<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>;});var testCases=[{ '<a class="el" href="../../d9/d04/expat_8h.html#a4a7cccd86625791f7f2ce3fb477aa9c1">name</a>': 'One grid with space', '<a class="el" href="../../d1/d04/app__install__manager_8js.html#a3c65d07fe933acaaf1205d12ce79b115">manifest</a>': 'https: 'expectedPage':2, 'expectedNumberOfPages':4},{ '<a class="el" href="../../d9/d04/expat_8h.html#a4a7cccd86625791f7f2ce3fb477aa9c1">name</a>': 'One grid without space', '<a class="el" href="../../d1/d04/app__install__manager_8js.html#a3c65d07fe933acaaf1205d12ce79b115">manifest</a>': 'https: 'expectedPage':3, 'expectedNumberOfPages':4},{ '<a class="el" href="../../d9/d04/expat_8h.html#a4a7cccd86625791f7f2ce3fb477aa9c1">name</a>': '1st grid with space, 2nd without space', 'manifest': 'https: 'expectedPage':4, 'expectedNumberOfPages':5},{ 'name': '1st and 3rd with space, 2nd without it', 'manifest': 'https: 'expectedPage':4, 'expectedNumberOfPages':6}];testCases.forEach(function(testCase){test('Should save the icon with desiredPos in the first page with space:'+testCase.name, function(done){Configurator.mSimPresentOnFirstBoot=false;mockAppSV=new MockApp({'manifestURL':testCase.manifest});MockAppsMgmt.mTriggerOninstall(mockAppSV);setTimeout(function(){var grd=MockHomeState.mLastSavedGrid;var expectedPage=grd[testCase.expectedPage];assert.ok(grd, 'Grid is not set');assert.equal(grd.length, testCase.expectedNumberOfPages, 'Grid does not have the right number of screens');assert.ok(expectedPage, 'The expected screen does not exist');assert.ok(expectedPage.icons &amp;&amp;expectedPage.icons[0], 'The screen does not have a icons structure');var expectedIcon=expectedPage &amp;&amp;expectedPage.icons &amp;&amp;expectedPage.icons[expectedPage.icons.length-1];assert.equal(expectedIcon.manifestURL, testCase.manifest, 'App was not installed on the correct screen');done();}, SAVE_STATE_WAIT_TIMEOUT);});});});suite('#getApps &gt;', function(){var manifests=[{role: 'app'},{role: 'keyboard'},{role: 'app', entry_points:{ 'dialer':{ 'icons':{}}, 'contacts':{ 'icons':{}}}}];setup(function(done){manifests.forEach(function(manifest, idx){GridManager.install(new MockApp({origin: 'fake'+idx, manifest:manifest}));});GridManager.install(new MockApp({origin: 'updateManifestOnly', manifest:undefined, updateManifest:{role: 'keyboard'}}));setTimeout(done.bind(null, undefined), SAVE_STATE_WAIT_TIMEOUT);});test('returns all apps', function(){var allApps=GridManager.getApps();assert.equal(allApps.length, 4);});test('filters apps', function(){var visibleApps=GridManager.getApps(false, true);assert.equal(visibleApps.length, 2);});test('flattens entry points', function(){var allApps=GridManager.getApps(true);assert.equal(allApps.length, 5);});test('filters and flattens entry points', function(){var visibleApps=GridManager.getApps(true, true);assert.equal(visibleApps.length, 3);});});})</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d1b/test-agent-server_8js.html#aab71dcc804ca4aa3ed2bf7ba887635db">use</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d15/grid__test_8js.html#ae2475e10618961c050dcba04e8c42331">strict</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d15/grid__test_8js.html#a7d12cbb16035653dd6d39710f4979452">mocksHelperForGrid</a></td></tr>
</table>
<hr/><h2>関数</h2>
<a class="anchor" id="a8e3382f1867ae5054e327fca51393882"></a><!-- doxytag: member="grid_test.js::globals" ref="a8e3382f1867ae5054e327fca51393882" args="(['mozRequestAnimationFrame'])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mocha <a class="el" href="../../d6/df3/wifi__test_8js.html#a55232262598044b5b781ef18019e2a92">globals</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a53933f4fbf80b8ffef94623387c29d58"></a><!-- doxytag: member="grid_test.js::init" ref="a53933f4fbf80b8ffef94623387c29d58" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d15/grid__test_8js.html#a7d12cbb16035653dd6d39710f4979452">mocksHelperForGrid</a> <a class="el" href="../../d5/d0d/pay_8js.html#af619d0ad365b66772212901ccd40466c">init</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../dc/da7/fm_8js_source.html">fm.js</a> の <a class="el" href="../../dc/da7/fm_8js_source.html#l00690">690</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">                {
  <a class="code" href="../../dc/da7/fm_8js.html#a60e4f46ea1c84167188f3df600a7a79b">frequencyDialer</a>.init();

  var seeking = <span class="keyword">false</span>;
  <span class="keyword">function</span> onclick_seekbutton(<a class="code" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>) {
    var seekButton = <span class="keyword">this</span>;
    var powerSwitch = $(<span class="stringliteral">&#39;power-switch&#39;</span>);
    var seeking = !!powerSwitch.getAttribute(<span class="stringliteral">&#39;data-seeking&#39;</span>);
    var <a class="code" href="../../dc/d5e/apps_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a841de671beddc9eb985cf068237fbff7">up</a> = seekButton.id == <span class="stringliteral">&#39;frequency-op-seekup&#39;</span>;

    <span class="keyword">function</span> seek() {
      powerSwitch.dataset.seeking = <span class="keyword">true</span>;

      var <a class="code" href="../../df/d44/permission__manager_8js.html#ad9abb423164fcb98d6ad9333893e4682">request</a> = up ? mozFMRadio.seekUp() : mozFMRadio.seekDown();

      request.onsuccess = <span class="keyword">function</span> seek_onsuccess() {
        powerSwitch.removeAttribute(<span class="stringliteral">&#39;data-seeking&#39;</span>);
      };

      request.onerror = <span class="keyword">function</span> seek_onerror() {
        powerSwitch.removeAttribute(<span class="stringliteral">&#39;data-seeking&#39;</span>);
      };
    }

    <span class="comment">// If the FM radio is seeking channel currently, cancel it and seek again.</span>
    <span class="keywordflow">if</span> (seeking) {
      var request = mozFMRadio.cancelSeek();
      request.onsuccess = seek;
      request.onerror = seek;
    } <span class="keywordflow">else</span> {
      seek();
    }
  }

  $(<span class="stringliteral">&#39;frequency-op-seekdown&#39;</span>).<a class="code" href="../../d8/d0d/transfer_8js.html#abd169909fbdd66534e2d19bf20938d8b">addEventListener</a>(<span class="stringliteral">&#39;click&#39;</span>,
                                   onclick_seekbutton, <span class="keyword">false</span>);
  $(<span class="stringliteral">&#39;frequency-op-seekup&#39;</span>).<a class="code" href="../../d8/d0d/transfer_8js.html#abd169909fbdd66534e2d19bf20938d8b">addEventListener</a>(<span class="stringliteral">&#39;click&#39;</span>,
                                   onclick_seekbutton, <span class="keyword">false</span>);

  $(<span class="stringliteral">&#39;power-switch&#39;</span>).<a class="code" href="../../d8/d0d/transfer_8js.html#abd169909fbdd66534e2d19bf20938d8b">addEventListener</a>(<span class="stringliteral">&#39;click&#39;</span>, <span class="keyword">function</span> toggle_fm() {
    <span class="keywordflow">if</span> (mozFMRadio.enabled) {
      mozFMRadio.disable();
    } <span class="keywordflow">else</span> {
      <a class="code" href="../../dc/da7/fm_8js.html#aaea60f6ff93b242ef2e1bcb693f60b46">enableFMRadio</a>(<a class="code" href="../../dc/da7/fm_8js.html#a60e4f46ea1c84167188f3df600a7a79b">frequencyDialer</a>.getFrequency());
    }
  }, <span class="keyword">false</span>);

  $(<span class="stringliteral">&#39;bookmark-button&#39;</span>).<a class="code" href="../../d8/d0d/transfer_8js.html#abd169909fbdd66534e2d19bf20938d8b">addEventListener</a>(<span class="stringliteral">&#39;click&#39;</span>, <span class="keyword">function</span> toggle_bookmark() {
    var frequency = <a class="code" href="../../dc/da7/fm_8js.html#a60e4f46ea1c84167188f3df600a7a79b">frequencyDialer</a>.getFrequency();
    <span class="keywordflow">if</span> (<a class="code" href="../../dc/da7/fm_8js.html#a7ce5ddc42ed7c10be56a3d710cef37da">favoritesList</a>.contains(frequency)) {
      <a class="code" href="../../dc/da7/fm_8js.html#a7ce5ddc42ed7c10be56a3d710cef37da">favoritesList</a>.remove(frequency);
    } <span class="keywordflow">else</span> {
      <a class="code" href="../../dc/da7/fm_8js.html#a7ce5ddc42ed7c10be56a3d710cef37da">favoritesList</a>.add(frequency);
    }
    <a class="code" href="../../dc/da7/fm_8js.html#a3114033e9d3da48efda5f8ad2bbf16cb">updateFreqUI</a>();
  }, <span class="keyword">false</span>);

  mozFMRadio.onfrequencychange = <a class="code" href="../../dc/da7/fm_8js.html#a3114033e9d3da48efda5f8ad2bbf16cb">updateFreqUI</a>;
  mozFMRadio.onenabled = <span class="keyword">function</span>() {
    <a class="code" href="../../dc/da7/fm_8js.html#a6129e1ab3f60334c7125678489fe6081">updateEnablingState</a>(<span class="keyword">false</span>);
  };
  mozFMRadio.ondisabled = <span class="keyword">function</span>() {
    <a class="code" href="../../dc/da7/fm_8js.html#a6129e1ab3f60334c7125678489fe6081">updateEnablingState</a>(<span class="keyword">false</span>);
  };

  mozFMRadio.onantennaavailablechange = <span class="keyword">function</span> onAntennaChange() {
    <a class="code" href="../../dc/da7/fm_8js.html#a39ce8abc435fa64a09de68bb0d02fe81">updateAntennaUI</a>();
    <span class="keywordflow">if</span> (mozFMRadio.antennaAvailable) {
      <span class="comment">// If the FM radio is enabled or enabling when the antenna is unplugged,</span>
      <span class="comment">// turn the FM radio on again.</span>
      <span class="keywordflow">if</span> (!!<a class="code" href="../../dd/d64/apps_2email_2js_2ext_2mailapi_2worker-bootstrap_8js.html#a1f5517920aaab1f97bda91f10438fb05">window</a>._previousFMRadioState || !!<a class="code" href="../../dd/d64/apps_2email_2js_2ext_2mailapi_2worker-bootstrap_8js.html#a1f5517920aaab1f97bda91f10438fb05">window</a>._previousEnablingState) {
        <a class="code" href="../../dc/da7/fm_8js.html#aaea60f6ff93b242ef2e1bcb693f60b46">enableFMRadio</a>(<a class="code" href="../../dc/da7/fm_8js.html#a60e4f46ea1c84167188f3df600a7a79b">frequencyDialer</a>.getFrequency());
      }
    } <span class="keywordflow">else</span> {
      <span class="comment">// Remember the current state of the FM radio</span>
      <a class="code" href="../../dd/d64/apps_2email_2js_2ext_2mailapi_2worker-bootstrap_8js.html#a1f5517920aaab1f97bda91f10438fb05">window</a>._previousFMRadioState = mozFMRadio.enabled;
      <a class="code" href="../../dd/d64/apps_2email_2js_2ext_2mailapi_2worker-bootstrap_8js.html#a1f5517920aaab1f97bda91f10438fb05">window</a>._previousEnablingState = <a class="code" href="../../dc/da7/fm_8js.html#a8e06555c6c04c92164d95983e52b4ebb">enabling</a>;
      mozFMRadio.disable();
    }
  };

  <span class="comment">// Disable the power button and the fav list when the airplane mode is on.</span>
  <a class="code" href="../../dc/da7/fm_8js.html#a6f29f687e5ab929b6edbb6a1863a95cc">updateAirplaneModeUI</a>();
  <a class="code" href="../../dc/da7/fm_8js.html#a46efbc9e28313d5603af4022d6352293">mozSettings</a>.addObserver(<span class="stringliteral">&#39;ril.radio.disabled&#39;</span>, <span class="keyword">function</span>(<a class="code" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>) {
    <a class="code" href="../../dc/da7/fm_8js.html#add986777b62020d3900e280a0e1744e0">rilDisabled</a> = <span class="keyword">event</span>.settingValue;
    <a class="code" href="../../dc/da7/fm_8js.html#a6f29f687e5ab929b6edbb6a1863a95cc">updateAirplaneModeUI</a>();
  });

  <a class="code" href="../../dc/da7/fm_8js.html#adabc57e23d23bd862b1db39761c35328">historyList</a>.init(<span class="keyword">function</span> hl_ready() {
    <span class="keywordflow">if</span> (mozFMRadio.antennaAvailable) {
      <span class="comment">// Enable FM immediately</span>
      <a class="code" href="../../d6/d52/js_2browser_8js.html#a7321fd84345f4f9455f25996b932b8fd">if</a> (<a class="code" href="../../dc/da7/fm_8js.html#adabc57e23d23bd862b1db39761c35328">historyList</a>.last() &amp;&amp; <a class="code" href="../../dc/da7/fm_8js.html#adabc57e23d23bd862b1db39761c35328">historyList</a>.last().frequency)
        <a class="code" href="../../dc/da7/fm_8js.html#aaea60f6ff93b242ef2e1bcb693f60b46">enableFMRadio</a>(<a class="code" href="../../dc/da7/fm_8js.html#adabc57e23d23bd862b1db39761c35328">historyList</a>.last().frequency);
      <span class="keywordflow">else</span>
        <a class="code" href="../../dc/da7/fm_8js.html#aaea60f6ff93b242ef2e1bcb693f60b46">enableFMRadio</a>(mozFMRadio.frequencyLowerBound);

      <a class="code" href="../../dc/da7/fm_8js.html#a7ce5ddc42ed7c10be56a3d710cef37da">favoritesList</a>.init(<a class="code" href="../../dc/da7/fm_8js.html#a3114033e9d3da48efda5f8ad2bbf16cb">updateFreqUI</a>);
    } <span class="keywordflow">else</span> {
      <span class="comment">// Mark the previous state as True,</span>
      <span class="comment">// so the FM radio be enabled automatically</span>
      <span class="comment">// when the headset is plugged.</span>
      <a class="code" href="../../dd/d64/apps_2email_2js_2ext_2mailapi_2worker-bootstrap_8js.html#a1f5517920aaab1f97bda91f10438fb05">window</a>._previousFMRadioState = <span class="keyword">true</span>;
      <a class="code" href="../../dc/da7/fm_8js.html#a39ce8abc435fa64a09de68bb0d02fe81">updateAntennaUI</a>();
      <a class="code" href="../../dc/da7/fm_8js.html#a7ce5ddc42ed7c10be56a3d710cef37da">favoritesList</a>.init();
    }
    <a class="code" href="../../dc/da7/fm_8js.html#a8a385995e6ff4caf76e4938d5721a5be">updatePowerUI</a>();
  });
}
</pre></div>
</div>
</div>
<a class="anchor" id="a08cd070e99a4031437721a673e39e99a"></a><!-- doxytag: member="grid_test.js::require" ref="a08cd070e99a4031437721a673e39e99a" args="('/shared/test/unit/mocks/mock_navigator_moz_settings.js')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a> </td>
          <td>(</td>
          <td class="paramtype">'/<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a88b8a0ec29ea19ab8a79e10dd9cf3c04">shared</a>/<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>/unit/mocks/mock_navigator_moz_settings.js'&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa35bad68ec8e65cc234d091ddabadf73"></a><!-- doxytag: member="grid_test.js::requireApp" ref="aa35bad68ec8e65cc234d091ddabadf73" args="('homescreen/test/unit/mock_l10n.js')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d16/shared_2test_2unit_2mocks_2mock__settings__listener_8js.html#ada5f8f0f77028802cd46c92cb1ce8fce">requireApp</a> </td>
          <td>(</td>
          <td class="paramtype">'<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#a13982af583a1453654c85f88e370f387">homescreen</a>/<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>/unit/mock_l10n.js'&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8b9ad83e9ed2e6bee121ab7839eb18e8"></a><!-- doxytag: member="grid_test.js::suite" ref="a8b9ad83e9ed2e6bee121ab7839eb18e8" args="('grid.js &gt;', function(){var TAP_THRESHOLD=10;var SWIPE_THRESHOLD=0.5;var SAVE_STATE_WAIT_TIMEOUT=200;var wrapperNode, containerNode;var realMozApps;var realMozSettings;var mocksHelper=mocksHelperForGrid;suiteSetup(function(){mocksHelper.suiteSetup();realMozApps=window.navigator.mozApps;window.navigator.mozApps={mgmt:MockAppsMgmt};realMozSettings=navigator.mozSettings;navigator.mozSettings=MockNavigatorSettings;});suiteTeardown(function(){window.navigator.mozApps=realMozApps;navigator.mozSettings=realMozSettings;mocksHelper.suiteTeardown();});suite('Default icons have be initialized correctly &gt;', function(){test('App icon by default is defined', function(){var appBlob=GridManager.getBlobByDefault(new MockApp());assert.ok(appBlob);});test('Bookmark icon by default is defined', function(){var bookmarkBlob=GridManager.getBlobByDefault(new MockApp({iconable:true}));assert.ok(bookmarkBlob);});test('App and bookmark icons by default are different', function(){var appBlob=GridManager.getBlobByDefault(new MockApp());var bookmarkBlob=GridManager.getBlobByDefault(new MockApp({iconable:true}));assert.isTrue(appBlob!==bookmarkBlob);});});setup(function(done){mocksHelper.setup();var fakeMarkup= '&lt; div id=&quot;icongrid&quot;class=&quot;apps&quot;role=&quot;main&quot;&gt;'+ '&lt; div id=&quot;landing&#45;page&quot;data&#45;current&#45;page=&quot;true&quot;&gt;'+ '&lt;/div &gt;'+ '&lt;/div &gt;'+ '&lt; div class=&quot;dockWrapper&quot;&gt;&lt;/div &gt;'+ '&lt; div id=&quot;landing&#45;overlay&quot;&gt;&lt;/div &gt;';wrapperNode=document.createElement('div');wrapperNode.innerHTML=fakeMarkup;document.body.appendChild(wrapperNode);containerNode=document.getElementById('icongrid');var options={gridSelector: '.apps', dockSelector: '.dockWrapper', tapThreshold:TAP_THRESHOLD, swipeThreshold:SWIPE_THRESHOLD, swipeFriction:0.1, swipeTransitionDuration:300};GridManager.init(options, done);});teardown(function(){mocksHelper.teardown();wrapperNode.parentNode.removeChild(wrapperNode);});function sendTouchEvent(type, node, coords){if(typeof document.createTouch=== 'function'){var touch=document.createTouch(window, node, 1, coords.x, coords.y, coords.x, coords.y);var touchList=document.createTouchList(touch);var evt=document.createEvent('TouchEvent');evt.initTouchEvent(type, true, true, window, 0, false, false, false, false, touchList, touchList, touchList);node.dispatchEvent(evt);}}function sendMouseEvent(type, node, coords){var evt=document.createEvent('MouseEvent');evt.initMouseEvent(type, true, true, window, 0, coords.x, coords.y, coords.x, coords.y, false, false, false, false, 0, null);containerNode.dispatchEvent(evt);}function ensurePanningSuite(){suite('ensurePanning &gt;', function(){var realRequestAnimationFrame;suiteSetup(function(){realRequestAnimationFrame=window.mozRequestAnimationFrame;window.mozRequestAnimationFrame=function(func){setTimeout(function(){func();});};});setup(function(){GridManager.ensurePanning();MockPage.mTeardown();});suiteTeardown(function(){window.mozRequestAnimationFrame=realRequestAnimationFrame;realRequestAnimationFrame=null;});test('should not be able to pan if user is on landing page', function(){this.sinon.useFakeTimers();var start={x:100, y:100};var move={x:200, y:100};sendTouchEvent('touchstart', containerNode, start);sendMouseEvent('mousedown', containerNode, start);sendTouchEvent('touchmove', containerNode, move);sendMouseEvent('mousemove', containerNode, move);assert.equal(document.body.dataset.transitioning, 'true');this.sinon.clock.tick();var currentPage=document.getElementById('landing&#45;page');assert.equal(currentPage.style.MozTransform, '');sendTouchEvent('touchend', containerNode, move);sendMouseEvent('mouseup', containerNode, move);});});}ensurePanningSuite();suite('ensureTapping &gt;', function(){var page, icons=[];function createIcons(num){for(var i=0;i&lt; num;i++){var icon=(new MockIcon()).render();icons.push(icon);page.appendChild(icon);}}function removeIcons(){icons.forEach(function(icon){page.removeChild(icon);});}suiteSetup(function(){page=wrapperNode.querySelector('.page');createIcons(2);});suiteTeardown(function(){removeIcons();});test('Clicking on an icon &gt; it should be active ', function(){this.sinon.useFakeTimers();var icon=icons[0];var rect=icon.getBoundingClientRect();var point={x:rect.left+1, y:rect.top+1};sendTouchEvent('touchstart', icon, point);sendMouseEvent('mousedown', icon, point);assert.isTrue(icon.classList.contains('active'));this.sinon.clock.tick();sendTouchEvent('touchend', containerNode, point);sendMouseEvent('mouseup', containerNode, point);assert.isFalse(icon.classList.contains('active'));});test('Clicking two icons at the same time &gt; just one is active ', function(){this.sinon.useFakeTimers();var icon1=icons[0];var icon2=icons[1];var rect=icon1.getBoundingClientRect();var point1={x:rect.left+1, y:rect.top+1};sendTouchEvent('touchstart', icon1, point1);sendMouseEvent('mousedown', icon1, point1);rect=icon2.getBoundingClientRect();var point2={x:rect.left+1, y:rect.top+1};assert.isTrue(icon1.classList.contains('active'));sendTouchEvent('touchstart', icon2, point2);sendMouseEvent('mousedown', icon2, point2);assert.isFalse(icon1.classList.contains('active'));assert.isTrue(icon2.classList.contains('active'));this.sinon.clock.tick();sendTouchEvent('touchend', containerNode, point2);sendMouseEvent('mouseup', containerNode, point2);assert.isFalse(icon1.classList.contains('active'));assert.isFalse(icon2.classList.contains('active'));});});suite('onDragStart &gt;', function(){setup(function(){GridManager.onDragStart();});ensurePanningSuite();});suite('install app &gt;', function(){var mockApp;setup(function(done){MockHomeState.mLastSavedGrid=null;mockApp=new MockApp();MockAppsMgmt.mTriggerOninstall(mockApp);setTimeout(done.bind(null, undefined), SAVE_STATE_WAIT_TIMEOUT);});test('should save the state', function(){assert.ok(MockHomeState.mLastSavedGrid);});suite('updating app &gt;', function(){setup(function(done){MockHomeState.mLastSavedGrid=null;mockApp.mTriggerDownloadApplied();setTimeout(done.bind(null, undefined), SAVE_STATE_WAIT_TIMEOUT);});test('should save the state', function(){assert.ok(MockHomeState.mLastSavedGrid);});});});suite('install single variant apps &gt;', function(){var prevMaxIconNumber;suiteSetup(function(){prevMaxIconNumber=MockPage.prototype.mMAX_ICON_NUMBER;MockPage.prototype.mMAX_ICON_NUMBER=3;});suiteTeardown(function(){MockPage.prototype.mMAX_ICON_NUMBER=prevMaxIconNumber;});var mockAppSV;var svApps=[{ 'screen':1, 'manifest': 'https: 'location':15},{ 'screen':2, 'manifest': 'https: 'location':6},{ 'screen':2, 'manifest': 'https: 'location':0}];svApps.forEach((function(svApp){test('Should save the icon with desiredPos in the correct page', function(done){Configurator.mSimPresentOnFirstBoot=true;MockHomeState.mLastSavedGrid=null;mockAppSV=new MockApp({'manifestURL':svApp.manifest});MockAppsMgmt.mTriggerOninstall(mockAppSV);setTimeout(function(){var grd=MockHomeState.mLastSavedGrid;assert.ok(grd, 'Grid is not set');assert.equal(grd.length, svApp.screen+2, 'Grid does not have the right number of screens');assert.equal(grd[svApp.screen].index, svApp.screen, 'App was not installed on the correct screen');assert.ok(grd[svApp.screen].icons, 'The screen does not have a icons structure');var icns=grd[svApp.screen+1].icons[0];assert.ok(icns, 'The screen does not have any icons');assert.isTrue(icns.desiredPos!==undefined, 'The single variant app does not have a desiredPos');assert.equal(icns.desiredPos, svApp.location, 'App does not have the correct DesiredPosition');done();}, SAVE_STATE_WAIT_TIMEOUT);});}));});suite('install single variant apps without SIM on first run &gt;', function(){var prevMaxIconNumber;var mockAppSV;suiteSetup(function(){prevMaxIconNumber=MockPage.prototype.mMAX_ICON_NUMBER;MockPage.prototype.mMAX_ICON_NUMBER=3;MockHomeState.mUseTestGrids=true;});suiteTeardown(function(){MockPage.prototype.mMAX_ICON_NUMBER=prevMaxIconNumber;MockHomeState.mUseTestGrids=false;});var testCases=[{ 'name': 'One grid with space', 'manifest': 'https: 'expectedPage':2, 'expectedNumberOfPages':4},{ 'name': 'One grid without space', 'manifest': 'https: 'expectedPage':3, 'expectedNumberOfPages':4},{ 'name': '1st grid with space, 2nd without space', 'manifest': 'https: 'expectedPage':4, 'expectedNumberOfPages':5},{ 'name': '1st and 3rd with space, 2nd without it', 'manifest': 'https: 'expectedPage':4, 'expectedNumberOfPages':6}];testCases.forEach(function(testCase){test('Should save the icon with desiredPos in the first page with space:'+testCase.name, function(done){Configurator.mSimPresentOnFirstBoot=false;mockAppSV=new MockApp({'manifestURL':testCase.manifest});MockAppsMgmt.mTriggerOninstall(mockAppSV);setTimeout(function(){var grd=MockHomeState.mLastSavedGrid;var expectedPage=grd[testCase.expectedPage];assert.ok(grd, 'Grid is not set');assert.equal(grd.length, testCase.expectedNumberOfPages, 'Grid does not have the right number of screens');assert.ok(expectedPage, 'The expected screen does not exist');assert.ok(expectedPage.icons &amp;&amp;expectedPage.icons[0], 'The screen does not have a icons structure');var expectedIcon=expectedPage &amp;&amp;expectedPage.icons &amp;&amp;expectedPage.icons[expectedPage.icons.length&#45;1];assert.equal(expectedIcon.manifestURL, testCase.manifest, 'App was not installed on the correct screen');done();}, SAVE_STATE_WAIT_TIMEOUT);});});});suite('#getApps &gt;', function(){var manifests=[{role: 'app'},{role: 'keyboard'},{role: 'app', entry_points:{ 'dialer':{ 'icons':{}}, 'contacts':{ 'icons':{}}}}];setup(function(done){manifests.forEach(function(manifest, idx){GridManager.install(new MockApp({origin: 'fake'+idx, manifest:manifest}));});GridManager.install(new MockApp({origin: 'updateManifestOnly', manifest:undefined, updateManifest:{role: 'keyboard'}}));setTimeout(done.bind(null, undefined), SAVE_STATE_WAIT_TIMEOUT);});test('returns all apps', function(){var allApps=GridManager.getApps();assert.equal(allApps.length, 4);});test('filters apps', function(){var visibleApps=GridManager.getApps(false, true);assert.equal(visibleApps.length, 2);});test('flattens entry points', function(){var allApps=GridManager.getApps(true);assert.equal(allApps.length, 5);});test('filters and flattens entry points', function(){var visibleApps=GridManager.getApps(true, true);assert.equal(visibleApps.length, 3);});});})" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a> </td>
          <td>(</td>
          <td class="paramtype">'grid.&#160;</td>
          <td class="paramname"><em>js</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">'&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="a7d12cbb16035653dd6d39710f4979452"></a><!-- doxytag: member="grid_test.js::mocksHelperForGrid" ref="a7d12cbb16035653dd6d39710f4979452" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d7/d15/grid__test_8js.html#a7d12cbb16035653dd6d39710f4979452">mocksHelperForGrid</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>初期値:</b><div class="fragment"><pre class="fragment"> <span class="keyword">new</span> <a class="code" href="../../d1/d67/apps_2communications_2test_2unit_2mocks__helper_8js.html#ac677357b5a0ce4a59a54e9a0a861f480">MocksHelper</a>([
  <span class="stringliteral">&#39;DockManager&#39;</span>,
  <span class="stringliteral">&#39;HomeState&#39;</span>,
  <span class="stringliteral">&#39;Page&#39;</span>,
  <span class="stringliteral">&#39;Dock&#39;</span>,
  <span class="stringliteral">&#39;Icon&#39;</span>,
  <span class="stringliteral">&#39;IconRetriever&#39;</span>,
  <span class="stringliteral">&#39;TemplateIcon&#39;</span>,
  <span class="stringliteral">&#39;PaginationBar&#39;</span>,
  <span class="stringliteral">&#39;Configurator&#39;</span>,
  <span class="stringliteral">&#39;HIDDEN_APPS&#39;</span>,
  <span class="stringliteral">&#39;ManifestHelper&#39;</span>,
  <span class="stringliteral">&#39;getDefaultIcon&#39;</span>,
  <span class="stringliteral">&#39;Configurator&#39;</span>
])
</pre></div>
<p> <a class="el" href="../../d7/d15/grid__test_8js_source.html">grid_test.js</a> の <a class="el" href="../../d7/d15/grid__test_8js_source.html#l00024">24</a> 行で定義されています。</p>

</div>
</div>
<a class="anchor" id="ae2475e10618961c050dcba04e8c42331"></a><!-- doxytag: member="grid_test.js::strict" ref="ae2475e10618961c050dcba04e8c42331" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d1b/test-agent-server_8js.html#aab71dcc804ca4aa3ed2bf7ba887635db">use</a> <a class="el" href="../../de/dc5/jsfriendapi_8h.html#a8cddd7ed2617ebace48da2e8e44f267c">strict</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d7/d15/grid__test_8js_source.html">grid_test.js</a> の <a class="el" href="../../d7/d15/grid__test_8js_source.html#l00001">1</a> 行で定義されています。</p>

</div>
</div>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全て</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>データ構造</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>ネームスペース</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>ファイル</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>関数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>変数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>型定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>列挙型</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>列挙型の値</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>フレンド</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>マクロ定義</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../d7/d15/grid__test_8js.html">grid_test.js</a>      </li>

    <li class="footer">FxOS Code Readingに対してSat Oct 19 2013 00:56:01に生成されました。
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
