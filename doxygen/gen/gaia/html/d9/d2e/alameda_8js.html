<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>FxOS Code Reading: alameda.js</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">FxOS Code Reading
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- 作成： Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'検索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>メインページ</span></a></li>
      <li><a href="../../pages.html"><span>関連ページ</span></a></li>
      <li><a href="../../modules.html"><span>モジュール</span></a></li>
      <li><a href="../../namespaces.html"><span>パッケージ</span></a></li>
      <li><a href="../../annotated.html"><span>データ構造</span></a></li>
      <li class="current"><a href="../../files.html"><span>ファイル</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>ファイル一覧</span></a></li>
      <li><a href="../../globals.html"><span>グローバル</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('d9/d2e/alameda_8js.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#var-members">変数</a>  </div>
  <div class="headertitle">
<div class="title">alameda.js</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="../../d9/d2e/alameda_8js_source.html">ソースコードを見る。</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="var-members"></a>
変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d2e/alameda_8js.html#a44c2a92e377407b0af593e79fa27596f">requirejs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d2e/alameda_8js.html#a4b4eb847520ff4e45de16db801e26133">require</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d2e/alameda_8js.html#a8a3a5595e65e7e2a2cf64c08ba74833f">define</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d2e/alameda_8js.html#a57efe929cc6b44042891d05e15cec785">global</a></td></tr>
</table>
<hr/><h2>変数</h2>
<a class="anchor" id="a8a3a5595e65e7e2a2cf64c08ba74833f"></a><!-- doxytag: member="alameda.js::define" ref="a8a3a5595e65e7e2a2cf64c08ba74833f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d14/build__stage_2email_2js_2mix_8js.html#ae57540f837ee76af1c71776a8f46ae53">define</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>初期値:</b><div class="fragment"><pre class="fragment"> (<a class="code" href="../../da/d7d/cook_8js.html#a65ab37df1aa3fe0eb3d8e51a835fb617">result</a>[1] === <span class="stringliteral">&#39;NIL&#39;</span>
                          ? <span class="keyword">false</span>
                          : <a class="code" href="../../da/d7d/cook_8js.html#a65ab37df1aa3fe0eb3d8e51a835fb617">result</a>[1].substring(1, <a class="code" href="../../da/d7d/cook_8js.html#a65ab37df1aa3fe0eb3d8e51a835fb617">result</a>[1].<a class="code" href="../../d3/d91/j3d_8js.html#a3f87557d7488bfe7545844c394baa854">length</a> - 1))
</pre></div><p>Implements the ActiveSync protocol for Hotmail and Exchange.</p>
<p>Configurator for activesync</p>
<p>Abstractions for dealing with the various mutation operations.</p>
<p>NB: Moves discussion is speculative at this point; we are just thinking things through for architectural implications.</p>
<p>== Speculative Operations ==</p>
<p>We want our UI to update as soon after requesting an operation as possible. To this end, we have logic to locally apply queued mutation operations. Because we may want to undo operations when we are offline (and have not been able to talk to the server), we also need to be able to reflect these changes locally independent of telling the server.</p>
<p>In the case of moves/copies, we issue a(n always locally created) id for the message immediately and just set the server UID (srvid) to 0 to be populated by the sync process.</p>
<p>== Data Integrity ==</p>
<p>Our strategy is always to avoid server data-loss, so data-destruction actions must always take place after successful confirmation of persistence actions. (Just keeping the data in-memory is not acceptable because we could crash, etc.)</p>
<p>This is in contrast to our concern about losing simple, frequently performed idempotent user actions in a crash. We assume that A) crashes will be rare, B) the user will not be surprised or heart-broken if a message they marked read a second before a crash needs to manually be marked read after restarting the app/device, and C) there are performance/system costs to saving the state which makes this a reasonable trade-off.</p>
<p>It is also our strategy to avoid cluttering up the place as a side-effect of half-done things. For example, if we are trying to move N messages, but only copy N/2 because of a timeout, we want to make sure that we don't naively retry and then copy those first N/2 messages a second time. This means that we track sub-steps explicitly, and that operations that we have issued and may or may not have been performed by the server will be checked before they are re-attempted. (Although IMAP batch operations are atomic, and our IndexedDB commits are atomic, they are atomic independent of each other and so we could have been notified that the copy completed but not persisted the fact to our database.)</p>
<p>In the event we restore operations from disk that were enqueued but apparently not run, we compel them to run a check operation before they are performed because it's possible (depending on the case) for us to have run them without saving the account state first. This is a trade-off between the cost of checking and the cost of issuing commits to the database frequently based on the expected likelihood of a crash on our part. Per comments above, we expect crashes to be rare and not particularly correlated with operations, so it's better for the device (both flash and performance) if we don't continually checkpoint our state.</p>
<p>All non-idempotent operations / operations that could result in data loss or duplication require that we save our account state listing the operation. In the event of a crash, this allows us to know that we have to check the state of the operation for completeness before attempting to run it again and allowing us to finish half-done things. For particular example, because moves consist of a copy followed by flagging a message deleted, it is of the utmost importance that we don't get in a situation where we have copied the messages but not deleted them and we crash. In that case, if we failed to persist our plans, we will have duplicated the message (and the IMAP server would have no reason to believe that was not our intent.)</p>
<p>Configurator for fake</p>
<p>Configurator for imap+smtp</p>
<p>Validates connection information for an account and verifies the server on the other end is something we are capable of sustaining an account with. Before growing this logic further, first try reusing/adapting/porting the Thunderbird autoconfiguration logic.</p>
<p>Look like node's Buffer implementation as far as our current callers require using typed arrays. Derived from the node.js implementation as copied out of the node-browserify project.</p>
<p>Be careful about assuming the meaning of encoders and decoders here; we are using the nomenclature of the StringEncoding spec. So:</p>
<ul>
<li>encode: <a class="el" href="../../da/d7b/namespace_j_s.html">JS</a> String --&gt; ArrayBufferView</li>
<li>decode: ArrayBufferView ---&gt; <a class="el" href="../../da/d7b/namespace_j_s.html">JS</a> String</li>
</ul>
<p>Do the required global namespace clobbering for our node binding friends.</p>
<p>Exception transformation/normalization logic from the soon-to-be-dead jstut "esther" speculative test framework. (Loggest and ArbPL are descended replacements for it.)</p>
<p>This defines a "defineStackTrace" method on Error as a side-effect which means no one else but us is allowed to try that trick. It's unclear what impact this has on the node default handlers... although I'm sure it will become obvious real quick.</p>
<p>Provides a wrapper over the mozApps.getSelf() API. Structured as an evt emitter, with "latest" support, and "latest" is overridden so that the call to getSelf() is delayed until the very first need for it.</p>
<p>This allows code to have a handle on this module, instead of making the getSelf() call, and then only trigger the fetch via a call to latest, delaying the work until it is actually needed. Once getSelf() is fetched once, the result is reused.</p>
<p>UI infrastructure code and utility code for the gaia email app.</p>
<p>This file provides a MessageListTopbar which is a little notification bar that tells the user how many new emails they've received after a sync.</p>
<p>This library exposes a `navigator.mozL10n' object to handle client-side application localization. See: <a href="https://github.com/fabi1cazenave/webL10n">https://github.com/fabi1cazenave/webL10n</a> </p>

<p> <a class="el" href="../../d9/d2e/alameda_8js_source.html">alameda.js</a> の <a class="el" href="../../d9/d2e/alameda_8js_source.html#l00011">11</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/dfe/test-agent_2common_2vendor_2chai_2chai_8js_source.html#l00001">!function()</a>, と <a class="el" href="../../d8/dad/apps_2email_2js_2ext_2mailapi_2chewlayer_8js_source.html#l01854">if()</a>.</p>

</div>
</div>
<a class="anchor" id="a57efe929cc6b44042891d05e15cec785"></a><!-- doxytag: member="alameda.js::global" ref="a57efe929cc6b44042891d05e15cec785" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d2/d7d/jsapi_8h.html#a5363025b2c2d773292f0f064aeb11f9e">global</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d9/d2e/alameda_8js_source.html">alameda.js</a> の <a class="el" href="../../d9/d2e/alameda_8js_source.html#l00012">12</a> 行で定義されています。</p>

</div>
</div>
<a class="anchor" id="a4b4eb847520ff4e45de16db801e26133"></a><!-- doxytag: member="alameda.js::require" ref="a4b4eb847520ff4e45de16db801e26133" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d9/d2e/alameda_8js_source.html">alameda.js</a> の <a class="el" href="../../d9/d2e/alameda_8js_source.html#l00011">11</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d5/d46/server_8js_source.html#l00031">create()</a>, <a class="el" href="../../d3/d5d/server__helper_8js_source.html#l00044">determineServer()</a>, <a class="el" href="../../d8/dad/apps_2email_2js_2ext_2mailapi_2chewlayer_8js_source.html#l01854">if()</a>, と <a class="el" href="../../d6/dec/mocha-bin_8js_source.html#l00008">MochaBin()</a>.</p>

</div>
</div>
<a class="anchor" id="a44c2a92e377407b0af593e79fa27596f"></a><!-- doxytag: member="alameda.js::requirejs" ref="a44c2a92e377407b0af593e79fa27596f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/dfe/build__stage_2email_2js_2mail__app_8js.html#a067a7b9ee40ddc7b686e317059f7dfaf">requirejs</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>alameda 0.0.6 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved. Available via the MIT or new BSD license. see: <a href="http://github.com/requirejs/alameda">http://github.com/requirejs/alameda</a> for details </p>

<p> <a class="el" href="../../d9/d2e/alameda_8js_source.html">alameda.js</a> の <a class="el" href="../../d9/d2e/alameda_8js_source.html#l00011">11</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d9/d44/apps_2email_2js_2mail__app_8js_source.html#l00010">if()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全て</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>データ構造</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>ネームスペース</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>ファイル</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>関数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>変数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>型定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>列挙型</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>列挙型の値</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>フレンド</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>マクロ定義</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../d9/d2e/alameda_8js.html">alameda.js</a>      </li>

    <li class="footer">FxOS Code Readingに対してSat Oct 19 2013 00:55:42に生成されました。
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
