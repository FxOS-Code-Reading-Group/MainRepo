<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>FxOS Code Reading: permissiontest.js</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">FxOS Code Reading
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- 作成： Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'検索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>メインページ</span></a></li>
      <li><a href="../../pages.html"><span>関連ページ</span></a></li>
      <li><a href="../../modules.html"><span>モジュール</span></a></li>
      <li><a href="../../namespaces.html"><span>パッケージ</span></a></li>
      <li><a href="../../annotated.html"><span>データ構造</span></a></li>
      <li class="current"><a href="../../files.html"><span>ファイル</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>ファイル一覧</span></a></li>
      <li><a href="../../globals.html"><span>グローバル</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('d1/de3/permissiontest_8js.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">関数</a> &#124;
<a href="#var-members">変数</a>  </div>
  <div class="headertitle">
<div class="title">permissiontest.js</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="../../d1/de3/permissiontest_8js_source.html">ソースコードを見る。</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
関数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/de3/permissiontest_8js.html#a7d716b8bfc466d57d6379fe1a0acf62e">addText</a> (elem, <a class="el" href="../../dd/dfa/classtext.html">text</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/de3/permissiontest_8js.html#adde9673822d8eb83ce4eee351cee5bb0">createElementAt</a> (mainBody, <a class="el" href="../../de/d81/xpt__struct_8h.html#ac827fa5fbcdd05dd9ed05984a80679b8">type</a>, <a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a>, optionalText, before)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/de3/permissiontest_8js.html#ac2824c912994dff733598deacc1a24db">testPermissions</a> (outputElement)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/de3/permissiontest_8js.html#ab443e17f561ad63787c2fb2210245b96">togglePermission</a> (<a class="el" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a>, perm, item)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d1b/test-agent-server_8js.html#aab71dcc804ca4aa3ed2bf7ba887635db">use</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/de3/permissiontest_8js.html#ae2475e10618961c050dcba04e8c42331">strict</a></td></tr>
</table>
<hr/><h2>関数</h2>
<a class="anchor" id="a7d716b8bfc466d57d6379fe1a0acf62e"></a><!-- doxytag: member="permissiontest.js::addText" ref="a7d716b8bfc466d57d6379fe1a0acf62e" args="(elem, text)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d1/de3/permissiontest_8js.html#a7d716b8bfc466d57d6379fe1a0acf62e">addText</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>elem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d1/de3/permissiontest_8js_source.html">permissiontest.js</a> の <a class="el" href="../../d1/de3/permissiontest_8js_source.html#l00007">7</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../dd/d64/apps_2email_2js_2ext_2mailapi_2worker-bootstrap_8js_source.html#l01348">document</a>.</p>

<p>参照元 <a class="el" href="../../d1/de3/permissiontest_8js_source.html#l00011">createElementAt()</a>.</p>
<div class="fragment"><pre class="fragment">                            {
    elem.appendChild(<a class="code" href="../../dd/d64/apps_2email_2js_2ext_2mailapi_2worker-bootstrap_8js.html#af61dbe660d8213297c7fed5b5c99d223">document</a>.createTextNode(<a class="code" href="../../dd/dfa/classtext.html">text</a>));
}
</pre></div>
<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/de3/permissiontest_8js_a7d716b8bfc466d57d6379fe1a0acf62e_icgraph.svg" width="414" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="adde9673822d8eb83ce4eee351cee5bb0"></a><!-- doxytag: member="permissiontest.js::createElementAt" ref="adde9673822d8eb83ce4eee351cee5bb0" args="(mainBody, type, id, optionalText, before)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d1/de3/permissiontest_8js.html#adde9673822d8eb83ce4eee351cee5bb0">createElementAt</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mainBody</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>optionalText</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>before</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d1/de3/permissiontest_8js_source.html">permissiontest.js</a> の <a class="el" href="../../d1/de3/permissiontest_8js_source.html#l00011">11</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d1/de3/permissiontest_8js_source.html#l00007">addText()</a>, <a class="el" href="../../dd/d64/apps_2email_2js_2ext_2mailapi_2worker-bootstrap_8js_source.html#l01348">document</a>, と <a class="el" href="../../df/d44/permission__manager_8js_source.html#l00145">type</a>.</p>

<p>参照元 <a class="el" href="../../d1/de3/permissiontest_8js_source.html#l00028">testPermissions()</a>.</p>
<div class="fragment"><pre class="fragment">                                                               {
    var elem=<a class="code" href="../../dd/d64/apps_2email_2js_2ext_2mailapi_2worker-bootstrap_8js.html#af61dbe660d8213297c7fed5b5c99d223">document</a>.createElement(<a class="code" href="../../df/d44/permission__manager_8js.html#a5996578fe734dff3d2912807ee458e83">type</a>);
    elem.setAttribute(<span class="stringliteral">&quot;id&quot;</span>,<span class="keywordtype">id</span>);
    <span class="keywordflow">if</span> (!before) {
        mainBody.appendChild(elem);
    } <span class="keywordflow">else</span> {
        mainBody.insertBefore(elem,before);
    }
    <span class="keywordflow">if</span> (optionalText) {
        <a class="code" href="../../d1/de3/permissiontest_8js.html#a7d716b8bfc466d57d6379fe1a0acf62e">addText</a>(elem,optionalText);
    }
    <span class="keywordflow">return</span> elem;
}
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/de3/permissiontest_8js_adde9673822d8eb83ce4eee351cee5bb0_cgraph.svg" width="248" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/de3/permissiontest_8js_adde9673822d8eb83ce4eee351cee5bb0_icgraph.svg" width="296" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac2824c912994dff733598deacc1a24db"></a><!-- doxytag: member="permissiontest.js::testPermissions" ref="ac2824c912994dff733598deacc1a24db" args="(outputElement)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d1/de3/permissiontest_8js.html#ac2824c912994dff733598deacc1a24db">testPermissions</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>outputElement</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d1/de3/permissiontest_8js_source.html">permissiontest.js</a> の <a class="el" href="../../d1/de3/permissiontest_8js_source.html#l00028">28</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d1/d04/app__install__manager_8js_source.html#l00536">app</a>, <a class="el" href="../../d1/de3/permissiontest_8js_source.html#l00011">createElementAt()</a>, <a class="el" href="../../da/d7d/sylvester_8js_source.html#l00308">i</a>, <a class="el" href="../../da/d7d/sylvester_8js_source.html#l00309">j</a>, <a class="el" href="../../d0/d94/tools_2xpcwindow_2lib_2loader_8js_source.html#l00043">navigator</a>, と <a class="el" href="../../d1/de3/permissiontest_8js_source.html#l00099">togglePermission()</a>.</p>
<div class="fragment"><pre class="fragment">                                        {
  var _permissions = [
    <span class="stringliteral">&#39;power&#39;</span>, <span class="stringliteral">&#39;sms&#39;</span>, <span class="stringliteral">&#39;contacts&#39;</span>, <span class="stringliteral">&#39;telephony&#39;</span>, <span class="stringliteral">&#39;browser&#39;</span>,
    <span class="stringliteral">&#39;mozApps&#39;</span>, <span class="stringliteral">&#39;mobileconnection&#39;</span>, <span class="stringliteral">&#39;mozFM&#39;</span>, <span class="stringliteral">&#39;systemXHR&#39;</span>, <span class="stringliteral">&#39;background&#39;</span>,
    <span class="stringliteral">&#39;backgroundservice&#39;</span>, <span class="stringliteral">&#39;settings&#39;</span>, <span class="stringliteral">&#39;alarm&#39;</span>, <span class="stringliteral">&#39;camera&#39;</span>, <span class="stringliteral">&#39;fmradio&#39;</span>, <span class="stringliteral">&#39;voicemail&#39;</span>,
    <span class="stringliteral">&#39;wifi-manage&#39;</span>, <span class="stringliteral">&#39;wifi&#39;</span>, <span class="stringliteral">&#39;networkstats-manage&#39;</span>, <span class="stringliteral">&#39;geolocation&#39;</span>,
    <span class="stringliteral">&#39;webapps-manage&#39;</span>, <span class="stringliteral">&#39;permissions&#39;</span>, <span class="stringliteral">&#39;desktop-notification&#39;</span>,
    <span class="stringliteral">&#39;device-storage:pictures&#39;</span>, <span class="stringliteral">&#39;device-storage:music&#39;</span>, <span class="stringliteral">&#39;device-storage:videos&#39;</span>,
    <span class="stringliteral">&#39;device-storage:apps&#39;</span>, <span class="stringliteral">&#39;alarms&#39;</span>, <span class="stringliteral">&#39;attention&#39;</span>, <span class="stringliteral">&#39;content-camera&#39;</span>,
    <span class="stringliteral">&#39;tcp-socket&#39;</span>, <span class="stringliteral">&#39;bluetooth&#39;</span>, <span class="stringliteral">&#39;storage&#39;</span>, <span class="stringliteral">&#39;time&#39;</span>, <span class="stringliteral">&#39;networkstats-manager&#39;</span>,
    <span class="stringliteral">&#39;idle&#39;</span>, <span class="stringliteral">&#39;network-events&#39;</span>, <span class="stringliteral">&#39;embed-apps&#39;</span>,
    <span class="comment">// Just don&#39;t.</span>
    <span class="stringliteral">&#39;deprecated-hwvideo&#39;</span>
  ];
  
  var mozPerms = <a class="code" href="../../d0/d94/tools_2xpcwindow_2lib_2loader_8js.html#a1ab79c9277f7648d0dfe676bab65dde4">navigator</a>.mozPermissionSettings;
  <span class="keywordflow">if</span> (!mozPerms) {
    <a class="code" href="../../d1/de3/permissiontest_8js.html#adde9673822d8eb83ce4eee351cee5bb0">createElementAt</a>(outputElement,<span class="stringliteral">&quot;p&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;I can&#39;t access mozPermissionSettings!&quot;</span>);
    <span class="keywordflow">return</span>;
  }

  <a class="code" href="../../d0/d94/tools_2xpcwindow_2lib_2loader_8js.html#a1ab79c9277f7648d0dfe676bab65dde4">navigator</a>.mozApps.mgmt.getAll().onsuccess = <span class="keyword">function</span> mozAppGotAll(evt) {
    var apps = evt.target.result;
  
    apps.sort(<span class="keyword">function</span> alphabeticalSort(<a class="code" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a>, otherApp) {
      <span class="keywordflow">return</span> <a class="code" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a>.manifest.name &gt; otherApp.manifest.name;
    });


    <span class="comment">// We display permissions declared in the manifest</span>
    <span class="comment">// and any other granted permission. I should see how forEach works some time.</span>
    <span class="comment">// Some OTHER time</span>
    <a class="code" href="../../d1/de3/permissiontest_8js.html#adde9673822d8eb83ce4eee351cee5bb0">createElementAt</a>(outputElement,<span class="stringliteral">&quot;p&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,
                    <span class="stringliteral">&quot;List of application permissions below. &quot;</span>+
                    <span class="stringliteral">&quot;Click on any permission to toggle its value.&quot;</span>);
    <a class="code" href="../../d1/de3/permissiontest_8js.html#adde9673822d8eb83ce4eee351cee5bb0">createElementAt</a>(outputElement,<span class="stringliteral">&quot;p&quot;</span>,<span class="stringliteral">&quot;&quot;</span>, 
                    <span class="stringliteral">&quot;NOTE: Trying to toggle a implicit permission&quot;</span>+
                    <span class="stringliteral">&quot; should not work!&quot;</span>);

    var ulApps=<a class="code" href="../../d1/de3/permissiontest_8js.html#adde9673822d8eb83ce4eee351cee5bb0">createElementAt</a>(outputElement,<span class="stringliteral">&quot;ul&quot;</span>);
 
    <span class="keywordflow">for</span> (var <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>=0; <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>&lt;apps.length; <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>++) {
      var <a class="code" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a>=apps[<a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>];
      var liApp=<a class="code" href="../../d1/de3/permissiontest_8js.html#adde9673822d8eb83ce4eee351cee5bb0">createElementAt</a>(ulApps,<span class="stringliteral">&quot;li&quot;</span>);
      liApp.innerHTML=<span class="stringliteral">&quot;&lt;b&gt;&quot;</span>+app.manifest.name+<span class="stringliteral">&quot;&lt;/b&gt;&quot;</span>;
      var ulPerm=<a class="code" href="../../d1/de3/permissiontest_8js.html#adde9673822d8eb83ce4eee351cee5bb0">createElementAt</a>(ulApps,<span class="stringliteral">&quot;ul&quot;</span>);
      ulPerm.hidden=<span class="keyword">true</span>;

      liApp.onclick=<span class="keyword">function</span> () {
        arguments[0].hidden=!arguments[0].hidden;
      }.bind(undefined,ulPerm);

      <span class="keywordflow">for</span> (var <a class="code" href="../../da/d7d/sylvester_8js.html#a8a080bd96df5681d77f59f96dc5da089">j</a>=0; <a class="code" href="../../da/d7d/sylvester_8js.html#a8a080bd96df5681d77f59f96dc5da089">j</a>&lt;_permissions.length; <a class="code" href="../../da/d7d/sylvester_8js.html#a8a080bd96df5681d77f59f96dc5da089">j</a>++) {
        var perm=_permissions[<a class="code" href="../../da/d7d/sylvester_8js.html#a8a080bd96df5681d77f59f96dc5da089">j</a>];
        var <a class="code" href="../../d9/d04/expat_8h.html#aebafa8f4412854cf6c37456c71ff5ee7">value</a> = mozPerms.get(perm, app.manifestURL, app.origin, <span class="keyword">false</span>);
        <span class="keywordflow">if</span> (value !== <span class="stringliteral">&quot;unknown&quot;</span>) {
          var <span class="keyword">explicit</span> = 
            mozPerms.isExplicit(perm, app.manifestURL, app.origin, <span class="keyword">false</span>) ? 
            <span class="stringliteral">&quot;/explicit&quot;</span> :<span class="stringliteral">&quot;/implicit&quot;</span>;  
          var printValue = value + <span class="keyword">explicit</span>;
          var li=<a class="code" href="../../d1/de3/permissiontest_8js.html#adde9673822d8eb83ce4eee351cee5bb0">createElementAt</a>(ulPerm,<span class="stringliteral">&quot;li&quot;</span>,app.manifest.name+<span class="stringliteral">&quot;:&quot;</span>+perm, 
                                 perm +<span class="stringliteral">&quot;: &quot;</span>+printValue); 
          li.onclick=<span class="keyword">function</span>() {
            <a class="code" href="../../d1/de3/permissiontest_8js.html#ab443e17f561ad63787c2fb2210245b96">togglePermission</a>(arguments[0], arguments[1], arguments[2]);
          }.bind(undefined, app, perm, li);
        }
      }
    }
  };
}
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/de3/permissiontest_8js_ac2824c912994dff733598deacc1a24db_cgraph.svg" width="416" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab443e17f561ad63787c2fb2210245b96"></a><!-- doxytag: member="permissiontest.js::togglePermission" ref="ab443e17f561ad63787c2fb2210245b96" args="(app, perm, item)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d1/de3/permissiontest_8js.html#ab443e17f561ad63787c2fb2210245b96">togglePermission</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>app</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>perm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>item</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d1/de3/permissiontest_8js_source.html">permissiontest.js</a> の <a class="el" href="../../d1/de3/permissiontest_8js_source.html#l00099">99</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d1/d04/app__install__manager_8js_source.html#l00536">app</a>, <a class="el" href="../../d9/d42/caldav__worker_8js_source.html#l00018">console</a>, <a class="el" href="../../d0/d94/tools_2xpcwindow_2lib_2loader_8js_source.html#l00043">navigator</a>, <a class="el" href="../../dd/dfa/ns_i_d_o_m_storage_event_8idl_source.html#l00070">newValue</a>, と <a class="el" href="../../da/da1/timers_8js_source.html#l00015">setTimeout</a>.</p>

<p>参照元 <a class="el" href="../../d1/de3/permissiontest_8js_source.html#l00028">testPermissions()</a>.</p>
<div class="fragment"><pre class="fragment">                                         {

  var mozPerms = <a class="code" href="../../d0/d94/tools_2xpcwindow_2lib_2loader_8js.html#a1ab79c9277f7648d0dfe676bab65dde4">navigator</a>.mozPermissionSettings;
  var <a class="code" href="../../d9/d04/expat_8h.html#aebafa8f4412854cf6c37456c71ff5ee7">value</a> = mozPerms.get(perm, <a class="code" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a>.manifestURL, <a class="code" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a>.origin, <span class="keyword">false</span>);

  <a class="code" href="../../d9/d42/caldav__worker_8js.html#ac798a668e63cdb5c7af2b97ab014f85f">console</a>.log(<span class="stringliteral">&quot;Trying to change permission for &quot;</span>+<a class="code" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a>.manifest.name+
              <span class="stringliteral">&quot; perm: &quot;</span>+perm+<span class="stringliteral">&quot; Current Value: &quot;</span>+value);

  var newPerm=<span class="stringliteral">&quot;deny&quot;</span>;
  <span class="keywordflow">switch</span> ( value ) {
  <span class="keywordflow">case</span> <span class="stringliteral">&quot;deny&quot;</span>:
    newPerm = <span class="stringliteral">&quot;prompt&quot;</span>;
    <span class="keywordflow">break</span>;
  <span class="keywordflow">case</span> <span class="stringliteral">&quot;prompt&quot;</span>:
    newPerm = <span class="stringliteral">&quot;allow&quot;</span>;
    <span class="keywordflow">break</span>;
  }
  mozPerms.set(perm, newPerm, <a class="code" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a>.manifestURL, <a class="code" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a>.origin, <span class="keyword">false</span>);

  <span class="comment">// Nasty nasty suspicion</span>
  <a class="code" href="../../da/da1/timers_8js.html#a619d004395c481cc1032f1c3747a04b9">setTimeout</a>(<span class="keyword">function</span> () {
    var <a class="code" href="../../dd/dfa/ns_i_d_o_m_storage_event_8idl.html#ae2d3f872ef6de235e7800c00038a4a55">newValue</a> = mozPerms.get(perm, <a class="code" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a>.manifestURL, <a class="code" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a>.origin, <span class="keyword">false</span>);
    var <span class="keyword">explicit</span> = 
      mozPerms.isExplicit(perm, <a class="code" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a>.manifestURL, <a class="code" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a>.origin, <span class="keyword">false</span>) ? 
      <span class="stringliteral">&quot;/explicit&quot;</span> :<span class="stringliteral">&quot;/implicit&quot;</span>;  
    <a class="code" href="../../d9/d42/caldav__worker_8js.html#ac798a668e63cdb5c7af2b97ab014f85f">console</a>.log(<span class="stringliteral">&quot;After changing permission for &quot;</span>+<a class="code" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a>.manifest.name+
                <span class="stringliteral">&quot; perm: &quot;</span>+perm+<span class="stringliteral">&quot; New Value: &quot;</span>+newValue+<span class="keyword">explicit</span>);
    item.innerHTML=perm+<span class="stringliteral">&quot;: &quot;</span>+newValue+<span class="keyword">explicit</span>;
  },1000);


}
</pre></div>
<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d1/de3/permissiontest_8js_ab443e17f561ad63787c2fb2210245b96_icgraph.svg" width="299" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="ae2475e10618961c050dcba04e8c42331"></a><!-- doxytag: member="permissiontest.js::strict" ref="ae2475e10618961c050dcba04e8c42331" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d1b/test-agent-server_8js.html#aab71dcc804ca4aa3ed2bf7ba887635db">use</a> <a class="el" href="../../de/dc5/jsfriendapi_8h.html#a8cddd7ed2617ebace48da2e8e44f267c">strict</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d1/de3/permissiontest_8js_source.html">permissiontest.js</a> の <a class="el" href="../../d1/de3/permissiontest_8js_source.html#l00001">1</a> 行で定義されています。</p>

</div>
</div>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全て</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>データ構造</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>ネームスペース</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>ファイル</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>関数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>変数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>型定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>列挙型</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>列挙型の値</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>フレンド</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>マクロ定義</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../d1/de3/permissiontest_8js.html">permissiontest.js</a>      </li>

    <li class="footer">FxOS Code Readingに対してSat Oct 19 2013 00:57:41に生成されました。
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
