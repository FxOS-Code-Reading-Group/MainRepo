<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>FxOS Code Reading: Layers.h ソースファイル</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">FxOS Code Reading
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- 作成： Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'検索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>メインページ</span></a></li>
      <li><a href="../../pages.html"><span>関連ページ</span></a></li>
      <li><a href="../../modules.html"><span>モジュール</span></a></li>
      <li><a href="../../namespaces.html"><span>パッケージ</span></a></li>
      <li><a href="../../annotated.html"><span>データ構造</span></a></li>
      <li class="current"><a href="../../files.html"><span>ファイル</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>ファイル一覧</span></a></li>
      <li><a href="../../globals.html"><span>グローバル</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('d1/d49/_layers_8h.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Layers.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d1/d49/_layers_8h.html">説明を見る。</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* -*- Mode: C++; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*-</span>
<a name="l00002"></a>00002 <span class="comment"> * This Source Code Form is subject to the terms of the Mozilla Public</span>
<a name="l00003"></a>00003 <span class="comment"> * License, v. 2.0. If a copy of the MPL was not distributed with this</span>
<a name="l00004"></a>00004 <span class="comment"> * file, You can obtain one at http://mozilla.org/MPL/2.0/. */</span>
<a name="l00005"></a>00005 
<a name="l00006"></a>00006 <span class="preprocessor">#ifndef GFX_LAYERS_H</span>
<a name="l00007"></a>00007 <span class="preprocessor"></span><span class="preprocessor">#define GFX_LAYERS_H</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d50/_debug_only_8h.html">mozilla/DebugOnly.h</a>&quot;</span>
<a name="l00010"></a>00010 
<a name="l00011"></a>00011 <span class="preprocessor">#include &quot;<a class="code" href="../../d3/d16/_layers_types_8h.html">mozilla/layers/LayersTypes.h</a>&quot;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/db4/gfx_types_8h.html">gfxTypes.h</a>&quot;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/dca/gfx_a_surface_8h.html">gfxASurface.h</a>&quot;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &quot;<a class="code" href="../../db/ded/ns_region_8h.html">nsRegion.h</a>&quot;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &quot;<a class="code" href="../../dc/d42/ns_point_8h.html">nsPoint.h</a>&quot;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/dbb/ns_rect_8h.html">nsRect.h</a>&quot;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &quot;<a class="code" href="../../d0/d5a/ns_i_supports_impl_8h.html">nsISupportsImpl.h</a>&quot;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &quot;<a class="code" href="../../de/db2/ns_auto_ptr_8h.html">nsAutoPtr.h</a>&quot;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;<a class="code" href="../../db/db3/gfx3_d_matrix_8h.html">gfx3DMatrix.h</a>&quot;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/d51/gfx_color_8h.html">gfxColor.h</a>&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d06/gfx_pattern_8h.html">gfxPattern.h</a>&quot;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/db9/ns_t_array_8h.html">nsTArray.h</a>&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="../../d6/d6b/ns_thread_utils_8h.html">nsThreadUtils.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/da9/ns_style_animation_8h.html">nsStyleAnimation.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="../../d0/d53/_frame_metrics_8h.html">FrameMetrics.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="../../da/d03/2_d_8h.html">mozilla/gfx/2D.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d77/_time_stamp_8h.html">mozilla/TimeStamp.h</a>&quot;</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="keyword">class </span><a class="code" href="../../d5/dc9/classgfx_context.html">gfxContext</a>;
<a name="l00030"></a>00030 <span class="keyword">class </span>nsPaintEvent;
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="keyword">extern</span> uint8_t <a class="code" href="../../d1/d49/_layers_8h.html#afb3d1d109ab9d891896ab9ac1589659c">gLayerManagerLayerBuilder</a>;
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="keyword">namespace </span>mozilla {
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="keyword">class </span>FrameLayerBuilder;
<a name="l00037"></a>00037 <span class="keyword">class </span>WebGLContext;
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="keyword">namespace </span><a class="code" href="../../d3/d91/j3d_8js.html#ac073c982f25059138823f2cb600ddb78">gl</a> {
<a name="l00040"></a>00040 <span class="keyword">class </span>GLContext;
<a name="l00041"></a>00041 }
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="keyword">namespace </span>css {
<a name="l00044"></a>00044 <span class="keyword">class </span>ComputedTimingFunction;
<a name="l00045"></a>00045 }
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="keyword">namespace </span>layers {
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="keyword">class </span>Animation;
<a name="l00050"></a>00050 <span class="keyword">class </span>AnimationData;
<a name="l00051"></a>00051 <span class="keyword">class </span>AsyncPanZoomController;
<a name="l00052"></a>00052 <span class="keyword">class </span>CommonLayerAttributes;
<a name="l00053"></a>00053 <span class="keyword">class </span>Layer;
<a name="l00054"></a>00054 <span class="keyword">class </span>ThebesLayer;
<a name="l00055"></a>00055 <span class="keyword">class </span>ContainerLayer;
<a name="l00056"></a>00056 <span class="keyword">class </span>ImageLayer;
<a name="l00057"></a>00057 <span class="keyword">class </span>ColorLayer;
<a name="l00058"></a>00058 <span class="keyword">class </span><a class="code" href="../../d5/d28/img_i_container_8idl.html#ad87be060ab1d8022462df3fef51db8c9">ImageContainer</a>;
<a name="l00059"></a>00059 <span class="keyword">class </span>CanvasLayer;
<a name="l00060"></a>00060 <span class="keyword">class </span>ReadbackLayer;
<a name="l00061"></a>00061 <span class="keyword">class </span>ReadbackProcessor;
<a name="l00062"></a>00062 <span class="keyword">class </span>RefLayer;
<a name="l00063"></a>00063 <span class="keyword">class </span>LayerComposite;
<a name="l00064"></a>00064 <span class="keyword">class </span>ShadowableLayer;
<a name="l00065"></a>00065 <span class="keyword">class </span>ShadowLayerForwarder;
<a name="l00066"></a>00066 <span class="keyword">class </span>LayerManagerComposite;
<a name="l00067"></a>00067 <span class="keyword">class </span>SpecificLayerAttributes;
<a name="l00068"></a>00068 <span class="keyword">class </span>SurfaceDescriptor;
<a name="l00069"></a>00069 <span class="keyword">class </span>Compositor;
<a name="l00070"></a>00070 <span class="keyword">class </span>LayerComposite;
<a name="l00071"></a>00071 <span class="keyword">struct </span>TextureFactoryIdentifier;
<a name="l00072"></a>00072 <span class="keyword">struct </span>EffectMask;
<a name="l00073"></a>00073 
<a name="l00074"></a><a class="code" href="../../d1/d49/_layers_8h.html#a2ba737ea529268eeac9f3e3061791fcf">00074</a> <span class="preprocessor">#define MOZ_LAYER_DECL_NAME(n, e)                           \</span>
<a name="l00075"></a>00075 <span class="preprocessor">  virtual const char* Name() const { return n; }            \</span>
<a name="l00076"></a>00076 <span class="preprocessor">  virtual LayerType GetType() const { return e; }</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00081"></a><a class="code" href="../../df/d95/classmozilla_1_1layers_1_1_layer_user_data.html">00081</a> <span class="keyword">class </span><a class="code" href="../../df/d95/classmozilla_1_1layers_1_1_layer_user_data.html">LayerUserData</a> {
<a name="l00082"></a>00082 <span class="keyword">public</span>:
<a name="l00083"></a><a class="code" href="../../df/d95/classmozilla_1_1layers_1_1_layer_user_data.html#aa0b12b7fe4d9e377f4acca4e391a2008">00083</a>   <span class="keyword">virtual</span> <a class="code" href="../../df/d95/classmozilla_1_1layers_1_1_layer_user_data.html#aa0b12b7fe4d9e377f4acca4e391a2008">~LayerUserData</a>() {}
<a name="l00084"></a>00084 };
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 <span class="comment">/*</span>
<a name="l00087"></a>00087 <span class="comment"> * Motivation: For truly smooth animation and video playback, we need to</span>
<a name="l00088"></a>00088 <span class="comment"> * be able to compose frames and render them on a dedicated thread (i.e.</span>
<a name="l00089"></a>00089 <span class="comment"> * off the main thread where DOM manipulation, script execution and layout</span>
<a name="l00090"></a>00090 <span class="comment"> * induce difficult-to-bound latency). This requires Gecko to construct</span>
<a name="l00091"></a>00091 <span class="comment"> * some kind of persistent scene structure (graph or tree) that can be</span>
<a name="l00092"></a>00092 <span class="comment"> * safely transmitted across threads. We have other scenarios (e.g. mobile</span>
<a name="l00093"></a>00093 <span class="comment"> * browsing) where retaining some rendered data between paints is desired</span>
<a name="l00094"></a>00094 <span class="comment"> * for performance, so again we need a retained scene structure.</span>
<a name="l00095"></a>00095 <span class="comment"> *</span>
<a name="l00096"></a>00096 <span class="comment"> * Our retained scene structure is a layer tree. Each layer represents</span>
<a name="l00097"></a>00097 <span class="comment"> * content which can be composited onto a destination surface; the root</span>
<a name="l00098"></a>00098 <span class="comment"> * layer is usually composited into a window, and non-root layers are</span>
<a name="l00099"></a>00099 <span class="comment"> * composited into their parent layers. Layers have attributes (e.g.</span>
<a name="l00100"></a>00100 <span class="comment"> * opacity and clipping) that influence their compositing.</span>
<a name="l00101"></a>00101 <span class="comment"> *</span>
<a name="l00102"></a>00102 <span class="comment"> * We want to support a variety of layer implementations, including</span>
<a name="l00103"></a>00103 <span class="comment"> * a simple &quot;immediate mode&quot; implementation that doesn&#39;t retain any</span>
<a name="l00104"></a>00104 <span class="comment"> * rendered data between paints (i.e. uses cairo in just the way that</span>
<a name="l00105"></a>00105 <span class="comment"> * Gecko used it before layers were introduced). But we also don&#39;t want</span>
<a name="l00106"></a>00106 <span class="comment"> * to have bifurcated &quot;layers&quot;/&quot;non-layers&quot; rendering paths in Gecko.</span>
<a name="l00107"></a>00107 <span class="comment"> * Therefore the layers API is carefully designed to permit maximally</span>
<a name="l00108"></a>00108 <span class="comment"> * efficient implementation in an &quot;immediate mode&quot; style. See the</span>
<a name="l00109"></a>00109 <span class="comment"> * BasicLayerManager for such an implementation.</span>
<a name="l00110"></a>00110 <span class="comment"> */</span>
<a name="l00111"></a>00111 
<a name="l00112"></a>00112 <span class="keyword">static</span> <span class="keywordtype">void</span> LayerManagerUserDataDestroy(<span class="keywordtype">void</span> *<a class="code" href="../../d9/d04/expat_8h.html#aa11c5d56dba0976f16f07ea50b1999ba">data</a>)
<a name="l00113"></a>00113 {
<a name="l00114"></a>00114   <span class="keyword">delete</span> <span class="keyword">static_cast&lt;</span>LayerUserData*<span class="keyword">&gt;</span>(<a class="code" href="../../d9/d04/expat_8h.html#aa11c5d56dba0976f16f07ea50b1999ba">data</a>);
<a name="l00115"></a>00115 }
<a name="l00116"></a>00116 
<a name="l00140"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html">00140</a> <span class="keyword">class </span><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html">LayerManager</a> {
<a name="l00141"></a>00141   <a class="code" href="../../d0/d5a/ns_i_supports_impl_8h.html#a5fe430b38b26f82f23c2e59b9d70e174">NS_INLINE_DECL_REFCOUNTING</a>(<a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html">LayerManager</a>)
<a name="l00142"></a>00142 
<a name="l00143"></a>00143 <span class="keyword">public</span>:
<a name="l00144"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a590632fdc7ef9f560a01e26f2e67d0ed">00144</a>   <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a590632fdc7ef9f560a01e26f2e67d0ed">LayerManager</a>()
<a name="l00145"></a>00145     : <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a4bb4f3c5d4f20b1d41165b85c4a1fc2b">mDestroyed</a>(<a class="code" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>)
<a name="l00146"></a>00146     , <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a3c860eef7a9dcde0d9560d8dd0188e7c">mSnapEffectiveTransforms</a>(<a class="code" href="../../d7/dd2/qcmstypes_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">true</a>)
<a name="l00147"></a>00147     , <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#aff26b1adff244578a17446fc3c0a23d4">mId</a>(0)
<a name="l00148"></a>00148     , <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a30d3fcd090ad7932858cd478da3a7789">mInTransaction</a>(<a class="code" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>)
<a name="l00149"></a>00149   {
<a name="l00150"></a>00150     <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a9adb80129163eb27d670e042a48e3d54">InitLog</a>();
<a name="l00151"></a>00151   }
<a name="l00152"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#adbaf68a034f3163330d78c1837c33fe4">00152</a>   <span class="keyword">virtual</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#adbaf68a034f3163330d78c1837c33fe4">~LayerManager</a>() {}
<a name="l00153"></a>00153 
<a name="l00160"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a524807293a4bfa7cd106986471b90f02">00160</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a524807293a4bfa7cd106986471b90f02">Destroy</a>()
<a name="l00161"></a>00161   {
<a name="l00162"></a>00162     <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a4bb4f3c5d4f20b1d41165b85c4a1fc2b">mDestroyed</a> = <span class="keyword">true</span>;
<a name="l00163"></a>00163     <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a44929a99eef089a2095a4ec23cb7a4a8">mUserData</a>.<a class="code" href="../../d1/db5/classmozilla_1_1gfx_1_1_user_data.html#a633dc0b071892903c6756c742c025913">Destroy</a>();
<a name="l00164"></a>00164     <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a809fbe0520a12b3caa768d65c21b9545">mRoot</a> = <span class="keyword">nullptr</span>;
<a name="l00165"></a>00165   }
<a name="l00166"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a77f23461478d953b02f33df778a61856">00166</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a77f23461478d953b02f33df778a61856">IsDestroyed</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a4bb4f3c5d4f20b1d41165b85c4a1fc2b">mDestroyed</a>; }
<a name="l00167"></a>00167 
<a name="l00168"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ace4a1e55c80083bbc675b9239830bbea">00168</a>   <span class="keyword">virtual</span> <a class="code" href="../../d5/d64/classmozilla_1_1layers_1_1_shadow_layer_forwarder.html">ShadowLayerForwarder</a>* <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ace4a1e55c80083bbc675b9239830bbea">AsShadowForwarder</a>()
<a name="l00169"></a>00169   { <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; }
<a name="l00170"></a>00170 
<a name="l00171"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a29a534d61d0a8f6169606077d8046a54">00171</a>   <span class="keyword">virtual</span> <a class="code" href="../../da/d0a/classmozilla_1_1layers_1_1_layer_manager_composite.html">LayerManagerComposite</a>* <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a29a534d61d0a8f6169606077d8046a54">AsLayerManagerComposite</a>()
<a name="l00172"></a>00172   { <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; }
<a name="l00173"></a>00173 
<a name="l00178"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ad2114c8435a1745fdfea6b4f1d8b78bf">00178</a>   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ad2114c8435a1745fdfea6b4f1d8b78bf">IsWidgetLayerManager</a>() { <span class="keywordflow">return</span> <span class="keyword">true</span>; }
<a name="l00179"></a>00179 
<a name="l00186"></a>00186   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#aa501143f24eee73cecc2450a8bc5b6b6">BeginTransaction</a>() = 0;
<a name="l00194"></a>00194   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a55a9ab2dc446a1be430744c8b5944e2a">BeginTransactionWithTarget</a>(<a class="code" href="../../d5/dc9/classgfx_context.html">gfxContext</a>* aTarget) = 0;
<a name="l00195"></a>00195 
<a name="l00196"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a61e93c03ffc7ad87999edda2918816bf">00196</a>   <span class="keyword">enum</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a61e93c03ffc7ad87999edda2918816bf">EndTransactionFlags</a> {
<a name="l00197"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a61e93c03ffc7ad87999edda2918816bfab9c4a801df56a05f65e24a062ceafbf0">00197</a>     <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a61e93c03ffc7ad87999edda2918816bfab9c4a801df56a05f65e24a062ceafbf0">END_DEFAULT</a> = 0,
<a name="l00198"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a61e93c03ffc7ad87999edda2918816bfabfd2ad1a16981c3e3cc59717c972dbc4">00198</a>     <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a61e93c03ffc7ad87999edda2918816bfabfd2ad1a16981c3e3cc59717c972dbc4">END_NO_IMMEDIATE_REDRAW</a> = 1 &lt;&lt; 0,  <span class="comment">// Do not perform the drawing phase</span>
<a name="l00199"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a61e93c03ffc7ad87999edda2918816bfa12d75452c9aa308b19ce77cdbd74bc00">00199</a>     <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a61e93c03ffc7ad87999edda2918816bfa12d75452c9aa308b19ce77cdbd74bc00">END_NO_COMPOSITE</a> = 1 &lt;&lt; 1 <span class="comment">// Do not composite after drawing thebes layer contents.</span>
<a name="l00200"></a>00200   };
<a name="l00201"></a>00201 
<a name="l00202"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a89aaf8bdb67e3d57a753fccad6468ab4">00202</a>   <a class="code" href="../../d4/d08/classmozilla_1_1_frame_layer_builder.html">FrameLayerBuilder</a>* <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a89aaf8bdb67e3d57a753fccad6468ab4">GetLayerBuilder</a>() {
<a name="l00203"></a>00203     <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="../../d4/d08/classmozilla_1_1_frame_layer_builder.html">FrameLayerBuilder</a>*<span class="keyword">&gt;</span>(<a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a5dcb9921eee4956a92ac18b820e3f932">GetUserData</a>(&amp;<a class="code" href="../../d1/d49/_layers_8h.html#afb3d1d109ab9d891896ab9ac1589659c">gLayerManagerLayerBuilder</a>));
<a name="l00204"></a>00204   }
<a name="l00205"></a>00205 
<a name="l00214"></a>00214   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#aa0ae38ab571027eb6c3273c1aa9c6ea1">EndEmptyTransaction</a>(<a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a61e93c03ffc7ad87999edda2918816bf">EndTransactionFlags</a> aFlags = <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a61e93c03ffc7ad87999edda2918816bfab9c4a801df56a05f65e24a062ceafbf0">END_DEFAULT</a>) = 0;
<a name="l00215"></a>00215 
<a name="l00242"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ae66276e30cc0bbc2eacfc2cef816f484">00242</a>   <span class="keyword">typedef</span> <a class="code" href="../../d4/da9/png_8h.html#ab30926da86712184b070e550789f8bf7">void</a> (* <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ae66276e30cc0bbc2eacfc2cef816f484">DrawThebesLayerCallback</a>)(<a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html">ThebesLayer</a>* aLayer,
<a name="l00243"></a>00243                                            <a class="code" href="../../d5/dc9/classgfx_context.html">gfxContext</a>* aContext,
<a name="l00244"></a>00244                                            <span class="keyword">const</span> <a class="code" href="../../d5/d82/classns_int_region.html">nsIntRegion</a>&amp; aRegionToDraw,
<a name="l00245"></a>00245                                            <span class="keyword">const</span> <a class="code" href="../../d5/d82/classns_int_region.html">nsIntRegion</a>&amp; aRegionToInvalidate,
<a name="l00246"></a>00246                                            <span class="keywordtype">void</span>* aCallbackData);
<a name="l00247"></a>00247 
<a name="l00255"></a>00255   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a7b88cc4ae5fe905094ccf60a46f238c7">EndTransaction</a>(<a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ae66276e30cc0bbc2eacfc2cef816f484">DrawThebesLayerCallback</a> aCallback,
<a name="l00256"></a>00256                               <span class="keywordtype">void</span>* aCallbackData,
<a name="l00257"></a>00257                               <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a61e93c03ffc7ad87999edda2918816bf">EndTransactionFlags</a> aFlags = <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a61e93c03ffc7ad87999edda2918816bfab9c4a801df56a05f65e24a062ceafbf0">END_DEFAULT</a>) = 0;
<a name="l00258"></a>00258 
<a name="l00259"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a2c4ee94d693bbc966315b1131968840e">00259</a>   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a2c4ee94d693bbc966315b1131968840e">HasShadowManagerInternal</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l00260"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a4bfcf83f22098614c3a86538492e0414">00260</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a4bfcf83f22098614c3a86538492e0414">HasShadowManager</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a2c4ee94d693bbc966315b1131968840e">HasShadowManagerInternal</a>(); }
<a name="l00261"></a>00261 
<a name="l00262"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ae3a6ce9eaa210d97075cdc5a688f9a5f">00262</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ae3a6ce9eaa210d97075cdc5a688f9a5f">IsSnappingEffectiveTransforms</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a3c860eef7a9dcde0d9560d8dd0188e7c">mSnapEffectiveTransforms</a>; }
<a name="l00263"></a>00263 
<a name="l00269"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a957c1ca0d12259ffbff52bc4c0be09c4">00269</a>   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a957c1ca0d12259ffbff52bc4c0be09c4">AreComponentAlphaLayersEnabled</a>() { <span class="keywordflow">return</span> <span class="keyword">true</span>; }
<a name="l00270"></a>00270 
<a name="l00276"></a>00276   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a3f3f93c8e902f94145e58b399e56adc2">SetRoot</a>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aLayer) = 0;
<a name="l00280"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ac36c5a472d559e8eb2ab2acdc877f878">00280</a>   <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ac36c5a472d559e8eb2ab2acdc877f878">GetRoot</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a809fbe0520a12b3caa768d65c21b9545">mRoot</a>; }
<a name="l00281"></a>00281 
<a name="l00287"></a>00287   <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a4ee01a3ca2f226fdcc0394ff1a456f6b">GetPrimaryScrollableLayer</a>();
<a name="l00288"></a>00288 
<a name="l00293"></a>00293   <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a0a216f8fbb93d34e059484e678ea2f31">GetScrollableLayers</a>(<a class="code" href="../../d8/d6f/classns_t_array.html">nsTArray&lt;Layer*&gt;</a>&amp; aArray);
<a name="l00294"></a>00294 
<a name="l00301"></a>00301 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00302"></a>00302 <span class="preprocessor"></span>  <span class="comment">// In debug builds, we check some properties of |aLayer|.</span>
<a name="l00303"></a>00303   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a0c2bcccdde33725f790b0aabfb84ffa3">Mutated</a>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aLayer);
<a name="l00304"></a>00304 <span class="preprocessor">#else</span>
<a name="l00305"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a0c2bcccdde33725f790b0aabfb84ffa3">00305</a> <span class="preprocessor"></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a0c2bcccdde33725f790b0aabfb84ffa3">Mutated</a>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aLayer) { }
<a name="l00306"></a>00306 <span class="preprocessor">#endif</span>
<a name="l00307"></a>00307 <span class="preprocessor"></span>
<a name="l00312"></a>00312   <span class="keyword">virtual</span> <a class="code" href="../../d3/d17/structalready___add_refed.html">already_AddRefed&lt;ThebesLayer&gt;</a> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#af951eb754344b490f616fbd8b2dc9bb3">CreateThebesLayer</a>() = 0;
<a name="l00317"></a>00317   <span class="keyword">virtual</span> <a class="code" href="../../d3/d17/structalready___add_refed.html">already_AddRefed&lt;ContainerLayer&gt;</a> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#aadd16cdc2adb8e767c71403b8e3fc1c1">CreateContainerLayer</a>() = 0;
<a name="l00322"></a>00322   <span class="keyword">virtual</span> <a class="code" href="../../d3/d17/structalready___add_refed.html">already_AddRefed&lt;ImageLayer&gt;</a> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a310a3ed3815b525ec7a297cfc474df43">CreateImageLayer</a>() = 0;
<a name="l00327"></a>00327   <span class="keyword">virtual</span> <a class="code" href="../../d3/d17/structalready___add_refed.html">already_AddRefed&lt;ColorLayer&gt;</a> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a23f436c4be54ee1eb1f6f405aab1e7f9">CreateColorLayer</a>() = 0;
<a name="l00332"></a>00332   <span class="keyword">virtual</span> <a class="code" href="../../d3/d17/structalready___add_refed.html">already_AddRefed&lt;CanvasLayer&gt;</a> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a7d5869e6e7ddc42cc12f585985c269c7">CreateCanvasLayer</a>() = 0;
<a name="l00337"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ad5dc9d6fed9953be29d6abd475bda5e1">00337</a>   <span class="keyword">virtual</span> <a class="code" href="../../d3/d17/structalready___add_refed.html">already_AddRefed&lt;ReadbackLayer&gt;</a> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ad5dc9d6fed9953be29d6abd475bda5e1">CreateReadbackLayer</a>() { <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; }
<a name="l00342"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ac90c02bcea2c6a39629cf5b0066bea73">00342</a>   <span class="keyword">virtual</span> <a class="code" href="../../d3/d17/structalready___add_refed.html">already_AddRefed&lt;RefLayer&gt;</a> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ac90c02bcea2c6a39629cf5b0066bea73">CreateRefLayer</a>() { <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; }
<a name="l00343"></a>00343 
<a name="l00344"></a>00344 
<a name="l00351"></a>00351   <span class="keyword">static</span> <a class="code" href="../../d3/d17/structalready___add_refed.html">already_AddRefed&lt;ImageContainer&gt;</a> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#afc5b3500efdc8e4243d20fc7bab28115">CreateImageContainer</a>();
<a name="l00352"></a>00352 
<a name="l00361"></a>00361   <span class="keyword">static</span> <a class="code" href="../../d3/d17/structalready___add_refed.html">already_AddRefed&lt;ImageContainer&gt;</a> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a5d01c7c89c81dfd7405a7a6a81629eed">CreateAsynchronousImageContainer</a>();
<a name="l00362"></a>00362 
<a name="l00368"></a>00368   <span class="keyword">virtual</span> <a class="code" href="../../d5/d27/namespacemozilla_1_1layers.html#a608a5d3baaee467cd6c5f194d7f79410">LayersBackend</a> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ab05c5d539f602aa50697b6d09559aed9">GetBackendType</a>() = 0;
<a name="l00369"></a>00369 
<a name="l00374"></a>00374   <span class="keyword">virtual</span> <a class="code" href="../../d3/d17/structalready___add_refed.html">already_AddRefed&lt;gfxASurface&gt;</a>
<a name="l00375"></a>00375     <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ae05ab0f84f2057d669a0fa7e98303827">CreateOptimalSurface</a>(<span class="keyword">const</span> <a class="code" href="../../dc/d43/structns_int_size.html">gfxIntSize</a> &amp;aSize,
<a name="l00376"></a>00376                          <a class="code" href="../../d4/d14/classgfx_a_surface.html#aaa01195999887451d4ddc6107c95893e">gfxASurface::gfxImageFormat</a> imageFormat);
<a name="l00377"></a>00377 
<a name="l00384"></a>00384   <span class="keyword">virtual</span> <a class="code" href="../../d3/d17/structalready___add_refed.html">already_AddRefed&lt;gfxASurface&gt;</a>
<a name="l00385"></a>00385     <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a14fe001d0d5a8fc160bb0407382b07bc">CreateOptimalMaskSurface</a>(<span class="keyword">const</span> <a class="code" href="../../dc/d43/structns_int_size.html">gfxIntSize</a> &amp;aSize);
<a name="l00386"></a>00386 
<a name="l00391"></a>00391   <span class="keyword">virtual</span> <a class="code" href="../../dd/d63/classmozilla_1_1_temporary_ref.html">TemporaryRef&lt;mozilla::gfx::DrawTarget&gt;</a>
<a name="l00392"></a>00392     <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ac5aec2723ac6262d0dd61b4bed2a220b">CreateDrawTarget</a>(<span class="keyword">const</span> <a class="code" href="../../d8/d6f/structmozilla_1_1gfx_1_1_int_size_typed.html">mozilla::gfx::IntSize</a> &amp;aSize,
<a name="l00393"></a>00393                      <a class="code" href="../../da/d8e/namespacemozilla_1_1gfx.html#a8ad07eb68c5f5eab704c5a0934a5331f">mozilla::gfx::SurfaceFormat</a> aFormat);
<a name="l00394"></a>00394 
<a name="l00395"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a394fc9e43707df47088b84377ec9964b">00395</a>   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a394fc9e43707df47088b84377ec9964b">CanUseCanvasLayerForSize</a>(<span class="keyword">const</span> <a class="code" href="../../dc/d43/structns_int_size.html">gfxIntSize</a> &amp;aSize) { <span class="keywordflow">return</span> <span class="keyword">true</span>; }
<a name="l00396"></a>00396 
<a name="l00401"></a>00401   <span class="keyword">virtual</span> <a class="code" href="../../d4/d27/structmozilla_1_1layers_1_1_texture_factory_identifier.html">TextureFactoryIdentifier</a> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a23329b30dbbc36c7d545fd1af13fcdf0">GetTextureFactoryIdentifier</a>();
<a name="l00402"></a>00402 
<a name="l00407"></a>00407   <span class="keyword">virtual</span> int32_t <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#aa21e31c8f468069c2229af1298aeb73d">GetMaxTextureSize</a>() <span class="keyword">const</span> = 0;
<a name="l00408"></a>00408 
<a name="l00412"></a>00412   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a0efaa7c2aa98211afe7a845e3d996d98">GetBackendName</a>(nsAString&amp; aName) = 0;
<a name="l00413"></a>00413 
<a name="l00418"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ada5e6c76f244b82e7aae5ed0c7506a1f">00418</a>   <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ada5e6c76f244b82e7aae5ed0c7506a1f">SetUserData</a>(<span class="keywordtype">void</span>* aKey, <a class="code" href="../../df/d95/classmozilla_1_1layers_1_1_layer_user_data.html">LayerUserData</a>* <a class="code" href="../../d6/d1d/ns_x_p_c_o_m_strings_8h.html#a580e3d1c78551e30e0c97ab45dc8a3b5">aData</a>)
<a name="l00419"></a>00419   {
<a name="l00420"></a>00420     <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a44929a99eef089a2095a4ec23cb7a4a8">mUserData</a>.<a class="code" href="../../d1/db5/classmozilla_1_1gfx_1_1_user_data.html#a73f0cfc8b9efb36aaae55cb80d43d5bb">Add</a>(static_cast&lt;gfx::UserDataKey*&gt;(aKey), aData, LayerManagerUserDataDestroy);
<a name="l00421"></a>00421   }
<a name="l00425"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a28d11bec973b23de3df9000710cc0d8b">00425</a>   <a class="code" href="../../d1/d89/classns_auto_ptr.html">nsAutoPtr&lt;LayerUserData&gt;</a> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a28d11bec973b23de3df9000710cc0d8b">RemoveUserData</a>(<span class="keywordtype">void</span>* aKey)
<a name="l00426"></a>00426   {
<a name="l00427"></a>00427     <a class="code" href="../../d1/d89/classns_auto_ptr.html">nsAutoPtr&lt;LayerUserData&gt;</a> d(static_cast&lt;LayerUserData*&gt;(<a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a44929a99eef089a2095a4ec23cb7a4a8">mUserData</a>.<a class="code" href="../../d1/db5/classmozilla_1_1gfx_1_1_user_data.html#aa79c780e768d613e7a00e3f9af83c258">Remove</a>(static_cast&lt;gfx::UserDataKey*&gt;(aKey))));
<a name="l00428"></a>00428     <span class="keywordflow">return</span> d;
<a name="l00429"></a>00429   }
<a name="l00433"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a0adac7000fe92d42d9414a058283ff54">00433</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a0adac7000fe92d42d9414a058283ff54">HasUserData</a>(<span class="keywordtype">void</span>* aKey)
<a name="l00434"></a>00434   {
<a name="l00435"></a>00435     <span class="keywordflow">return</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a44929a99eef089a2095a4ec23cb7a4a8">mUserData</a>.<a class="code" href="../../d1/db5/classmozilla_1_1gfx_1_1_user_data.html#a48b8c0bc6790b86497d76212b5b3c051">Has</a>(static_cast&lt;gfx::UserDataKey*&gt;(aKey));
<a name="l00436"></a>00436   }
<a name="l00441"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a5dcb9921eee4956a92ac18b820e3f932">00441</a>   <a class="code" href="../../df/d95/classmozilla_1_1layers_1_1_layer_user_data.html">LayerUserData</a>* <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a5dcb9921eee4956a92ac18b820e3f932">GetUserData</a>(<span class="keywordtype">void</span>* aKey)<span class="keyword"> const</span>
<a name="l00442"></a>00442 <span class="keyword">  </span>{
<a name="l00443"></a>00443     <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="../../df/d95/classmozilla_1_1layers_1_1_layer_user_data.html">LayerUserData</a>*<span class="keyword">&gt;</span>(<a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a44929a99eef089a2095a4ec23cb7a4a8">mUserData</a>.<a class="code" href="../../d1/db5/classmozilla_1_1gfx_1_1_user_data.html#afb0149c8154933b69dc01dabfc6ce090">Get</a>(static_cast&lt;gfx::UserDataKey*&gt;(aKey)));
<a name="l00444"></a>00444   }
<a name="l00445"></a>00445 
<a name="l00462"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a0dfefe2d559c9d64e4b08af0b986e7ce">00462</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a0dfefe2d559c9d64e4b08af0b986e7ce">ClearCachedResources</a>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aSubtree = <span class="keyword">nullptr</span>) {}
<a name="l00463"></a>00463 
<a name="l00467"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a3c4d0f85099b26e058466768a30b363f">00467</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a3c4d0f85099b26e058466768a30b363f">SetIsFirstPaint</a>() {}
<a name="l00468"></a>00468 
<a name="l00476"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a48ae72dc78b4ebf09c3b537010170b60">00476</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a48ae72dc78b4ebf09c3b537010170b60">FlushRendering</a>() { }
<a name="l00477"></a>00477 
<a name="l00482"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a56390685b19edcc3ae3463d79096c961">00482</a>   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a56390685b19edcc3ae3463d79096c961">NeedsWidgetInvalidation</a>() { <span class="keywordflow">return</span> <span class="keyword">true</span>; }
<a name="l00483"></a>00483 
<a name="l00484"></a>00484   <span class="comment">// We always declare the following logging symbols, because it&#39;s</span>
<a name="l00485"></a>00485   <span class="comment">// extremely tricky to conditionally declare them.  However, for</span>
<a name="l00486"></a>00486   <span class="comment">// ifndef MOZ_LAYERS_HAVE_LOG builds, they only have trivial</span>
<a name="l00487"></a>00487   <span class="comment">// definitions in Layers.cpp.</span>
<a name="l00488"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#af77ea3698c8e62e8c00eaec0d562da1c">00488</a>   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#af77ea3698c8e62e8c00eaec0d562da1c">Name</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;???&quot;</span>; }
<a name="l00489"></a>00489 
<a name="l00494"></a>00494   <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a601f9d4973c97002a24648f7cc0c19f8">Dump</a>(<a class="code" href="../../d1/ddf/ns_i_content_viewer_file_8idl.html#a2a9799b7b2af884315027dd95725e0c3">FILE</a>* aFile=<span class="keyword">nullptr</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>* aPrefix=<span class="stringliteral">&quot;&quot;</span>, <span class="keywordtype">bool</span> aDumpHtml=<span class="keyword">false</span>);
<a name="l00499"></a>00499   <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a6ef7089ca8ec69d472d9f1b170955c5a">DumpSelf</a>(<a class="code" href="../../d1/ddf/ns_i_content_viewer_file_8idl.html#a2a9799b7b2af884315027dd95725e0c3">FILE</a>* aFile=<span class="keyword">nullptr</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>* aPrefix=<span class="stringliteral">&quot;&quot;</span>);
<a name="l00500"></a>00500 
<a name="l00505"></a>00505   <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a0d0bce161156ac25cbd0b5840528ad81">Log</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* aPrefix=<span class="stringliteral">&quot;&quot;</span>);
<a name="l00510"></a>00510   <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a346fdf364d83065baeb1a7fb26755a5a">LogSelf</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* aPrefix=<span class="stringliteral">&quot;&quot;</span>);
<a name="l00511"></a>00511 
<a name="l00527"></a>00527   uint32_t <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a250f2845f4b5e3e673b321f562f6e0aa">StartFrameTimeRecording</a>();
<a name="l00528"></a>00528 
<a name="l00533"></a>00533   <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a055dd72fa3afc1e19971a829f5c03878">StopFrameTimeRecording</a>(uint32_t         aStartIndex,
<a name="l00534"></a>00534                               <a class="code" href="../../d8/d6f/classns_t_array.html">nsTArray&lt;float&gt;</a>&amp; aFrameIntervals,
<a name="l00535"></a>00535                               <a class="code" href="../../d8/d6f/classns_t_array.html">nsTArray&lt;float&gt;</a>&amp; aPaintTimes);
<a name="l00536"></a>00536 
<a name="l00537"></a>00537   <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a22fd77dd49e6e3ac58058b5fc9bc500c">SetPaintStartTime</a>(<a class="code" href="../../d0/d76/classmozilla_1_1_time_stamp.html">TimeStamp</a>&amp; aTime);
<a name="l00538"></a>00538 
<a name="l00539"></a>00539   <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#afebb3ff6ea5f4fbce7477d5671b2a275">PostPresent</a>();
<a name="l00540"></a>00540 
<a name="l00541"></a>00541   <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a339e5fe56917d095094f641780bdcaf3">BeginTabSwitch</a>();
<a name="l00542"></a>00542 
<a name="l00543"></a>00543   <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a34dd39656bcf121d52350a224006247e">IsLogEnabled</a>();
<a name="l00544"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#aa18fe17dbcb40349081494aa86d3b138">00544</a>   <span class="keyword">static</span> <a class="code" href="../../da/d4e/struct_p_r_log_module_info.html">PRLogModuleInfo</a>* <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#aa18fe17dbcb40349081494aa86d3b138">GetLog</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a4c6c907901160a3edf5aedf56eb48cb8">sLog</a>; }
<a name="l00545"></a>00545 
<a name="l00546"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a25691316002466910b5570946515bb96">00546</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a09f2f15f5d45269a3263b1e9ebea931f">IsCompositingCheap</a>(<a class="code" href="../../d5/d27/namespacemozilla_1_1layers.html#a608a5d3baaee467cd6c5f194d7f79410">LayersBackend</a> aBackend)
<a name="l00547"></a>00547   {
<a name="l00548"></a>00548     <span class="comment">// LAYERS_NONE is an error state, but in that case we should try to</span>
<a name="l00549"></a>00549     <span class="comment">// avoid loading the compositor!</span>
<a name="l00550"></a>00550     <span class="keywordflow">return</span> <a class="code" href="../../d5/d27/namespacemozilla_1_1layers.html#a608a5d3baaee467cd6c5f194d7f79410a75ca857f28d95290614c280e24cef115">LAYERS_BASIC</a> != aBackend &amp;&amp; <a class="code" href="../../d5/d27/namespacemozilla_1_1layers.html#a608a5d3baaee467cd6c5f194d7f79410afc67902324680c415496ef2ea514a66b">LAYERS_NONE</a> != aBackend;
<a name="l00551"></a>00551   }
<a name="l00552"></a>00552 
<a name="l00553"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a09f2f15f5d45269a3263b1e9ebea931f">00553</a>   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a09f2f15f5d45269a3263b1e9ebea931f">IsCompositingCheap</a>() { <span class="keywordflow">return</span> <span class="keyword">true</span>; }
<a name="l00554"></a>00554 
<a name="l00555"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#af8c67432a0a8a25e2007deb76e8755c6">00555</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#af8c67432a0a8a25e2007deb76e8755c6">IsInTransaction</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a30d3fcd090ad7932858cd478da3a7789">mInTransaction</a>; }
<a name="l00556"></a>00556 
<a name="l00557"></a>00557 <span class="keyword">protected</span>:
<a name="l00558"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a809fbe0520a12b3caa768d65c21b9545">00558</a>   <a class="code" href="../../d0/d01/classns_ref_ptr.html">nsRefPtr&lt;Layer&gt;</a> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a809fbe0520a12b3caa768d65c21b9545">mRoot</a>;
<a name="l00559"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a44929a99eef089a2095a4ec23cb7a4a8">00559</a>   <a class="code" href="../../d1/db5/classmozilla_1_1gfx_1_1_user_data.html">gfx::UserData</a> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a44929a99eef089a2095a4ec23cb7a4a8">mUserData</a>;
<a name="l00560"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a4bb4f3c5d4f20b1d41165b85c4a1fc2b">00560</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a4bb4f3c5d4f20b1d41165b85c4a1fc2b">mDestroyed</a>;
<a name="l00561"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a3c860eef7a9dcde0d9560d8dd0188e7c">00561</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a3c860eef7a9dcde0d9560d8dd0188e7c">mSnapEffectiveTransforms</a>;
<a name="l00562"></a>00562 
<a name="l00563"></a>00563   <span class="comment">// Print interesting information about this into aTo.  Internally</span>
<a name="l00564"></a>00564   <span class="comment">// used to implement Dump*() and Log*().</span>
<a name="l00565"></a>00565   <span class="keyword">virtual</span> nsACString&amp; <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a088e21ee01750e6bb87950bc4c6608c1">PrintInfo</a>(nsACString&amp; aTo, <span class="keyword">const</span> <span class="keywordtype">char</span>* aPrefix);
<a name="l00566"></a>00566 
<a name="l00567"></a>00567   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a9adb80129163eb27d670e042a48e3d54">InitLog</a>();
<a name="l00568"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a4c6c907901160a3edf5aedf56eb48cb8">00568</a>   <span class="keyword">static</span> <a class="code" href="../../da/d4e/struct_p_r_log_module_info.html">PRLogModuleInfo</a>* <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a4c6c907901160a3edf5aedf56eb48cb8">sLog</a>;
<a name="l00569"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#aff26b1adff244578a17446fc3c0a23d4">00569</a>   uint64_t <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#aff26b1adff244578a17446fc3c0a23d4">mId</a>;
<a name="l00570"></a><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a30d3fcd090ad7932858cd478da3a7789">00570</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a30d3fcd090ad7932858cd478da3a7789">mInTransaction</a>;
<a name="l00571"></a>00571 <span class="keyword">private</span>:
<a name="l00572"></a>00572   <span class="keyword">struct </span>FramesTimingRecording
<a name="l00573"></a>00573   {
<a name="l00574"></a>00574     <span class="comment">// Stores state and data for frame intervals and paint times recording.</span>
<a name="l00575"></a>00575     <span class="comment">// see LayerManager::StartFrameTimeRecording() at Layers.cpp for more details.</span>
<a name="l00576"></a>00576     FramesTimingRecording()
<a name="l00577"></a>00577       : mIsPaused(<span class="keyword">true</span>)
<a name="l00578"></a>00578       , mNextIndex(0)
<a name="l00579"></a>00579     {}
<a name="l00580"></a>00580     <span class="keywordtype">bool</span> mIsPaused;
<a name="l00581"></a>00581     uint32_t mNextIndex;
<a name="l00582"></a>00582     <a class="code" href="../../d0/d76/classmozilla_1_1_time_stamp.html">TimeStamp</a> mLastFrameTime;
<a name="l00583"></a>00583     <a class="code" href="../../d0/d76/classmozilla_1_1_time_stamp.html">TimeStamp</a> mPaintStartTime;
<a name="l00584"></a>00584     <a class="code" href="../../d8/d6f/classns_t_array.html">nsTArray&lt;float&gt;</a> mIntervals;
<a name="l00585"></a>00585     <a class="code" href="../../d8/d6f/classns_t_array.html">nsTArray&lt;float&gt;</a> mPaints;
<a name="l00586"></a>00586     uint32_t mLatestStartIndex;
<a name="l00587"></a>00587     uint32_t mCurrentRunStartIndex;
<a name="l00588"></a>00588   };
<a name="l00589"></a>00589   FramesTimingRecording mRecording;
<a name="l00590"></a>00590 
<a name="l00591"></a>00591   <a class="code" href="../../d0/d76/classmozilla_1_1_time_stamp.html">TimeStamp</a> mTabSwitchStart;
<a name="l00592"></a>00592 };
<a name="l00593"></a>00593 
<a name="l00594"></a><a class="code" href="../../d5/d27/namespacemozilla_1_1layers.html#a1849c3e67abca4238318ff2dd347bcd2">00594</a> <span class="keyword">class </span><a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html">ThebesLayer</a>;
<a name="l00595"></a>00595 <span class="keyword">typedef</span> InfallibleTArray&lt;Animation&gt; <a class="code" href="../../d5/d27/namespacemozilla_1_1layers.html#a1849c3e67abca4238318ff2dd347bcd2">AnimationArray</a>;
<a name="l00596"></a>00596 
<a name="l00597"></a><a class="code" href="../../d6/d32/structmozilla_1_1layers_1_1_anim_data.html">00597</a> <span class="keyword">struct </span><a class="code" href="../../d6/d32/structmozilla_1_1layers_1_1_anim_data.html">AnimData</a> {
<a name="l00598"></a><a class="code" href="../../d6/d32/structmozilla_1_1layers_1_1_anim_data.html#ab2c45be922d889b3af7b3afb020b0d4d">00598</a>   InfallibleTArray&lt;nsStyleAnimation::Value&gt; <a class="code" href="../../d6/d32/structmozilla_1_1layers_1_1_anim_data.html#ab2c45be922d889b3af7b3afb020b0d4d">mStartValues</a>;
<a name="l00599"></a><a class="code" href="../../d6/d32/structmozilla_1_1layers_1_1_anim_data.html#a81145f752fe6812a3663562ab9587aeb">00599</a>   InfallibleTArray&lt;nsStyleAnimation::Value&gt; <a class="code" href="../../d6/d32/structmozilla_1_1layers_1_1_anim_data.html#a81145f752fe6812a3663562ab9587aeb">mEndValues</a>;
<a name="l00600"></a><a class="code" href="../../d6/d32/structmozilla_1_1layers_1_1_anim_data.html#a163b471ead9542e4da296533fa8cd2dc">00600</a>   InfallibleTArray&lt;nsAutoPtr&lt;mozilla::css::ComputedTimingFunction&gt; &gt; <a class="code" href="../../d6/d32/structmozilla_1_1layers_1_1_anim_data.html#a163b471ead9542e4da296533fa8cd2dc">mFunctions</a>;
<a name="l00601"></a>00601 };
<a name="l00602"></a>00602 
<a name="l00607"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">00607</a> <span class="keyword">class </span><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a> {
<a name="l00608"></a>00608   <a class="code" href="../../d0/d5a/ns_i_supports_impl_8h.html#a5fe430b38b26f82f23c2e59b9d70e174">NS_INLINE_DECL_REFCOUNTING</a>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>)
<a name="l00609"></a>00609 
<a name="l00610"></a>00610 <span class="keyword">public</span>:
<a name="l00611"></a>00611   <span class="comment">// Keep these in alphabetical order</span>
<a name="l00612"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9">00612</a>   <span class="keyword">enum</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9">LayerType</a> {
<a name="l00613"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9a4214b5511384253d4fd4f5e34004e9d7">00613</a>     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9a4214b5511384253d4fd4f5e34004e9d7">TYPE_CANVAS</a>,
<a name="l00614"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9a7ab2415e5a8be96483e4fa65560fb96b">00614</a>     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9a7ab2415e5a8be96483e4fa65560fb96b">TYPE_COLOR</a>,
<a name="l00615"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9a216e7c6ed3498c1cac00cfebda733725">00615</a>     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9a216e7c6ed3498c1cac00cfebda733725">TYPE_CONTAINER</a>,
<a name="l00616"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9a5a1629ce400f8210c1be7815ba20f025">00616</a>     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9a5a1629ce400f8210c1be7815ba20f025">TYPE_IMAGE</a>,
<a name="l00617"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9a17660a69163d8dcca2903e0ad6480b84">00617</a>     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9a17660a69163d8dcca2903e0ad6480b84">TYPE_READBACK</a>,
<a name="l00618"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9a5aa436d909a7c4f33926f2d4b7e702e3">00618</a>     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9a5aa436d909a7c4f33926f2d4b7e702e3">TYPE_REF</a>,
<a name="l00619"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9a47bc88395f45903270f578a58267310e">00619</a>     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9a47bc88395f45903270f578a58267310e">TYPE_SHADOW</a>,
<a name="l00620"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9abf07723c39c92126370c5aed7a84dbf8">00620</a>     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9abf07723c39c92126370c5aed7a84dbf8">TYPE_THEBES</a>
<a name="l00621"></a>00621   };
<a name="l00622"></a>00622 
<a name="l00623"></a>00623   <span class="keyword">virtual</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a946683cc7f8986ad92cc3711cc8daef6">~Layer</a>();
<a name="l00624"></a>00624 
<a name="l00630"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a271e931c646ae721f98df49d5cf54847">00630</a>   <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html">LayerManager</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a271e931c646ae721f98df49d5cf54847">Manager</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a653fa6f7c923e15679569a3b86401cc1">mManager</a>; }
<a name="l00631"></a>00631 
<a name="l00632"></a>00632   <span class="keyword">enum</span> {
<a name="l00638"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a82ae8e00e21fa79fe0f88a854ea15c44a871a1de8581e9061f0d7faf7a08a78b6">00638</a>     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a82ae8e00e21fa79fe0f88a854ea15c44a871a1de8581e9061f0d7faf7a08a78b6">CONTENT_OPAQUE</a> = 0x01,
<a name="l00646"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a82ae8e00e21fa79fe0f88a854ea15c44a4b45f8965453048eeaccfad39ffa3da5">00646</a>     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a82ae8e00e21fa79fe0f88a854ea15c44a4b45f8965453048eeaccfad39ffa3da5">CONTENT_COMPONENT_ALPHA</a> = 0x02,
<a name="l00647"></a>00647 
<a name="l00652"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a82ae8e00e21fa79fe0f88a854ea15c44a1744b1b200ac05e8587e00d3817615a8">00652</a>     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a82ae8e00e21fa79fe0f88a854ea15c44a1744b1b200ac05e8587e00d3817615a8">CONTENT_PRESERVE_3D</a> = 0x04,
<a name="l00658"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a82ae8e00e21fa79fe0f88a854ea15c44a480fcd2d7b3a9ce855f99a62613a262f">00658</a>     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a82ae8e00e21fa79fe0f88a854ea15c44a480fcd2d7b3a9ce855f99a62613a262f">CONTENT_MAY_CHANGE_TRANSFORM</a> = 0x08
<a name="l00659"></a>00659   };
<a name="l00666"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a683175b4e6615cf4a195c47975a2adfa">00666</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a683175b4e6615cf4a195c47975a2adfa">SetContentFlags</a>(uint32_t aFlags)
<a name="l00667"></a>00667   {
<a name="l00668"></a>00668     <a class="code" href="../../dc/d6d/ns_debug_8h.html#ad0ae7f43205a729107e59d101665b8fa">NS_ASSERTION</a>((aFlags &amp; (<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a82ae8e00e21fa79fe0f88a854ea15c44a871a1de8581e9061f0d7faf7a08a78b6">CONTENT_OPAQUE</a> | <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a82ae8e00e21fa79fe0f88a854ea15c44a4b45f8965453048eeaccfad39ffa3da5">CONTENT_COMPONENT_ALPHA</a>)) !=
<a name="l00669"></a>00669                  (<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a82ae8e00e21fa79fe0f88a854ea15c44a871a1de8581e9061f0d7faf7a08a78b6">CONTENT_OPAQUE</a> | <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a82ae8e00e21fa79fe0f88a854ea15c44a4b45f8965453048eeaccfad39ffa3da5">CONTENT_COMPONENT_ALPHA</a>),
<a name="l00670"></a>00670                  <span class="stringliteral">&quot;Can&#39;t be opaque and require component alpha&quot;</span>);
<a name="l00671"></a>00671     <span class="keywordflow">if</span> (<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a868b53f4bb0496c8ec3fcf68a02ef4d6">mContentFlags</a> != aFlags) {
<a name="l00672"></a>00672       <a class="code" href="../../d3/d16/_layers_types_8h.html#a0c74f2cf21e296310f1eaa6c3889dc35">MOZ_LAYERS_LOG_IF_SHADOWABLE</a>(<span class="keyword">this</span>, (<span class="stringliteral">&quot;Layer::Mutated(%p) ContentFlags&quot;</span>, <span class="keyword">this</span>));
<a name="l00673"></a>00673       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a868b53f4bb0496c8ec3fcf68a02ef4d6">mContentFlags</a> = aFlags;
<a name="l00674"></a>00674       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l00675"></a>00675     }
<a name="l00676"></a>00676   }
<a name="l00690"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9a37f054177b00c853b9f42401260a4b">00690</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9a37f054177b00c853b9f42401260a4b">SetVisibleRegion</a>(<span class="keyword">const</span> <a class="code" href="../../d5/d82/classns_int_region.html">nsIntRegion</a>&amp; aRegion)
<a name="l00691"></a>00691   {
<a name="l00692"></a>00692     <span class="keywordflow">if</span> (!<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a61aa8815d140d4927184b5de5e53274b">mVisibleRegion</a>.<a class="code" href="../../d5/d82/classns_int_region.html#aaf800dd743fbba2b759b034b009726b1">IsEqual</a>(aRegion)) {
<a name="l00693"></a>00693       <a class="code" href="../../d3/d16/_layers_types_8h.html#a0c74f2cf21e296310f1eaa6c3889dc35">MOZ_LAYERS_LOG_IF_SHADOWABLE</a>(<span class="keyword">this</span>, (<span class="stringliteral">&quot;Layer::Mutated(%p) VisibleRegion was %s is %s&quot;</span>, <span class="keyword">this</span>,
<a name="l00694"></a>00694         <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a61aa8815d140d4927184b5de5e53274b">mVisibleRegion</a>.<a class="code" href="../../d5/d82/classns_int_region.html#a20c9fe37cf3eeb247c21850a630089af">ToString</a>().get(), aRegion.<a class="code" href="../../d5/d82/classns_int_region.html#a20c9fe37cf3eeb247c21850a630089af">ToString</a>().get()));
<a name="l00695"></a>00695       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a61aa8815d140d4927184b5de5e53274b">mVisibleRegion</a> = aRegion;
<a name="l00696"></a>00696       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l00697"></a>00697     }
<a name="l00698"></a>00698   }
<a name="l00699"></a>00699 
<a name="l00705"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#afec2c80769795e81b44b40880762649b">00705</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#afec2c80769795e81b44b40880762649b">SetOpacity</a>(<span class="keywordtype">float</span> aOpacity)
<a name="l00706"></a>00706   {
<a name="l00707"></a>00707     <span class="keywordflow">if</span> (<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a63189af4b38f7d25a1c38f5ddfb6092f">mOpacity</a> != aOpacity) {
<a name="l00708"></a>00708       <a class="code" href="../../d3/d16/_layers_types_8h.html#a0c74f2cf21e296310f1eaa6c3889dc35">MOZ_LAYERS_LOG_IF_SHADOWABLE</a>(<span class="keyword">this</span>, (<span class="stringliteral">&quot;Layer::Mutated(%p) Opacity&quot;</span>, <span class="keyword">this</span>));
<a name="l00709"></a>00709       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a63189af4b38f7d25a1c38f5ddfb6092f">mOpacity</a> = aOpacity;
<a name="l00710"></a>00710       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l00711"></a>00711     }
<a name="l00712"></a>00712   }
<a name="l00713"></a>00713 
<a name="l00724"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#af5a8fa2c24995bc3d66991c4136c4690">00724</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#af5a8fa2c24995bc3d66991c4136c4690">SetClipRect</a>(<span class="keyword">const</span> <a class="code" href="../../d7/dc7/structns_int_rect.html">nsIntRect</a>* aRect)
<a name="l00725"></a>00725   {
<a name="l00726"></a>00726     <span class="keywordflow">if</span> (<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a1ac3a2b6d7afd2190c90fac82e164728">mUseClipRect</a>) {
<a name="l00727"></a>00727       <span class="keywordflow">if</span> (!aRect) {
<a name="l00728"></a>00728         <a class="code" href="../../d3/d16/_layers_types_8h.html#a0c74f2cf21e296310f1eaa6c3889dc35">MOZ_LAYERS_LOG_IF_SHADOWABLE</a>(<span class="keyword">this</span>, (<span class="stringliteral">&quot;Layer::Mutated(%p) ClipRect was %d,%d,%d,%d is &lt;none&gt;&quot;</span>, <span class="keyword">this</span>,
<a name="l00729"></a>00729                          <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a054b516da10f7bd4f531e3072845322b">mClipRect</a>.<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#acb87788539e986ee1aad2b097ce7a468">x</a>, <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a054b516da10f7bd4f531e3072845322b">mClipRect</a>.<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#a88fd87cc357735a33a0e2705a902a475">y</a>, <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a054b516da10f7bd4f531e3072845322b">mClipRect</a>.<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#a08b62b0638bfa9b9ff1c4284f3dac847">width</a>, <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a054b516da10f7bd4f531e3072845322b">mClipRect</a>.<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#ae424948a1e94a9e8eeaa3476e39d496d">height</a>));
<a name="l00730"></a>00730         <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a1ac3a2b6d7afd2190c90fac82e164728">mUseClipRect</a> = <span class="keyword">false</span>;
<a name="l00731"></a>00731         <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l00732"></a>00732       } <span class="keywordflow">else</span> {
<a name="l00733"></a>00733         <span class="keywordflow">if</span> (!aRect-&gt;<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#adbe246cf631375a9f01e8ed5057113be">IsEqualEdges</a>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a054b516da10f7bd4f531e3072845322b">mClipRect</a>)) {
<a name="l00734"></a>00734           <a class="code" href="../../d3/d16/_layers_types_8h.html#a0c74f2cf21e296310f1eaa6c3889dc35">MOZ_LAYERS_LOG_IF_SHADOWABLE</a>(<span class="keyword">this</span>, (<span class="stringliteral">&quot;Layer::Mutated(%p) ClipRect was %d,%d,%d,%d is %d,%d,%d,%d&quot;</span>, <span class="keyword">this</span>,
<a name="l00735"></a>00735                            <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a054b516da10f7bd4f531e3072845322b">mClipRect</a>.<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#acb87788539e986ee1aad2b097ce7a468">x</a>, <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a054b516da10f7bd4f531e3072845322b">mClipRect</a>.<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#a88fd87cc357735a33a0e2705a902a475">y</a>, <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a054b516da10f7bd4f531e3072845322b">mClipRect</a>.<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#a08b62b0638bfa9b9ff1c4284f3dac847">width</a>, <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a054b516da10f7bd4f531e3072845322b">mClipRect</a>.<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#ae424948a1e94a9e8eeaa3476e39d496d">height</a>,
<a name="l00736"></a>00736                            aRect-&gt;<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#acb87788539e986ee1aad2b097ce7a468">x</a>, aRect-&gt;<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#a88fd87cc357735a33a0e2705a902a475">y</a>, aRect-&gt;<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#a08b62b0638bfa9b9ff1c4284f3dac847">width</a>, aRect-&gt;<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#ae424948a1e94a9e8eeaa3476e39d496d">height</a>));
<a name="l00737"></a>00737           <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a054b516da10f7bd4f531e3072845322b">mClipRect</a> = *aRect;
<a name="l00738"></a>00738           <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l00739"></a>00739         }
<a name="l00740"></a>00740       }
<a name="l00741"></a>00741     } <span class="keywordflow">else</span> {
<a name="l00742"></a>00742       <span class="keywordflow">if</span> (aRect) {
<a name="l00743"></a>00743         <a class="code" href="../../d3/d16/_layers_types_8h.html#a0c74f2cf21e296310f1eaa6c3889dc35">MOZ_LAYERS_LOG_IF_SHADOWABLE</a>(<span class="keyword">this</span>, (<span class="stringliteral">&quot;Layer::Mutated(%p) ClipRect was &lt;none&gt; is %d,%d,%d,%d&quot;</span>, <span class="keyword">this</span>,
<a name="l00744"></a>00744                          aRect-&gt;<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#acb87788539e986ee1aad2b097ce7a468">x</a>, aRect-&gt;<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#a88fd87cc357735a33a0e2705a902a475">y</a>, aRect-&gt;<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#a08b62b0638bfa9b9ff1c4284f3dac847">width</a>, aRect-&gt;<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#ae424948a1e94a9e8eeaa3476e39d496d">height</a>));
<a name="l00745"></a>00745         <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a1ac3a2b6d7afd2190c90fac82e164728">mUseClipRect</a> = <span class="keyword">true</span>;
<a name="l00746"></a>00746         <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a054b516da10f7bd4f531e3072845322b">mClipRect</a> = *aRect;
<a name="l00747"></a>00747         <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l00748"></a>00748       }
<a name="l00749"></a>00749     }
<a name="l00750"></a>00750   }
<a name="l00751"></a>00751 
<a name="l00767"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9eb9752a3db40e16b0365b79697a4d5c">00767</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9eb9752a3db40e16b0365b79697a4d5c">SetMaskLayer</a>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aMaskLayer)
<a name="l00768"></a>00768   {
<a name="l00769"></a>00769 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00770"></a>00770 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (aMaskLayer) {
<a name="l00771"></a>00771       <a class="code" href="../../d1/d4f/structgfx_matrix.html">gfxMatrix</a> maskTransform;
<a name="l00772"></a>00772       <span class="keywordtype">bool</span> maskIs2D = aMaskLayer-&gt;<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ab38bfd091ba3cbfc37dc561f25996bf3">GetTransform</a>().<a class="code" href="../../d6/d3b/classgfx3_d_matrix.html#a1b516f6e377d9fb213670a1cdded9f4d">CanDraw2D</a>(&amp;maskTransform);
<a name="l00773"></a>00773       <a class="code" href="../../dc/d6d/ns_debug_8h.html#ad0ae7f43205a729107e59d101665b8fa">NS_ASSERTION</a>(maskIs2D, <span class="stringliteral">&quot;Mask layer has invalid transform.&quot;</span>);
<a name="l00774"></a>00774     }
<a name="l00775"></a>00775 <span class="preprocessor">#endif</span>
<a name="l00776"></a>00776 <span class="preprocessor"></span>
<a name="l00777"></a>00777     <span class="keywordflow">if</span> (<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a96576b4923c191f5ecbb5f007f8fbe33">mMaskLayer</a> != aMaskLayer) {
<a name="l00778"></a>00778       <a class="code" href="../../d3/d16/_layers_types_8h.html#a0c74f2cf21e296310f1eaa6c3889dc35">MOZ_LAYERS_LOG_IF_SHADOWABLE</a>(<span class="keyword">this</span>, (<span class="stringliteral">&quot;Layer::Mutated(%p) MaskLayer&quot;</span>, <span class="keyword">this</span>));
<a name="l00779"></a>00779       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a96576b4923c191f5ecbb5f007f8fbe33">mMaskLayer</a> = aMaskLayer;
<a name="l00780"></a>00780       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l00781"></a>00781     }
<a name="l00782"></a>00782   }
<a name="l00783"></a>00783 
<a name="l00791"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#adbb5f870254c2ba669fc3de9e4676207">00791</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#adbb5f870254c2ba669fc3de9e4676207">SetBaseTransform</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a>&amp; aMatrix)
<a name="l00792"></a>00792   {
<a name="l00793"></a>00793     <a class="code" href="../../dc/d6d/ns_debug_8h.html#ad0ae7f43205a729107e59d101665b8fa">NS_ASSERTION</a>(!aMatrix.<a class="code" href="../../d6/d3b/classgfx3_d_matrix.html#a7897ec51a8938bc7a769df806b24f531">IsSingular</a>(),
<a name="l00794"></a>00794                  <span class="stringliteral">&quot;Shouldn&#39;t be trying to draw with a singular matrix!&quot;</span>);
<a name="l00795"></a>00795     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7f1a421b81ee86a9674403d513931be2">mPendingTransform</a> = <span class="keyword">nullptr</span>;
<a name="l00796"></a>00796     <span class="keywordflow">if</span> (<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a1494a7d7a665228b8bb2ef556c0138e7">mTransform</a> == aMatrix) {
<a name="l00797"></a>00797       <span class="keywordflow">return</span>;
<a name="l00798"></a>00798     }
<a name="l00799"></a>00799     <a class="code" href="../../d3/d16/_layers_types_8h.html#a0c74f2cf21e296310f1eaa6c3889dc35">MOZ_LAYERS_LOG_IF_SHADOWABLE</a>(<span class="keyword">this</span>, (<span class="stringliteral">&quot;Layer::Mutated(%p) BaseTransform&quot;</span>, <span class="keyword">this</span>));
<a name="l00800"></a>00800     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a1494a7d7a665228b8bb2ef556c0138e7">mTransform</a> = aMatrix;
<a name="l00801"></a>00801     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l00802"></a>00802   }
<a name="l00803"></a>00803 
<a name="l00812"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9f3470676edaf8272daba8d57ef59dc5">00812</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9f3470676edaf8272daba8d57ef59dc5">SetBaseTransformForNextTransaction</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a>&amp; aMatrix)
<a name="l00813"></a>00813   {
<a name="l00814"></a>00814     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7f1a421b81ee86a9674403d513931be2">mPendingTransform</a> = <span class="keyword">new</span> <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a>(aMatrix);
<a name="l00815"></a>00815   }
<a name="l00816"></a>00816 
<a name="l00817"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9baa020e6394508397a3e8616601acdf">00817</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9baa020e6394508397a3e8616601acdf">SetPostScale</a>(<span class="keywordtype">float</span> aXScale, <span class="keywordtype">float</span> aYScale)
<a name="l00818"></a>00818   {
<a name="l00819"></a>00819     <span class="keywordflow">if</span> (<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a2a3f695698e5105f0c011f6d739d700e">mPostXScale</a> == aXScale &amp;&amp; <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#afdb8085a09f19a98d3ddae45241e3b6f">mPostYScale</a> == aYScale) {
<a name="l00820"></a>00820       <span class="keywordflow">return</span>;
<a name="l00821"></a>00821     }
<a name="l00822"></a>00822     <a class="code" href="../../d3/d16/_layers_types_8h.html#a0c74f2cf21e296310f1eaa6c3889dc35">MOZ_LAYERS_LOG_IF_SHADOWABLE</a>(<span class="keyword">this</span>, (<span class="stringliteral">&quot;Layer::Mutated(%p) PostScale&quot;</span>, <span class="keyword">this</span>));
<a name="l00823"></a>00823     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a2a3f695698e5105f0c011f6d739d700e">mPostXScale</a> = aXScale;
<a name="l00824"></a>00824     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#afdb8085a09f19a98d3ddae45241e3b6f">mPostYScale</a> = aYScale;
<a name="l00825"></a>00825     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l00826"></a>00826   }
<a name="l00827"></a>00827 
<a name="l00834"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a23b699801cd469952a16ea376be9c0cf">00834</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a23b699801cd469952a16ea376be9c0cf">SetIsFixedPosition</a>(<span class="keywordtype">bool</span> aFixedPosition)
<a name="l00835"></a>00835   {
<a name="l00836"></a>00836     <span class="keywordflow">if</span> (<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa22a00b6c1fbf60e0c3ee8d015e00b60">mIsFixedPosition</a> != aFixedPosition) {
<a name="l00837"></a>00837       <a class="code" href="../../d3/d16/_layers_types_8h.html#a0c74f2cf21e296310f1eaa6c3889dc35">MOZ_LAYERS_LOG_IF_SHADOWABLE</a>(<span class="keyword">this</span>, (<span class="stringliteral">&quot;Layer::Mutated(%p) IsFixedPosition&quot;</span>, <span class="keyword">this</span>));
<a name="l00838"></a>00838       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa22a00b6c1fbf60e0c3ee8d015e00b60">mIsFixedPosition</a> = aFixedPosition;
<a name="l00839"></a>00839       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l00840"></a>00840     }
<a name="l00841"></a>00841   }
<a name="l00842"></a>00842 
<a name="l00843"></a>00843   <span class="comment">// Call AddAnimation to add a new animation to this layer from layout code.</span>
<a name="l00844"></a>00844   <span class="comment">// Caller must add segments to the returned animation.</span>
<a name="l00845"></a>00845   <span class="comment">// aStart represents the time at the *end* of the delay.</span>
<a name="l00846"></a>00846   Animation* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ab633ef4eed6c0fa78ac78311db3cf226">AddAnimation</a>(<a class="code" href="../../d0/d76/classmozilla_1_1_time_stamp.html">mozilla::TimeStamp</a> aStart, <a class="code" href="../../d9/d7c/classmozilla_1_1_time_duration.html">mozilla::TimeDuration</a> aDuration,
<a name="l00847"></a>00847                           <span class="keywordtype">float</span> aIterations, <span class="keywordtype">int</span> aDirection,
<a name="l00848"></a>00848                           <a class="code" href="../../dc/d10/ns_c_s_s_property_8h.html#a2f9559bc2b3d77fd162eeb0e9a45fdd5">nsCSSProperty</a> aProperty, <span class="keyword">const</span> AnimationData&amp; <a class="code" href="../../d6/d1d/ns_x_p_c_o_m_strings_8h.html#a580e3d1c78551e30e0c97ab45dc8a3b5">aData</a>);
<a name="l00849"></a>00849   <span class="comment">// ClearAnimations clears animations on this layer.</span>
<a name="l00850"></a>00850   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a0334faebdeb2e7e1cf5ad87373b256dc">ClearAnimations</a>();
<a name="l00851"></a>00851   <span class="comment">// This is only called when the layer tree is updated. Do not call this from</span>
<a name="l00852"></a>00852   <span class="comment">// layout code.  To add an animation to this layer, use AddAnimation.</span>
<a name="l00853"></a>00853   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a72539cdff9279ba25eadf8321d7d3a13">SetAnimations</a>(<span class="keyword">const</span> <a class="code" href="../../d5/d27/namespacemozilla_1_1layers.html#a1849c3e67abca4238318ff2dd347bcd2">AnimationArray</a>&amp; aAnimations);
<a name="l00854"></a>00854 
<a name="l00862"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac8a800fef285786b035819541600d7e2">00862</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac8a800fef285786b035819541600d7e2">SetFixedPositionAnchor</a>(<span class="keyword">const</span> <a class="code" href="../../de/d80/structmozilla_1_1gfx_1_1_point_typed.html">LayerPoint</a>&amp; aAnchor)
<a name="l00863"></a>00863   {
<a name="l00864"></a>00864     <span class="keywordflow">if</span> (<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9cd4e66e01c73221b7a2bde02d684a15">mAnchor</a> != aAnchor) {
<a name="l00865"></a>00865       <a class="code" href="../../d3/d16/_layers_types_8h.html#a0c74f2cf21e296310f1eaa6c3889dc35">MOZ_LAYERS_LOG_IF_SHADOWABLE</a>(<span class="keyword">this</span>, (<span class="stringliteral">&quot;Layer::Mutated(%p) FixedPositionAnchor&quot;</span>, <span class="keyword">this</span>));
<a name="l00866"></a>00866       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9cd4e66e01c73221b7a2bde02d684a15">mAnchor</a> = aAnchor;
<a name="l00867"></a>00867       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l00868"></a>00868     }
<a name="l00869"></a>00869   }
<a name="l00870"></a>00870 
<a name="l00882"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9c0bef326735199c3c0e0648bf27e074">00882</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9c0bef326735199c3c0e0648bf27e074">SetFixedPositionMargins</a>(<span class="keyword">const</span> <a class="code" href="../../d8/d1c/structmozilla_1_1gfx_1_1_margin_typed.html">LayerMargin</a>&amp; aMargins)
<a name="l00883"></a>00883   {
<a name="l00884"></a>00884     <span class="keywordflow">if</span> (<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a8667e154e1c4db5ebc84abf1785a0c44">mMargins</a> != aMargins) {
<a name="l00885"></a>00885       <a class="code" href="../../d3/d16/_layers_types_8h.html#a0c74f2cf21e296310f1eaa6c3889dc35">MOZ_LAYERS_LOG_IF_SHADOWABLE</a>(<span class="keyword">this</span>, (<span class="stringliteral">&quot;Layer::Mutated(%p) FixedPositionMargins&quot;</span>, <span class="keyword">this</span>));
<a name="l00886"></a>00886       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a8667e154e1c4db5ebc84abf1785a0c44">mMargins</a> = aMargins;
<a name="l00887"></a>00887       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l00888"></a>00888     }
<a name="l00889"></a>00889   }
<a name="l00890"></a>00890 
<a name="l00891"></a>00891   <span class="comment">// These getters can be used anytime.</span>
<a name="l00892"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a4f8854fccb049eeb8ba7b7be09e8bb63">00892</a>   <span class="keywordtype">float</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a4f8854fccb049eeb8ba7b7be09e8bb63">GetOpacity</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a63189af4b38f7d25a1c38f5ddfb6092f">mOpacity</a>; }
<a name="l00893"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a77d92665ae2c390a92bee4bf5308242c">00893</a>   <span class="keyword">const</span> <a class="code" href="../../d7/dc7/structns_int_rect.html">nsIntRect</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a77d92665ae2c390a92bee4bf5308242c">GetClipRect</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a1ac3a2b6d7afd2190c90fac82e164728">mUseClipRect</a> ? &amp;<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a054b516da10f7bd4f531e3072845322b">mClipRect</a> : <span class="keyword">nullptr</span>; }
<a name="l00894"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a844c459386dd67a9bbff981d65a9641c">00894</a>   uint32_t <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a844c459386dd67a9bbff981d65a9641c">GetContentFlags</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a868b53f4bb0496c8ec3fcf68a02ef4d6">mContentFlags</a>; }
<a name="l00895"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a798e48b44a3049a9d9b9753f2d0beafe">00895</a>   <span class="keyword">const</span> <a class="code" href="../../d5/d82/classns_int_region.html">nsIntRegion</a>&amp; <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a798e48b44a3049a9d9b9753f2d0beafe">GetVisibleRegion</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a61aa8815d140d4927184b5de5e53274b">mVisibleRegion</a>; }
<a name="l00896"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ad50ea4291b9138cca43b235c805b18aa">00896</a>   <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html">ContainerLayer</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ad50ea4291b9138cca43b235c805b18aa">GetParent</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa75c8afe91af30a95ef98503b9096122">mParent</a>; }
<a name="l00897"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a80f92b49bf60a61e4919fd59c6e4e60f">00897</a>   <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a80f92b49bf60a61e4919fd59c6e4e60f">GetNextSibling</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#af5e74b7fb424c999861547f2cb1914af">mNextSibling</a>; }
<a name="l00898"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7b783b224345e22dc48e28a4165757ff">00898</a>   <span class="keyword">const</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7b783b224345e22dc48e28a4165757ff">GetNextSibling</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#af5e74b7fb424c999861547f2cb1914af">mNextSibling</a>; }
<a name="l00899"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#abae2e7580e7b2bbd828f68fd30f74d90">00899</a>   <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#abae2e7580e7b2bbd828f68fd30f74d90">GetPrevSibling</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a30474e8fd049bfb485257818612155b6">mPrevSibling</a>; }
<a name="l00900"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aeb9e1515ba601c2571a04ed7fcebb2ff">00900</a>   <span class="keyword">const</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aeb9e1515ba601c2571a04ed7fcebb2ff">GetPrevSibling</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a30474e8fd049bfb485257818612155b6">mPrevSibling</a>; }
<a name="l00901"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa30ab0b4cdfd05c81a1e0cf43ccfbffa">00901</a>   <span class="keyword">virtual</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa30ab0b4cdfd05c81a1e0cf43ccfbffa">GetFirstChild</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; }
<a name="l00902"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a0e0fc2fb2beaab11f9af89684631c1a5">00902</a>   <span class="keyword">virtual</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a0e0fc2fb2beaab11f9af89684631c1a5">GetLastChild</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; }
<a name="l00903"></a>00903   <span class="keyword">const</span> <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ab38bfd091ba3cbfc37dc561f25996bf3">GetTransform</a>() <span class="keyword">const</span>;
<a name="l00904"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a92a5c75e60dfae60c738766095c20788">00904</a>   <span class="keyword">const</span> <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a>&amp; <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a92a5c75e60dfae60c738766095c20788">GetBaseTransform</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a1494a7d7a665228b8bb2ef556c0138e7">mTransform</a>; }
<a name="l00905"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ae4b7526c2665098f8c2eafcf99ab3c09">00905</a>   <span class="keywordtype">float</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ae4b7526c2665098f8c2eafcf99ab3c09">GetPostXScale</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a2a3f695698e5105f0c011f6d739d700e">mPostXScale</a>; }
<a name="l00906"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7ef6ca3a9c85e26a9ab276eff11852a2">00906</a>   <span class="keywordtype">float</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7ef6ca3a9c85e26a9ab276eff11852a2">GetPostYScale</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#afdb8085a09f19a98d3ddae45241e3b6f">mPostYScale</a>; }
<a name="l00907"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ab0ece514a75d74dd74a622b75d3a9514">00907</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ab0ece514a75d74dd74a622b75d3a9514">GetIsFixedPosition</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa22a00b6c1fbf60e0c3ee8d015e00b60">mIsFixedPosition</a>; }
<a name="l00908"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a25e163f9644fe0cfa6a6da6f6972f51a">00908</a>   <a class="code" href="../../de/d80/structmozilla_1_1gfx_1_1_point_typed.html">LayerPoint</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a25e163f9644fe0cfa6a6da6f6972f51a">GetFixedPositionAnchor</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9cd4e66e01c73221b7a2bde02d684a15">mAnchor</a>; }
<a name="l00909"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac0cb376e819b42e1b251abe81a1aa93d">00909</a>   <span class="keyword">const</span> <a class="code" href="../../d8/d1c/structmozilla_1_1gfx_1_1_margin_typed.html">LayerMargin</a>&amp; <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac0cb376e819b42e1b251abe81a1aa93d">GetFixedPositionMargins</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a8667e154e1c4db5ebc84abf1785a0c44">mMargins</a>; }
<a name="l00910"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa85f5a4a5058dccf008e14e72c55580f">00910</a>   <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa85f5a4a5058dccf008e14e72c55580f">GetMaskLayer</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a96576b4923c191f5ecbb5f007f8fbe33">mMaskLayer</a>; }
<a name="l00911"></a>00911 
<a name="l00912"></a>00912   <span class="comment">// Note that all lengths in animation data are either in CSS pixels or app</span>
<a name="l00913"></a>00913   <span class="comment">// units and must be converted to device pixels by the compositor.</span>
<a name="l00914"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a59e8f91ff2138f917dd6039f7501d9b3">00914</a>   <a class="code" href="../../d5/d27/namespacemozilla_1_1layers.html#a1849c3e67abca4238318ff2dd347bcd2">AnimationArray</a>&amp; <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a59e8f91ff2138f917dd6039f7501d9b3">GetAnimations</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7d0d0a17eb9f504e5be979cd6ccca876">mAnimations</a>; }
<a name="l00915"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ad4822b7fb740ad8995ce9eab28e5968c">00915</a>   InfallibleTArray&lt;AnimData&gt;&amp; <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ad4822b7fb740ad8995ce9eab28e5968c">GetAnimationData</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7fd0c0970637e84f8b880e0eb78fe09e">mAnimationData</a>; }
<a name="l00916"></a>00916 
<a name="l00917"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a2db237205c14501d081aa86b89e85d4b">00917</a>   uint64_t <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a2db237205c14501d081aa86b89e85d4b">GetAnimationGeneration</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa490583a22a95b0816478d0bb5c88e99">mAnimationGeneration</a>; }
<a name="l00918"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ae59136dab038a315a8e7b848b9496cee">00918</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ae59136dab038a315a8e7b848b9496cee">SetAnimationGeneration</a>(uint64_t aCount) { <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa490583a22a95b0816478d0bb5c88e99">mAnimationGeneration</a> = aCount; }
<a name="l00919"></a>00919 
<a name="l00924"></a>00924   <span class="keyword">const</span> <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#af4d95c385933ec1e96514097a1c7da7b">GetLocalTransform</a>();
<a name="l00925"></a>00925 
<a name="l00930"></a>00930   <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aaca93e55a80a45f3ea81a6dd0436e390">GetLocalOpacity</a>();
<a name="l00931"></a>00931 
<a name="l00938"></a>00938   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9e82a6515fa134577355caeaf29b5cb4">ApplyPendingUpdatesToSubtree</a>();
<a name="l00939"></a>00939 
<a name="l00946"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac65ebcd8e1dd1ef7ed3144af64f012f3">00946</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac65ebcd8e1dd1ef7ed3144af64f012f3">FillSpecificAttributes</a>(SpecificLayerAttributes&amp; aAttrs) { }
<a name="l00947"></a>00947 
<a name="l00948"></a>00948   <span class="comment">// Returns true if it&#39;s OK to save the contents of aLayer in an</span>
<a name="l00949"></a>00949   <span class="comment">// opaque surface (a surface without an alpha channel).</span>
<a name="l00950"></a>00950   <span class="comment">// If we can use a surface without an alpha channel, we should, because</span>
<a name="l00951"></a>00951   <span class="comment">// it will often make painting of antialiased text faster and higher</span>
<a name="l00952"></a>00952   <span class="comment">// quality.</span>
<a name="l00953"></a>00953   <span class="keywordtype">bool</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a3ce20ef9d7975500fd90be7aee63d378">CanUseOpaqueSurface</a>();
<a name="l00954"></a>00954 
<a name="l00955"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a40c05c1d60e6ef95149490d08c515a0a">00955</a>   <span class="keyword">enum</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a40c05c1d60e6ef95149490d08c515a0a">SurfaceMode</a> {
<a name="l00956"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a40c05c1d60e6ef95149490d08c515a0aad9948ece3dda8dd60664696a49b6a2b5">00956</a>     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a40c05c1d60e6ef95149490d08c515a0aad9948ece3dda8dd60664696a49b6a2b5">SURFACE_OPAQUE</a>,
<a name="l00957"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a40c05c1d60e6ef95149490d08c515a0aa110ae9dcccadbe11167cb39ab789a288">00957</a>     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a40c05c1d60e6ef95149490d08c515a0aa110ae9dcccadbe11167cb39ab789a288">SURFACE_SINGLE_CHANNEL_ALPHA</a>,
<a name="l00958"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a40c05c1d60e6ef95149490d08c515a0aa36bae78b633c1b31a1776be974bc8412">00958</a>     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a40c05c1d60e6ef95149490d08c515a0aa36bae78b633c1b31a1776be974bc8412">SURFACE_COMPONENT_ALPHA</a>
<a name="l00959"></a>00959   };
<a name="l00960"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a02d14e52f2b50adb1c3ca1ccd4e7188d">00960</a>   <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a40c05c1d60e6ef95149490d08c515a0a">SurfaceMode</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a02d14e52f2b50adb1c3ca1ccd4e7188d">GetSurfaceMode</a>()
<a name="l00961"></a>00961   {
<a name="l00962"></a>00962     <span class="keywordflow">if</span> (<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a3ce20ef9d7975500fd90be7aee63d378">CanUseOpaqueSurface</a>())
<a name="l00963"></a>00963       <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a40c05c1d60e6ef95149490d08c515a0aad9948ece3dda8dd60664696a49b6a2b5">SURFACE_OPAQUE</a>;
<a name="l00964"></a>00964     <span class="keywordflow">if</span> (<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a868b53f4bb0496c8ec3fcf68a02ef4d6">mContentFlags</a> &amp; <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a82ae8e00e21fa79fe0f88a854ea15c44a4b45f8965453048eeaccfad39ffa3da5">CONTENT_COMPONENT_ALPHA</a>)
<a name="l00965"></a>00965       <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a40c05c1d60e6ef95149490d08c515a0aa36bae78b633c1b31a1776be974bc8412">SURFACE_COMPONENT_ALPHA</a>;
<a name="l00966"></a>00966     <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a40c05c1d60e6ef95149490d08c515a0aa110ae9dcccadbe11167cb39ab789a288">SURFACE_SINGLE_CHANNEL_ALPHA</a>;
<a name="l00967"></a>00967   }
<a name="l00968"></a>00968 
<a name="l00973"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a84b5e5121cc59173a84f2c06897e329a">00973</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a84b5e5121cc59173a84f2c06897e329a">SetUserData</a>(<span class="keywordtype">void</span>* aKey, <a class="code" href="../../df/d95/classmozilla_1_1layers_1_1_layer_user_data.html">LayerUserData</a>* <a class="code" href="../../d6/d1d/ns_x_p_c_o_m_strings_8h.html#a580e3d1c78551e30e0c97ab45dc8a3b5">aData</a>)
<a name="l00974"></a>00974   {
<a name="l00975"></a>00975     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a732071e884571c2326dff373bc061cc1">mUserData</a>.<a class="code" href="../../d1/db5/classmozilla_1_1gfx_1_1_user_data.html#a73f0cfc8b9efb36aaae55cb80d43d5bb">Add</a>(static_cast&lt;gfx::UserDataKey*&gt;(aKey), aData, LayerManagerUserDataDestroy);
<a name="l00976"></a>00976   }
<a name="l00980"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a175677d44f8adab82e9b591ab70d7349">00980</a>   <a class="code" href="../../d1/d89/classns_auto_ptr.html">nsAutoPtr&lt;LayerUserData&gt;</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a175677d44f8adab82e9b591ab70d7349">RemoveUserData</a>(<span class="keywordtype">void</span>* aKey)
<a name="l00981"></a>00981   {
<a name="l00982"></a>00982     <a class="code" href="../../d1/d89/classns_auto_ptr.html">nsAutoPtr&lt;LayerUserData&gt;</a> d(static_cast&lt;LayerUserData*&gt;(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a732071e884571c2326dff373bc061cc1">mUserData</a>.<a class="code" href="../../d1/db5/classmozilla_1_1gfx_1_1_user_data.html#aa79c780e768d613e7a00e3f9af83c258">Remove</a>(static_cast&lt;gfx::UserDataKey*&gt;(aKey))));
<a name="l00983"></a>00983     <span class="keywordflow">return</span> d;
<a name="l00984"></a>00984   }
<a name="l00988"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a87a865d67980dc7d5dd824e5afbd1d68">00988</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a87a865d67980dc7d5dd824e5afbd1d68">HasUserData</a>(<span class="keywordtype">void</span>* aKey)
<a name="l00989"></a>00989   {
<a name="l00990"></a>00990     <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a732071e884571c2326dff373bc061cc1">mUserData</a>.<a class="code" href="../../d1/db5/classmozilla_1_1gfx_1_1_user_data.html#a48b8c0bc6790b86497d76212b5b3c051">Has</a>(static_cast&lt;gfx::UserDataKey*&gt;(aKey));
<a name="l00991"></a>00991   }
<a name="l00996"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ad84e01ca65a876473c752f882656fbfb">00996</a>   <a class="code" href="../../df/d95/classmozilla_1_1layers_1_1_layer_user_data.html">LayerUserData</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ad84e01ca65a876473c752f882656fbfb">GetUserData</a>(<span class="keywordtype">void</span>* aKey)<span class="keyword"> const</span>
<a name="l00997"></a>00997 <span class="keyword">  </span>{
<a name="l00998"></a>00998     <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="../../df/d95/classmozilla_1_1layers_1_1_layer_user_data.html">LayerUserData</a>*<span class="keyword">&gt;</span>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a732071e884571c2326dff373bc061cc1">mUserData</a>.<a class="code" href="../../d1/db5/classmozilla_1_1gfx_1_1_user_data.html#afb0149c8154933b69dc01dabfc6ce090">Get</a>(static_cast&lt;gfx::UserDataKey*&gt;(aKey)));
<a name="l00999"></a>00999   }
<a name="l01000"></a>01000 
<a name="l01010"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a1cdad11272d33abf8061169b399b84b1">01010</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a1cdad11272d33abf8061169b399b84b1">Disconnect</a>() {}
<a name="l01011"></a>01011 
<a name="l01016"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a099109fb9e7751b0d73832e82ce8ef07">01016</a>   <span class="keyword">virtual</span> <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html">ThebesLayer</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a099109fb9e7751b0d73832e82ce8ef07">AsThebesLayer</a>() { <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; }
<a name="l01017"></a>01017 
<a name="l01022"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ad3be81414cfda993582201d9ced6cf2f">01022</a>   <span class="keyword">virtual</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html">ContainerLayer</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ad3be81414cfda993582201d9ced6cf2f">AsContainerLayer</a>() { <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; }
<a name="l01023"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a2bc404847d18ef5f7c73092f51f85b1c">01023</a>   <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html">ContainerLayer</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a2bc404847d18ef5f7c73092f51f85b1c">AsContainerLayer</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; }
<a name="l01024"></a>01024 
<a name="l01029"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a109bdb39458ebcd0b4608bbbb52249da">01029</a>   <span class="keyword">virtual</span> <a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html">RefLayer</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a109bdb39458ebcd0b4608bbbb52249da">AsRefLayer</a>() { <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; }
<a name="l01030"></a>01030 
<a name="l01035"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#afbda86a7db2f6478a9f284fc8a2066b7">01035</a>   <span class="keyword">virtual</span> <a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html">ColorLayer</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#afbda86a7db2f6478a9f284fc8a2066b7">AsColorLayer</a>() { <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; }
<a name="l01036"></a>01036 
<a name="l01041"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aac98a29d4679dde51b1678237fa8f467">01041</a>   <span class="keyword">virtual</span> <a class="code" href="../../d9/d63/classmozilla_1_1layers_1_1_layer_composite.html">LayerComposite</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aac98a29d4679dde51b1678237fa8f467">AsLayerComposite</a>() { <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; }
<a name="l01042"></a>01042 
<a name="l01047"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ae56f42db94b7bc3f3e832efa1d2f7078">01047</a>   <span class="keyword">virtual</span> <a class="code" href="../../d3/d67/classmozilla_1_1layers_1_1_shadowable_layer.html">ShadowableLayer</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ae56f42db94b7bc3f3e832efa1d2f7078">AsShadowableLayer</a>() { <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; }
<a name="l01048"></a>01048 
<a name="l01049"></a>01049   <span class="comment">// These getters can be used anytime.  They return the effective</span>
<a name="l01050"></a>01050   <span class="comment">// values that should be used when drawing this layer to screen,</span>
<a name="l01051"></a>01051   <span class="comment">// accounting for this layer possibly being a shadow.</span>
<a name="l01052"></a>01052   <span class="keyword">const</span> <a class="code" href="../../d7/dc7/structns_int_rect.html">nsIntRect</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#afb130d7364493d4995d55e4350a42e56">GetEffectiveClipRect</a>();
<a name="l01053"></a>01053   <span class="keyword">const</span> <a class="code" href="../../d5/d82/classns_int_region.html">nsIntRegion</a>&amp; <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a504b018ef35dcd3ec3ca4e4e10a19ea5">GetEffectiveVisibleRegion</a>();
<a name="l01058"></a>01058   <span class="keywordtype">float</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a845d64760045c7836d55522b2590827b">GetEffectiveOpacity</a>();
<a name="l01067"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac524dc8a9e96421bef0fc81d289d8914">01067</a>   <span class="keyword">const</span> <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a>&amp; <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac524dc8a9e96421bef0fc81d289d8914">GetEffectiveTransform</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7c8c67155db03b8f6f9c1ba1588574e1">mEffectiveTransform</a>; }
<a name="l01068"></a>01068 
<a name="l01080"></a>01080   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ada57315a7aa737d88814af734874a247">ComputeEffectiveTransforms</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a>&amp; aTransformToSurface) = 0;
<a name="l01081"></a>01081 
<a name="l01085"></a>01085   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a47b90c9fc15ae3fb37f14a0f6347c608">ComputeEffectiveTransformForMaskLayer</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a>&amp; aTransformToSurface);
<a name="l01086"></a>01086 
<a name="l01097"></a>01097   <a class="code" href="../../d7/dc7/structns_int_rect.html">nsIntRect</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a6447b39d11c48c288e2839b35b162359">CalculateScissorRect</a>(<span class="keyword">const</span> <a class="code" href="../../d7/dc7/structns_int_rect.html">nsIntRect</a>&amp; aCurrentScissorRect,
<a name="l01098"></a>01098                                  <span class="keyword">const</span> <a class="code" href="../../d1/d4f/structgfx_matrix.html">gfxMatrix</a>* aWorldTransform);
<a name="l01099"></a>01099 
<a name="l01100"></a>01100   <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa1953e65deb232d462cee696f302083c">Name</a>() <span class="keyword">const</span> =0;
<a name="l01101"></a>01101   <span class="keyword">virtual</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9">LayerType</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a44945f9e774c8056c3f1bf755853eb8a">GetType</a>() <span class="keyword">const</span> =0;
<a name="l01102"></a>01102 
<a name="l01108"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a29dfa9f0c0475b2c89fbbaa8f1ba42b9">01108</a>   <span class="keywordtype">void</span>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a29dfa9f0c0475b2c89fbbaa8f1ba42b9">ImplData</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a8d8974e76a1a7108755e81dd84fe51d2">mImplData</a>; }
<a name="l01109"></a>01109 
<a name="l01113"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ae364d2e0929939b9704b28f47cad62ab">01113</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ae364d2e0929939b9704b28f47cad62ab">SetParent</a>(<a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html">ContainerLayer</a>* aParent) { <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa75c8afe91af30a95ef98503b9096122">mParent</a> = aParent; }
<a name="l01114"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a1a7acb7fe5f0feb465f0848ae11fa25c">01114</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a1a7acb7fe5f0feb465f0848ae11fa25c">SetNextSibling</a>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aSibling) { <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#af5e74b7fb424c999861547f2cb1914af">mNextSibling</a> = aSibling; }
<a name="l01115"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#af0867b484260b693da02e9a5d26fa59e">01115</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#af0867b484260b693da02e9a5d26fa59e">SetPrevSibling</a>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aSibling) { <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a30474e8fd049bfb485257818612155b6">mPrevSibling</a> = aSibling; }
<a name="l01116"></a>01116 
<a name="l01121"></a>01121   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a919cacbb6c05aa2062454e1b50b0eab9">Dump</a>(<a class="code" href="../../d1/ddf/ns_i_content_viewer_file_8idl.html#a2a9799b7b2af884315027dd95725e0c3">FILE</a>* aFile=<span class="keyword">nullptr</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>* aPrefix=<span class="stringliteral">&quot;&quot;</span>, <span class="keywordtype">bool</span> aDumpHtml=<span class="keyword">false</span>);
<a name="l01126"></a>01126   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a1d90ba28e3a03dee6cdcccbe01fe03fd">DumpSelf</a>(<a class="code" href="../../d1/ddf/ns_i_content_viewer_file_8idl.html#a2a9799b7b2af884315027dd95725e0c3">FILE</a>* aFile=<span class="keyword">nullptr</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>* aPrefix=<span class="stringliteral">&quot;&quot;</span>);
<a name="l01127"></a>01127 
<a name="l01132"></a>01132   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ad1dcfa7a6758a5910f683935577c2333">Log</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* aPrefix=<span class="stringliteral">&quot;&quot;</span>);
<a name="l01137"></a>01137   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a20a6d150267c71286074c9cc7ddc7c03">LogSelf</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* aPrefix=<span class="stringliteral">&quot;&quot;</span>);
<a name="l01138"></a>01138 
<a name="l01139"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a0f4f38642a1a73bc13a76953bbdfe3cb">01139</a>   <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a0f4f38642a1a73bc13a76953bbdfe3cb">IsLogEnabled</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a0f4f38642a1a73bc13a76953bbdfe3cb">LayerManager::IsLogEnabled</a>(); }
<a name="l01140"></a>01140 
<a name="l01145"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a99c805e22667abd8c482166cfb42ca50">01145</a>   <span class="keyword">const</span> <a class="code" href="../../d5/d82/classns_int_region.html">nsIntRegion</a>&amp; <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a99c805e22667abd8c482166cfb42ca50">GetInvalidRegion</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a070f109d61b6a7f204386dab6a51a0a5">mInvalidRegion</a>; }
<a name="l01146"></a>01146 
<a name="l01150"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aac1bc9d04f22051c33510ac735f480df">01150</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aac1bc9d04f22051c33510ac735f480df">SetInvalidRectToVisibleRegion</a>() { <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a070f109d61b6a7f204386dab6a51a0a5">mInvalidRegion</a> = <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a798e48b44a3049a9d9b9753f2d0beafe">GetVisibleRegion</a>(); }
<a name="l01151"></a>01151 
<a name="l01155"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a0be925fe7778140fbafd4d14de7e2fb5">01155</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a0be925fe7778140fbafd4d14de7e2fb5">AddInvalidRect</a>(<span class="keyword">const</span> <a class="code" href="../../d7/dc7/structns_int_rect.html">nsIntRect</a>&amp; aRect) { <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a070f109d61b6a7f204386dab6a51a0a5">mInvalidRegion</a>.<a class="code" href="../../d5/d82/classns_int_region.html#ace2f179abc62139fed2bff20411a7d88">Or</a>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a070f109d61b6a7f204386dab6a51a0a5">mInvalidRegion</a>, aRect); }
<a name="l01156"></a>01156 
<a name="l01161"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#af5207c6b210d826a039c30f87e7a51e0">01161</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#af5207c6b210d826a039c30f87e7a51e0">ClearInvalidRect</a>() { <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a070f109d61b6a7f204386dab6a51a0a5">mInvalidRegion</a>.<a class="code" href="../../d5/d82/classns_int_region.html#a0eacbcbcec29632ec03b9fe3dd8b0534">SetEmpty</a>(); }
<a name="l01162"></a>01162 
<a name="l01163"></a>01163   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa5d41df827d250ac06873ff6e727b385">ApplyPendingUpdatesForThisTransaction</a>();
<a name="l01164"></a>01164 
<a name="l01165"></a>01165 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l01166"></a>01166 <span class="preprocessor"></span>  <span class="keywordtype">void</span> SetDebugColorIndex(uint32_t aIndex) { <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa2333117693b193472de2ee0f53434a6">mDebugColorIndex</a> = aIndex; }
<a name="l01167"></a>01167   uint32_t GetDebugColorIndex() { <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa2333117693b193472de2ee0f53434a6">mDebugColorIndex</a>; }
<a name="l01168"></a>01168 <span class="preprocessor">#endif</span>
<a name="l01169"></a>01169 <span class="preprocessor"></span>
<a name="l01170"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9ef052a66e0926c452237f8f9eece539">01170</a>   <span class="keyword">virtual</span> <a class="code" href="../../d5/d06/structmozilla_1_1layers_1_1_layer_render_state.html">LayerRenderState</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9ef052a66e0926c452237f8f9eece539">GetRenderState</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d5/d06/structmozilla_1_1layers_1_1_layer_render_state.html">LayerRenderState</a>(); }
<a name="l01171"></a>01171 
<a name="l01172"></a>01172 <span class="keyword">protected</span>:
<a name="l01173"></a>01173   <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#adb340ea61c4dbbb64fc3d46bce330273">Layer</a>(<a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html">LayerManager</a>* aManager, <span class="keywordtype">void</span>* aImplData);
<a name="l01174"></a>01174 
<a name="l01175"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">01175</a>   <span class="keywordtype">void</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>()
<a name="l01176"></a>01176   {
<a name="l01177"></a>01177     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a653fa6f7c923e15679569a3b86401cc1">mManager</a>-&gt;<a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#a0c2bcccdde33725f790b0aabfb84ffa3">Mutated</a>(<span class="keyword">this</span>);
<a name="l01178"></a>01178   }
<a name="l01179"></a>01179 
<a name="l01180"></a>01180   <span class="comment">// Print interesting information about this into aTo.  Internally</span>
<a name="l01181"></a>01181   <span class="comment">// used to implement Dump*() and Log*().  If subclasses have</span>
<a name="l01182"></a>01182   <span class="comment">// additional interesting properties, they should override this with</span>
<a name="l01183"></a>01183   <span class="comment">// an implementation that first calls the base implementation then</span>
<a name="l01184"></a>01184   <span class="comment">// appends additional info to aTo.</span>
<a name="l01185"></a>01185   <span class="keyword">virtual</span> nsACString&amp; <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac8a3d0b1a4d19dba28770c805dd2d374">PrintInfo</a>(nsACString&amp; aTo, <span class="keyword">const</span> <span class="keywordtype">char</span>* aPrefix);
<a name="l01186"></a>01186 
<a name="l01212"></a>01212   <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aeb9e8037f60934719f7732aa8a113bc2">SnapTransformTranslation</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a>&amp; aTransform,
<a name="l01213"></a>01213                                        <a class="code" href="../../d1/d4f/structgfx_matrix.html">gfxMatrix</a>* aResidualTransform);
<a name="l01225"></a>01225   <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9a122ad84c9698e0834db36a1db456b7">SnapTransform</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a>&amp; aTransform,
<a name="l01226"></a>01226                             <span class="keyword">const</span> <a class="code" href="../../de/d69/structgfx_rect.html">gfxRect</a>&amp; aSnapRect,
<a name="l01227"></a>01227                             <a class="code" href="../../d1/d4f/structgfx_matrix.html">gfxMatrix</a>* aResidualTransform);
<a name="l01228"></a>01228 
<a name="l01235"></a>01235   <span class="keywordtype">bool</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a511076800fa6a12cbf9ed9dd27f89769">MayResample</a>();
<a name="l01236"></a>01236 
<a name="l01237"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a653fa6f7c923e15679569a3b86401cc1">01237</a>   <a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html">LayerManager</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a653fa6f7c923e15679569a3b86401cc1">mManager</a>;
<a name="l01238"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa75c8afe91af30a95ef98503b9096122">01238</a>   <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html">ContainerLayer</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa75c8afe91af30a95ef98503b9096122">mParent</a>;
<a name="l01239"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#af5e74b7fb424c999861547f2cb1914af">01239</a>   <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#af5e74b7fb424c999861547f2cb1914af">mNextSibling</a>;
<a name="l01240"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a30474e8fd049bfb485257818612155b6">01240</a>   <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a30474e8fd049bfb485257818612155b6">mPrevSibling</a>;
<a name="l01241"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a8d8974e76a1a7108755e81dd84fe51d2">01241</a>   <span class="keywordtype">void</span>* <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a8d8974e76a1a7108755e81dd84fe51d2">mImplData</a>;
<a name="l01242"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a96576b4923c191f5ecbb5f007f8fbe33">01242</a>   <a class="code" href="../../d0/d01/classns_ref_ptr.html">nsRefPtr&lt;Layer&gt;</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a96576b4923c191f5ecbb5f007f8fbe33">mMaskLayer</a>;
<a name="l01243"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a732071e884571c2326dff373bc061cc1">01243</a>   <a class="code" href="../../d1/db5/classmozilla_1_1gfx_1_1_user_data.html">gfx::UserData</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a732071e884571c2326dff373bc061cc1">mUserData</a>;
<a name="l01244"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a61aa8815d140d4927184b5de5e53274b">01244</a>   <a class="code" href="../../d5/d82/classns_int_region.html">nsIntRegion</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a61aa8815d140d4927184b5de5e53274b">mVisibleRegion</a>;
<a name="l01245"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a1494a7d7a665228b8bb2ef556c0138e7">01245</a>   <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a1494a7d7a665228b8bb2ef556c0138e7">mTransform</a>;
<a name="l01246"></a>01246   <span class="comment">// A mutation of |mTransform| that we&#39;ve queued to be applied at the</span>
<a name="l01247"></a>01247   <span class="comment">// end of the next transaction (if nothing else overrides it in the</span>
<a name="l01248"></a>01248   <span class="comment">// meantime).</span>
<a name="l01249"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7f1a421b81ee86a9674403d513931be2">01249</a>   <a class="code" href="../../d1/d89/classns_auto_ptr.html">nsAutoPtr&lt;gfx3DMatrix&gt;</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7f1a421b81ee86a9674403d513931be2">mPendingTransform</a>;
<a name="l01250"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a2a3f695698e5105f0c011f6d739d700e">01250</a>   <span class="keywordtype">float</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a2a3f695698e5105f0c011f6d739d700e">mPostXScale</a>;
<a name="l01251"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#afdb8085a09f19a98d3ddae45241e3b6f">01251</a>   <span class="keywordtype">float</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#afdb8085a09f19a98d3ddae45241e3b6f">mPostYScale</a>;
<a name="l01252"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7c8c67155db03b8f6f9c1ba1588574e1">01252</a>   <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7c8c67155db03b8f6f9c1ba1588574e1">mEffectiveTransform</a>;
<a name="l01253"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7d0d0a17eb9f504e5be979cd6ccca876">01253</a>   <a class="code" href="../../d5/d27/namespacemozilla_1_1layers.html#a1849c3e67abca4238318ff2dd347bcd2">AnimationArray</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7d0d0a17eb9f504e5be979cd6ccca876">mAnimations</a>;
<a name="l01254"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7fd0c0970637e84f8b880e0eb78fe09e">01254</a>   InfallibleTArray&lt;AnimData&gt; <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7fd0c0970637e84f8b880e0eb78fe09e">mAnimationData</a>;
<a name="l01255"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a63189af4b38f7d25a1c38f5ddfb6092f">01255</a>   <span class="keywordtype">float</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a63189af4b38f7d25a1c38f5ddfb6092f">mOpacity</a>;
<a name="l01256"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a054b516da10f7bd4f531e3072845322b">01256</a>   <a class="code" href="../../d7/dc7/structns_int_rect.html">nsIntRect</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a054b516da10f7bd4f531e3072845322b">mClipRect</a>;
<a name="l01257"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#adb6e7021febac0e9aa1abbec2db84923">01257</a>   <a class="code" href="../../d7/dc7/structns_int_rect.html">nsIntRect</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#adb6e7021febac0e9aa1abbec2db84923">mTileSourceRect</a>;
<a name="l01258"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a070f109d61b6a7f204386dab6a51a0a5">01258</a>   <a class="code" href="../../d5/d82/classns_int_region.html">nsIntRegion</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a070f109d61b6a7f204386dab6a51a0a5">mInvalidRegion</a>;
<a name="l01259"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a868b53f4bb0496c8ec3fcf68a02ef4d6">01259</a>   uint32_t <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a868b53f4bb0496c8ec3fcf68a02ef4d6">mContentFlags</a>;
<a name="l01260"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a1ac3a2b6d7afd2190c90fac82e164728">01260</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a1ac3a2b6d7afd2190c90fac82e164728">mUseClipRect</a>;
<a name="l01261"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a6d9a796af886ec5b14704eaae49e9b24">01261</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a6d9a796af886ec5b14704eaae49e9b24">mUseTileSourceRect</a>;
<a name="l01262"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa22a00b6c1fbf60e0c3ee8d015e00b60">01262</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa22a00b6c1fbf60e0c3ee8d015e00b60">mIsFixedPosition</a>;
<a name="l01263"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9cd4e66e01c73221b7a2bde02d684a15">01263</a>   <a class="code" href="../../de/d80/structmozilla_1_1gfx_1_1_point_typed.html">LayerPoint</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9cd4e66e01c73221b7a2bde02d684a15">mAnchor</a>;
<a name="l01264"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a8667e154e1c4db5ebc84abf1785a0c44">01264</a>   <a class="code" href="../../d8/d1c/structmozilla_1_1gfx_1_1_margin_typed.html">LayerMargin</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a8667e154e1c4db5ebc84abf1785a0c44">mMargins</a>;
<a name="l01265"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa2333117693b193472de2ee0f53434a6">01265</a>   <a class="code" href="../../d8/d2e/classmozilla_1_1_debug_only.html">DebugOnly&lt;uint32_t&gt;</a> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa2333117693b193472de2ee0f53434a6">mDebugColorIndex</a>;
<a name="l01266"></a>01266   <span class="comment">// If this layer is used for OMTA, then this counter is used to ensure we</span>
<a name="l01267"></a>01267   <span class="comment">// stay in sync with the animation manager</span>
<a name="l01268"></a><a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa490583a22a95b0816478d0bb5c88e99">01268</a>   uint64_t <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aa490583a22a95b0816478d0bb5c88e99">mAnimationGeneration</a>;
<a name="l01269"></a>01269 };
<a name="l01270"></a>01270 
<a name="l01282"></a><a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html">01282</a> <span class="keyword">class </span><a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html">ThebesLayer</a> : <span class="keyword">public</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a> {
<a name="l01283"></a>01283 <span class="keyword">public</span>:
<a name="l01290"></a>01290   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a3410b9a5ea379cf950035e3901b6833a">InvalidateRegion</a>(<span class="keyword">const</span> <a class="code" href="../../d5/d82/classns_int_region.html">nsIntRegion</a>&amp; aRegion) = 0;
<a name="l01303"></a><a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a41fa48dac77f7ca313a8600155200a31">01303</a>   <span class="keywordtype">void</span> <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a41fa48dac77f7ca313a8600155200a31">SetAllowResidualTranslation</a>(<span class="keywordtype">bool</span> aAllow) { <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a17045ba7ca71644004a5e63e2d3ab9a8">mAllowResidualTranslation</a> = aAllow; }
<a name="l01304"></a>01304 
<a name="l01308"></a><a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#adb89bc67e8e768aa927150ba61f51565">01308</a>   <span class="keyword">const</span> <a class="code" href="../../d5/d82/classns_int_region.html">nsIntRegion</a>&amp; <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#adb89bc67e8e768aa927150ba61f51565">GetValidRegion</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#ad387ad29b1b1098a716acfaffc82a9c6">mValidRegion</a>; }
<a name="l01309"></a>01309 
<a name="l01310"></a><a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a9f03d43b69956f31647fd23b2038acfb">01310</a>   <span class="keyword">virtual</span> <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html">ThebesLayer</a>* <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a9f03d43b69956f31647fd23b2038acfb">AsThebesLayer</a>() { <span class="keywordflow">return</span> <span class="keyword">this</span>; }
<a name="l01311"></a>01311 
<a name="l01312"></a>01312   <a class="code" href="../../d1/d49/_layers_8h.html#a2ba737ea529268eeac9f3e3061791fcf">MOZ_LAYER_DECL_NAME</a>(<span class="stringliteral">&quot;ThebesLayer&quot;</span>, <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9abf07723c39c92126370c5aed7a84dbf8">TYPE_THEBES</a>)
<a name="l01313"></a>01313 
<a name="l01314"></a><a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a5cd8344d8973324b89dce53eae5dd716">01314</a>   virtual <span class="keywordtype">void</span> <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a5cd8344d8973324b89dce53eae5dd716">ComputeEffectiveTransforms</a>(<a class="code" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a>&amp; aTransformToSurface)
<a name="l01315"></a>01315   {
<a name="l01316"></a>01316     <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a> idealTransform = <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#af4d95c385933ec1e96514097a1c7da7b">GetLocalTransform</a>()*aTransformToSurface;
<a name="l01317"></a>01317     <a class="code" href="../../d1/d4f/structgfx_matrix.html">gfxMatrix</a> residual;
<a name="l01318"></a>01318     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7c8c67155db03b8f6f9c1ba1588574e1">mEffectiveTransform</a> = <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aeb9e8037f60934719f7732aa8a113bc2">SnapTransformTranslation</a>(idealTransform,
<a name="l01319"></a>01319         <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a17045ba7ca71644004a5e63e2d3ab9a8">mAllowResidualTranslation</a> ? &amp;residual : <span class="keyword">nullptr</span>);
<a name="l01320"></a>01320     <span class="comment">// The residual can only be a translation because SnapTransformTranslation</span>
<a name="l01321"></a>01321     <span class="comment">// only changes the transform if it&#39;s a translation</span>
<a name="l01322"></a>01322     <a class="code" href="../../dc/d6d/ns_debug_8h.html#ad0ae7f43205a729107e59d101665b8fa">NS_ASSERTION</a>(!residual.HasNonTranslation(),
<a name="l01323"></a>01323                  <span class="stringliteral">&quot;Residual transform can only be a translation&quot;</span>);
<a name="l01324"></a>01324     <span class="keywordflow">if</span> (!residual.GetTranslation().WithinEpsilonOf(<a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a5be7ef70d7f54a9815bae69587d368ff">mResidualTranslation</a>, 1<a class="code" href="../../d1/d04/app__install__manager_8js.html#ab5902775854a8b8440bcd25e0fe1c120">e</a>-3<a class="code" href="../../d3/d4b/lockscreen_8js.html#a9cf09a2972472098a4c689fd988f4dfc">f</a>)) {
<a name="l01325"></a>01325       <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a5be7ef70d7f54a9815bae69587d368ff">mResidualTranslation</a> = residual.GetTranslation();
<a name="l01326"></a>01326       <a class="code" href="../../dc/d6d/ns_debug_8h.html#ad0ae7f43205a729107e59d101665b8fa">NS_ASSERTION</a>(-0.5 &lt;= <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a5be7ef70d7f54a9815bae69587d368ff">mResidualTranslation</a>.<a class="code" href="../../d2/dfb/structmozilla_1_1gfx_1_1_base_point.html#a5576f8edcd7f6ad67dfc54e8d7bc47f3">x</a> &amp;&amp; <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a5be7ef70d7f54a9815bae69587d368ff">mResidualTranslation</a>.<a class="code" href="../../d2/dfb/structmozilla_1_1gfx_1_1_base_point.html#a5576f8edcd7f6ad67dfc54e8d7bc47f3">x</a> &lt; 0.5 &amp;&amp;
<a name="l01327"></a>01327                    -0.5 &lt;= <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a5be7ef70d7f54a9815bae69587d368ff">mResidualTranslation</a>.<a class="code" href="../../d2/dfb/structmozilla_1_1gfx_1_1_base_point.html#a6fd3bcff5bc3dc56019016d97262b5a2">y</a> &amp;&amp; <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a5be7ef70d7f54a9815bae69587d368ff">mResidualTranslation</a>.<a class="code" href="../../d2/dfb/structmozilla_1_1gfx_1_1_base_point.html#a6fd3bcff5bc3dc56019016d97262b5a2">y</a> &lt; 0.5,
<a name="l01328"></a>01328                    <span class="stringliteral">&quot;Residual translation out of range&quot;</span>);
<a name="l01329"></a>01329       <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#ad387ad29b1b1098a716acfaffc82a9c6">mValidRegion</a>.<a class="code" href="../../d5/d82/classns_int_region.html#a0eacbcbcec29632ec03b9fe3dd8b0534">SetEmpty</a>();
<a name="l01330"></a>01330     }
<a name="l01331"></a>01331     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a47b90c9fc15ae3fb37f14a0f6347c608">ComputeEffectiveTransformForMaskLayer</a>(aTransformToSurface);
<a name="l01332"></a>01332   }
<a name="l01333"></a>01333 
<a name="l01334"></a><a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#ad8ec3ce959f2f17f4387a8ae3d75b368">01334</a>   <span class="keywordtype">bool</span> <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#ad8ec3ce959f2f17f4387a8ae3d75b368">UsedForReadback</a>() { <span class="keywordflow">return</span> <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a1995b2f7be9c77affa164f54f26ee0e0">mUsedForReadback</a>; }
<a name="l01335"></a><a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a2caa2b3c3cef592400b6bf15380572c0">01335</a>   <span class="keywordtype">void</span> <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a2caa2b3c3cef592400b6bf15380572c0">SetUsedForReadback</a>(<span class="keywordtype">bool</span> aUsed) { <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a1995b2f7be9c77affa164f54f26ee0e0">mUsedForReadback</a> = aUsed; }
<a name="l01344"></a><a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a807cae34783c0015c0b8a9a148bd4b19">01344</a>   <a class="code" href="../../d6/dfb/structgfx_point.html">gfxPoint</a> <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a807cae34783c0015c0b8a9a148bd4b19">GetResidualTranslation</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a5be7ef70d7f54a9815bae69587d368ff">mResidualTranslation</a>; }
<a name="l01345"></a>01345 
<a name="l01346"></a>01346 <span class="keyword">protected</span>:
<a name="l01347"></a><a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a9918c206f1971b6f035bfad39c50c90f">01347</a>   <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a9918c206f1971b6f035bfad39c50c90f">ThebesLayer</a>(<a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html">LayerManager</a>* aManager, <span class="keywordtype">void</span>* aImplData)
<a name="l01348"></a>01348     : <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>(aManager, aImplData)
<a name="l01349"></a>01349     , <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#ad387ad29b1b1098a716acfaffc82a9c6">mValidRegion</a>()
<a name="l01350"></a>01350     , <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a1995b2f7be9c77affa164f54f26ee0e0">mUsedForReadback</a>(<a class="code" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>)
<a name="l01351"></a>01351     , <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a17045ba7ca71644004a5e63e2d3ab9a8">mAllowResidualTranslation</a>(<a class="code" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>)
<a name="l01352"></a>01352   {
<a name="l01353"></a>01353     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a868b53f4bb0496c8ec3fcf68a02ef4d6">mContentFlags</a> = 0; <span class="comment">// Clear NO_TEXT, NO_TEXT_OVER_TRANSPARENT</span>
<a name="l01354"></a>01354   }
<a name="l01355"></a>01355 
<a name="l01356"></a>01356   <span class="keyword">virtual</span> nsACString&amp; <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#aa10174f69791b604c8cfb411010328e2">PrintInfo</a>(nsACString&amp; aTo, <span class="keyword">const</span> <span class="keywordtype">char</span>* aPrefix);
<a name="l01357"></a>01357 
<a name="l01363"></a><a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a5be7ef70d7f54a9815bae69587d368ff">01363</a>   <a class="code" href="../../d6/dfb/structgfx_point.html">gfxPoint</a> <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a5be7ef70d7f54a9815bae69587d368ff">mResidualTranslation</a>;
<a name="l01364"></a><a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#ad387ad29b1b1098a716acfaffc82a9c6">01364</a>   <a class="code" href="../../d5/d82/classns_int_region.html">nsIntRegion</a> <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#ad387ad29b1b1098a716acfaffc82a9c6">mValidRegion</a>;
<a name="l01369"></a><a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a1995b2f7be9c77affa164f54f26ee0e0">01369</a>   <span class="keywordtype">bool</span> <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a1995b2f7be9c77affa164f54f26ee0e0">mUsedForReadback</a>;
<a name="l01373"></a><a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a17045ba7ca71644004a5e63e2d3ab9a8">01373</a>   <span class="keywordtype">bool</span> <a class="code" href="../../da/d93/classmozilla_1_1layers_1_1_thebes_layer.html#a17045ba7ca71644004a5e63e2d3ab9a8">mAllowResidualTranslation</a>;
<a name="l01374"></a>01374 };
<a name="l01375"></a>01375 
<a name="l01380"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html">01380</a> <span class="keyword">class </span><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html">ContainerLayer</a> : <span class="keyword">public</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a> {
<a name="l01381"></a>01381 <span class="keyword">public</span>:
<a name="l01382"></a>01382 
<a name="l01383"></a>01383   <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#aa22557fed20c4db2de30d63503314bf4">~ContainerLayer</a>();
<a name="l01384"></a>01384 
<a name="l01392"></a>01392   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a197553d1cfd74242812405d20b862aed">InsertAfter</a>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aChild, <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aAfter) = 0;
<a name="l01398"></a>01398   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a5c36054d15a5468d646cd0c8c8553862">RemoveChild</a>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aChild) = 0;
<a name="l01406"></a>01406   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ab39654620b7a8326d341f5d5e931ae10">RepositionChild</a>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aChild, <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aAfter) = 0;
<a name="l01407"></a>01407 
<a name="l01413"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ad79c697511efb44abeec03307369762e">01413</a>   <span class="keywordtype">void</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ad79c697511efb44abeec03307369762e">SetFrameMetrics</a>(<span class="keyword">const</span> <a class="code" href="../../d5/d2f/structmozilla_1_1layers_1_1_frame_metrics.html">FrameMetrics</a>&amp; aFrameMetrics)
<a name="l01414"></a>01414   {
<a name="l01415"></a>01415     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a591f5ec0d4e630987e32cdeb7116c327">mFrameMetrics</a> != aFrameMetrics) {
<a name="l01416"></a>01416       <a class="code" href="../../d3/d16/_layers_types_8h.html#a0c74f2cf21e296310f1eaa6c3889dc35">MOZ_LAYERS_LOG_IF_SHADOWABLE</a>(<span class="keyword">this</span>, (<span class="stringliteral">&quot;Layer::Mutated(%p) FrameMetrics&quot;</span>, <span class="keyword">this</span>));
<a name="l01417"></a>01417       <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a591f5ec0d4e630987e32cdeb7116c327">mFrameMetrics</a> = aFrameMetrics;
<a name="l01418"></a>01418       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l01419"></a>01419     }
<a name="l01420"></a>01420   }
<a name="l01421"></a>01421 
<a name="l01422"></a>01422   <span class="comment">// These functions allow attaching an AsyncPanZoomController to this layer,</span>
<a name="l01423"></a>01423   <span class="comment">// and can be used anytime.</span>
<a name="l01424"></a>01424   <span class="comment">// A container layer has an APZC only-if GetFrameMetrics().IsScrollable()</span>
<a name="l01425"></a>01425   <span class="keywordtype">void</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#aec6f5cbacde59dca592ea3c765def5f4">SetAsyncPanZoomController</a>(<a class="code" href="../../d4/d9d/classmozilla_1_1layers_1_1_async_pan_zoom_controller.html">AsyncPanZoomController</a> *controller);
<a name="l01426"></a>01426   <a class="code" href="../../d4/d9d/classmozilla_1_1layers_1_1_async_pan_zoom_controller.html">AsyncPanZoomController</a>* <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a43a9d840a44fbcb1a433b186d61b2a57">GetAsyncPanZoomController</a>() <span class="keyword">const</span>;
<a name="l01427"></a>01427 
<a name="l01428"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a168e4552214995dc84c25988bde85ce5">01428</a>   <span class="keywordtype">void</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a168e4552214995dc84c25988bde85ce5">SetPreScale</a>(<span class="keywordtype">float</span> aXScale, <span class="keywordtype">float</span> aYScale)
<a name="l01429"></a>01429   {
<a name="l01430"></a>01430     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ab1c758b34b98cdba87d9de07a56ffcc1">mPreXScale</a> == aXScale &amp;&amp; <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a35ceda9e228172167b35b8f0affca754">mPreYScale</a> == aYScale) {
<a name="l01431"></a>01431       <span class="keywordflow">return</span>;
<a name="l01432"></a>01432     }
<a name="l01433"></a>01433 
<a name="l01434"></a>01434     <a class="code" href="../../d3/d16/_layers_types_8h.html#a0c74f2cf21e296310f1eaa6c3889dc35">MOZ_LAYERS_LOG_IF_SHADOWABLE</a>(<span class="keyword">this</span>, (<span class="stringliteral">&quot;Layer::Mutated(%p) PreScale&quot;</span>, <span class="keyword">this</span>));
<a name="l01435"></a>01435     <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ab1c758b34b98cdba87d9de07a56ffcc1">mPreXScale</a> = aXScale;
<a name="l01436"></a>01436     <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a35ceda9e228172167b35b8f0affca754">mPreYScale</a> = aYScale;
<a name="l01437"></a>01437     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l01438"></a>01438   }
<a name="l01439"></a>01439 
<a name="l01440"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a60bcc096a999837bcf37c03df3fdd80a">01440</a>   <span class="keywordtype">void</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a60bcc096a999837bcf37c03df3fdd80a">SetInheritedScale</a>(<span class="keywordtype">float</span> aXScale, <span class="keywordtype">float</span> aYScale)
<a name="l01441"></a>01441   {
<a name="l01442"></a>01442     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ac0514492bee5781aafd193762fb09ab9">mInheritedXScale</a> == aXScale &amp;&amp; <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#abb69470d8f75ca65561b5066c829a492">mInheritedYScale</a> == aYScale) {
<a name="l01443"></a>01443       <span class="keywordflow">return</span>;
<a name="l01444"></a>01444     }
<a name="l01445"></a>01445 
<a name="l01446"></a>01446     <a class="code" href="../../d3/d16/_layers_types_8h.html#a0c74f2cf21e296310f1eaa6c3889dc35">MOZ_LAYERS_LOG_IF_SHADOWABLE</a>(<span class="keyword">this</span>, (<span class="stringliteral">&quot;Layer::Mutated(%p) InheritedScale&quot;</span>, <span class="keyword">this</span>));
<a name="l01447"></a>01447     <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ac0514492bee5781aafd193762fb09ab9">mInheritedXScale</a> = aXScale;
<a name="l01448"></a>01448     <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#abb69470d8f75ca65561b5066c829a492">mInheritedYScale</a> = aYScale;
<a name="l01449"></a>01449     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l01450"></a>01450   }
<a name="l01451"></a>01451 
<a name="l01452"></a>01452   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a4214e0d98fab13ea4cbe889717a5c9b9">FillSpecificAttributes</a>(SpecificLayerAttributes&amp; aAttrs);
<a name="l01453"></a>01453 
<a name="l01454"></a>01454   <span class="keywordtype">void</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ae7382ae598b8ca15c8fb296655ebfccb">SortChildrenBy3DZOrder</a>(<a class="code" href="../../d8/d6f/classns_t_array.html">nsTArray&lt;Layer*&gt;</a>&amp; aArray);
<a name="l01455"></a>01455 
<a name="l01456"></a>01456   <span class="comment">// These getters can be used anytime.</span>
<a name="l01457"></a>01457 
<a name="l01458"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a5bbdbe7acaedfe91917b4abd70f2145b">01458</a>   <span class="keyword">virtual</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html">ContainerLayer</a>* <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a5bbdbe7acaedfe91917b4abd70f2145b">AsContainerLayer</a>() { <span class="keywordflow">return</span> <span class="keyword">this</span>; }
<a name="l01459"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a5869ad71ca935a31ce6231aa06512bf1">01459</a>   <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html">ContainerLayer</a>* <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a5869ad71ca935a31ce6231aa06512bf1">AsContainerLayer</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">this</span>; }
<a name="l01460"></a>01460 
<a name="l01461"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a19037fb1d3c5ff316ad5b3c138846c8e">01461</a>   <span class="keyword">virtual</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a19037fb1d3c5ff316ad5b3c138846c8e">GetFirstChild</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a976b9c76e0769d99a070ded852a487f2">mFirstChild</a>; }
<a name="l01462"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a5afb0d2d7b0d48c716702a802c91562f">01462</a>   <span class="keyword">virtual</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a5afb0d2d7b0d48c716702a802c91562f">GetLastChild</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a42d1bcb05090a662e64615f9101938a7">mLastChild</a>; }
<a name="l01463"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a139ddd48ae19542d1184f63694d0ab7e">01463</a>   <span class="keyword">const</span> <a class="code" href="../../d5/d2f/structmozilla_1_1layers_1_1_frame_metrics.html">FrameMetrics</a>&amp; <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a139ddd48ae19542d1184f63694d0ab7e">GetFrameMetrics</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a591f5ec0d4e630987e32cdeb7116c327">mFrameMetrics</a>; }
<a name="l01464"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#af74e1eb292e9e6b3ea457d5f8c8cb6f1">01464</a>   <span class="keywordtype">float</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#af74e1eb292e9e6b3ea457d5f8c8cb6f1">GetPreXScale</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ab1c758b34b98cdba87d9de07a56ffcc1">mPreXScale</a>; }
<a name="l01465"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a1eb5911294d28dbb00bcd5e2baf5e8d4">01465</a>   <span class="keywordtype">float</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a1eb5911294d28dbb00bcd5e2baf5e8d4">GetPreYScale</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a35ceda9e228172167b35b8f0affca754">mPreYScale</a>; }
<a name="l01466"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a450fb8a5b1f7b798bd8cda99a1eb35da">01466</a>   <span class="keywordtype">float</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a450fb8a5b1f7b798bd8cda99a1eb35da">GetInheritedXScale</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ac0514492bee5781aafd193762fb09ab9">mInheritedXScale</a>; }
<a name="l01467"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a383cebf9abeb8c458aa62d29b51bd449">01467</a>   <span class="keywordtype">float</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a383cebf9abeb8c458aa62d29b51bd449">GetInheritedYScale</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#abb69470d8f75ca65561b5066c829a492">mInheritedYScale</a>; }
<a name="l01468"></a>01468 
<a name="l01469"></a>01469   <a class="code" href="../../d1/d49/_layers_8h.html#a2ba737ea529268eeac9f3e3061791fcf">MOZ_LAYER_DECL_NAME</a>(<span class="stringliteral">&quot;ContainerLayer&quot;</span>, <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9a216e7c6ed3498c1cac00cfebda733725">TYPE_CONTAINER</a>)
<a name="l01470"></a>01470 
<a name="l01471"></a>01471   
<a name="l01477"></a>01477   virtual <span class="keywordtype">void</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#add170c9e0879badf29d6f2d8bbcd317c">ComputeEffectiveTransforms</a>(<a class="code" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a>&amp; aTransformToSurface) = 0;
<a name="l01478"></a>01478 
<a name="l01485"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ae6180fc2452126b2a622885d28018d72">01485</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ae6180fc2452126b2a622885d28018d72">UseIntermediateSurface</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a1af095d7c1b51f340df70e687e442ea1">mUseIntermediateSurface</a>; }
<a name="l01486"></a>01486 
<a name="l01491"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a6e95dcbe8ef611ac3956fdbd946cacd1">01491</a>   <a class="code" href="../../d7/dc7/structns_int_rect.html">nsIntRect</a> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a6e95dcbe8ef611ac3956fdbd946cacd1">GetIntermediateSurfaceRect</a>()
<a name="l01492"></a>01492   {
<a name="l01493"></a>01493     <a class="code" href="../../dc/d6d/ns_debug_8h.html#ad0ae7f43205a729107e59d101665b8fa">NS_ASSERTION</a>(<a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a1af095d7c1b51f340df70e687e442ea1">mUseIntermediateSurface</a>, <span class="stringliteral">&quot;Must have intermediate surface&quot;</span>);
<a name="l01494"></a>01494     <span class="keywordflow">return</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a61aa8815d140d4927184b5de5e53274b">mVisibleRegion</a>.<a class="code" href="../../d5/d82/classns_int_region.html#af345b573fbae709f3f68572909212ebf">GetBounds</a>();
<a name="l01495"></a>01495   }
<a name="l01496"></a>01496 
<a name="l01500"></a>01500   <span class="keywordtype">bool</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ae69db70498e52b8ae79eb45fee1294aa">HasMultipleChildren</a>();
<a name="l01501"></a>01501 
<a name="l01506"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a35311b52eb5b26fe3336f05e0b38ea14">01506</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a35311b52eb5b26fe3336f05e0b38ea14">SupportsComponentAlphaChildren</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#abdb01d0a40f7fb69ecd19b5cf4971935">mSupportsComponentAlphaChildren</a>; }
<a name="l01507"></a>01507 
<a name="l01508"></a>01508 <span class="keyword">protected</span>:
<a name="l01509"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a1ecd02c28c69c2b5ac4a3875cfb51605">01509</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a1ecd02c28c69c2b5ac4a3875cfb51605">ReadbackProcessor</a>;
<a name="l01510"></a>01510 
<a name="l01511"></a>01511   <span class="keywordtype">void</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a31fd6afe02c4a734b8cd00b3a94f534f">DidInsertChild</a>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aLayer);
<a name="l01512"></a>01512   <span class="keywordtype">void</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a0f17913e439a308ebe40171e8f786f83">DidRemoveChild</a>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aLayer);
<a name="l01513"></a>01513 
<a name="l01514"></a>01514   <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#aa32c4ce54a85141f18f17481d52b6a47">ContainerLayer</a>(<a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html">LayerManager</a>* aManager, <span class="keywordtype">void</span>* aImplData);
<a name="l01515"></a>01515 
<a name="l01520"></a>01520   <span class="keywordtype">void</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a0e345631e679483ed191e6460f5ee059">DefaultComputeEffectiveTransforms</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a>&amp; aTransformToSurface);
<a name="l01521"></a>01521 
<a name="l01525"></a>01525   <span class="keywordtype">void</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a08ee06c5281c3d9ea7c776827c604e37">ComputeEffectiveTransformsForChildren</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a>&amp; aTransformToSurface);
<a name="l01526"></a>01526 
<a name="l01527"></a>01527   <span class="keyword">virtual</span> nsACString&amp; <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#aaaa71e0de46afa85bb1e757042d794d6">PrintInfo</a>(nsACString&amp; aTo, <span class="keyword">const</span> <span class="keywordtype">char</span>* aPrefix);
<a name="l01528"></a>01528 
<a name="l01529"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a976b9c76e0769d99a070ded852a487f2">01529</a>   <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a976b9c76e0769d99a070ded852a487f2">mFirstChild</a>;
<a name="l01530"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a42d1bcb05090a662e64615f9101938a7">01530</a>   <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a42d1bcb05090a662e64615f9101938a7">mLastChild</a>;
<a name="l01531"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a591f5ec0d4e630987e32cdeb7116c327">01531</a>   <a class="code" href="../../d5/d2f/structmozilla_1_1layers_1_1_frame_metrics.html">FrameMetrics</a> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a591f5ec0d4e630987e32cdeb7116c327">mFrameMetrics</a>;
<a name="l01532"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ab592a8c912d2ab9839104eda44522d67">01532</a>   <a class="code" href="../../d0/d01/classns_ref_ptr.html">nsRefPtr&lt;AsyncPanZoomController&gt;</a> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ab592a8c912d2ab9839104eda44522d67">mAPZC</a>;
<a name="l01533"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ab1c758b34b98cdba87d9de07a56ffcc1">01533</a>   <span class="keywordtype">float</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ab1c758b34b98cdba87d9de07a56ffcc1">mPreXScale</a>;
<a name="l01534"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a35ceda9e228172167b35b8f0affca754">01534</a>   <span class="keywordtype">float</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a35ceda9e228172167b35b8f0affca754">mPreYScale</a>;
<a name="l01535"></a>01535   <span class="comment">// The resolution scale inherited from the parent layer. This will already</span>
<a name="l01536"></a>01536   <span class="comment">// be part of mTransform.</span>
<a name="l01537"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ac0514492bee5781aafd193762fb09ab9">01537</a>   <span class="keywordtype">float</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ac0514492bee5781aafd193762fb09ab9">mInheritedXScale</a>;
<a name="l01538"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#abb69470d8f75ca65561b5066c829a492">01538</a>   <span class="keywordtype">float</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#abb69470d8f75ca65561b5066c829a492">mInheritedYScale</a>;
<a name="l01539"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a1af095d7c1b51f340df70e687e442ea1">01539</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a1af095d7c1b51f340df70e687e442ea1">mUseIntermediateSurface</a>;
<a name="l01540"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#abdb01d0a40f7fb69ecd19b5cf4971935">01540</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#abdb01d0a40f7fb69ecd19b5cf4971935">mSupportsComponentAlphaChildren</a>;
<a name="l01541"></a><a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a879ede31f77c8c5e7a7403e6c5106e24">01541</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a879ede31f77c8c5e7a7403e6c5106e24">mMayHaveReadbackChild</a>;
<a name="l01542"></a>01542 };
<a name="l01543"></a>01543 
<a name="l01549"></a><a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html">01549</a> <span class="keyword">class </span><a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html">ColorLayer</a> : <span class="keyword">public</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a> {
<a name="l01550"></a>01550 <span class="keyword">public</span>:
<a name="l01551"></a><a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a73132f32277e24a11e08141cabb4e09e">01551</a>   <span class="keyword">virtual</span> <a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html">ColorLayer</a>* <a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a73132f32277e24a11e08141cabb4e09e">AsColorLayer</a>() { <span class="keywordflow">return</span> <span class="keyword">this</span>; }
<a name="l01552"></a>01552 
<a name="l01557"></a><a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a170e441f4ed2bb32f1ffb58aae7bc3d5">01557</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a170e441f4ed2bb32f1ffb58aae7bc3d5">SetColor</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d8b/structgfx_r_g_b_a.html">gfxRGBA</a>&amp; aColor)
<a name="l01558"></a>01558   {
<a name="l01559"></a>01559     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a8f585a51ce691873d0097a2dfcd382f0">mColor</a> != aColor) {
<a name="l01560"></a>01560       <a class="code" href="../../d3/d16/_layers_types_8h.html#a0c74f2cf21e296310f1eaa6c3889dc35">MOZ_LAYERS_LOG_IF_SHADOWABLE</a>(<span class="keyword">this</span>, (<span class="stringliteral">&quot;Layer::Mutated(%p) Color&quot;</span>, <span class="keyword">this</span>));
<a name="l01561"></a>01561       <a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a8f585a51ce691873d0097a2dfcd382f0">mColor</a> = aColor;
<a name="l01562"></a>01562       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l01563"></a>01563     }
<a name="l01564"></a>01564   }
<a name="l01565"></a>01565 
<a name="l01566"></a><a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a48c2e5204fadea4e422f170ba3b154a4">01566</a>   <span class="keywordtype">void</span> <a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a48c2e5204fadea4e422f170ba3b154a4">SetBounds</a>(<span class="keyword">const</span> <a class="code" href="../../d7/dc7/structns_int_rect.html">nsIntRect</a>&amp; aBounds)
<a name="l01567"></a>01567   {
<a name="l01568"></a>01568     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a38c5c935affcac820b5931c0571790d3">mBounds</a>.<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#adbe246cf631375a9f01e8ed5057113be">IsEqualEdges</a>(aBounds)) {
<a name="l01569"></a>01569       <a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a38c5c935affcac820b5931c0571790d3">mBounds</a> = aBounds;
<a name="l01570"></a>01570       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l01571"></a>01571     }
<a name="l01572"></a>01572   }
<a name="l01573"></a>01573 
<a name="l01574"></a><a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#aed7a2e683646822248bc9dab13678294">01574</a>   <span class="keyword">const</span> <a class="code" href="../../d7/dc7/structns_int_rect.html">nsIntRect</a>&amp; <a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#aed7a2e683646822248bc9dab13678294">GetBounds</a>()
<a name="l01575"></a>01575   {
<a name="l01576"></a>01576     <span class="keywordflow">return</span> <a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a38c5c935affcac820b5931c0571790d3">mBounds</a>;
<a name="l01577"></a>01577   }
<a name="l01578"></a>01578 
<a name="l01579"></a>01579   <span class="comment">// This getter can be used anytime.</span>
<a name="l01580"></a><a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a97f7a491c6824067196771cc9a36a74c">01580</a>   <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="../../d6/d8b/structgfx_r_g_b_a.html">gfxRGBA</a>&amp; <a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a97f7a491c6824067196771cc9a36a74c">GetColor</a>() { <span class="keywordflow">return</span> <a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a8f585a51ce691873d0097a2dfcd382f0">mColor</a>; }
<a name="l01581"></a>01581 
<a name="l01582"></a>01582   <a class="code" href="../../d1/d49/_layers_8h.html#a2ba737ea529268eeac9f3e3061791fcf">MOZ_LAYER_DECL_NAME</a>(<span class="stringliteral">&quot;ColorLayer&quot;</span>, <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9a7ab2415e5a8be96483e4fa65560fb96b">TYPE_COLOR</a>)
<a name="l01583"></a>01583 
<a name="l01584"></a><a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#ae95de82679b0b8d0a6d04b485b793f93">01584</a>   virtual <span class="keywordtype">void</span> <a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#ae95de82679b0b8d0a6d04b485b793f93">ComputeEffectiveTransforms</a>(<a class="code" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a>&amp; aTransformToSurface)
<a name="l01585"></a>01585   {
<a name="l01586"></a>01586     <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a> idealTransform = <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#af4d95c385933ec1e96514097a1c7da7b">GetLocalTransform</a>()*aTransformToSurface;
<a name="l01587"></a>01587     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7c8c67155db03b8f6f9c1ba1588574e1">mEffectiveTransform</a> = <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aeb9e8037f60934719f7732aa8a113bc2">SnapTransformTranslation</a>(idealTransform, <span class="keyword">nullptr</span>);
<a name="l01588"></a>01588     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a47b90c9fc15ae3fb37f14a0f6347c608">ComputeEffectiveTransformForMaskLayer</a>(aTransformToSurface);
<a name="l01589"></a>01589   }
<a name="l01590"></a>01590 
<a name="l01591"></a>01591 <span class="keyword">protected</span>:
<a name="l01592"></a><a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a573795b0021b28d4eb1c2b83ed8c560a">01592</a>   <a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a573795b0021b28d4eb1c2b83ed8c560a">ColorLayer</a>(<a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html">LayerManager</a>* aManager, <span class="keywordtype">void</span>* aImplData)
<a name="l01593"></a>01593     : <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>(aManager, aImplData),
<a name="l01594"></a>01594       <a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a8f585a51ce691873d0097a2dfcd382f0">mColor</a>(0.0, 0.0, 0.0, 0.0)
<a name="l01595"></a>01595   {}
<a name="l01596"></a>01596 
<a name="l01597"></a>01597   <span class="keyword">virtual</span> nsACString&amp; <a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#ad41527ffaf5d8a603590473adff99e4d">PrintInfo</a>(nsACString&amp; aTo, <span class="keyword">const</span> <span class="keywordtype">char</span>* aPrefix);
<a name="l01598"></a>01598 
<a name="l01599"></a><a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a38c5c935affcac820b5931c0571790d3">01599</a>   <a class="code" href="../../d7/dc7/structns_int_rect.html">nsIntRect</a> <a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a38c5c935affcac820b5931c0571790d3">mBounds</a>;
<a name="l01600"></a><a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a8f585a51ce691873d0097a2dfcd382f0">01600</a>   <a class="code" href="../../d6/d8b/structgfx_r_g_b_a.html">gfxRGBA</a> <a class="code" href="../../d5/d00/classmozilla_1_1layers_1_1_color_layer.html#a8f585a51ce691873d0097a2dfcd382f0">mColor</a>;
<a name="l01601"></a>01601 };
<a name="l01602"></a>01602 
<a name="l01613"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html">01613</a> <span class="keyword">class </span><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html">CanvasLayer</a> : <span class="keyword">public</span> <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a> {
<a name="l01614"></a>01614 <span class="keyword">public</span>:
<a name="l01615"></a><a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html">01615</a>   <span class="keyword">struct </span><a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html">Data</a> {
<a name="l01616"></a><a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html#a9517e11d8f15f83ee961e0cad37cee1b">01616</a>     <a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html#a9517e11d8f15f83ee961e0cad37cee1b">Data</a>()
<a name="l01617"></a>01617       : <a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html#a6abf03b210299f68b2fa00bf3634ebfb">mSurface</a>(<a class="code" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a0fd163987980515e24ce34fc3926206d">nullptr</a>)
<a name="l01618"></a>01618       , <a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html#adf970840bca163bfa430188c85bcb3eb">mDrawTarget</a>(<a class="code" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a0fd163987980515e24ce34fc3926206d">nullptr</a>)
<a name="l01619"></a>01619       , <a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html#a89d997bf122c8e9c45e6b8128f0ece5b">mGLContext</a>(<a class="code" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a0fd163987980515e24ce34fc3926206d">nullptr</a>)
<a name="l01620"></a>01620       , <a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html#a8fcf39e43f2ff211824f09f2d6b82d95">mSize</a>(0,0)
<a name="l01621"></a>01621       , <a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html#a2af6dcc19d88f47cb656ab8cd1e89a00">mIsGLAlphaPremult</a>(<a class="code" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>)
<a name="l01622"></a>01622     { }
<a name="l01623"></a>01623 
<a name="l01624"></a>01624     <span class="comment">// One of these two must be specified for Canvas2D, but never both</span>
<a name="l01625"></a><a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html#a6abf03b210299f68b2fa00bf3634ebfb">01625</a>     <a class="code" href="../../d4/d14/classgfx_a_surface.html">gfxASurface</a>* <a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html#a6abf03b210299f68b2fa00bf3634ebfb">mSurface</a>;  <span class="comment">// a gfx Surface for the canvas contents</span>
<a name="l01626"></a><a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html#adf970840bca163bfa430188c85bcb3eb">01626</a>     <a class="code" href="../../d2/d07/classmozilla_1_1gfx_1_1_draw_target.html">mozilla::gfx::DrawTarget</a> *<a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html#adf970840bca163bfa430188c85bcb3eb">mDrawTarget</a>; <span class="comment">// a DrawTarget for the canvas contents</span>
<a name="l01627"></a>01627 
<a name="l01628"></a>01628     <span class="comment">// Or this, for GL.</span>
<a name="l01629"></a><a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html#a89d997bf122c8e9c45e6b8128f0ece5b">01629</a>     <a class="code" href="../../df/d68/classmozilla_1_1gl_1_1_g_l_context.html">mozilla::gl::GLContext</a>* <a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html#a89d997bf122c8e9c45e6b8128f0ece5b">mGLContext</a>;
<a name="l01630"></a>01630 
<a name="l01631"></a>01631     <span class="comment">// The size of the canvas content</span>
<a name="l01632"></a><a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html#a8fcf39e43f2ff211824f09f2d6b82d95">01632</a>     <a class="code" href="../../dc/d43/structns_int_size.html">nsIntSize</a> <a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html#a8fcf39e43f2ff211824f09f2d6b82d95">mSize</a>;
<a name="l01633"></a>01633 
<a name="l01634"></a>01634     <span class="comment">// Whether mGLContext contains data that is alpha-premultiplied.</span>
<a name="l01635"></a><a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html#a2af6dcc19d88f47cb656ab8cd1e89a00">01635</a>     <span class="keywordtype">bool</span> <a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html#a2af6dcc19d88f47cb656ab8cd1e89a00">mIsGLAlphaPremult</a>;
<a name="l01636"></a>01636   };
<a name="l01637"></a>01637 
<a name="l01646"></a>01646   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#aa4ab24c9fcb3e6ecb7d0de259d2abae7">Initialize</a>(<span class="keyword">const</span> <a class="code" href="../../d5/d73/structmozilla_1_1layers_1_1_canvas_layer_1_1_data.html">Data</a>&amp; <a class="code" href="../../d6/d1d/ns_x_p_c_o_m_strings_8h.html#a580e3d1c78551e30e0c97ab45dc8a3b5">aData</a>) = 0;
<a name="l01647"></a>01647 
<a name="l01652"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#ad9d0afa506c4cb650a0bbf78e27235c9">01652</a>   <span class="keywordtype">void</span> <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#ad9d0afa506c4cb650a0bbf78e27235c9">Updated</a>() { mDirty = <span class="keyword">true</span>; <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aac1bc9d04f22051c33510ac735f480df">SetInvalidRectToVisibleRegion</a>(); }
<a name="l01653"></a>01653 
<a name="l01658"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#aa3c73e0a4a52e040fd8e6b53cf9e8661">01658</a>   <span class="keywordtype">void</span> <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#aa3c73e0a4a52e040fd8e6b53cf9e8661">Painted</a>() { mDirty = <span class="keyword">false</span>; }
<a name="l01659"></a>01659 
<a name="l01664"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#ac005cc2e99caafa49c29874281c64b97">01664</a>   <span class="keywordtype">bool</span> <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#ac005cc2e99caafa49c29874281c64b97">IsDirty</a>()
<a name="l01665"></a>01665   {
<a name="l01666"></a>01666     <span class="comment">// We can only tell if we are dirty if we&#39;re part of the</span>
<a name="l01667"></a>01667     <span class="comment">// widget&#39;s retained layer tree.</span>
<a name="l01668"></a>01668     <span class="keywordflow">if</span> (!<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a653fa6f7c923e15679569a3b86401cc1">mManager</a> || !<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a653fa6f7c923e15679569a3b86401cc1">mManager</a>-&gt;<a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html#ad2114c8435a1745fdfea6b4f1d8b78bf">IsWidgetLayerManager</a>()) {
<a name="l01669"></a>01669       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01670"></a>01670     }
<a name="l01671"></a>01671     <span class="keywordflow">return</span> mDirty;
<a name="l01672"></a>01672   }
<a name="l01673"></a>01673 
<a name="l01677"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a10a34f94be063d32b23efd54c287316b">01677</a>   <span class="keyword">typedef</span> <span class="keywordtype">void</span> <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a10a34f94be063d32b23efd54c287316b">PreTransactionCallback</a>(<span class="keywordtype">void</span>* closureData);
<a name="l01678"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#aff2f7f31f50fffce88a09c3e4dbdc3cc">01678</a>   <span class="keywordtype">void</span> <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#aff2f7f31f50fffce88a09c3e4dbdc3cc">SetPreTransactionCallback</a>(<a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a10a34f94be063d32b23efd54c287316b">PreTransactionCallback</a>* <a class="code" href="../../df/d44/permission__manager_8js.html#ab95eebdb2a4acb8510417bf0bdabc3c5">callback</a>, <span class="keywordtype">void</span>* closureData)
<a name="l01679"></a>01679   {
<a name="l01680"></a>01680     <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a0d0c26b757a2732fa9ff615a265d1507">mPreTransCallback</a> = <a class="code" href="../../df/d44/permission__manager_8js.html#ab95eebdb2a4acb8510417bf0bdabc3c5">callback</a>;
<a name="l01681"></a>01681     <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a7cf28fcc79fd9ee31189d4822933d044">mPreTransCallbackData</a> = closureData;
<a name="l01682"></a>01682   }
<a name="l01683"></a>01683 
<a name="l01684"></a>01684 <span class="keyword">protected</span>:
<a name="l01685"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a8de114eb9b8500cd9187f99336986d6c">01685</a>   <span class="keywordtype">void</span> <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a8de114eb9b8500cd9187f99336986d6c">FirePreTransactionCallback</a>()
<a name="l01686"></a>01686   {
<a name="l01687"></a>01687     <span class="keywordflow">if</span> (<a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a0d0c26b757a2732fa9ff615a265d1507">mPreTransCallback</a>) {
<a name="l01688"></a>01688       <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a0d0c26b757a2732fa9ff615a265d1507">mPreTransCallback</a>(<a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a7cf28fcc79fd9ee31189d4822933d044">mPreTransCallbackData</a>);
<a name="l01689"></a>01689     }
<a name="l01690"></a>01690   }
<a name="l01691"></a>01691 
<a name="l01692"></a>01692 <span class="keyword">public</span>:
<a name="l01696"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#ad8e51c831c64046cda407cd563bf92b9">01696</a>   <span class="keyword">typedef</span> <a class="code" href="../../d4/da9/png_8h.html#ab30926da86712184b070e550789f8bf7">void</a> (* <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#ad8e51c831c64046cda407cd563bf92b9">DidTransactionCallback</a>)(<span class="keywordtype">void</span>* aClosureData);
<a name="l01697"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a737a23b8fc1f09b77a2e55eb20a760f0">01697</a>   <span class="keywordtype">void</span> <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a737a23b8fc1f09b77a2e55eb20a760f0">SetDidTransactionCallback</a>(<a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#ad8e51c831c64046cda407cd563bf92b9">DidTransactionCallback</a> aCallback, <span class="keywordtype">void</span>* aClosureData)
<a name="l01698"></a>01698   {
<a name="l01699"></a>01699     <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a3e2908270ca873a554b3b5a49de68dab">mPostTransCallback</a> = aCallback;
<a name="l01700"></a>01700     <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a3ed215456906bdcbf938eafe2b172393">mPostTransCallbackData</a> = aClosureData;
<a name="l01701"></a>01701   }
<a name="l01702"></a>01702 
<a name="l01707"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a6e7eb4b12a9e761761dc1893d0273df9">01707</a>   <span class="keywordtype">void</span> <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a6e7eb4b12a9e761761dc1893d0273df9">SetFilter</a>(<a class="code" href="../../d6/d5c/classgfx_pattern.html#abc4006a4150dca486a10ed95a03c05fb">gfxPattern::GraphicsFilter</a> aFilter)
<a name="l01708"></a>01708   {
<a name="l01709"></a>01709     <span class="keywordflow">if</span> (<a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#aa2556377164c5880ead16e3802db191e">mFilter</a> != aFilter) {
<a name="l01710"></a>01710       <a class="code" href="../../d3/d16/_layers_types_8h.html#a0c74f2cf21e296310f1eaa6c3889dc35">MOZ_LAYERS_LOG_IF_SHADOWABLE</a>(<span class="keyword">this</span>, (<span class="stringliteral">&quot;Layer::Mutated(%p) Filter&quot;</span>, <span class="keyword">this</span>));
<a name="l01711"></a>01711       <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#aa2556377164c5880ead16e3802db191e">mFilter</a> = aFilter;
<a name="l01712"></a>01712       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l01713"></a>01713     }
<a name="l01714"></a>01714   }
<a name="l01715"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#aa972af755f0f3050aaad36d92e6a0768">01715</a>   <a class="code" href="../../d6/d5c/classgfx_pattern.html#abc4006a4150dca486a10ed95a03c05fb">gfxPattern::GraphicsFilter</a> <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#aa972af755f0f3050aaad36d92e6a0768">GetFilter</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#aa2556377164c5880ead16e3802db191e">mFilter</a>; }
<a name="l01716"></a>01716 
<a name="l01717"></a>01717   <a class="code" href="../../d1/d49/_layers_8h.html#a2ba737ea529268eeac9f3e3061791fcf">MOZ_LAYER_DECL_NAME</a>(<span class="stringliteral">&quot;CanvasLayer&quot;</span>, <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9a4214b5511384253d4fd4f5e34004e9d7">TYPE_CANVAS</a>)
<a name="l01718"></a>01718 
<a name="l01719"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#aac937f6da31bb4ea4dac06344c5f14bb">01719</a>   virtual <span class="keywordtype">void</span> <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#aac937f6da31bb4ea4dac06344c5f14bb">ComputeEffectiveTransforms</a>(<a class="code" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="code" href="../../d6/d3b/classgfx3_d_matrix.html">gfx3DMatrix</a>&amp; aTransformToSurface)
<a name="l01720"></a>01720   {
<a name="l01721"></a>01721     <span class="comment">// Snap our local transform first, and snap the inherited transform as well.</span>
<a name="l01722"></a>01722     <span class="comment">// This makes our snapping equivalent to what would happen if our content</span>
<a name="l01723"></a>01723     <span class="comment">// was drawn into a ThebesLayer (gfxContext would snap using the local</span>
<a name="l01724"></a>01724     <span class="comment">// transform, then we&#39;d snap again when compositing the ThebesLayer).</span>
<a name="l01725"></a>01725     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a7c8c67155db03b8f6f9c1ba1588574e1">mEffectiveTransform</a> =
<a name="l01726"></a>01726         <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a9a122ad84c9698e0834db36a1db456b7">SnapTransform</a>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#af4d95c385933ec1e96514097a1c7da7b">GetLocalTransform</a>(), <a class="code" href="../../d5/d28/img_i_container_8idl.html#ae52018f593e11f35ff14c47dd990cbc5">gfxRect</a>(0, 0, <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a9f0be29002228fc618d12bdced605da9">mBounds</a>.<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#a08b62b0638bfa9b9ff1c4284f3dac847">width</a>, <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a9f0be29002228fc618d12bdced605da9">mBounds</a>.<a class="code" href="../../dc/db8/structmozilla_1_1gfx_1_1_base_rect.html#ae424948a1e94a9e8eeaa3476e39d496d">height</a>),
<a name="l01727"></a>01727                       <span class="keyword">nullptr</span>)*
<a name="l01728"></a>01728         <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#aeb9e8037f60934719f7732aa8a113bc2">SnapTransformTranslation</a>(aTransformToSurface, <span class="keyword">nullptr</span>);
<a name="l01729"></a>01729     <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a47b90c9fc15ae3fb37f14a0f6347c608">ComputeEffectiveTransformForMaskLayer</a>(aTransformToSurface);
<a name="l01730"></a>01730   }
<a name="l01731"></a>01731 
<a name="l01732"></a>01732 <span class="keyword">protected</span>:
<a name="l01733"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#acbd1cb36e0a535cef494921fdde9fdd4">01733</a>   <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#acbd1cb36e0a535cef494921fdde9fdd4">CanvasLayer</a>(<a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html">LayerManager</a>* aManager, <span class="keywordtype">void</span>* aImplData)
<a name="l01734"></a>01734     : <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>(aManager, aImplData)
<a name="l01735"></a>01735     , <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a0d0c26b757a2732fa9ff615a265d1507">mPreTransCallback</a>(<a class="code" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a0fd163987980515e24ce34fc3926206d">nullptr</a>)
<a name="l01736"></a>01736     , <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a7cf28fcc79fd9ee31189d4822933d044">mPreTransCallbackData</a>(<a class="code" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a0fd163987980515e24ce34fc3926206d">nullptr</a>)
<a name="l01737"></a>01737     , <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a3e2908270ca873a554b3b5a49de68dab">mPostTransCallback</a>(<a class="code" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a0fd163987980515e24ce34fc3926206d">nullptr</a>)
<a name="l01738"></a>01738     , <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a3ed215456906bdcbf938eafe2b172393">mPostTransCallbackData</a>(<a class="code" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a0fd163987980515e24ce34fc3926206d">nullptr</a>)
<a name="l01739"></a>01739     , <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#aa2556377164c5880ead16e3802db191e">mFilter</a>(<a class="code" href="../../d6/d5c/classgfx_pattern.html">gfxPattern</a>::FILTER_GOOD)
<a name="l01740"></a>01740     , mDirty(<a class="code" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>)
<a name="l01741"></a>01741   {}
<a name="l01742"></a>01742 
<a name="l01743"></a>01743   <span class="keyword">virtual</span> nsACString&amp; <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#acb61995e6731d3dda1c758371027a947">PrintInfo</a>(nsACString&amp; aTo, <span class="keyword">const</span> <span class="keywordtype">char</span>* aPrefix);
<a name="l01744"></a>01744 
<a name="l01745"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a865e5fc7593913eeeddfc29ec7991dc8">01745</a>   <span class="keywordtype">void</span> <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a865e5fc7593913eeeddfc29ec7991dc8">FireDidTransactionCallback</a>()
<a name="l01746"></a>01746   {
<a name="l01747"></a>01747     <span class="keywordflow">if</span> (<a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a3e2908270ca873a554b3b5a49de68dab">mPostTransCallback</a>) {
<a name="l01748"></a>01748       <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a3e2908270ca873a554b3b5a49de68dab">mPostTransCallback</a>(<a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a3ed215456906bdcbf938eafe2b172393">mPostTransCallbackData</a>);
<a name="l01749"></a>01749     }
<a name="l01750"></a>01750   }
<a name="l01751"></a>01751 
<a name="l01755"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a9f0be29002228fc618d12bdced605da9">01755</a>   <a class="code" href="../../d7/dc7/structns_int_rect.html">nsIntRect</a> <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a9f0be29002228fc618d12bdced605da9">mBounds</a>;
<a name="l01756"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a0d0c26b757a2732fa9ff615a265d1507">01756</a>   <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a10a34f94be063d32b23efd54c287316b">PreTransactionCallback</a>* <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a0d0c26b757a2732fa9ff615a265d1507">mPreTransCallback</a>;
<a name="l01757"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a7cf28fcc79fd9ee31189d4822933d044">01757</a>   <span class="keywordtype">void</span>* <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a7cf28fcc79fd9ee31189d4822933d044">mPreTransCallbackData</a>;
<a name="l01758"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a3e2908270ca873a554b3b5a49de68dab">01758</a>   <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#ad8e51c831c64046cda407cd563bf92b9">DidTransactionCallback</a> <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a3e2908270ca873a554b3b5a49de68dab">mPostTransCallback</a>;
<a name="l01759"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a3ed215456906bdcbf938eafe2b172393">01759</a>   <span class="keywordtype">void</span>* <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#a3ed215456906bdcbf938eafe2b172393">mPostTransCallbackData</a>;
<a name="l01760"></a><a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#aa2556377164c5880ead16e3802db191e">01760</a>   <a class="code" href="../../d6/d5c/classgfx_pattern.html#abc4006a4150dca486a10ed95a03c05fb">gfxPattern::GraphicsFilter</a> <a class="code" href="../../db/da3/classmozilla_1_1layers_1_1_canvas_layer.html#aa2556377164c5880ead16e3802db191e">mFilter</a>;
<a name="l01761"></a>01761 
<a name="l01762"></a>01762 <span class="keyword">private</span>:
<a name="l01766"></a>01766   <span class="keywordtype">bool</span> mDirty;
<a name="l01767"></a>01767 };
<a name="l01768"></a>01768 
<a name="l01786"></a><a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html">01786</a> <span class="keyword">class </span><a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html">RefLayer</a> : <span class="keyword">public</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html">ContainerLayer</a> {
<a name="l01787"></a><a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#a74eeb5a6841fd9473dfe41a5c362b66b">01787</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html">LayerManager</a>;
<a name="l01788"></a>01788 
<a name="l01789"></a>01789 <span class="keyword">private</span>:
<a name="l01790"></a>01790   <span class="keyword">virtual</span> <span class="keywordtype">void</span> InsertAfter(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aChild, <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aAfter)
<a name="l01791"></a>01791   { <a class="code" href="../../d9/de9/_assertions_8h.html#ade424fb68519c60abbd7b93bc8239805">MOZ_CRASH</a>(); }
<a name="l01792"></a>01792 
<a name="l01793"></a>01793   <span class="keyword">virtual</span> <span class="keywordtype">void</span> RemoveChild(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aChild)
<a name="l01794"></a>01794   { <a class="code" href="../../d9/de9/_assertions_8h.html#ade424fb68519c60abbd7b93bc8239805">MOZ_CRASH</a>(); }
<a name="l01795"></a>01795 
<a name="l01796"></a>01796   <span class="keyword">virtual</span> <span class="keywordtype">void</span> RepositionChild(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#adb340ea61c4dbbb64fc3d46bce330273">Layer</a>* aChild, <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#adb340ea61c4dbbb64fc3d46bce330273">Layer</a>* aAfter)
<a name="l01797"></a>01797   { <a class="code" href="../../d9/de9/_assertions_8h.html#ade424fb68519c60abbd7b93bc8239805">MOZ_CRASH</a>(); }
<a name="l01798"></a>01798 
<a name="l01799"></a>01799   <span class="keyword">using</span> <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#ad79c697511efb44abeec03307369762e">ContainerLayer::SetFrameMetrics</a>;
<a name="l01800"></a>01800 
<a name="l01801"></a>01801 <span class="keyword">public</span>:
<a name="l01806"></a><a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#a9c3498bc5e1f0e761b274b8f8ead0930">01806</a>   <span class="keywordtype">void</span> <a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#a9c3498bc5e1f0e761b274b8f8ead0930">SetReferentId</a>(uint64_t aId)
<a name="l01807"></a>01807   {
<a name="l01808"></a>01808     <a class="code" href="../../d9/de9/_assertions_8h.html#aa2fa77a048d036cb2f902299ace18165">MOZ_ASSERT</a>(aId != 0);
<a name="l01809"></a>01809     <span class="keywordflow">if</span> (<a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#ae17ec9d8a0b01e4dd9cd2febe6abdeff">mId</a> != aId) {
<a name="l01810"></a>01810       <a class="code" href="../../d3/d16/_layers_types_8h.html#a0c74f2cf21e296310f1eaa6c3889dc35">MOZ_LAYERS_LOG_IF_SHADOWABLE</a>(<span class="keyword">this</span>, (<span class="stringliteral">&quot;Layer::Mutated(%p) ReferentId&quot;</span>, <span class="keyword">this</span>));
<a name="l01811"></a>01811       <a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#ae17ec9d8a0b01e4dd9cd2febe6abdeff">mId</a> = aId;
<a name="l01812"></a>01812       <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ac621f4648aa7d3e4dfe434d978896dbd">Mutated</a>();
<a name="l01813"></a>01813     }
<a name="l01814"></a>01814   }
<a name="l01820"></a><a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#a8ab8c646a6e09547cf58c9fc9c4e04c8">01820</a>   <span class="keywordtype">void</span> <a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#a8ab8c646a6e09547cf58c9fc9c4e04c8">ConnectReferentLayer</a>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aLayer)
<a name="l01821"></a>01821   {
<a name="l01822"></a>01822     <a class="code" href="../../d9/de9/_assertions_8h.html#aa2fa77a048d036cb2f902299ace18165">MOZ_ASSERT</a>(!<a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a976b9c76e0769d99a070ded852a487f2">mFirstChild</a> &amp;&amp; !<a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a42d1bcb05090a662e64615f9101938a7">mLastChild</a>);
<a name="l01823"></a>01823     <a class="code" href="../../d9/de9/_assertions_8h.html#aa2fa77a048d036cb2f902299ace18165">MOZ_ASSERT</a>(!aLayer-&gt;<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ad50ea4291b9138cca43b235c805b18aa">GetParent</a>());
<a name="l01824"></a>01824     <a class="code" href="../../d9/de9/_assertions_8h.html#aa2fa77a048d036cb2f902299ace18165">MOZ_ASSERT</a>(aLayer-&gt;<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a271e931c646ae721f98df49d5cf54847">Manager</a>() == <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a271e931c646ae721f98df49d5cf54847">Manager</a>());
<a name="l01825"></a>01825 
<a name="l01826"></a>01826     <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a976b9c76e0769d99a070ded852a487f2">mFirstChild</a> = <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a42d1bcb05090a662e64615f9101938a7">mLastChild</a> = aLayer;
<a name="l01827"></a>01827     aLayer-&gt;<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ae364d2e0929939b9704b28f47cad62ab">SetParent</a>(<span class="keyword">this</span>);
<a name="l01828"></a>01828   }
<a name="l01829"></a>01829 
<a name="l01834"></a><a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#a12766c740e3edfa661e5db236a06523b">01834</a>   <span class="keywordtype">void</span> <a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#a12766c740e3edfa661e5db236a06523b">DetachReferentLayer</a>(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aLayer)
<a name="l01835"></a>01835   {
<a name="l01836"></a>01836     <a class="code" href="../../d9/de9/_assertions_8h.html#aa2fa77a048d036cb2f902299ace18165">MOZ_ASSERT</a>(aLayer == <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a976b9c76e0769d99a070ded852a487f2">mFirstChild</a> &amp;&amp; <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a976b9c76e0769d99a070ded852a487f2">mFirstChild</a> == <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a42d1bcb05090a662e64615f9101938a7">mLastChild</a>);
<a name="l01837"></a>01837     <a class="code" href="../../d9/de9/_assertions_8h.html#aa2fa77a048d036cb2f902299ace18165">MOZ_ASSERT</a>(aLayer-&gt;<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ad50ea4291b9138cca43b235c805b18aa">GetParent</a>() == <span class="keyword">this</span>);
<a name="l01838"></a>01838 
<a name="l01839"></a>01839     <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a976b9c76e0769d99a070ded852a487f2">mFirstChild</a> = <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html#a42d1bcb05090a662e64615f9101938a7">mLastChild</a> = <span class="keyword">nullptr</span>;
<a name="l01840"></a>01840     aLayer-&gt;<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#ae364d2e0929939b9704b28f47cad62ab">SetParent</a>(<span class="keyword">nullptr</span>);
<a name="l01841"></a>01841   }
<a name="l01842"></a>01842 
<a name="l01843"></a>01843   <span class="comment">// These getters can be used anytime.</span>
<a name="l01844"></a><a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#afa79ff21aca7595997b255448f322527">01844</a>   <span class="keyword">virtual</span> <a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html">RefLayer</a>* <a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#afa79ff21aca7595997b255448f322527">AsRefLayer</a>() { <span class="keywordflow">return</span> <span class="keyword">this</span>; }
<a name="l01845"></a>01845 
<a name="l01846"></a><a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#a2179123afb85100452fac9b2ce0ebf1d">01846</a>   <span class="keyword">virtual</span> int64_t <a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#a2179123afb85100452fac9b2ce0ebf1d">GetReferentId</a>() { <span class="keywordflow">return</span> <a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#ae17ec9d8a0b01e4dd9cd2febe6abdeff">mId</a>; }
<a name="l01847"></a>01847 
<a name="l01851"></a>01851   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#acb947af7440f4f983ca53884628b5170">FillSpecificAttributes</a>(SpecificLayerAttributes&amp; aAttrs);
<a name="l01852"></a>01852 
<a name="l01853"></a>01853   <a class="code" href="../../d1/d49/_layers_8h.html#a2ba737ea529268eeac9f3e3061791fcf">MOZ_LAYER_DECL_NAME</a>(<span class="stringliteral">&quot;RefLayer&quot;</span>, <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html#a07c3032c37239dc8f9497e7d0892bae9a5aa436d909a7c4f33926f2d4b7e702e3">TYPE_REF</a>)
<a name="l01854"></a>01854 
<a name="l01855"></a>01855 protected:
<a name="l01856"></a><a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#aa43a3f1f387ff5f90fe7863985f8c3cc">01856</a>   <a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html">RefLayer</a>(<a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html">LayerManager</a>* aManager, <span class="keywordtype">void</span>* aImplData)
<a name="l01857"></a>01857     : <a class="code" href="../../d0/d1c/classmozilla_1_1layers_1_1_container_layer.html">ContainerLayer</a>(aManager, aImplData) , <a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#ae17ec9d8a0b01e4dd9cd2febe6abdeff">mId</a>(0)
<a name="l01858"></a>01858   {}
<a name="l01859"></a>01859 
<a name="l01860"></a>01860   <span class="keyword">virtual</span> nsACString&amp; <a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#a3ad568275616db4a2609a7943202da7e">PrintInfo</a>(nsACString&amp; aTo, <span class="keyword">const</span> <span class="keywordtype">char</span>* aPrefix);
<a name="l01861"></a>01861 
<a name="l01862"></a><a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#a83ed3b4876bf1f341ea4b8bd883964f9">01862</a>   <a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* <a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#a83ed3b4876bf1f341ea4b8bd883964f9">mTempReferent</a>;
<a name="l01863"></a>01863   <span class="comment">// 0 is a special value that means &quot;no ID&quot;.</span>
<a name="l01864"></a><a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#ae17ec9d8a0b01e4dd9cd2febe6abdeff">01864</a>   uint64_t <a class="code" href="../../db/d2d/classmozilla_1_1layers_1_1_ref_layer.html#ae17ec9d8a0b01e4dd9cd2febe6abdeff">mId</a>;
<a name="l01865"></a>01865 };
<a name="l01866"></a>01866 
<a name="l01867"></a>01867 <span class="preprocessor">#ifdef MOZ_DUMP_PAINTING</span>
<a name="l01868"></a>01868 <span class="preprocessor"></span><span class="keywordtype">void</span> WriteSnapshotToDumpFile(<a class="code" href="../../d9/da9/classmozilla_1_1layers_1_1_layer.html">Layer</a>* aLayer, <a class="code" href="../../d4/d14/classgfx_a_surface.html">gfxASurface</a>* aSurf);
<a name="l01869"></a>01869 <span class="keywordtype">void</span> WriteSnapshotToDumpFile(<a class="code" href="../../d1/d01/classmozilla_1_1layers_1_1_layer_manager.html">LayerManager</a>* aManager, <a class="code" href="../../d4/d14/classgfx_a_surface.html">gfxASurface</a>* aSurf);
<a name="l01870"></a>01870 <span class="keywordtype">void</span> WriteSnapshotToDumpFile(<a class="code" href="../../d0/dbf/classmozilla_1_1layers_1_1_compositor.html">Compositor</a>* aCompositor, <a class="code" href="../../d4/d14/classgfx_a_surface.html">gfxASurface</a>* aSurf);
<a name="l01871"></a>01871 <span class="preprocessor">#endif</span>
<a name="l01872"></a>01872 <span class="preprocessor"></span>
<a name="l01873"></a>01873 }
<a name="l01874"></a>01874 }
<a name="l01875"></a>01875 
<a name="l01876"></a>01876 <span class="preprocessor">#endif </span><span class="comment">/* GFX_LAYERS_H */</span>
</pre></div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全て</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>データ構造</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>ネームスペース</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>ファイル</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>関数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>変数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>型定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>列挙型</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>列挙型の値</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>フレンド</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>マクロ定義</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../d1/d49/_layers_8h.html">Layers.h</a>      </li>

    <li class="footer">FxOS Code Readingに対してSat Oct 19 2013 00:52:32に生成されました。
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
