<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>FxOS Code Reading: クラス SkWeakRefCnt</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">FxOS Code Reading
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- 作成： Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'検索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>メインページ</span></a></li>
      <li><a href="../../pages.html"><span>関連ページ</span></a></li>
      <li><a href="../../modules.html"><span>モジュール</span></a></li>
      <li><a href="../../namespaces.html"><span>パッケージ</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>データ構造</span></a></li>
      <li><a href="../../files.html"><span>ファイル</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>データ構造</span></a></li>
      <li><a href="../../classes.html"><span>データ構造索引</span></a></li>
      <li><a href="../../inherits.html"><span>クラス階層</span></a></li>
      <li><a href="../../functions.html"><span>データフィールド</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('de/d4d/class_sk_weak_ref_cnt.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public メソッド</a> &#124;
<a href="#pro-methods">Protected メソッド</a>  </div>
  <div class="headertitle">
<div class="title">クラス SkWeakRefCnt</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="SkWeakRefCnt" --><!-- doxytag: inherits="SkRefCnt" -->
<p><code>#include &lt;<a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html">SkWeakRefCnt.h</a>&gt;</code></p>
<div class="dynheader">
SkWeakRefCntに対する継承グラフ</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d6/d0f/class_sk_weak_ref_cnt__inherit__graph.svg" width="126" height="272"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">凡例</a>]</span></center></div>
<div class="dynheader">
SkWeakRefCntのコラボレーション図</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/dff/class_sk_weak_ref_cnt__coll__graph.svg" width="126" height="195"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">凡例</a>]</span></center></div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#a1fa86fb0536ac751ae35d7b16443f861">SkWeakRefCnt</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#a663b1c6a3b5e233dc1a2550a4c817ba0">~SkWeakRefCnt</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#a0da78aaef841f57ae594849d35ae8e75">getWeakCnt</a> () <a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d2c/prtpool_8h.html#a7797d332996f57719d6d316bee73873d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#a90f50847c66ae00117623c33340b48bb">validate</a> () <a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/dd2/qcmstypes_8h.html#acac1f8caeb95c0bd16fe8c0743249831">bool</a> SK_WARN_UNUSED_RESULT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#ab90a2fa16c4bab11207000b0ef015c4e">try_ref</a> () <a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d2c/prtpool_8h.html#a7797d332996f57719d6d316bee73873d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#a70b53592a4c8b797029be6ca1d6a69da">weak_ref</a> () <a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d2c/prtpool_8h.html#a7797d332996f57719d6d316bee73873d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#acb9cc74646def17ad0fb64fdca6489bc">weak_unref</a> () <a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/dd2/qcmstypes_8h.html#acac1f8caeb95c0bd16fe8c0743249831">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#a95ae5d8822e2a7bcfa6a140d24db0b84">weak_expired</a> () <a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> </td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="../../dc/d2c/prtpool_8h.html#a7797d332996f57719d6d316bee73873d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#a5ca67f5b15497bcb4982ff19b1451ea0">weak_dispose</a> () <a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> </td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>説明</h2>
<div class="textblock"><p><a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html">SkWeakRefCnt</a> is the base class for objects that may be shared by multiple objects. When an existing strong owner wants to share a reference, it calls <a class="el" href="../../da/dec/class_sk_ref_cnt.html#ad20a3a041c22c00ab926956aa5bbd8e1">ref()</a>. When a strong owner wants to release its reference, it calls <a class="el" href="../../da/dec/class_sk_ref_cnt.html#a38af7c1c38a521154b2f7e0a73e69bc4">unref()</a>. When the shared object's strong reference count goes to zero as the result of an <a class="el" href="../../da/dec/class_sk_ref_cnt.html#a38af7c1c38a521154b2f7e0a73e69bc4">unref()</a> call, its (virtual) weak_dispose method is called. It is an error for the destructor to be called explicitly (or via the object going out of scope on the stack or calling delete) if <a class="el" href="../../da/dec/class_sk_ref_cnt.html#a404b73a3ab2521f020f0ff1db9c1b6b2">getRefCnt()</a> &gt; 1.</p>
<p>In addition to strong ownership, an owner may instead obtain a weak reference by calling <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#a70b53592a4c8b797029be6ca1d6a69da">weak_ref()</a>. A call to <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#a70b53592a4c8b797029be6ca1d6a69da">weak_ref()</a> must be balanced my a call to <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#acb9cc74646def17ad0fb64fdca6489bc">weak_unref()</a>. To obtain a strong reference from a weak reference, call <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#ab90a2fa16c4bab11207000b0ef015c4e">try_ref()</a>. If <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#ab90a2fa16c4bab11207000b0ef015c4e">try_ref()</a> returns true, the owner's pointer is now also a strong reference on which <a class="el" href="../../da/dec/class_sk_ref_cnt.html#a38af7c1c38a521154b2f7e0a73e69bc4">unref()</a> must be called. Note that this does not affect the original weak reference, <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#acb9cc74646def17ad0fb64fdca6489bc">weak_unref()</a> must still be called. When the weak reference count goes to zero, the object is deleted. While the weak reference count is positive and the strong reference count is zero the object still exists, but will be in the disposed state. It is up to the object to define what this means.</p>
<p>Note that a strong reference implicitly implies a weak reference. As a result, it is allowable for the owner of a strong ref to call <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#ab90a2fa16c4bab11207000b0ef015c4e">try_ref()</a>. This will have the same effect as calling <a class="el" href="../../da/dec/class_sk_ref_cnt.html#ad20a3a041c22c00ab926956aa5bbd8e1">ref()</a>, but may be more expensive.</p>
<p>Example:</p>
<p><a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html">SkWeakRefCnt</a> myRef = strongRef.weak_ref(); ... // strongRef.unref() may or may not be called if (myRef.try_ref()) { ... // use myRef myRef.unref(); } else { myRef is in the disposed state } myRef.weak_unref(); </p>

<p> <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html">SkWeakRefCnt.h</a> の <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html#l00052">52</a> 行で定義されています。</p>
</div><hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="a1fa86fb0536ac751ae35d7b16443f861"></a><!-- doxytag: member="SkWeakRefCnt::SkWeakRefCnt" ref="a1fa86fb0536ac751ae35d7b16443f861" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#a1fa86fb0536ac751ae35d7b16443f861">SkWeakRefCnt::SkWeakRefCnt</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Default construct, initializing the reference counts to 1. The strong references collectively hold one weak reference. When the strong reference count goes to zero, the collectively held weak reference is released. </p>

<p> <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html">SkWeakRefCnt.h</a> の <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html#l00061">61</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">: <a class="code" href="../../da/dec/class_sk_ref_cnt.html#a7a197ccc33fc786e601e922725374523">SkRefCnt</a>(), fWeakCnt(1) {}
</pre></div>
</div>
</div>
<a class="anchor" id="a663b1c6a3b5e233dc1a2550a4c817ba0"></a><!-- doxytag: member="SkWeakRefCnt::~SkWeakRefCnt" ref="a663b1c6a3b5e233dc1a2550a4c817ba0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#a663b1c6a3b5e233dc1a2550a4c817ba0">SkWeakRefCnt::~SkWeakRefCnt</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Destruct, asserting that the weak reference count is 1. </p>

<p> <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html">SkWeakRefCnt.h</a> の <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html#l00065">65</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d3/d36/_sk_types_8h_source.html#l00095">SkASSERT</a>.</p>
<div class="fragment"><pre class="fragment">                            {
<span class="preprocessor">#ifdef SK_DEBUG</span>
<span class="preprocessor"></span>        <a class="code" href="../../d3/d36/_sk_types_8h.html#acc82ca88a67ae7ce95a107a9a4b81123">SkASSERT</a>(fWeakCnt == 1);
        fWeakCnt = 0;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    }
</pre></div>
</div>
</div>
<hr/><h2>メソッド</h2>
<a class="anchor" id="a0da78aaef841f57ae594849d35ae8e75"></a><!-- doxytag: member="SkWeakRefCnt::getWeakCnt" ref="a0da78aaef841f57ae594849d35ae8e75" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#a0da78aaef841f57ae594849d35ae8e75">SkWeakRefCnt::getWeakCnt</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return the weak reference count. </p>

<p> <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html">SkWeakRefCnt.h</a> の <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html#l00074">74</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> fWeakCnt; }
</pre></div>
</div>
</div>
<a class="anchor" id="ab90a2fa16c4bab11207000b0ef015c4e"></a><!-- doxytag: member="SkWeakRefCnt::try_ref" ref="ab90a2fa16c4bab11207000b0ef015c4e" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/dd2/qcmstypes_8h.html#acac1f8caeb95c0bd16fe8c0743249831">bool</a> SK_WARN_UNUSED_RESULT <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#ab90a2fa16c4bab11207000b0ef015c4e">SkWeakRefCnt::try_ref</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a strong reference from a weak reference, if possible. The caller must already be an owner. If <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#ab90a2fa16c4bab11207000b0ef015c4e">try_ref()</a> returns true the owner is in posession of an additional strong reference. Both the original reference and new reference must be properly unreferenced. If <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#ab90a2fa16c4bab11207000b0ef015c4e">try_ref()</a> returns false, no strong reference could be created and the owner's reference is in the same state as before the call. </p>

<p> <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html">SkWeakRefCnt.h</a> の <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html#l00088">88</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d9/d82/_sk_thread__platform_8h.html#a664038b828e7693c3c1fd3f964014829">sk_atomic_conditional_inc()</a>, と <a class="el" href="../../d9/d82/_sk_thread__platform_8h.html#aebb2f4ead6a9298439feb194b35cde40">sk_membar_aquire__after_atomic_conditional_inc()</a>.</p>
<div class="fragment"><pre class="fragment">                                               {
        <span class="keywordflow">if</span> (<a class="code" href="../../d9/d82/_sk_thread__platform_8h.html#a664038b828e7693c3c1fd3f964014829">sk_atomic_conditional_inc</a>(&amp;fRefCnt) != 0) {
            <span class="comment">// Aquire barrier (L/SL), if not provided above.</span>
            <span class="comment">// Prevents subsequent code from happening before the increment.</span>
            <a class="code" href="../../d9/d82/_sk_thread__platform_8h.html#aebb2f4ead6a9298439feb194b35cde40">sk_membar_aquire__after_atomic_conditional_inc</a>();
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../de/d4d/class_sk_weak_ref_cnt_ab90a2fa16c4bab11207000b0ef015c4e_cgraph.svg" width="531" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a90f50847c66ae00117623c33340b48bb"></a><!-- doxytag: member="SkWeakRefCnt::validate" ref="a90f50847c66ae00117623c33340b48bb" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d2c/prtpool_8h.html#a7797d332996f57719d6d316bee73873d">void</a> <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#a90f50847c66ae00117623c33340b48bb">SkWeakRefCnt::validate</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="../../da/dec/class_sk_ref_cnt.html#a10428352415bdffeb85f18774de0b705">SkRefCnt</a>を再定義しています。</p>

<p> <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html">SkWeakRefCnt.h</a> の <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html#l00076">76</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d3/d36/_sk_types_8h_source.html#l00095">SkASSERT</a>, と <a class="el" href="../../d7/dee/_balance_low_limit_view_8js_source.html#l00033">validate</a>.</p>
<div class="fragment"><pre class="fragment">                          {
        <a class="code" href="../../de/d4d/class_sk_weak_ref_cnt.html#a90f50847c66ae00117623c33340b48bb">SkRefCnt::validate</a>();
        <a class="code" href="../../d3/d36/_sk_types_8h.html#acc82ca88a67ae7ce95a107a9a4b81123">SkASSERT</a>(fWeakCnt &gt; 0);
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a5ca67f5b15497bcb4982ff19b1451ea0"></a><!-- doxytag: member="SkWeakRefCnt::weak_dispose" ref="a5ca67f5b15497bcb4982ff19b1451ea0" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="../../dc/d2c/prtpool_8h.html#a7797d332996f57719d6d316bee73873d">void</a> <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#a5ca67f5b15497bcb4982ff19b1451ea0">SkWeakRefCnt::weak_dispose</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Called when the strong reference count goes to zero. This allows the object to free any resources it may be holding. Weak references may still exist and their level of allowed access to the object is defined by the object's class. </p>

<p> <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html">SkWeakRefCnt.h</a> の <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html#l00140">140</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">                                      {
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a95ae5d8822e2a7bcfa6a140d24db0b84"></a><!-- doxytag: member="SkWeakRefCnt::weak_expired" ref="a95ae5d8822e2a7bcfa6a140d24db0b84" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/dd2/qcmstypes_8h.html#acac1f8caeb95c0bd16fe8c0743249831">bool</a> <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#a95ae5d8822e2a7bcfa6a140d24db0b84">SkWeakRefCnt::weak_expired</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns true if there are no strong references to the object. When this is the case all future calls to <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#ab90a2fa16c4bab11207000b0ef015c4e">try_ref()</a> will return false. </p>

<p> <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html">SkWeakRefCnt.h</a> の <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html#l00130">130</a> 行で定義されています。</p>
<div class="fragment"><pre class="fragment">                              {
        <span class="keywordflow">return</span> fRefCnt == 0;
    }
</pre></div>
</div>
</div>
<a class="anchor" id="a70b53592a4c8b797029be6ca1d6a69da"></a><!-- doxytag: member="SkWeakRefCnt::weak_ref" ref="a70b53592a4c8b797029be6ca1d6a69da" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d2c/prtpool_8h.html#a7797d332996f57719d6d316bee73873d">void</a> <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#a70b53592a4c8b797029be6ca1d6a69da">SkWeakRefCnt::weak_ref</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Increment the weak reference count. Must be balanced by a call to <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#acb9cc74646def17ad0fb64fdca6489bc">weak_unref()</a>. </p>

<p> <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html">SkWeakRefCnt.h</a> の <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html#l00101">101</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d9/d82/_sk_thread__platform_8h.html#a719144fc1c3dcde6ac3f9c3012bd98fd">sk_atomic_inc()</a>, と <a class="el" href="../../d3/d36/_sk_types_8h_source.html#l00095">SkASSERT</a>.</p>
<div class="fragment"><pre class="fragment">                          {
        <a class="code" href="../../d3/d36/_sk_types_8h.html#acc82ca88a67ae7ce95a107a9a4b81123">SkASSERT</a>(fRefCnt &gt; 0);
        <a class="code" href="../../d3/d36/_sk_types_8h.html#acc82ca88a67ae7ce95a107a9a4b81123">SkASSERT</a>(fWeakCnt &gt; 0);
        <a class="code" href="../../d9/d82/_sk_thread__platform_8h.html#a719144fc1c3dcde6ac3f9c3012bd98fd">sk_atomic_inc</a>(&amp;fWeakCnt);  <span class="comment">// No barrier required.</span>
    }
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../de/d4d/class_sk_weak_ref_cnt_a70b53592a4c8b797029be6ca1d6a69da_cgraph.svg" width="342" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="acb9cc74646def17ad0fb64fdca6489bc"></a><!-- doxytag: member="SkWeakRefCnt::weak_unref" ref="acb9cc74646def17ad0fb64fdca6489bc" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d2c/prtpool_8h.html#a7797d332996f57719d6d316bee73873d">void</a> <a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html#acb9cc74646def17ad0fb64fdca6489bc">SkWeakRefCnt::weak_unref</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Decrement the weak reference count. If the weak reference count is 1 before the decrement, then call delete on the object. Note that if this is the case, then the object needs to have been allocated via new, and not on the stack. </p>

<p> <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html">SkWeakRefCnt.h</a> の <a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html#l00112">112</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d9/d82/_sk_thread__platform_8h.html#a618bb47780ba83644ad637aeaf789950">sk_atomic_dec()</a>, <a class="el" href="../../d9/d82/_sk_thread__platform_8h.html#a2b80af161b1e75b1de8cbe4134ced002">sk_membar_aquire__after_atomic_dec()</a>, と <a class="el" href="../../d3/d36/_sk_types_8h_source.html#l00095">SkASSERT</a>.</p>
<div class="fragment"><pre class="fragment">                            {
        <a class="code" href="../../d3/d36/_sk_types_8h.html#acc82ca88a67ae7ce95a107a9a4b81123">SkASSERT</a>(fWeakCnt &gt; 0);
        <span class="comment">// Release barrier (SL/S), if not provided below.</span>
        <span class="keywordflow">if</span> (<a class="code" href="../../d9/d82/_sk_thread__platform_8h.html#a618bb47780ba83644ad637aeaf789950">sk_atomic_dec</a>(&amp;fWeakCnt) == 1) {
            <span class="comment">// Aquire barrier (L/SL), if not provided above.</span>
            <span class="comment">// Prevents code in destructor from happening before the decrement.</span>
            <a class="code" href="../../d9/d82/_sk_thread__platform_8h.html#a2b80af161b1e75b1de8cbe4134ced002">sk_membar_aquire__after_atomic_dec</a>();
<span class="preprocessor">#ifdef SK_DEBUG</span>
<span class="preprocessor"></span>            <span class="comment">// so our destructor won&#39;t complain</span>
            fWeakCnt = 1;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>            SkRefCnt::internal_dispose();
        }
    }
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../de/d4d/class_sk_weak_ref_cnt_acb9cc74646def17ad0fb64fdca6489bc_cgraph.svg" width="496" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li><a class="el" href="../../d6/d2f/_sk_weak_ref_cnt_8h_source.html">SkWeakRefCnt.h</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全て</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>データ構造</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>ネームスペース</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>ファイル</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>関数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>変数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>型定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>列挙型</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>列挙型の値</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>フレンド</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>マクロ定義</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../de/d4d/class_sk_weak_ref_cnt.html">SkWeakRefCnt</a>      </li>

    <li class="footer">FxOS Code Readingに対してSat Oct 19 2013 01:04:46に生成されました。
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
