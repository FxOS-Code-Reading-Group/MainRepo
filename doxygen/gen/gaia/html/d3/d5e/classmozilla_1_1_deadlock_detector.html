<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>FxOS Code Reading: クラス テンプレート mozilla::DeadlockDetector&lt; T &gt;</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">FxOS Code Reading
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- 作成： Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'検索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>メインページ</span></a></li>
      <li><a href="../../pages.html"><span>関連ページ</span></a></li>
      <li><a href="../../modules.html"><span>モジュール</span></a></li>
      <li><a href="../../namespaces.html"><span>パッケージ</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>データ構造</span></a></li>
      <li><a href="../../files.html"><span>ファイル</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>データ構造</span></a></li>
      <li><a href="../../classes.html"><span>データ構造索引</span></a></li>
      <li><a href="../../inherits.html"><span>クラス階層</span></a></li>
      <li><a href="../../functions.html"><span>データフィールド</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('d3/d5e/classmozilla_1_1_deadlock_detector.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">データ構造</a> &#124;
<a href="#pub-types">Public 型</a> &#124;
<a href="#pub-methods">Public メソッド</a> &#124;
<a href="#pub-attribs">変数</a> &#124;
<a href="#pub-static-attribs">Static Public 変数</a>  </div>
  <div class="headertitle">
<div class="title">クラス テンプレート mozilla::DeadlockDetector&lt; T &gt;</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="mozilla::DeadlockDetector" -->
<p><code>#include &lt;<a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html">DeadlockDetector.h</a>&gt;</code></p>
<div class="dynheader">
mozilla::DeadlockDetector&lt; T &gt;のコラボレーション図</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d4/d4b/classmozilla_1_1_deadlock_detector__coll__graph.svg" width="268" height="344"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">凡例</a>]</span></center></div>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
データ構造</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><b>OrderingEntry</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><b>PRAutoLock</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dcf/structmozilla_1_1_deadlock_detector_1_1_resource_acquisition.html">ResourceAcquisition</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public 型</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="../../d8/d6f/classns_t_array.html">nsTArray</a><br class="typebreak"/>
&lt; <a class="el" href="../../d1/dcf/structmozilla_1_1_deadlock_detector_1_1_resource_acquisition.html">ResourceAcquisition</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a8a90b28703e66a0e3dbcd486de1cd52e">ResourceAcquisitionArray</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public メソッド</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a5a5d44275f2f88dd0c628fa96282206b">DeadlockDetector</a> (uint32_t aNumResourcesGuess=<a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a98a69ac07ff71943bcb418691b3c53f6">kDefaultNumBuckets</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#aa2d060916f0da37c9cfac5ac989000a5">~DeadlockDetector</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d2c/prtpool_8h.html#a7797d332996f57719d6d316bee73873d">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#ab93f62ad507777d0df221ea854ec416a">Add</a> (T *aResource)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a8a90b28703e66a0e3dbcd486de1cd52e">ResourceAcquisitionArray</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#ae88e9bb875d78bb00fa6a272b0a3dd56">CheckAcquisition</a> (<a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> T *aLast, <a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> T *aProposed, <a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dc/dba/classmozilla_1_1_call_stack.html">CallStack</a> &amp;aCallContext)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/dd2/qcmstypes_8h.html#acac1f8caeb95c0bd16fe8c0743249831">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a42eccb33a8690e5b95cf509ff535bedd">InTransitiveClosure</a> (<a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/d8b/struct_p_l_hash_entry.html">PLHashEntry</a> *aStart, <a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/d8b/struct_p_l_hash_entry.html">PLHashEntry</a> *aTarget) <a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a8a90b28703e66a0e3dbcd486de1cd52e">ResourceAcquisitionArray</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a5dea10bc872b7e72d37b77689d7c4e38">GetDeductionChain</a> (<a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/d8b/struct_p_l_hash_entry.html">PLHashEntry</a> *aStart, <a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/d8b/struct_p_l_hash_entry.html">PLHashEntry</a> *aTarget)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/dd2/qcmstypes_8h.html#acac1f8caeb95c0bd16fe8c0743249831">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a842d493367f02292cdd8411a1e56ec5d">GetDeductionChain_Helper</a> (<a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/d8b/struct_p_l_hash_entry.html">PLHashEntry</a> *aStart, <a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/d8b/struct_p_l_hash_entry.html">PLHashEntry</a> *aTarget, <a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a8a90b28703e66a0e3dbcd486de1cd52e">ResourceAcquisitionArray</a> *aChain)</td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/d2a/struct_p_l_hash_table.html">PLHashTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a36a16a2c1d0c014822f5adca91d642a5">mOrdering</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d5/d93/jslock_8h.html#a80da71ec2473acd1cb2d457f06618150">PRLock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#aaefeae2d154d763f34c217124a54c4c0">mLock</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-attribs"></a>
Static Public 変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a98a69ac07ff71943bcb418691b3c53f6">kDefaultNumBuckets</a> = 64</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>説明</h2>
<div class="textblock"><h3>template&lt;typename T&gt;<br/>
class mozilla::DeadlockDetector&lt; T &gt;</h3>

<p><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html">DeadlockDetector</a></p>
<p>The following is an approximate description of how the deadlock detector works.</p>
<p>The deadlock detector ensures that all blocking resources are acquired according to a partial order P. One type of blocking resource is a lock. If a lock l1 is acquired (locked) before l2, then we say that |l1 &lt;_P l2|. The detector flags an error if two locks l1 and l2 have an inconsistent ordering in P; that is, if both |l1 &lt;_P l2| and |l2 &lt;_P l1|. This is a potential error because a thread acquiring l1,l2 according to the first order might race with a thread acquiring them according to the second order. If this happens under the right conditions, then the acquisitions will deadlock.</p>
<p>This deadlock detector doesn't know at compile-time what P is. So, it tries to discover the order at run time. More precisely, it finds <em>some</em> order P, then tries to find chains of resource acquisitions that violate P. An example acquisition sequence, and the orders they impose, is l1.lock() // current chain: [ l1 ] // order: { }</p>
<p>l2.lock() // current chain: [ l1, l2 ] // order: { l1 &lt;_P l2 }</p>
<p>l3.lock() // current chain: [ l1, l2, l3 ] // order: { l1 &lt;_P l2, l2 &lt;_P l3, l1 &lt;_P l3 } // (note: &lt;_P is transitive, so also |l1 &lt;_P l3|)</p>
<p>l2.unlock() // current chain: [ l1, l3 ] // order: { l1 &lt;_P l2, l2 &lt;_P l3, l1 &lt;_P l3 } // (note: it's OK, but weird, that l2 was unlocked out // of order. we still have l1 &lt;_P l3).</p>
<p>l2.lock() // current chain: [ l1, l3, l2 ] // order: { l1 &lt;_P l2, l2 &lt;_P l3, l1 &lt;_P l3, l3 &lt;_P l2 (!!!) } BEEP BEEP! Here the detector will flag a potential error, since l2 and l3 were used inconsistently (and potentially in ways that would deadlock). </p>

<p> <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html">DeadlockDetector.h</a> の <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00140">140</a> 行で定義されています。</p>
</div><hr/><h2>型定義</h2>
<a class="anchor" id="a8a90b28703e66a0e3dbcd486de1cd52e"></a><!-- doxytag: member="mozilla::DeadlockDetector::ResourceAcquisitionArray" ref="a8a90b28703e66a0e3dbcd486de1cd52e" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="../../d8/d6f/classns_t_array.html">nsTArray</a>&lt;<a class="el" href="../../d1/dcf/structmozilla_1_1_deadlock_detector_1_1_resource_acquisition.html">ResourceAcquisition</a>&gt; <a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html">mozilla::DeadlockDetector</a>&lt; T &gt;::<a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a8a90b28703e66a0e3dbcd486de1cd52e">ResourceAcquisitionArray</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html">DeadlockDetector.h</a> の <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00174">174</a> 行で定義されています。</p>

</div>
</div>
<hr/><h2>コンストラクタとデストラクタ</h2>
<a class="anchor" id="a5a5d44275f2f88dd0c628fa96282206b"></a><!-- doxytag: member="mozilla::DeadlockDetector::DeadlockDetector" ref="a5a5d44275f2f88dd0c628fa96282206b" args="(uint32_t aNumResourcesGuess=kDefaultNumBuckets)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html">mozilla::DeadlockDetector</a>&lt; T &gt;::<a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html">DeadlockDetector</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>aNumResourcesGuess</em> = <code><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a98a69ac07ff71943bcb418691b3c53f6">kDefaultNumBuckets</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html">DeadlockDetector</a> Create a new deadlock detector.</p>
<dl class="params"><dt><b>引数:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">aNumResourcesGuess</td><td>Guess at approximate number of resources that will be checked. </td></tr>
  </table>
  </dd>
</dl>

<p> <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html">DeadlockDetector.h</a> の <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00327">327</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00536">mozilla::DeadlockDetector&lt; T &gt;::mLock</a>, <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00529">mozilla::DeadlockDetector&lt; T &gt;::mOrdering</a>, <a class="el" href="../../dc/d6d/ns_debug_8h_source.html#l00241">NS_RUNTIMEABORT</a>, <a class="el" href="../../d1/d0e/plhash_8h.html#ae27e9dac90d13cc6c971a6b7d43a9131">PL_CompareValues()</a>, と <a class="el" href="../../d1/d0e/plhash_8h.html#ac5e2816bd560ac7feaa3c940fab51675">PL_NewHashTable()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a36a16a2c1d0c014822f5adca91d642a5">mOrdering</a> = <a class="code" href="../../d1/d0e/plhash_8h.html#ac5e2816bd560ac7feaa3c940fab51675">PL_NewHashTable</a>(aNumResourcesGuess,
                                    HashKey,
                                    <a class="code" href="../../d1/d0e/plhash_8h.html#ae27e9dac90d13cc6c971a6b7d43a9131">PL_CompareValues</a>, <a class="code" href="../../d1/d0e/plhash_8h.html#ae27e9dac90d13cc6c971a6b7d43a9131">PL_CompareValues</a>,
                                    &amp;kAllocOps, 0);
        <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a36a16a2c1d0c014822f5adca91d642a5">mOrdering</a>)
            <a class="code" href="../../dc/d6d/ns_debug_8h.html#af23ce88454f9ea763d9e8a9b8a77b340">NS_RUNTIMEABORT</a>(<span class="stringliteral">&quot;couldn&#39;t initialize resource ordering table&quot;</span>);

        <a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#aaefeae2d154d763f34c217124a54c4c0">mLock</a> = PR_NewLock();
        <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#aaefeae2d154d763f34c217124a54c4c0">mLock</a>)
            <a class="code" href="../../dc/d6d/ns_debug_8h.html#af23ce88454f9ea763d9e8a9b8a77b340">NS_RUNTIMEABORT</a>(<span class="stringliteral">&quot;couldn&#39;t allocate deadlock detector lock&quot;</span>);
    }
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/d5e/classmozilla_1_1_deadlock_detector_a5a5d44275f2f88dd0c628fa96282206b_cgraph.svg" width="488" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa2d060916f0da37c9cfac5ac989000a5"></a><!-- doxytag: member="mozilla::DeadlockDetector::~DeadlockDetector" ref="aa2d060916f0da37c9cfac5ac989000a5" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html">mozilla::DeadlockDetector</a>&lt; T &gt;::~<a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html">DeadlockDetector</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>~DeadlockDetector</p>
<p>*NOT* thread safe. </p>

<p> <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html">DeadlockDetector.h</a> の <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00346">346</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00536">mozilla::DeadlockDetector&lt; T &gt;::mLock</a>, <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00529">mozilla::DeadlockDetector&lt; T &gt;::mOrdering</a>, と <a class="el" href="../../d1/d0e/plhash_8h.html#a190381cb535ed2213a50f3c5f93fe7fb">PL_HashTableDestroy()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="../../d1/d0e/plhash_8h.html#a190381cb535ed2213a50f3c5f93fe7fb">PL_HashTableDestroy</a>(<a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a36a16a2c1d0c014822f5adca91d642a5">mOrdering</a>);
        PR_DestroyLock(<a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#aaefeae2d154d763f34c217124a54c4c0">mLock</a>);
    }
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/d5e/classmozilla_1_1_deadlock_detector_aa2d060916f0da37c9cfac5ac989000a5_cgraph.svg" width="512" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<hr/><h2>メソッド</h2>
<a class="anchor" id="ab93f62ad507777d0df221ea854ec416a"></a><!-- doxytag: member="mozilla::DeadlockDetector::Add" ref="ab93f62ad507777d0df221ea854ec416a" args="(T *aResource)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d2c/prtpool_8h.html#a7797d332996f57719d6d316bee73873d">void</a> <a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html">mozilla::DeadlockDetector</a>&lt; T &gt;::<a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#ab93f62ad507777d0df221ea854ec416a">Add</a> </td>
          <td>(</td>
          <td class="paramtype">T *&#160;</td>
          <td class="paramname"><em>aResource</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Add Make the deadlock detector aware of |aResource|.</p>
<p>WARNING: The deadlock detector owns |aResource|.</p>
<p>Thread safe.</p>
<dl class="params"><dt><b>引数:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">aResource</td><td>Resource to make deadlock detector aware of. </td></tr>
  </table>
  </dd>
</dl>

<p> <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html">DeadlockDetector.h</a> の <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00362">362</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d6/d52/js_2browser_8js_source.html#l00004">_</a>, と <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00536">mozilla::DeadlockDetector&lt; T &gt;::mLock</a>.</p>
<div class="fragment"><pre class="fragment">    {
        PRAutoLock <a class="code" href="../../d6/d52/js_2browser_8js.html#a6e69a5af94d7d53886e51f89fb3bd6b4">_</a>(<a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#aaefeae2d154d763f34c217124a54c4c0">mLock</a>);
        PutEntry(aResource);
    }
</pre></div>
</div>
</div>
<a class="anchor" id="ae88e9bb875d78bb00fa6a272b0a3dd56"></a><!-- doxytag: member="mozilla::DeadlockDetector::CheckAcquisition" ref="ae88e9bb875d78bb00fa6a272b0a3dd56" args="(const T *aLast, const T *aProposed, const CallStack &amp;aCallContext)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a8a90b28703e66a0e3dbcd486de1cd52e">ResourceAcquisitionArray</a>* <a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html">mozilla::DeadlockDetector</a>&lt; T &gt;::<a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#ae88e9bb875d78bb00fa6a272b0a3dd56">CheckAcquisition</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> T *&#160;</td>
          <td class="paramname"><em>aLast</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> T *&#160;</td>
          <td class="paramname"><em>aProposed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../dc/dba/classmozilla_1_1_call_stack.html">CallStack</a> &amp;&#160;</td>
          <td class="paramname"><em>aCallContext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>CheckAcquisition This method is called after acquiring |aLast|, but before trying to acquire |aProposed| from |aCallContext|. It determines whether actually trying to acquire |aProposed| will create problems. It is OK if |aLast| is NULL; this is interpreted as |aProposed| being the thread's first acquisition of its current chain.</p>
<p>Iff acquiring |aProposed| may lead to deadlock for some thread interleaving (including the current one!), the cyclical dependency from which this was deduced is returned. Otherwise, 0 is returned.</p>
<p>If a potential deadlock is detected and a resource cycle is returned, it is the *caller's* responsibility to free it.</p>
<p>Thread safe.</p>
<dl class="params"><dt><b>引数:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">aLast</td><td>Last resource acquired by calling thread (or 0). </td></tr>
    <tr><td class="paramname">aProposed</td><td>Resource calling thread proposes to acquire. </td></tr>
    <tr><td class="paramname">aCallContext</td><td>Calling context whence acquisiton request came. </td></tr>
  </table>
  </dd>
</dl>

<p> <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html">DeadlockDetector.h</a> の <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00397">397</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d6/d52/js_2browser_8js_source.html#l00004">_</a>, <a class="el" href="../../d1/db9/ns_t_array_8h_source.html#l01216">nsTArray_Impl&lt; E, Alloc &gt;::AppendElement()</a>, <a class="el" href="../../d1/d04/app__install__manager_8js_source.html#l00508">e</a>, <a class="el" href="../../d5/d12/build__stage_2email_2shared_2resources_2apn_2_r_e_a_d_m_e_8md_source.html#l00013">first</a>, <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00488">mozilla::DeadlockDetector&lt; T &gt;::GetDeductionChain()</a>, <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00457">mozilla::DeadlockDetector&lt; T &gt;::InTransitiveClosure()</a>, <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00091">mozilla::CallStack::kNone</a>, <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00536">mozilla::DeadlockDetector&lt; T &gt;::mLock</a>, <a class="el" href="../../dc/d6d/ns_debug_8h_source.html#l00145">NS_ASSERTION</a>, <a class="el" href="../../dc/d6d/ns_debug_8h_source.html#l00241">NS_RUNTIMEABORT</a>, と <a class="el" href="../../d1/d0e/plhash_8h_source.html#l00045">PLHashEntry::value</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="../../dc/d6d/ns_debug_8h.html#ad0ae7f43205a729107e59d101665b8fa">NS_ASSERTION</a>(aProposed, <span class="stringliteral">&quot;null resource&quot;</span>);
        PRAutoLock <a class="code" href="../../d6/d52/js_2browser_8js.html#a6e69a5af94d7d53886e51f89fb3bd6b4">_</a>(<a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#aaefeae2d154d763f34c217124a54c4c0">mLock</a>);

        <a class="code" href="../../d7/d8b/struct_p_l_hash_entry.html">PLHashEntry</a>* second = *GetEntry(aProposed);
        OrderingEntry* <a class="code" href="../../d1/d04/app__install__manager_8js.html#ab5902775854a8b8440bcd25e0fe1c120">e</a> = <span class="keyword">static_cast&lt;</span>OrderingEntry*<span class="keyword">&gt;</span>(second-&gt;<a class="code" href="../../d7/d8b/struct_p_l_hash_entry.html#a6ae338187ccec35c3a1f817a0cc351cd">value</a>);
        <span class="keywordflow">if</span> (<a class="code" href="../../dc/dba/classmozilla_1_1_call_stack.html#ab3b5da463463cd5bd41e277a1134c0eb">CallStack::kNone</a> == e-&gt;mFirstSeen)
            e-&gt;mFirstSeen = aCallContext;

        <span class="keywordflow">if</span> (!aLast)
            <span class="comment">// don&#39;t check if |0 &lt; proposed|; just vamoose</span>
            <span class="keywordflow">return</span> 0;

        <a class="code" href="../../d7/d8b/struct_p_l_hash_entry.html">PLHashEntry</a>* <a class="code" href="../../d5/d12/build__stage_2email_2shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#aab9764d7f9e519400127ef5189844ed3">first</a> = *GetEntry(aLast);

        <span class="comment">// this is the crux of the deadlock detector algorithm</span>

        <span class="keywordflow">if</span> (first == second) {
            <span class="comment">// reflexive deadlock.  fastpath b/c InTransitiveClosure is</span>
            <span class="comment">// not applicable here.</span>
            <a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a8a90b28703e66a0e3dbcd486de1cd52e">ResourceAcquisitionArray</a>* cycle = <span class="keyword">new</span> <a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a8a90b28703e66a0e3dbcd486de1cd52e">ResourceAcquisitionArray</a>();
            <span class="keywordflow">if</span> (!cycle)
                <a class="code" href="../../dc/d6d/ns_debug_8h.html#af23ce88454f9ea763d9e8a9b8a77b340">NS_RUNTIMEABORT</a>(<span class="stringliteral">&quot;can&#39;t allocate dep. cycle array&quot;</span>);
            cycle-&gt;AppendElement(MakeResourceAcquisition(first));
            cycle-&gt;AppendElement(ResourceAcquisition(aProposed,
                                                     aCallContext));
            <span class="keywordflow">return</span> cycle;
        }
        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a42eccb33a8690e5b95cf509ff535bedd">InTransitiveClosure</a>(first, second)) {
            <span class="comment">// we&#39;ve already established |last &lt; proposed|.  all is well.</span>
            <span class="keywordflow">return</span> 0;
        }
        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a42eccb33a8690e5b95cf509ff535bedd">InTransitiveClosure</a>(second, first)) {
            <span class="comment">// the order |proposed &lt; last| has been deduced, perhaps</span>
            <span class="comment">// transitively.  we&#39;re attempting to violate that</span>
            <span class="comment">// constraint by acquiring resources in the order</span>
            <span class="comment">// |last &lt; proposed|, and thus we may deadlock under the</span>
            <span class="comment">// right conditions.</span>
            <a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a8a90b28703e66a0e3dbcd486de1cd52e">ResourceAcquisitionArray</a>* cycle = <a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a5dea10bc872b7e72d37b77689d7c4e38">GetDeductionChain</a>(second, first);
            <span class="comment">// show how acquiring |proposed| would complete the cycle</span>
            cycle-&gt;AppendElement(ResourceAcquisition(aProposed,
                                                     aCallContext));
            <span class="keywordflow">return</span> cycle;
        }
        <span class="comment">// |last|, |proposed| are unordered according to our</span>
        <span class="comment">// poset.  this is fine, but we now need to add this</span>
        <span class="comment">// ordering constraint.</span>
        AddOrder(first, second);
        <span class="keywordflow">return</span> 0;
    }
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/d5e/classmozilla_1_1_deadlock_detector_ae88e9bb875d78bb00fa6a272b0a3dd56_cgraph.svg" width="100%" height="167"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5dea10bc872b7e72d37b77689d7c4e38"></a><!-- doxytag: member="mozilla::DeadlockDetector::GetDeductionChain" ref="a5dea10bc872b7e72d37b77689d7c4e38" args="(const PLHashEntry *aStart, const PLHashEntry *aTarget)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a8a90b28703e66a0e3dbcd486de1cd52e">ResourceAcquisitionArray</a>* <a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html">mozilla::DeadlockDetector</a>&lt; T &gt;::<a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a5dea10bc872b7e72d37b77689d7c4e38">GetDeductionChain</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/d8b/struct_p_l_hash_entry.html">PLHashEntry</a> *&#160;</td>
          <td class="paramname"><em>aStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/d8b/struct_p_l_hash_entry.html">PLHashEntry</a> *&#160;</td>
          <td class="paramname"><em>aTarget</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return an array of all resource acquisitions aStart &lt;_this r1 &lt;_this r2 &lt;_ ... &lt;_ aTarget from which |aStart &lt;_this aTarget| was deduced, including |aStart| and |aTarget|.</p>
<p>Nb: there may be multiple deductions of |aStart &lt;_this aTarget|. This function returns the first ordering found by depth-first search.</p>
<p>Nb: |InTransitiveClosure| could be replaced by this function. However, this one is more expensive because we record the DFS search stack on the heap whereas the other doesn't.</p>
<p>|aStart != aTarget| </p>

<p> <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html">DeadlockDetector.h</a> の <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00488">488</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d1/db9/ns_t_array_8h_source.html#l01216">nsTArray_Impl&lt; E, Alloc &gt;::AppendElement()</a>, <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00504">mozilla::DeadlockDetector&lt; T &gt;::GetDeductionChain_Helper()</a>, <a class="el" href="../../dc/d6d/ns_debug_8h_source.html#l00145">NS_ASSERTION</a>, と <a class="el" href="../../dc/d6d/ns_debug_8h_source.html#l00241">NS_RUNTIMEABORT</a>.</p>

<p>参照元 <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00397">mozilla::DeadlockDetector&lt; T &gt;::CheckAcquisition()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a8a90b28703e66a0e3dbcd486de1cd52e">ResourceAcquisitionArray</a>* chain = <span class="keyword">new</span> <a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a8a90b28703e66a0e3dbcd486de1cd52e">ResourceAcquisitionArray</a>();
        <span class="keywordflow">if</span> (!chain)
            <a class="code" href="../../dc/d6d/ns_debug_8h.html#af23ce88454f9ea763d9e8a9b8a77b340">NS_RUNTIMEABORT</a>(<span class="stringliteral">&quot;can&#39;t allocate dep. cycle array&quot;</span>);
        chain-&gt;AppendElement(MakeResourceAcquisition(aStart));

        <a class="code" href="../../dc/d6d/ns_debug_8h.html#ad0ae7f43205a729107e59d101665b8fa">NS_ASSERTION</a>(<a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a842d493367f02292cdd8411a1e56ec5d">GetDeductionChain_Helper</a>(aStart, aTarget, chain),
                     <span class="stringliteral">&quot;GetDeductionChain called when there&#39;s no deadlock&quot;</span>);
        <span class="keywordflow">return</span> chain;
    }
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/d5e/classmozilla_1_1_deadlock_detector_a5dea10bc872b7e72d37b77689d7c4e38_cgraph.svg" width="100%" height="150"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</p>

<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/d5e/classmozilla_1_1_deadlock_detector_a5dea10bc872b7e72d37b77689d7c4e38_icgraph.svg" width="646" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a842d493367f02292cdd8411a1e56ec5d"></a><!-- doxytag: member="mozilla::DeadlockDetector::GetDeductionChain_Helper" ref="a842d493367f02292cdd8411a1e56ec5d" args="(const PLHashEntry *aStart, const PLHashEntry *aTarget, ResourceAcquisitionArray *aChain)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/dd2/qcmstypes_8h.html#acac1f8caeb95c0bd16fe8c0743249831">bool</a> <a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html">mozilla::DeadlockDetector</a>&lt; T &gt;::<a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a842d493367f02292cdd8411a1e56ec5d">GetDeductionChain_Helper</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/d8b/struct_p_l_hash_entry.html">PLHashEntry</a> *&#160;</td>
          <td class="paramname"><em>aStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/d8b/struct_p_l_hash_entry.html">PLHashEntry</a> *&#160;</td>
          <td class="paramname"><em>aTarget</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a8a90b28703e66a0e3dbcd486de1cd52e">ResourceAcquisitionArray</a> *&#160;</td>
          <td class="paramname"><em>aChain</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html">DeadlockDetector.h</a> の <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00504">504</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d1/db9/ns_t_array_8h_source.html#l01216">nsTArray_Impl&lt; E, Alloc &gt;::AppendElement()</a>, <a class="el" href="../../da/d7d/sylvester_8js_source.html#l00308">i</a>, <a class="el" href="../../d1/db9/ns_t_array_8h_source.html#l00370">nsTArray_base&lt; Alloc, Copy &gt;::Length()</a>, と <a class="el" href="../../d1/db9/ns_t_array_8h_source.html#l01271">nsTArray_Impl&lt; E, Alloc &gt;::RemoveElementAt()</a>.</p>

<p>参照元 <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00488">mozilla::DeadlockDetector&lt; T &gt;::GetDeductionChain()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> (IsOrdered(aStart, aTarget)) {
            aChain-&gt;AppendElement(MakeResourceAcquisition(aTarget));
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }

        index_type <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a> = 0;
        size_type <a class="code" href="../../d9/d04/expat_8h.html#a5df20ff5bc70fb664abe3912796e90df">len</a> = NumOrders(aStart);
        <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="../../d7/d8b/struct_p_l_hash_entry.html">PLHashEntry</a>* <span class="keyword">const</span>* it = GetOrders(aStart);
             i &lt; <a class="code" href="../../d9/d04/expat_8h.html#a5df20ff5bc70fb664abe3912796e90df">len</a>; ++<a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>, ++it) {
            aChain-&gt;AppendElement(MakeResourceAcquisition(*it));
            <span class="keywordflow">if</span> (<a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a842d493367f02292cdd8411a1e56ec5d">GetDeductionChain_Helper</a>(*it, aTarget, aChain))
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            aChain-&gt;RemoveElementAt(aChain-&gt;Length() - 1);
        }
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/d5e/classmozilla_1_1_deadlock_detector_a842d493367f02292cdd8411a1e56ec5d_cgraph.svg" width="630" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/d5e/classmozilla_1_1_deadlock_detector_a842d493367f02292cdd8411a1e56ec5d_icgraph.svg" width="100%" height="60"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a42eccb33a8690e5b95cf509ff535bedd"></a><!-- doxytag: member="mozilla::DeadlockDetector::InTransitiveClosure" ref="a42eccb33a8690e5b95cf509ff535bedd" args="(const PLHashEntry *aStart, const PLHashEntry *aTarget) const " -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/dd2/qcmstypes_8h.html#acac1f8caeb95c0bd16fe8c0743249831">bool</a> <a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html">mozilla::DeadlockDetector</a>&lt; T &gt;::<a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a42eccb33a8690e5b95cf509ff535bedd">InTransitiveClosure</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/d8b/struct_p_l_hash_entry.html">PLHashEntry</a> *&#160;</td>
          <td class="paramname"><em>aStart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> <a class="el" href="../../d7/d8b/struct_p_l_hash_entry.html">PLHashEntry</a> *&#160;</td>
          <td class="paramname"><em>aTarget</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Return true iff |aTarget| is in the transitive closure of |aStart| over the ordering relation `&lt;_this'.</p>
<p>|aStart != aTarget| </p>

<p> <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html">DeadlockDetector.h</a> の <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00457">457</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../da/d7d/sylvester_8js_source.html#l00308">i</a>.</p>

<p>参照元 <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00397">mozilla::DeadlockDetector&lt; T &gt;::CheckAcquisition()</a>.</p>
<div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">if</span> (IsOrdered(aStart, aTarget))
            <span class="keywordflow">return</span> <span class="keyword">true</span>;

        index_type <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a> = 0;
        size_type <a class="code" href="../../d9/d04/expat_8h.html#a5df20ff5bc70fb664abe3912796e90df">len</a> = NumOrders(aStart);
        <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="../../d7/d8b/struct_p_l_hash_entry.html">PLHashEntry</a>* <span class="keyword">const</span>* it = GetOrders(aStart);
             i &lt; <a class="code" href="../../d9/d04/expat_8h.html#a5df20ff5bc70fb664abe3912796e90df">len</a>; ++<a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>, ++it)
            <span class="keywordflow">if</span> (<a class="code" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a42eccb33a8690e5b95cf509ff535bedd">InTransitiveClosure</a>(*it, aTarget))
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
    }
</pre></div>
<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/d5e/classmozilla_1_1_deadlock_detector_a42eccb33a8690e5b95cf509ff535bedd_icgraph.svg" width="646" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<hr/><h2>構造体</h2>
<a class="anchor" id="a98a69ac07ff71943bcb418691b3c53f6"></a><!-- doxytag: member="mozilla::DeadlockDetector::kDefaultNumBuckets" ref="a98a69ac07ff71943bcb418691b3c53f6" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d92/cdefs_8h.html#a2c212835823e3c54a8ab6d95c652660e">const</a> uint32_t <a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html">mozilla::DeadlockDetector</a>&lt; T &gt;::<a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a98a69ac07ff71943bcb418691b3c53f6">kDefaultNumBuckets</a> = 64<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html">DeadlockDetector.h</a> の <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00318">318</a> 行で定義されています。</p>

</div>
</div>
<a class="anchor" id="aaefeae2d154d763f34c217124a54c4c0"></a><!-- doxytag: member="mozilla::DeadlockDetector::mLock" ref="aaefeae2d154d763f34c217124a54c4c0" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d93/jslock_8h.html#a80da71ec2473acd1cb2d457f06618150">PRLock</a>* <a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html">mozilla::DeadlockDetector</a>&lt; T &gt;::<a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#aaefeae2d154d763f34c217124a54c4c0">mLock</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Protects contentious methods. Nb: can't use <a class="el" href="../../d9/d12/classmozilla_1_1_mutex.html">mozilla::Mutex</a> since we are used as its deadlock detector. </p>

<p> <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html">DeadlockDetector.h</a> の <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00536">536</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00362">mozilla::DeadlockDetector&lt; T &gt;::Add()</a>, <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00397">mozilla::DeadlockDetector&lt; T &gt;::CheckAcquisition()</a>, <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00327">mozilla::DeadlockDetector&lt; T &gt;::DeadlockDetector()</a>, と <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00346">mozilla::DeadlockDetector&lt; T &gt;::~DeadlockDetector()</a>.</p>

</div>
</div>
<a class="anchor" id="a36a16a2c1d0c014822f5adca91d642a5"></a><!-- doxytag: member="mozilla::DeadlockDetector::mOrdering" ref="a36a16a2c1d0c014822f5adca91d642a5" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d2a/struct_p_l_hash_table.html">PLHashTable</a>* <a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html">mozilla::DeadlockDetector</a>&lt; T &gt;::<a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html#a36a16a2c1d0c014822f5adca91d642a5">mOrdering</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The partial order on resource acquisitions used by the deadlock detector. </p>

<p> <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html">DeadlockDetector.h</a> の <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00529">529</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00327">mozilla::DeadlockDetector&lt; T &gt;::DeadlockDetector()</a>, と <a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html#l00346">mozilla::DeadlockDetector&lt; T &gt;::~DeadlockDetector()</a>.</p>

</div>
</div>
<hr/>このクラスの説明は次のファイルから生成されました:<ul>
<li><a class="el" href="../../d9/dd8/_deadlock_detector_8h_source.html">DeadlockDetector.h</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全て</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>データ構造</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>ネームスペース</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>ファイル</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>関数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>変数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>型定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>列挙型</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>列挙型の値</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>フレンド</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>マクロ定義</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../d2/d93/namespacemozilla.html">mozilla</a>      </li>
      <li class="navelem"><a class="el" href="../../d3/d5e/classmozilla_1_1_deadlock_detector.html">DeadlockDetector</a>      </li>

    <li class="footer">FxOS Code Readingに対してSat Oct 19 2013 01:05:36に生成されました。
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
