<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>FxOS Code Reading: day_based_test.js</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">FxOS Code Reading
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- 作成： Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'検索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>メインページ</span></a></li>
      <li><a href="../../pages.html"><span>関連ページ</span></a></li>
      <li><a href="../../modules.html"><span>モジュール</span></a></li>
      <li><a href="../../namespaces.html"><span>パッケージ</span></a></li>
      <li><a href="../../annotated.html"><span>データ構造</span></a></li>
      <li class="current"><a href="../../files.html"><span>ファイル</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>ファイル一覧</span></a></li>
      <li><a href="../../globals.html"><span>グローバル</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('d0/d79/day__based__test_8js.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">関数</a>  </div>
  <div class="headertitle">
<div class="title">day_based_test.js</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="../../d0/d79/day__based__test_8js_source.html">ソースコードを見る。</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
関数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/day__based__test_8js.html#a888fd26f808bff69c5c21cd82c944fe5">requireLib</a> ('querystring.js')</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d79/day__based__test_8js.html#a323139f99fe170846f838a52ce3f67ef">suiteGroup</a> ('Views.DayBased', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var OrderedMap;suiteSetup(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){OrderedMap=Calendar.Utils.OrderedMap;});var <a class="el" href="../../d6/da8/facebook__connector__test_8js.html#ab17dfde70922e77b2bbcbd0192a12531">subject</a>;var <a class="el" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a>;var <a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">date</a>=new Date(2012, 1, 5);var <a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a>=0;var hours;<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> eventHolder(){<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>{remote:{}, _id:id++};}var controller;var template;<a class="el" href="../../da/db6/ime__test_8js.html#a499aeb7e1826da3a383e443025bfc846">setup</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a>=0;<a class="el" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a>=<a class="el" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">testSupport.calendar.app</a>();controller=app.timeController;<a class="el" href="../../d6/da8/facebook__connector__test_8js.html#ab17dfde70922e77b2bbcbd0192a12531">subject</a>=new Calendar.Views.DayBased({date:date, app:app});template=subject.template;subject._renderEvent=<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(busytime, <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>){<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> <a class="el" href="../../d3/d91/j3d_8js.html#ae7817194480cfc900873938c8e7dd602">template.event.render</a>({busytimeId:busytime._id, calendarId:event.calendarId, <a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a051e403214cb6872ad3fe4e50302a6ee">title:event.remote.title</a>});};subject._buildElement();hours=subject.hours;});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('initialization', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){assert.instanceOf(<a class="el" href="../../d6/da8/facebook__connector__test_8js.html#ab17dfde70922e77b2bbcbd0192a12531">subject</a>, Calendar.View);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(<a class="el" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">subject.app</a>, <a class="el" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">app</a>);assert.instanceOf(subject.timespan, <a class="el" href="../../d1/d7c/timespan_8js.html#a8eb67af7ea9a444c87cbe98b94d387c7">Calendar.Timespan</a>);var expectedSpan=Calendar.Calc.spanOfDay(<a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">date</a>);assert.deepEqual(subject.timespan, expectedSpan);assert.instanceOf(subject.hours, OrderedMap);assert.instanceOf(subject.overlaps, Calendar.Utils.Overlap);});<a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a>('#_loadRecords', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var requestCalledWith;var addCalledWith;var <a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>=[];var busytimes=[];var <a class="el" href="../../d6/d1b/pprthred_8h.html#a0798cf327c99b856b5ecf03e5f4deb4d">start</a>=new Date();<a class="el" href="../../da/db6/ime__test_8js.html#a499aeb7e1826da3a383e443025bfc846">setup</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">list.length</a>=0;<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">busytimes.length</a>=0;var <a class="el" href="../../d6/d1b/pprthred_8h.html#a0798cf327c99b856b5ecf03e5f4deb4d">start</a>=new Date();var <a class="el" href="../../d8/d64/ns_u_r_l_helper_8h.html#abe43fe84431eb0cabf3c21ccc94bd756">end</a>=new Date();start.setMinutes(start.getMinutes()-10);end.setHours(end.getHours()+10);var <a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>=0;var <a class="el" href="../../d9/dc5/mock__handled__call_8js.html#a003d47644bddbfa64a6983bd1cda3ce7">busy</a>;<a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a089b2988a149c0d135aaab57e2231481">for</a>(;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>&lt; 2;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>++){<a class="el" href="../../d9/dc5/mock__handled__call_8js.html#a003d47644bddbfa64a6983bd1cda3ce7">busy</a>=<a class="el" href="../../d4/d6d/factory_8js.html#a95acddcf8d59f67c9a249c3266057e91">Factory</a>('busytime',{startDate:start, endDate:end});<a class="el" href="../../d5/da4/preferences_8js.html#a04cdfd02512383b1feea0e6fa7f5d3a3">busytimes.push</a>(<a class="el" href="../../d9/dc5/mock__handled__call_8js.html#a003d47644bddbfa64a6983bd1cda3ce7">busy</a>);<a class="el" href="../../d5/da4/preferences_8js.html#a04cdfd02512383b1feea0e6fa7f5d3a3">list.push</a>({event:Factory('<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>'), busytime:busy});}requestCalledWith=[];addCalledWith=[];<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">subject.add</a>=<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../d5/da4/preferences_8js.html#a04cdfd02512383b1feea0e6fa7f5d3a3">addCalledWith.push</a>(arguments);};controller.findAssociated=<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../d5/da4/preferences_8js.html#a04cdfd02512383b1feea0e6fa7f5d3a3">requestCalledWith.push</a>(arguments);};});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('when given an <a class="el" href="../../d9/d13/shared_2style_2_r_e_a_d_m_e_8md.html#a3324c12c8fd4a56057ace952fd0d4bc5">object</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){subject._loadRecords(<a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>[0].busytime);requestCalledWith[0][1](<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>,[<a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>[0]]);assert.deepEqual(addCalledWith[0],[<a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>[0].busytime, <a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>[0].<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>]);});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('when token changes midway', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){subject._loadRecords([<a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>[0].busytime]);subject._changeToken++;subject._loadRecords(busytimes);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">requestCalledWith.length</a>, 2);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">addCalledWith.length</a>, 0);requestCalledWith[0][1](<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>, <a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">addCalledWith.length</a>, 0);requestCalledWith[1][1](<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>, <a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>);assert.deepEqual(addCalledWith[0],[<a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>[0].busytime, <a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>[0].<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>]);});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('when <a class="el" href="../../d9/dd6/_r_e_a_d_m_e_8md.html#ac1934db4e0289fcc2a08b0c7de017cf2">change</a> token is <a class="el" href="../../d2/d7d/jsapi_8h.html#abfba8fa3513c8942905cf6144b77a52d">same</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){subject._loadRecords(busytimes);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">requestCalledWith.length</a>);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(!<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">addCalledWith.length</a>);requestCalledWith[0][1](<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>, <a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>);assert.deepEqual(addCalledWith[0],[<a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>[0].busytime, <a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>[0].<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>]);assert.deepEqual(addCalledWith[1],[<a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>[1].busytime, <a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>[1].<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>]);});});<a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a>('#changeDate', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../d3/d91/j3d_8js.html#a604297ad8460b8482beeb0c441cf491a">startTime</a>=new Date(2012, 1, 1);var calledLoadWith;<a class="el" href="../../da/db6/ime__test_8js.html#a499aeb7e1826da3a383e443025bfc846">setup</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){calledLoadWith=<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>;subject._loadRecords=<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){calledLoadWith=arguments;};<a class="el" href="../../d1/d04/app__install__manager_8js.html#acd145aedb51101ac15a526f73673b0b9">subject.events.innerHTML</a>= 'foobar';});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('from <a class="el" href="../../d3/d44/updatable_8js.html#ae40bb54f47dbbe6c42fdb6d8c0f1da50">clean</a> <a class="el" href="../../d2/df8/prthread_8h.html#a22ec211475b54a8de0468990ea9654da">state</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(subject._changeToken, 0);var day=Calendar.Calc.createDay(<a class="el" href="../../d3/d91/j3d_8js.html#a604297ad8460b8482beeb0c441cf491a">startTime</a>);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(!<a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">subject.element.dataset.date</a>, 'does not have <a class="el" href="../../d5/de7/jquery_8js.html#aa4d4888597588a84fd5b1184d00c91f3">a</a> <a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">date</a>');subject.changeDate(<a class="el" href="../../d3/d91/j3d_8js.html#a604297ad8460b8482beeb0c441cf491a">startTime</a>, <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(<a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">subject.element.dataset.date</a>, <a class="el" href="../../dd/d78/shared_2js_2template_8js.html#a47ec4a4c23bf94a45f76da63b59df7af">startTime.toString</a>(), 'sets <a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">dataset.date</a>');<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(subject._changeToken, 1);assert.deepEqual(<a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">subject.date</a>, day);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(<a class="el" href="../../d1/d04/app__install__manager_8js.html#acd145aedb51101ac15a526f73673b0b9">subject.events.innerHTML</a>, '');assert.deepEqual(<a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">subject.date</a>, day);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(!calledLoadWith, 'loads records');assert.deepEqual(subject.timespan, Calendar.Calc.spanOfDay(day));var eventIdx=controller.findTimeObserver(subject.timespan, <a class="el" href="../../d6/da8/facebook__connector__test_8js.html#ab17dfde70922e77b2bbcbd0192a12531">subject</a>);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(eventIdx!==-1, 'should have busytime observer');});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('from second <a class="el" href="../../d9/dd6/_r_e_a_d_m_e_8md.html#ac1934db4e0289fcc2a08b0c7de017cf2">change</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){subject.changeDate(new Date(), <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>);var oldRange=subject.timespan;subject.changeDate(<a class="el" href="../../d3/d91/j3d_8js.html#a604297ad8460b8482beeb0c441cf491a">startTime</a>);var eventIdx=controller.findTimeObserver(oldRange, <a class="el" href="../../d6/da8/facebook__connector__test_8js.html#ab17dfde70922e77b2bbcbd0192a12531">subject</a>);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(eventIdx===-1, 'should <a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">remove</a> old observers');});});<a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a>('#_assignPosition', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d6/da5/certt_8h.html#a5e84b1bdd0770310d2a7fd739ab6dbee">time</a>(<a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>=0, minutes=0){<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> new Date(2012, 0, 1, <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>, minutes);}<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> record(<a class="el" href="../../d6/d1b/pprthred_8h.html#a0798cf327c99b856b5ecf03e5f4deb4d">start</a>, <a class="el" href="../../d8/d64/ns_u_r_l_helper_8h.html#abe43fe84431eb0cabf3c21ccc94bd756">end</a>){<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> <a class="el" href="../../d4/d6d/factory_8js.html#a95acddcf8d59f67c9a249c3266057e91">Factory</a>('busytime',{startDate:start, endDate:end});};var el;<a class="el" href="../../da/db6/ime__test_8js.html#a499aeb7e1826da3a383e443025bfc846">setup</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){el=document.createElement('div');<a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">subject.date</a>=new Date(2012, 0, 1);});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('30 minutes', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../d9/dc5/mock__handled__call_8js.html#a003d47644bddbfa64a6983bd1cda3ce7">busy</a>=record(<a class="el" href="../../d6/da5/certt_8h.html#a5e84b1bdd0770310d2a7fd739ab6dbee">time</a>(0, 50), <a class="el" href="../../d6/da5/certt_8h.html#a5e84b1bdd0770310d2a7fd739ab6dbee">time</a>(1, 20));subject._assignPosition(<a class="el" href="../../d9/dc5/mock__handled__call_8js.html#a003d47644bddbfa64a6983bd1cda3ce7">busy</a>, el);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">el.style.top</a>, '83.3333%', '<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">top</a>');<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a99ef05b40c29af68ac3026a597233269">el.style.height</a>, '50%', '<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a99ef05b40c29af68ac3026a597233269">height</a>');<a class="el" href="../../d2/d7d/jsapi_8h.html#a99e36b20cb6cf83fe7c1f4bff6902ab6">assert.match</a>(el.className,/\bpartial-<a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>\<a class="el" href="../../da/ded/jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a>/, 'partial-<a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a> found');});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">top</a> of <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a> 1.5 hours', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../d9/dc5/mock__handled__call_8js.html#a003d47644bddbfa64a6983bd1cda3ce7">busy</a>=record(<a class="el" href="../../d6/da5/certt_8h.html#a5e84b1bdd0770310d2a7fd739ab6dbee">time</a>(), <a class="el" href="../../d6/da5/certt_8h.html#a5e84b1bdd0770310d2a7fd739ab6dbee">time</a>(1, 30));subject._assignPosition(<a class="el" href="../../d9/dc5/mock__handled__call_8js.html#a003d47644bddbfa64a6983bd1cda3ce7">busy</a>, el);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(!<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">el.style.top</a>, 'no <a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">top</a>');<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a99ef05b40c29af68ac3026a597233269">el.style.height</a>, '150%', '<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a99ef05b40c29af68ac3026a597233269">height</a>');});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('25%minutes into <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a> <a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a089b2988a149c0d135aaab57e2231481">for</a> 3.25 hours', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../d9/dc5/mock__handled__call_8js.html#a003d47644bddbfa64a6983bd1cda3ce7">busy</a>=record(<a class="el" href="../../d6/da5/certt_8h.html#a5e84b1bdd0770310d2a7fd739ab6dbee">time</a>(0, 15), <a class="el" href="../../d6/da5/certt_8h.html#a5e84b1bdd0770310d2a7fd739ab6dbee">time</a>(3, 30));subject._assignPosition(<a class="el" href="../../d9/dc5/mock__handled__call_8js.html#a003d47644bddbfa64a6983bd1cda3ce7">busy</a>, el);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">el.style.top</a>, '25%', '<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">top</a>');<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a99ef05b40c29af68ac3026a597233269">el.style.height</a>, '325%', '<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a99ef05b40c29af68ac3026a597233269">height</a>');});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('<a class="el" href="../../d3/d91/j3d_8js.html#af2b5ba58acadff9be38256f8f79535aa">cross</a> the next day', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var endDate=new Date(2012, 0, 2, 11, 00);var <a class="el" href="../../d9/dc5/mock__handled__call_8js.html#a003d47644bddbfa64a6983bd1cda3ce7">busy</a>=record(<a class="el" href="../../d6/da5/certt_8h.html#a5e84b1bdd0770310d2a7fd739ab6dbee">time</a>(23, 00), endDate);subject._assignPosition(<a class="el" href="../../d9/dc5/mock__handled__call_8js.html#a003d47644bddbfa64a6983bd1cda3ce7">busy</a>, el);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(!<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">el.style.top</a>, 'no <a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">top</a>');<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a99ef05b40c29af68ac3026a597233269">el.style.height</a>, '100%', '<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a99ef05b40c29af68ac3026a597233269">height</a>');});});<a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a>('#_createRecord', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var intialHour=5;var busytime;var <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>;<a class="el" href="../../da/db6/ime__test_8js.html#a499aeb7e1826da3a383e443025bfc846">setup</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../d6/d1b/pprthred_8h.html#a0798cf327c99b856b5ecf03e5f4deb4d">start</a>=new Date(2012, 0, 1, intialHour);var <a class="el" href="../../d8/d64/ns_u_r_l_helper_8h.html#abe43fe84431eb0cabf3c21ccc94bd756">end</a>=new Date(2012, 0, 1, intialHour+1);busytime=<a class="el" href="../../d4/d6d/factory_8js.html#a95acddcf8d59f67c9a249c3266057e91">Factory</a>('busytime',{startDate:start, endDate:end});<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>=<a class="el" href="../../d4/d6d/factory_8js.html#a95acddcf8d59f67c9a249c3266057e91">Factory</a>('<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>');subject._createRecord(intialHour, busytime, <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>);});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#aab9764d7f9e519400127ef5189844ed3">first</a> <a class="el" href="../../d1/d03/locales_2_r_e_a_d_m_e_8md.html#a62bde082af4374a2a9c3399269c7548c">instance</a> <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a>=busytime._id;var <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>=<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#a18697261a961b9d0efde405b5a2b244f">subject.hours.get</a>(busytime._id);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(<a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>, 'has <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a> record');var idx=<a class="el" href="../../d4/d23/binary__string__view_8js.html#a78826d1185ecdcfc63deffaedf15c7bd">hour.flags.indexOf</a>(subject.calendarId(busytime));<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(idx!==-1, 'has calendar <a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a> flag <a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#ac00bf23adf7cb4c5253268889722ca05">on</a> <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>');var elements=hour.element.querySelectorAll( '[<a class="el" href="../../d9/d04/expat_8h.html#aa11c5d56dba0976f16f07ea50b1999ba">data</a>-<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a>=&quot;' + busytime._id + '&quot;]');assert.length(elements, 1);var record=<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#a18697261a961b9d0efde405b5a2b244f">hour.records.get</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a>);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ac3f85391e7b9d85d3879b84b90623375">assert.isTrue</a>(record);var overlapEl=subject.overlaps.getElement(<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a>);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(overlapEl, elements[0], 'has element in overlaps');});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('subsequent _createRecord calls after initial', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../db/d13/ns_i_d_o_m_device_proximity_event_8idl.html#a0b0ede69e8156eb97acc579b88e883de">max</a>=24-intialHour;var curHour=intialHour+1;var selector= '[<a class="el" href="../../d9/d04/expat_8h.html#aa11c5d56dba0976f16f07ea50b1999ba">data</a>-<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a>=&quot;' + busytime._id + '&quot;]';var initialElement=<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9bd72b771a78ff04c5bb1d670f034005">subject.element.querySelector</a>(selector);var calendarId=subject.calendarId(busytime);<a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a089b2988a149c0d135aaab57e2231481">for</a>(;curHour&lt; <a class="el" href="../../db/d13/ns_i_d_o_m_device_proximity_event_8idl.html#a0b0ede69e8156eb97acc579b88e883de">max</a>;curHour++){subject._createRecord(curHour, busytime, <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>);var <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>=<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#a18697261a961b9d0efde405b5a2b244f">subject.hours.get</a>(curHour);var eventEl=<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9bd72b771a78ff04c5bb1d670f034005">hour.element.querySelector</a>(selector);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(!eventEl, 'did not <a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">add</a> additonal <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>');assert.include(<a class="el" href="../../de/d81/xpt__struct_8h.html#aa2585d779da0ab21273a8d92de9a0ebe">hour.flags</a>, calendarId);}});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('second <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a> in <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>=<a class="el" href="../../d4/d6d/factory_8js.html#a95acddcf8d59f67c9a249c3266057e91">Factory</a>('<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>');busytime=<a class="el" href="../../d4/d6d/factory_8js.html#a95acddcf8d59f67c9a249c3266057e91">Factory</a>('busytime');subject._createRecord(intialHour, busytime, <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>);var <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>=<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#a18697261a961b9d0efde405b5a2b244f">subject.hours.get</a>(intialHour);var eventEl=<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9bd72b771a78ff04c5bb1d670f034005">hour.element.querySelector</a>( '[<a class="el" href="../../d9/d04/expat_8h.html#aa11c5d56dba0976f16f07ea50b1999ba">data</a>-<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a>=&quot;' + busytime._id + '&quot;]');assert.ok(eventEl);assert.include(<a class="el" href="../../de/d81/xpt__struct_8h.html#aa2585d779da0ab21273a8d92de9a0ebe">hour.flags</a>, subject.calendarId(busytime));});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('all day events', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../de/d81/xpt__struct_8h.html#ac827fa5fbcdd05dd9ed05984a80679b8">type</a>=Calendar.Calc.ALLDAY;<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>=<a class="el" href="../../d4/d6d/factory_8js.html#a95acddcf8d59f67c9a249c3266057e91">Factory</a>('<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>');busytime=<a class="el" href="../../d4/d6d/factory_8js.html#a95acddcf8d59f67c9a249c3266057e91">Factory</a>('busytime');subject._createRecord(<a class="el" href="../../de/d81/xpt__struct_8h.html#ac827fa5fbcdd05dd9ed05984a80679b8">type</a>, busytime, <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>);var <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>=<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#a18697261a961b9d0efde405b5a2b244f">subject.hours.get</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#ac827fa5fbcdd05dd9ed05984a80679b8">type</a>);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(<a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>, 'has <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>');<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#aa2585d779da0ab21273a8d92de9a0ebe">hour.flags</a>, 'has <a class="el" href="../../da/d32/prio_8h.html#aa2585d779da0ab21273a8d92de9a0ebe">flags</a>');assert.include(<a class="el" href="../../de/d81/xpt__struct_8h.html#aa2585d779da0ab21273a8d92de9a0ebe">hour.flags</a>, subject.calendarId(busytime), 'includes calendar <a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a>');var el=<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9bd72b771a78ff04c5bb1d670f034005">hour.element.querySelector</a>( '[<a class="el" href="../../d9/d04/expat_8h.html#aa11c5d56dba0976f16f07ea50b1999ba">data</a>-<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a>=&quot;' + busytime._id + '&quot;]');assert.ok(el, 'has element');var records=hour.records;var record=<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#a18697261a961b9d0efde405b5a2b244f">records.get</a>(busytime._id);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(record.element, el, 'allday records have element');<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(!subject.overlaps.getElement(busytime), 'in overlap');});});<a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a>('#<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">remove</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">add</a>(<a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>, calendarId='one'){var busytime=<a class="el" href="../../d4/d6d/factory_8js.html#a95acddcf8d59f67c9a249c3266057e91">Factory</a>('busytime');var <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>=<a class="el" href="../../d4/d6d/factory_8js.html#a95acddcf8d59f67c9a249c3266057e91">Factory</a>('<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>');busytime.calendarId=calendarId;event.calendarId=calendarId;subject._createRecord(<a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>, busytime, <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>);var el=<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9bd72b771a78ff04c5bb1d670f034005">subject.element.querySelector</a>( '[<a class="el" href="../../d9/d04/expat_8h.html#aa11c5d56dba0976f16f07ea50b1999ba">data</a>-<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a>=&quot;' + busytime._id + '&quot;]');return{busytime:busytime, event:event, element:el};}<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('<a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a> removal when renderAllHours===<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../d5/de7/jquery_8js.html#aa4d4888597588a84fd5b1184d00c91f3">a</a>=<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">add</a>(5);var <a class="el" href="../../da/ded/jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a>=<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">add</a>(5);var <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>=<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#a18697261a961b9d0efde405b5a2b244f">subject.hours.get</a>(5);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(hour.element.parentNode, 'has <a class="el" href="../../de/dc5/jsfriendapi_8h.html#a8226dcbc056f6642245deb66fe994db7">parent</a>');subject.renderAllHours=<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>;<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">subject.remove</a>(a.busytime);<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">subject.remove</a>(b.busytime);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(hour.element.parentNode, 'does not <a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">remove</a> <a class="el" href="../../de/dc5/jsfriendapi_8h.html#a8226dcbc056f6642245deb66fe994db7">parent</a>');});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('<a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a> removal when renderAllHours===<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../d5/de7/jquery_8js.html#aa4d4888597588a84fd5b1184d00c91f3">a</a>=<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">add</a>(5);var <a class="el" href="../../da/ded/jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a>=<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">add</a>(5);var <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>=<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#a18697261a961b9d0efde405b5a2b244f">subject.hours.get</a>(5);subject.renderAllHours=<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>;<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">subject.remove</a>(a.busytime);<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">subject.remove</a>(b.busytime);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(!hour.element.parentNode, '<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">remove</a> <a class="el" href="../../de/dc5/jsfriendapi_8h.html#a8226dcbc056f6642245deb66fe994db7">parent</a>');});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">remove</a>&quot;allday&quot;records', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../d5/de7/jquery_8js.html#aa4d4888597588a84fd5b1184d00c91f3">a</a>=<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">add</a>('allday');var <a class="el" href="../../da/ded/jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a>=<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">add</a>('allday');<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">subject.remove</a>(a.busytime);<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">subject.remove</a>(b.busytime);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(!a.element.parentNode, 'removed <a class="el" href="../../d5/de7/jquery_8js.html#aa4d4888597588a84fd5b1184d00c91f3">a</a>');<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(!b.element.parentNode, 'removed <a class="el" href="../../da/ded/jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a>');});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">remove</a> hourly records', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../d5/de7/jquery_8js.html#aa4d4888597588a84fd5b1184d00c91f3">a</a>=<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">add</a>(1, 'one');var <a class="el" href="../../da/ded/jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a>=<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">add</a>(1, 'two');var <a class="el" href="../../d2/d7d/jsapi_8h.html#a348d5281ca0f01adebb262bee8baf788">c</a>=<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">add</a>(1, 'two');var <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>=<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#a18697261a961b9d0efde405b5a2b244f">subject.hours.get</a>(1);var hourElement=hour.element;var classList=hourElement.classList;var calendarId=subject.calendarId(b.busytime);var records=hour.records;<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ac3f85391e7b9d85d3879b84b90623375">assert.isTrue</a>(classList.contains(calendarId), 'starts with <a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a>');<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">subject.remove</a>(c.busytime);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ac3f85391e7b9d85d3879b84b90623375">assert.isTrue</a>(classList.contains(calendarId), 'does not initially <a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">remove</a>');<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">subject.remove</a>(b.busytime);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(!classList.contains(calendarId), 'finally removes');<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#a8e4d922ae3532f8bdfcadccef0881707">assert.isFalse</a>(records.has(b.busytime._id), '<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">remove</a> <a class="el" href="../../da/ded/jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a>');<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#a8e4d922ae3532f8bdfcadccef0881707">assert.isFalse</a>(records.has(c.busytime._id), '<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">remove</a> <a class="el" href="../../d2/d7d/jsapi_8h.html#a348d5281ca0f01adebb262bee8baf788">c</a>');<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(!subject.overlaps.getElement(b.busytime), '<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">remove</a> overlap <a class="el" href="../../da/ded/jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a>');<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(!subject.overlaps.getElement(c.busytime), '<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">remove</a> overlap <a class="el" href="../../d2/d7d/jsapi_8h.html#a348d5281ca0f01adebb262bee8baf788">c</a>');});});<a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a>('#createHour', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var group;var children;<a class="el" href="../../da/db6/ime__test_8js.html#a499aeb7e1826da3a383e443025bfc846">setup</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){subject.createHour(5);subject.createHour(7);subject.createHour(6);children=subject.events.children;});<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> hourHTML(<a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>){<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> <a class="el" href="../../d3/d91/j3d_8js.html#ae7817194480cfc900873938c8e7dd602">subject.template.hour.render</a>({displayHour:Calendar.Calc.formatHour(<a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>), hour:hour});}<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> hasHour(number){var <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>=<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#a18697261a961b9d0efde405b5a2b244f">subject.hours.get</a>(number);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(<a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>, 'should record hour: '+number);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(hour.element, 'should record hours element: '+number);<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>;}<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('#removeHour', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>=hasHour(5);subject.removeHour(5);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(!hour.element.parentNode);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(!subject.hours.has(5));<a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>;});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('allday', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){subject.createHour('allday');var <a class="el" href="../../de/dc5/jsfriendapi_8h.html#a8226dcbc056f6642245deb66fe994db7">parent</a>=subject.allDayElement;<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">assert.length</a>(parent.children, 1);});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#aab9764d7f9e519400127ef5189844ed3">first</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){hasHour(5);var el=children[0];<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(el.outerHTML);assert.include(el.outerHTML, hourHTML(5));});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('middle', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){hasHour(6);var el=children[1];<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(el.outerHTML);assert.include(el.outerHTML, hourHTML(6));});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('last', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){hasHour(7);var el=children[2];<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(el.outerHTML);assert.include(el.outerHTML, hourHTML(7));});});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('#createHour', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){subject._buildElement();subject.createHour(1);var record=<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#a18697261a961b9d0efde405b5a2b244f">subject.hours.get</a>(1);assert.instanceOf(record.records, OrderedMap);});<a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a>('#<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">add</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var calledWith;var <a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">length</a>;var hours=[];<a class="el" href="../../da/db6/ime__test_8js.html#a499aeb7e1826da3a383e443025bfc846">setup</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">hours.length</a>=0;<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">length</a>=undefined;subject._createRecord=<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){calledWith=<a class="el" href="../../d4/d23/binary__string__view_8js.html#a611282d0b962f2d73c40c656cbe37aa5">Array.slice</a>(arguments);<a class="el" href="../../d5/da4/preferences_8js.html#a04cdfd02512383b1feea0e6fa7f5d3a3">hours.push</a>(calledWith.shift());};});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">add</a> multi <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a> <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>=<a class="el" href="../../d4/d6d/factory_8js.html#a95acddcf8d59f67c9a249c3266057e91">Factory</a>('<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>');var busytime=<a class="el" href="../../d4/d6d/factory_8js.html#a95acddcf8d59f67c9a249c3266057e91">Factory</a>('busytime',{startDate:new Date(2012, 1, 5, 5), endDate:new Date(2012, 1, 5, 10, 10)});<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">subject.add</a>(busytime, <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>);assert.deepEqual(calledWith,[busytime, <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>]);assert.deepEqual(hours,[5, 6, 7, 8, 9, 10]);});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">add</a> all day <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>=<a class="el" href="../../d4/d6d/factory_8js.html#a95acddcf8d59f67c9a249c3266057e91">Factory</a>('<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>');var busytime=<a class="el" href="../../d4/d6d/factory_8js.html#a95acddcf8d59f67c9a249c3266057e91">Factory</a>('busytime',{startDate:new Date(2012, 1, 5), endDate:new Date(2012, 1, 6)});<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">subject.add</a>(busytime, <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>);assert.deepEqual(calledWith,[busytime, <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>]);assert.deepEqual(hours,['allday']);});});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('#removeHour', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>=<a class="el" href="../../d4/d6d/factory_8js.html#a95acddcf8d59f67c9a249c3266057e91">Factory</a>('<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>');var busytime=<a class="el" href="../../d1/dce/utils_81_83_8js.html#ab92647390e7481607cad94f9c4cf38f0">Factory.create</a>('busytime',{startDate:date});<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">subject.add</a>(busytime, <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>);var <a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>=[];<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#aae3803cf3819ae1182550b783e1ea692">subject.hours.items.forEach</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(item){<a class="el" href="../../d5/da4/preferences_8js.html#a04cdfd02512383b1feea0e6fa7f5d3a3">list.push</a>(item[1].element);});var displayedHours=Calendar.Calc.hoursOfOccurance(<a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">subject.date</a>, busytime.startDate, busytime.endDate);<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#aae3803cf3819ae1182550b783e1ea692">displayedHours.forEach</a>(subject.removeHour, <a class="el" href="../../d6/da8/facebook__connector__test_8js.html#ab17dfde70922e77b2bbcbd0192a12531">subject</a>);<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">assert.length</a>(subject.hours, 0);<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#aae3803cf3819ae1182550b783e1ea692">list.forEach</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(el){<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(!el.parentNode, 'removed element');});});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('#<a class="el" href="../../d1/dce/utils_81_83_8js.html#ab92647390e7481607cad94f9c4cf38f0">create</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">date</a>=new Date(2012, 1, 1);var calledWith;var <a class="el" href="../../d6/da8/facebook__connector__test_8js.html#ab17dfde70922e77b2bbcbd0192a12531">subject</a>=new Calendar.Views.DayBased({app:app, date:date});subject._loadRecords=<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){};subject.changeDate=<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){calledWith=arguments;Calendar.Views.DayBased.prototype.changeDate.apply(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>, arguments);};var el=<a class="el" href="../../d1/dce/utils_81_83_8js.html#ab92647390e7481607cad94f9c4cf38f0">subject.create</a>();<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">subject.id</a>, date.valueOf(), '<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a>');<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(el);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(el.tagName.toLowerCase(), '<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a1df8504e63545f2e6c93c0cde966c060">section</a>');<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(calledWith[0], <a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">date</a>);var <a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>=0;var html=<a class="el" href="../../d1/d04/app__install__manager_8js.html#acd145aedb51101ac15a526f73673b0b9">el.innerHTML</a>;<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(html, 'has html');<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(<a class="el" href="../../d1/d04/app__install__manager_8js.html#acd145aedb51101ac15a526f73673b0b9">subject.allDayElement.innerHTML</a>, 'has all day element');assert.include(<a class="el" href="../../d1/d04/app__install__manager_8js.html#acd145aedb51101ac15a526f73673b0b9">subject.allDayElement.innerHTML</a>, Calendar.Calc.formatHour('allday'), 'should have all day');<a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a089b2988a149c0d135aaab57e2231481">for</a>(;<a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>&lt; 24;<a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>++){assert.include(html, Calendar.Calc.formatHour(<a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>), 'should have rendered:'+<a class="el" href="../../d2/d7d/jsapi_8h.html#a28f5c88a840cdeadd86a2d1642d74fa1">hour</a>);}});<a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a>('#_onHourClick', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var startDate, endDate;<a class="el" href="../../da/db6/ime__test_8js.html#a499aeb7e1826da3a383e443025bfc846">setup</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../d6/da5/certt_8h.html#a5e84b1bdd0770310d2a7fd739ab6dbee">time</a>=subject.date.getTime();this.sinon.stub(<a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">subject.date</a>, 'getTime').returns(<a class="el" href="../../d6/da5/certt_8h.html#a5e84b1bdd0770310d2a7fd739ab6dbee">time</a>);startDate=new Date(<a class="el" href="../../d6/da5/certt_8h.html#a5e84b1bdd0770310d2a7fd739ab6dbee">time</a>);startDate.setHours(0);startDate.setMinutes(0);startDate.setSeconds(0);endDate=new Date(<a class="el" href="../../d6/da5/certt_8h.html#a5e84b1bdd0770310d2a7fd739ab6dbee">time</a>);endDate.setHours(0);endDate.setMinutes(0);endDate.setSeconds(0);});teardown(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#a19c66abfee1b46609f11c5320d6b0843">subject.date.getTime.restore</a>();});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('should not redirect <a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a> we clicked <a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#ac00bf23adf7cb4c5253268889722ca05">on</a> an <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var clickedOnEvent=this.sinon.stub(<a class="el" href="../../d6/da8/facebook__connector__test_8js.html#ab17dfde70922e77b2bbcbd0192a12531">subject</a>, '_clickedOnEvent');clickedOnEvent.returns(<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>);var expectation=this.sinon.mock(<a class="el" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">subject.app</a>).expects('<a class="el" href="../../d7/d8a/list_8js.html#a25e7026ed54a4f203c2c06c4aef7011a">go</a>');expectation.never();subject._onHourClick({});expectation.verify();<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#a19c66abfee1b46609f11c5320d6b0843">clickedOnEvent.restore</a>();});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('should redirect and <a class="el" href="../../d8/d64/ns_u_r_l_helper_8h.html#a7d50e9587913d4f6634c0b0c8de693c7">set</a> urlparams <a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a> all day', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var clickedOnEvent=this.sinon.stub(<a class="el" href="../../d6/da8/facebook__connector__test_8js.html#ab17dfde70922e77b2bbcbd0192a12531">subject</a>, '_clickedOnEvent');clickedOnEvent.returns(<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);endDate.setDate(startDate.getDate()+1);var expectation=this.sinon.mock(<a class="el" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">subject.app</a>).expects('<a class="el" href="../../d7/d8a/list_8js.html#a25e7026ed54a4f203c2c06c4aef7011a">go</a>').withArgs('/<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>/<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">add</a>/?'+<a class="el" href="../../d1/d22/ical_8js.html#a8076921037776baf4e4838660048f802">Calendar.QueryString.stringify</a>({isAllDay:true, <a class="el" href="../../dd/d78/shared_2js_2template_8js.html#a47ec4a4c23bf94a45f76da63b59df7af">startDate:startDate.toString</a>(), <a class="el" href="../../dd/d78/shared_2js_2template_8js.html#a47ec4a4c23bf94a45f76da63b59df7af">endDate:endDate.toString</a>()}));<a class="el" href="../../de/dfc/events_8js.html#a801b0668ecf79a79c81f75dbbabb4ebf">expectation.once</a>();subject._onHourClick({},{getAttribute:function(<a class="el" href="../../d2/d7d/jsapi_8h.html#a02d8cbd1392e102198d5bb521715f608">key</a>){<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> Calendar.Calc.ALLDAY;}});expectation.verify();<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#a19c66abfee1b46609f11c5320d6b0843">clickedOnEvent.restore</a>();});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('should redirect and <a class="el" href="../../d8/d64/ns_u_r_l_helper_8h.html#a7d50e9587913d4f6634c0b0c8de693c7">set</a> urlparams <a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a> not all day', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var clickedOnEvent=this.sinon.stub(<a class="el" href="../../d6/da8/facebook__connector__test_8js.html#ab17dfde70922e77b2bbcbd0192a12531">subject</a>, '_clickedOnEvent');clickedOnEvent.returns(<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);startDate.setHours(5);endDate.setHours(6);var expectation=this.sinon.mock(<a class="el" href="../../d1/d04/app__install__manager_8js.html#a7b225fcb720e4d5ed2bbf60e28a25e6d">subject.app</a>).expects('<a class="el" href="../../d7/d8a/list_8js.html#a25e7026ed54a4f203c2c06c4aef7011a">go</a>').withArgs('/<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>/<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">add</a>/?'+<a class="el" href="../../d1/d22/ical_8js.html#a8076921037776baf4e4838660048f802">Calendar.QueryString.stringify</a>({<a class="el" href="../../dd/d78/shared_2js_2template_8js.html#a47ec4a4c23bf94a45f76da63b59df7af">startDate:startDate.toString</a>(), <a class="el" href="../../dd/d78/shared_2js_2template_8js.html#a47ec4a4c23bf94a45f76da63b59df7af">endDate:endDate.toString</a>()}));<a class="el" href="../../de/dfc/events_8js.html#a801b0668ecf79a79c81f75dbbabb4ebf">expectation.once</a>();subject._onHourClick({},{getAttribute:function(<a class="el" href="../../d2/d7d/jsapi_8h.html#a02d8cbd1392e102198d5bb521715f608">key</a>){<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> '5';}});expectation.verify();<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#a19c66abfee1b46609f11c5320d6b0843">clickedOnEvent.restore</a>();});});<a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a>('activate/deactivate', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var classList;<a class="el" href="../../da/db6/ime__test_8js.html#a499aeb7e1826da3a383e443025bfc846">setup</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">subject.date</a>=new Date();classList=subject.element.classList;subject.activate();});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('#activate', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ac3f85391e7b9d85d3879b84b90623375">assert.isTrue</a>(classList.contains(subject.activeClass));});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('#deactivate', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){subject.deactivate();<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#a8e4d922ae3532f8bdfcadccef0881707">assert.isFalse</a>(classList.contains(subject.activeClass));});});<a class="el" href="../../d8/d0f/startup__events__test_8js.html#adac6c636af235a329cc774937d75601b">suite</a>('#<a class="el" href="../../db/d0b/_image_editor_8js.html#ab508a76bce0563fb932c738c5d3ff9ed">destroy</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var <a class="el" href="../../df/db4/_h_i_s_t_o_r_y_8md.html#a766be2d162a033dbb9c6a21d3a0175d9">node</a>;<a class="el" href="../../da/db6/ime__test_8js.html#a499aeb7e1826da3a383e443025bfc846">setup</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){subject._loadRecords=<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){};<a class="el" href="../../df/db4/_h_i_s_t_o_r_y_8md.html#a766be2d162a033dbb9c6a21d3a0175d9">node</a>=<a class="el" href="../../d1/dce/utils_81_83_8js.html#ab92647390e7481607cad94f9c4cf38f0">subject.create</a>();document.body.appendChild(<a class="el" href="../../df/db4/_h_i_s_t_o_r_y_8md.html#a766be2d162a033dbb9c6a21d3a0175d9">node</a>);});teardown(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(node.parentNode){<a class="el" href="../../d1/d04/app__install__manager_8js.html#a5ebdda199bee63b9cb8dc969a17d4a9e">node.parentNode.removeChild</a>(<a class="el" href="../../df/db4/_h_i_s_t_o_r_y_8md.html#a766be2d162a033dbb9c6a21d3a0175d9">node</a>);}});<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#ae39af8ac48077b957ecb9fe16f678936">test</a>('removal of nodes and events', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(node.parentNode);var observer=controller.findTimeObserver(subject.timespan, <a class="el" href="../../d6/da8/facebook__connector__test_8js.html#ab17dfde70922e77b2bbcbd0192a12531">subject</a>);<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(observer &gt;-1, 'has observer');<a class="el" href="../../db/d0b/_image_editor_8js.html#ab508a76bce0563fb932c738c5d3ff9ed">subject.destroy</a>();<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">assert.ok</a>(!node.parentNode, 'should <a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">remove</a> <a class="el" href="../../de/dc5/jsfriendapi_8h.html#a8226dcbc056f6642245deb66fe994db7">parent</a>');observer=controller.findTimeObserver(subject.timespan, <a class="el" href="../../d6/da8/facebook__connector__test_8js.html#ab17dfde70922e77b2bbcbd0192a12531">subject</a>);<a class="el" href="../../d2/dc5/homescreen__launcher__test_8js.html#adc6ce99d08573e59428ba38ac0a50479">assert.equal</a>(observer,-1, 'removes observer');});});})</td></tr>
</table>
<hr/><h2>関数</h2>
<a class="anchor" id="a888fd26f808bff69c5c21cd82c944fe5"></a><!-- doxytag: member="day_based_test.js::requireLib" ref="a888fd26f808bff69c5c21cd82c944fe5" args="('querystring.js')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d0e/manager__test_8js.html#a160383846e1e348b6643e19d5c153d05">requireLib</a> </td>
          <td>(</td>
          <td class="paramtype">'querystring.js'&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a323139f99fe170846f838a52ce3f67ef"></a><!-- doxytag: member="day_based_test.js::suiteGroup" ref="a323139f99fe170846f838a52ce3f67ef" args="('Views.DayBased', function(){var OrderedMap;suiteSetup(function(){OrderedMap=Calendar.Utils.OrderedMap;});var subject;var app;var date=new Date(2012, 1, 5);var id=0;var hours;function eventHolder(){return{remote:{}, _id:id++};}var controller;var template;setup(function(){id=0;app=testSupport.calendar.app();controller=app.timeController;subject=new Calendar.Views.DayBased({date:date, app:app});template=subject.template;subject._renderEvent=function(busytime, event){return template.event.render({busytimeId:busytime._id, calendarId:event.calendarId, title:event.remote.title});};subject._buildElement();hours=subject.hours;});test('initialization', function(){assert.instanceOf(subject, Calendar.View);assert.equal(subject.app, app);assert.instanceOf(subject.timespan, Calendar.Timespan);var expectedSpan=Calendar.Calc.spanOfDay(date);assert.deepEqual(subject.timespan, expectedSpan);assert.instanceOf(subject.hours, OrderedMap);assert.instanceOf(subject.overlaps, Calendar.Utils.Overlap);});suite('#_loadRecords', function(){var requestCalledWith;var addCalledWith;var list=[];var busytimes=[];var start=new Date();setup(function(){list.length=0;busytimes.length=0;var start=new Date();var end=new Date();start.setMinutes(start.getMinutes()&#45;10);end.setHours(end.getHours()+10);var i=0;var busy;for(;i&lt; 2;i++){busy=Factory('busytime',{startDate:start, endDate:end});busytimes.push(busy);list.push({event:Factory('event'), busytime:busy});}requestCalledWith=[];addCalledWith=[];subject.add=function(){addCalledWith.push(arguments);};controller.findAssociated=function(){requestCalledWith.push(arguments);};});test('when given an object', function(){subject._loadRecords(list[0].busytime);requestCalledWith[0][1](null,[list[0]]);assert.deepEqual(addCalledWith[0],[list[0].busytime, list[0].event]);});test('when token changes midway', function(){subject._loadRecords([list[0].busytime]);subject._changeToken++;subject._loadRecords(busytimes);assert.equal(requestCalledWith.length, 2);assert.equal(addCalledWith.length, 0);requestCalledWith[0][1](null, list);assert.equal(addCalledWith.length, 0);requestCalledWith[1][1](null, list);assert.deepEqual(addCalledWith[0],[list[0].busytime, list[0].event]);});test('when change token is same', function(){subject._loadRecords(busytimes);assert.ok(requestCalledWith.length);assert.ok(!addCalledWith.length);requestCalledWith[0][1](null, list);assert.deepEqual(addCalledWith[0],[list[0].busytime, list[0].event]);assert.deepEqual(addCalledWith[1],[list[1].busytime, list[1].event]);});});suite('#changeDate', function(){var startTime=new Date(2012, 1, 1);var calledLoadWith;setup(function(){calledLoadWith=false;subject._loadRecords=function(){calledLoadWith=arguments;};subject.events.innerHTML= 'foobar';});test('from clean state', function(){assert.equal(subject._changeToken, 0);var day=Calendar.Calc.createDay(startTime);assert.ok(!subject.element.dataset.date, 'does not have a date');subject.changeDate(startTime, true);assert.equal(subject.element.dataset.date, startTime.toString(), 'sets dataset.date');assert.equal(subject._changeToken, 1);assert.deepEqual(subject.date, day);assert.equal(subject.events.innerHTML, '');assert.deepEqual(subject.date, day);assert.ok(!calledLoadWith, 'loads records');assert.deepEqual(subject.timespan, Calendar.Calc.spanOfDay(day));var eventIdx=controller.findTimeObserver(subject.timespan, subject);assert.ok(eventIdx!==&#45;1, 'should have busytime observer');});test('from second change', function(){subject.changeDate(new Date(), true);var oldRange=subject.timespan;subject.changeDate(startTime);var eventIdx=controller.findTimeObserver(oldRange, subject);assert.ok(eventIdx===&#45;1, 'should remove old observers');});});suite('#_assignPosition', function(){function time(hour=0, minutes=0){return new Date(2012, 0, 1, hour, minutes);}function record(start, end){return Factory('busytime',{startDate:start, endDate:end});};var el;setup(function(){el=document.createElement('div');subject.date=new Date(2012, 0, 1);});test('30 minutes', function(){var busy=record(time(0, 50), time(1, 20));subject._assignPosition(busy, el);assert.equal(el.style.top, '83.3333%', 'top');assert.equal(el.style.height, '50%', 'height');assert.match(el.className,/\bpartial&#45;hour\b/, 'partial&#45;hour found');});test('top of hour 1.5 hours', function(){var busy=record(time(), time(1, 30));subject._assignPosition(busy, el);assert.ok(!el.style.top, 'no top');assert.equal(el.style.height, '150%', 'height');});test('25%minutes into hour for 3.25 hours', function(){var busy=record(time(0, 15), time(3, 30));subject._assignPosition(busy, el);assert.equal(el.style.top, '25%', 'top');assert.equal(el.style.height, '325%', 'height');});test('cross the next day', function(){var endDate=new Date(2012, 0, 2, 11, 00);var busy=record(time(23, 00), endDate);subject._assignPosition(busy, el);assert.ok(!el.style.top, 'no top');assert.equal(el.style.height, '100%', 'height');});});suite('#_createRecord', function(){var intialHour=5;var busytime;var event;setup(function(){var start=new Date(2012, 0, 1, intialHour);var end=new Date(2012, 0, 1, intialHour+1);busytime=Factory('busytime',{startDate:start, endDate:end});event=Factory('event');subject._createRecord(intialHour, busytime, event);});test('first instance event', function(){var id=busytime._id;var hour=subject.hours.get(busytime._id);assert.ok(hour, 'has hour record');var idx=hour.flags.indexOf(subject.calendarId(busytime));assert.ok(idx!==&#45;1, 'has calendar id flag on hour');var elements=hour.element.querySelectorAll( '[data&#45;id=&quot;' + busytime._id + '&quot;]');assert.length(elements, 1);var record=hour.records.get(id);assert.isTrue(record);var overlapEl=subject.overlaps.getElement(id);assert.equal(overlapEl, elements[0], 'has element in overlaps');});test('subsequent _createRecord calls after initial', function(){var max=24&#45;intialHour;var curHour=intialHour+1;var selector= '[data&#45;id=&quot;' + busytime._id + '&quot;]';var initialElement=subject.element.querySelector(selector);var calendarId=subject.calendarId(busytime);for(;curHour&lt; max;curHour++){subject._createRecord(curHour, busytime, event);var hour=subject.hours.get(curHour);var eventEl=hour.element.querySelector(selector);assert.ok(!eventEl, 'did not add additonal event');assert.include(hour.flags, calendarId);}});test('second event in hour', function(){event=Factory('event');busytime=Factory('busytime');subject._createRecord(intialHour, busytime, event);var hour=subject.hours.get(intialHour);var eventEl=hour.element.querySelector( '[data&#45;id=&quot;' + busytime._id + '&quot;]');assert.ok(eventEl);assert.include(hour.flags, subject.calendarId(busytime));});test('all day events', function(){var type=Calendar.Calc.ALLDAY;event=Factory('event');busytime=Factory('busytime');subject._createRecord(type, busytime, event);var hour=subject.hours.get(type);assert.ok(hour, 'has hour');assert.ok(hour.flags, 'has flags');assert.include(hour.flags, subject.calendarId(busytime), 'includes calendar id');var el=hour.element.querySelector( '[data&#45;id=&quot;' + busytime._id + '&quot;]');assert.ok(el, 'has element');var records=hour.records;var record=records.get(busytime._id);assert.equal(record.element, el, 'allday records have element');assert.ok(!subject.overlaps.getElement(busytime), 'in overlap');});});suite('#remove', function(){function add(hour, calendarId='one'){var busytime=Factory('busytime');var event=Factory('event');busytime.calendarId=calendarId;event.calendarId=calendarId;subject._createRecord(hour, busytime, event);var el=subject.element.querySelector( '[data&#45;id=&quot;' + busytime._id + '&quot;]');return{busytime:busytime, event:event, element:el};}test('hour removal when renderAllHours===true', function(){var a=add(5);var b=add(5);var hour=subject.hours.get(5);assert.ok(hour.element.parentNode, 'has parent');subject.renderAllHours=true;subject.remove(a.busytime);subject.remove(b.busytime);assert.ok(hour.element.parentNode, 'does not remove parent');});test('hour removal when renderAllHours===false', function(){var a=add(5);var b=add(5);var hour=subject.hours.get(5);subject.renderAllHours=false;subject.remove(a.busytime);subject.remove(b.busytime);assert.ok(!hour.element.parentNode, 'remove parent');});test('remove&quot;allday&quot;records', function(){var a=add('allday');var b=add('allday');subject.remove(a.busytime);subject.remove(b.busytime);assert.ok(!a.element.parentNode, 'removed a');assert.ok(!b.element.parentNode, 'removed b');});test('remove hourly records', function(){var a=add(1, 'one');var b=add(1, 'two');var c=add(1, 'two');var hour=subject.hours.get(1);var hourElement=hour.element;var classList=hourElement.classList;var calendarId=subject.calendarId(b.busytime);var records=hour.records;assert.isTrue(classList.contains(calendarId), 'starts with id');subject.remove(c.busytime);assert.isTrue(classList.contains(calendarId), 'does not initially remove');subject.remove(b.busytime);assert.ok(!classList.contains(calendarId), 'finally removes');assert.isFalse(records.has(b.busytime._id), 'remove b');assert.isFalse(records.has(c.busytime._id), 'remove c');assert.ok(!subject.overlaps.getElement(b.busytime), 'remove overlap b');assert.ok(!subject.overlaps.getElement(c.busytime), 'remove overlap c');});});suite('#createHour', function(){var group;var children;setup(function(){subject.createHour(5);subject.createHour(7);subject.createHour(6);children=subject.events.children;});function hourHTML(hour){return subject.template.hour.render({displayHour:Calendar.Calc.formatHour(hour), hour:hour});}function hasHour(number){var hour=subject.hours.get(number);assert.ok(hour, 'should record hour: '+number);assert.ok(hour.element, 'should record hours element: '+number);return hour;}test('#removeHour', function(){var hour=hasHour(5);subject.removeHour(5);assert.ok(!hour.element.parentNode);assert.ok(!subject.hours.has(5));hour=null;});test('allday', function(){subject.createHour('allday');var parent=subject.allDayElement;assert.length(parent.children, 1);});test('first', function(){hasHour(5);var el=children[0];assert.ok(el.outerHTML);assert.include(el.outerHTML, hourHTML(5));});test('middle', function(){hasHour(6);var el=children[1];assert.ok(el.outerHTML);assert.include(el.outerHTML, hourHTML(6));});test('last', function(){hasHour(7);var el=children[2];assert.ok(el.outerHTML);assert.include(el.outerHTML, hourHTML(7));});});test('#createHour', function(){subject._buildElement();subject.createHour(1);var record=subject.hours.get(1);assert.instanceOf(record.records, OrderedMap);});suite('#add', function(){var calledWith;var length;var hours=[];setup(function(){hours.length=0;length=undefined;subject._createRecord=function(){calledWith=Array.slice(arguments);hours.push(calledWith.shift());};});test('add multi hour event', function(){var event=Factory('event');var busytime=Factory('busytime',{startDate:new Date(2012, 1, 5, 5), endDate:new Date(2012, 1, 5, 10, 10)});subject.add(busytime, event);assert.deepEqual(calledWith,[busytime, event]);assert.deepEqual(hours,[5, 6, 7, 8, 9, 10]);});test('add all day event', function(){var event=Factory('event');var busytime=Factory('busytime',{startDate:new Date(2012, 1, 5), endDate:new Date(2012, 1, 6)});subject.add(busytime, event);assert.deepEqual(calledWith,[busytime, event]);assert.deepEqual(hours,['allday']);});});test('#removeHour', function(){var event=Factory('event');var busytime=Factory.create('busytime',{startDate:date});subject.add(busytime, event);var list=[];subject.hours.items.forEach(function(item){list.push(item[1].element);});var displayedHours=Calendar.Calc.hoursOfOccurance(subject.date, busytime.startDate, busytime.endDate);displayedHours.forEach(subject.removeHour, subject);assert.length(subject.hours, 0);list.forEach(function(el){assert.ok(!el.parentNode, 'removed element');});});test('#create', function(){var date=new Date(2012, 1, 1);var calledWith;var subject=new Calendar.Views.DayBased({app:app, date:date});subject._loadRecords=function(){};subject.changeDate=function(){calledWith=arguments;Calendar.Views.DayBased.prototype.changeDate.apply(this, arguments);};var el=subject.create();assert.equal(subject.id, date.valueOf(), 'id');assert.ok(el);assert.equal(el.tagName.toLowerCase(), 'section');assert.equal(calledWith[0], date);var hour=0;var html=el.innerHTML;assert.ok(html, 'has html');assert.ok(subject.allDayElement.innerHTML, 'has all day element');assert.include(subject.allDayElement.innerHTML, Calendar.Calc.formatHour('allday'), 'should have all day');for(;hour&lt; 24;hour++){assert.include(html, Calendar.Calc.formatHour(hour), 'should have rendered:'+hour);}});suite('#_onHourClick', function(){var startDate, endDate;setup(function(){var time=subject.date.getTime();this.sinon.stub(subject.date, 'getTime').returns(time);startDate=new Date(time);startDate.setHours(0);startDate.setMinutes(0);startDate.setSeconds(0);endDate=new Date(time);endDate.setHours(0);endDate.setMinutes(0);endDate.setSeconds(0);});teardown(function(){subject.date.getTime.restore();});test('should not redirect if we clicked on an event', function(){var clickedOnEvent=this.sinon.stub(subject, '_clickedOnEvent');clickedOnEvent.returns(true);var expectation=this.sinon.mock(subject.app).expects('go');expectation.never();subject._onHourClick({});expectation.verify();clickedOnEvent.restore();});test('should redirect and set urlparams if all day', function(){var clickedOnEvent=this.sinon.stub(subject, '_clickedOnEvent');clickedOnEvent.returns(false);endDate.setDate(startDate.getDate()+1);var expectation=this.sinon.mock(subject.app).expects('go').withArgs('/event/add/?'+Calendar.QueryString.stringify({isAllDay:true, startDate:startDate.toString(), endDate:endDate.toString()}));expectation.once();subject._onHourClick({},{getAttribute:function(key){return Calendar.Calc.ALLDAY;}});expectation.verify();clickedOnEvent.restore();});test('should redirect and set urlparams if not all day', function(){var clickedOnEvent=this.sinon.stub(subject, '_clickedOnEvent');clickedOnEvent.returns(false);startDate.setHours(5);endDate.setHours(6);var expectation=this.sinon.mock(subject.app).expects('go').withArgs('/event/add/?'+Calendar.QueryString.stringify({startDate:startDate.toString(), endDate:endDate.toString()}));expectation.once();subject._onHourClick({},{getAttribute:function(key){return '5';}});expectation.verify();clickedOnEvent.restore();});});suite('activate/deactivate', function(){var classList;setup(function(){subject.date=new Date();classList=subject.element.classList;subject.activate();});test('#activate', function(){assert.isTrue(classList.contains(subject.activeClass));});test('#deactivate', function(){subject.deactivate();assert.isFalse(classList.contains(subject.activeClass));});});suite('#destroy', function(){var node;setup(function(){subject._loadRecords=function(){};node=subject.create();document.body.appendChild(node);});teardown(function(){if(node.parentNode){node.parentNode.removeChild(node);}});test('removal of nodes and events', function(){assert.ok(node.parentNode);var observer=controller.findTimeObserver(subject.timespan, subject);assert.ok(observer &gt;&#45;1, 'has observer');subject.destroy();assert.ok(!node.parentNode, 'should remove parent');observer=controller.findTimeObserver(subject.timespan, subject);assert.equal(observer,&#45;1, 'removes observer');});});})" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../df/d5e/views_2week__test_8js.html#ac63109f8f0c5b5ff6964f5d42af22de9">suiteGroup</a> </td>
          <td>(</td>
          <td class="paramtype">'Views.DayBased'&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全て</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>データ構造</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>ネームスペース</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>ファイル</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>関数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>変数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>型定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>列挙型</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>列挙型の値</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>フレンド</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>マクロ定義</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../d0/d79/day__based__test_8js.html">day_based_test.js</a>      </li>

    <li class="footer">FxOS Code Readingに対してSat Oct 19 2013 00:55:52に生成されました。
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
