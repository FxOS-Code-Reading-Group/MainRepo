<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>FxOS Code Reading: gallery.js</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">FxOS Code Reading
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- 作成： Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'検索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>メインページ</span></a></li>
      <li><a href="../../pages.html"><span>関連ページ</span></a></li>
      <li><a href="../../modules.html"><span>モジュール</span></a></li>
      <li><a href="../../namespaces.html"><span>パッケージ</span></a></li>
      <li><a href="../../annotated.html"><span>データ構造</span></a></li>
      <li class="current"><a href="../../files.html"><span>ファイル</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>ファイル一覧</span></a></li>
      <li><a href="../../globals.html"><span>グローバル</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('d0/da2/gallery_8js.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">関数</a> &#124;
<a href="#var-members">変数</a>  </div>
  <div class="headertitle">
<div class="title">gallery.js</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="../../d0/da2/gallery_8js_source.html">ソースコードを見る。</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
関数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d0/d94/tools_2xpcwindow_2lib_2loader_8js.html#a1ab79c9277f7648d0dfe676bab65dde4">navigator</a> <a class="el" href="../../df/dc7/viewer_8js.html#abf8c988c23b2b2f5ec3f1149b44bd820">mozL10n</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a9acc38ebcd6b6ca58ea505515224d57e">ready</a> (<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> showBody(){document.documentElement.lang=<a class="el" href="../../da/dd0/ns_i_d_o_m_close_event_8idl.html#ad5035e9ddbe5118f0f35c4db612d13c2">navigator.mozL10n.language.code</a>;<a class="el" href="../../d7/d0c/prproces_8h.html#acfc1a53c655495af614ea7dab4aff62c">document.documentElement.dir</a>=<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#aaf8d770e458379d429b5e1733bf3d84a">navigator.mozL10n.language.direction</a>;<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">document.body.classList.remove</a>('<a class="el" href="../../da/d84/openvideo_8js.html#ac58b4771a596b2a4815b0c4f5109ef14">hidden</a>');<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!<a class="el" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a>) <a class="el" href="../../d5/d0d/pay_8js.html#af619d0ad365b66772212901ccd40466c">init</a>();})</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#af8dc73726eb0578fe44fb98cd2319445">init</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#aa3ad0f72d51416a18a4336efa0b2b3cf">initDB</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a377c40257a942d42736eccd490acfec4">getVideoFile</a> (<a class="el" href="../../de/d8f/jsdebug_8h.html#abc8430424b9e64b65bfdb1fbeeccc2d3">filename</a>, <a class="el" href="../../de/dc5/jsfriendapi_8h.html#ae9494ad8646a84b50bd3446d72433e82">callback</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#af0bf2f6ad5f7519cef00440ab733686b">compareFilesByDate</a> (<a class="el" href="../../d5/de7/jquery_8js.html#aa4d4888597588a84fd5b1184d00c91f3">a</a>, <a class="el" href="../../da/ded/jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a6d772599ba184f90212d966f0036bd7f">initThumbnails</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a39586a47f4ee455f04350f3c8248e124">fileDeleted</a> (<a class="el" href="../../de/d8f/jsdebug_8h.html#abc8430424b9e64b65bfdb1fbeeccc2d3">filename</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a1d34740c9f45587facea86c15f99a2c6">deleteFile</a> (<a class="el" href="../../d2/d7d/jsapi_8h.html#aa5a8b9a2d5edc8e2e7ba67d7e2ee4e69">n</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a99873e3fc1be38a0caf0999e2a5b6e65">fileCreated</a> (fileinfo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a28338bd953bdf52348c88293ad0c30d1">scrollToShowThumbnail</a> (<a class="el" href="../../d2/d7d/jsapi_8h.html#aa5a8b9a2d5edc8e2e7ba67d7e2ee4e69">n</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a87c564c1396bcdba1067fd5afa2a9815">setView</a> (<a class="el" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a62192667594f8e388f74b81b6fff3f14">createThumbnail</a> (imagenum)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a20faf3ee1393446ec53a3fff0f1d8a0e">thumbnailOnscreen</a> (thumbnail)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#aa4068f2bdc717b6caa7bdd1260cc6ad4">thumbnailOffscreen</a> (thumbnail)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#af1ea14645dcd3a1078e952cbde544991">startPick</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a3076caeb3485095859089546849fda05">cropPickedImage</a> (fileinfo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a7e9da90af1c46280e00745b86da7ff0f">cropAndEndPick</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
変数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d1b/test-agent-server_8js.html#aab71dcc804ca4aa3ed2bf7ba887635db">use</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#ae2475e10618961c050dcba04e8c42331">strict</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a473a610b53b4a3ebf03fb3ffc7dd43b4">TRANSITION_FRACTION</a> = 0.25</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#ad8d2e967e68a60d54c588d6823984541">TRANSITION_SPEED</a> = 0.75</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a998ff3d0b5e9250e5debd83bae7fc2dd">PAGE_SIZE</a> = 15</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a3698d255731771347d7f847313d8aa7f">thumbnailListView</a> = $('thumbnail-<a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>-<a class="el" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>')</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a98ed4b68cffd3f7a6fe97c3ab40865d5">thumbnailSelectView</a> = $('thumbnail-<a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a974637b453a6c3808b55236762181a2f">select</a>-<a class="el" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>')</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a495a99b2d5539eb2ef1cebea1d91710c">fullscreenView</a> = $('fullscreen-<a class="el" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>')</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#ada4ad1d94e1064761aeda200dbcddd02">editView</a> = $('<a class="el" href="../../d9/d13/shared_2style_2_r_e_a_d_m_e_8md.html#a1b6362cb1eaf9d23d7ff55da0225251e">edit</a>-<a class="el" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>')</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a4020be717e9ac1015b4319904afa2dd6">pickView</a> = $('<a class="el" href="../../df/dca/pickvideo_8js.html#ae4565039565fe6fb78f8bfc2479aaefe">pick</a>-<a class="el" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>')</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#ad4442b6faaf0dee1d52cfe6c9deec24d">cropView</a> = $('crop-<a class="el" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>')</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a3ec184b947133eb14151f80d3ff05797">views</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a08af05bd40494df0acb6c7ecf8fb25f7">currentView</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a82bac0ea52a4192fdf6f4ad005ef687d">languageDirection</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a> = []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a4c3a1c4e1efc6022bf003bb077daca89">currentFileIndex</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#abfe5eb1833402ced30625fd6582536d8">editedPhotoIndex</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#af0fd4e3510447825b3d4ef3034f756d9">selectedFileNames</a> = []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a687cffebc743e15f61c94b32f18a7ea5">selectedFileNamesToBlobs</a> = {}</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#ace84f873229174800558862ac30942fd">videostorage</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#ace19037638e4d77c15d6f659d94f5ce7">visibilityMonitor</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a78601e1f2fe929d6470d82a205ad2382">loader</a> = <a class="el" href="../../db/d15/shared_2js_2lazy__loader_8js.html#aaf5eec8afd0243eeb2166f74e472c877">LazyLoader</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#ab78d90ed7204a602090082e9126dd0d2">pendingPick</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a9239ddf9f374c69f3e76ad664f18170a">pickType</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#af563e56bf0e3a23b3c8c105348c40856">pickWidth</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a7f0c497bd222f05f8f5903f30df8847c">pickHeight</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a8dd2e31a3993ba9ad1d6f5731bd40bc8">pickedFile</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#a26b64dc45471a983faeb5717e6b77ec8">cropURL</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">var&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/da2/gallery_8js.html#aaddfccf9e6aee5cd9a61a1b35e0f38f5">cropEditor</a></td></tr>
</table>
<hr/><h2>関数</h2>
<a class="anchor" id="af0bf2f6ad5f7519cef00440ab733686b"></a><!-- doxytag: member="gallery.js::compareFilesByDate" ref="af0bf2f6ad5f7519cef00440ab733686b" args="(a, b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d0/da2/gallery_8js.html#af0bf2f6ad5f7519cef00440ab733686b">compareFilesByDate</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00328">328</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d5/de7/jquery_8js_source.html#l00002">a</a>, と <a class="el" href="../../da/ded/jpegint_8h_source.html#l00377">b</a>.</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00512">fileCreated()</a>.</p>
<div class="fragment"><pre class="fragment">                                  {
  <span class="keywordflow">if</span> (<a class="code" href="../../d5/de7/jquery_8js.html#aa4d4888597588a84fd5b1184d00c91f3">a</a>.date &lt; <a class="code" href="../../da/ded/jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a>.date)
    <span class="keywordflow">return</span> 1;  <span class="comment">// larger (newer) dates come first</span>
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/de7/jquery_8js.html#aa4d4888597588a84fd5b1184d00c91f3">a</a>.date &gt; <a class="code" href="../../da/ded/jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a>.date)
    <span class="keywordflow">return</span> -1;
  <span class="keywordflow">return</span> 0;
}
</pre></div>
<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_af0bf2f6ad5f7519cef00440ab733686b_icgraph.svg" width="483" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a62192667594f8e388f74b81b6fff3f14"></a><!-- doxytag: member="gallery.js::createThumbnail" ref="a62192667594f8e388f74b81b6fff3f14" args="(imagenum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../da/dab/system_2camera_2js_2filmstrip_8js.html#a246682eea904b777ca4d4707f24232f2">createThumbnail</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>imagenum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00659">659</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../dd/d64/apps_2email_2js_2ext_2mailapi_2worker-bootstrap_8js_source.html#l01348">document</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00074">files</a>, と <a class="el" href="../../d3/d4b/lockscreen_8js_source.html#l01155">url</a>.</p>
<div class="fragment"><pre class="fragment">                                   {
  var li = <a class="code" href="../../dd/d64/apps_2email_2js_2ext_2mailapi_2worker-bootstrap_8js.html#af61dbe660d8213297c7fed5b5c99d223">document</a>.createElement(<span class="stringliteral">&#39;li&#39;</span>);
  li.dataset.index = imagenum;
  li.classList.add(<span class="stringliteral">&#39;thumbnail&#39;</span>);

  var fileinfo = <a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>[imagenum];
  <span class="comment">// We revoke this url in imageDeleted</span>
  var <a class="code" href="../../d3/d4b/lockscreen_8js.html#a85c9a955e7da65bfd5fc9b87158c3570">url</a> = <a class="code" href="../../d6/dfe/class_u_r_l.html">URL</a>.createObjectURL(fileinfo.metadata.thumbnail);

  <span class="comment">// We set the url on a data attribute and let the onscreen</span>
  <span class="comment">// and offscreen callbacks below set and unset the actual</span>
  <span class="comment">// background image style. This means that we don&#39;t keep</span>
  <span class="comment">// images decoded if we don&#39;t need them.</span>
  li.dataset.backgroundImage = <span class="stringliteral">&#39;url(&quot;&#39;</span> + url + <span class="stringliteral">&#39;&quot;)&#39;</span>;
  <span class="keywordflow">return</span> li;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a7e9da90af1c46280e00745b86da7ff0f"></a><!-- doxytag: member="gallery.js::cropAndEndPick" ref="a7e9da90af1c46280e00745b86da7ff0f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d0/da2/gallery_8js.html#a7e9da90af1c46280e00745b86da7ff0f">cropAndEndPick</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00760">760</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00697">cropEditor</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00692">pendingPick</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00086">photodb</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00695">pickedFile</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00694">pickHeight</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00693">pickType</a>, と <a class="el" href="../../d0/da2/gallery_8js_source.html#l00694">pickWidth</a>.</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00113">init()</a>.</p>

<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_a7e9da90af1c46280e00745b86da7ff0f_icgraph.svg" width="219" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3076caeb3485095859089546849fda05"></a><!-- doxytag: member="gallery.js::cropPickedImage" ref="a3076caeb3485095859089546849fda05" args="(fileinfo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d0/da2/gallery_8js.html#a3076caeb3485095859089546849fda05">cropPickedImage</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fileinfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00716">716</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00056">cropView</a>, <a class="el" href="../../db/d2a/_utility_8h_source.html#l00069">file</a>, <a class="el" href="../../db/d0b/_image_editor_8js_source.html#l00436">ImageEditor()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00086">photodb</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00589">setView()</a>, と <a class="el" href="../../d1/d04/app__install__manager_8js_source.html#l00234">textContent</a>.</p>
<div class="fragment"><pre class="fragment">                                   {
  <a class="code" href="../../d0/da2/gallery_8js.html#a8dd2e31a3993ba9ad1d6f5731bd40bc8">pickedFile</a> = fileinfo;

  <span class="comment">// Do we actually want to allow the user to crop the image?</span>
  var nocrop = <a class="code" href="../../d0/da2/gallery_8js.html#ab78d90ed7204a602090082e9126dd0d2">pendingPick</a>.source.data.nocrop;

  <span class="keywordflow">if</span> (nocrop) {
    <span class="comment">// If we&#39;re not cropping we don&#39;t want the word &quot;Crop&quot; in the title bar</span>
    <span class="comment">// XXX: UX will probably get rid of this title bar soon, anyway.</span>
    $(<span class="stringliteral">&#39;crop-header&#39;</span>).<a class="code" href="../../d1/d04/app__install__manager_8js.html#a231b448a4b70e9035748897db2fa1c2a">textContent</a> = <span class="stringliteral">&#39;&#39;</span>;
  }

  <a class="code" href="../../d0/da2/gallery_8js.html#a87c564c1396bcdba1067fd5afa2a9815">setView</a>(<a class="code" href="../../d0/da2/gallery_8js.html#ad4442b6faaf0dee1d52cfe6c9deec24d">cropView</a>);

  <span class="comment">// Before the picked image is loaded, the done button is disabled</span>
  <span class="comment">// to avoid users picking a black/empty image.</span>
  $(<span class="stringliteral">&#39;crop-done-button&#39;</span>).disabled = <span class="keyword">true</span>;

  <a class="code" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a>.getFile(<a class="code" href="../../d0/da2/gallery_8js.html#a8dd2e31a3993ba9ad1d6f5731bd40bc8">pickedFile</a>.name, <span class="keyword">function</span>(<a class="code" href="../../db/d2a/_utility_8h.html#a5f21914f6755df23fc8ddbf42503beca">file</a>) {
    <a class="code" href="../../d0/da2/gallery_8js.html#a26b64dc45471a983faeb5717e6b77ec8">cropURL</a> = <a class="code" href="../../d6/dfe/class_u_r_l.html">URL</a>.createObjectURL(<a class="code" href="../../db/d2a/_utility_8h.html#a5f21914f6755df23fc8ddbf42503beca">file</a>);
    <a class="code" href="../../d0/da2/gallery_8js.html#aaddfccf9e6aee5cd9a61a1b35e0f38f5">cropEditor</a> = <span class="keyword">new</span> <a class="code" href="../../db/d0b/_image_editor_8js.html#a58ae4117f7725ecea1a99e4049fbc503">ImageEditor</a>(<a class="code" href="../../d0/da2/gallery_8js.html#a26b64dc45471a983faeb5717e6b77ec8">cropURL</a>, $(<span class="stringliteral">&#39;crop-frame&#39;</span>), {}, <span class="keyword">function</span>() {
      <span class="comment">// Enable the done button so that users are able to finish picking image.</span>
      $(<span class="stringliteral">&#39;crop-done-button&#39;</span>).disabled = <span class="keyword">false</span>;
      <span class="comment">// If the initiating app doesn&#39;t want to allow the user to crop</span>
      <span class="comment">// the image, we don&#39;t display the crop overlay. But we still use</span>
      <span class="comment">// this image editor to preview the image.</span>
      <span class="keywordflow">if</span> (nocrop) {
        <span class="comment">// Set a fake crop region even though we won&#39;t display it</span>
        <span class="comment">// so that getCroppedRegionBlob() works.</span>
        <a class="code" href="../../d0/da2/gallery_8js.html#aaddfccf9e6aee5cd9a61a1b35e0f38f5">cropEditor</a>.cropRegion.left = <a class="code" href="../../d0/da2/gallery_8js.html#aaddfccf9e6aee5cd9a61a1b35e0f38f5">cropEditor</a>.cropRegion.top = 0;
        <a class="code" href="../../d0/da2/gallery_8js.html#aaddfccf9e6aee5cd9a61a1b35e0f38f5">cropEditor</a>.cropRegion.right = <a class="code" href="../../d0/da2/gallery_8js.html#aaddfccf9e6aee5cd9a61a1b35e0f38f5">cropEditor</a>.dest.w;
        <a class="code" href="../../d0/da2/gallery_8js.html#aaddfccf9e6aee5cd9a61a1b35e0f38f5">cropEditor</a>.cropRegion.bottom = <a class="code" href="../../d0/da2/gallery_8js.html#aaddfccf9e6aee5cd9a61a1b35e0f38f5">cropEditor</a>.dest.h;
        <span class="keywordflow">return</span>;
      }

      <a class="code" href="../../d0/da2/gallery_8js.html#aaddfccf9e6aee5cd9a61a1b35e0f38f5">cropEditor</a>.showCropOverlay();
      <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#af563e56bf0e3a23b3c8c105348c40856">pickWidth</a>)
        <a class="code" href="../../d0/da2/gallery_8js.html#aaddfccf9e6aee5cd9a61a1b35e0f38f5">cropEditor</a>.setCropAspectRatio(<a class="code" href="../../d0/da2/gallery_8js.html#af563e56bf0e3a23b3c8c105348c40856">pickWidth</a>, <a class="code" href="../../d0/da2/gallery_8js.html#a7f0c497bd222f05f8f5903f30df8847c">pickHeight</a>);
      <span class="keywordflow">else</span>
        <a class="code" href="../../d0/da2/gallery_8js.html#aaddfccf9e6aee5cd9a61a1b35e0f38f5">cropEditor</a>.setCropAspectRatio(); <span class="comment">// free form cropping</span>
    });
  });
}
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_a3076caeb3485095859089546849fda05_cgraph.svg" width="100%" height="270"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1d34740c9f45587facea86c15f99a2c6"></a><!-- doxytag: member="gallery.js::deleteFile" ref="a1d34740c9f45587facea86c15f99a2c6" args="(n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../dd/d85/video_8js.html#a004d921303cc0b0b3d1bea39cff9bd50">deleteFile</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00486">486</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00074">files</a>, <a class="el" href="../../d2/d7d/jsapi_8h_source.html#l04320">n</a>, <a class="el" href="../../d0/d94/tools_2xpcwindow_2lib_2loader_8js_source.html#l00043">navigator</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00086">photodb</a>, と <a class="el" href="../../d0/da2/gallery_8js_source.html#l00091">videostorage</a>.</p>

<p>参照元 <a class="el" href="../../dd/d85/video_8js_source.html#l00346">deleteSelectedItems()</a>, と <a class="el" href="../../d8/df0/frames_8js_source.html#l00093">deleteSingleItem()</a>.</p>
<div class="fragment"><pre class="fragment">                       {
  <span class="keywordflow">if</span> (n &lt; 0 || n &gt;= <a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>.length)
    <span class="keywordflow">return</span>;

  <span class="comment">// Delete the file from the MediaDB. This removes the db entry and</span>
  <span class="comment">// deletes the file in device storage. This will generate an change</span>
  <span class="comment">// event which will call imageDeleted()</span>
  var fileinfo = <a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>[<a class="code" href="../../d2/d7d/jsapi_8h.html#aa5a8b9a2d5edc8e2e7ba67d7e2ee4e69">n</a>];
  <a class="code" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a>.deleteFile(<a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>[<a class="code" href="../../d2/d7d/jsapi_8h.html#aa5a8b9a2d5edc8e2e7ba67d7e2ee4e69">n</a>].<a class="code" href="../../d9/d04/expat_8h.html#a4a7cccd86625791f7f2ce3fb477aa9c1">name</a>);

  <span class="comment">// If it is a video, however, we can&#39;t just delete the poster image, but</span>
  <span class="comment">// must also delete the video file.</span>
  <span class="keywordflow">if</span> (fileinfo.metadata.video) {
    <a class="code" href="../../d0/da2/gallery_8js.html#ace84f873229174800558862ac30942fd">videostorage</a>.delete(fileinfo.metadata.video);
  }

  <span class="comment">// If the metdata parser saved a preview image for this photo,</span>
  <span class="comment">// delete that, too.</span>
  <span class="keywordflow">if</span> (fileinfo.metadata.preview &amp;&amp; fileinfo.metadata.preview.filename) {
    <span class="comment">// We use raw device storage here instead of MediaDB because that is</span>
    <span class="comment">// what MetadataParser.js uses for saving the preview.</span>
    var pictures = <a class="code" href="../../d0/d94/tools_2xpcwindow_2lib_2loader_8js.html#a1ab79c9277f7648d0dfe676bab65dde4">navigator</a>.getDeviceStorage(<span class="stringliteral">&#39;pictures&#39;</span>);
    pictures.delete(fileinfo.metadata.preview.filename);
  }
}
</pre></div>
<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_a1d34740c9f45587facea86c15f99a2c6_icgraph.svg" width="547" height="120"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a99873e3fc1be38a0caf0999e2a5b6e65"></a><!-- doxytag: member="gallery.js::fileCreated" ref="a99873e3fc1be38a0caf0999e2a5b6e65" args="(fileinfo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d0/da2/gallery_8js.html#a99873e3fc1be38a0caf0999e2a5b6e65">fileCreated</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fileinfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00512">512</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00328">compareFilesByDate()</a>, <a class="el" href="../../d4/d76/camera_2js_2filmstrip_8js_source.html#l00392">createThumbnail()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00076">currentFileIndex</a>, <a class="el" href="../../de/db0/music_8js_source.html#l00349">currentOverlay</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00064">currentView</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00077">editedPhotoIndex</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00074">files</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00053">fullscreenView</a>, <a class="el" href="../../da/d7d/sylvester_8js_source.html#l00308">i</a>, <a class="el" href="../../de/d44/build__stage_2email_2shared_2js_2media_2media__utils_8js_source.html#l00009">MediaUtils</a>, <a class="el" href="../../d1/d04/app__install__manager_8js_source.html#l00420">null</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00692">pendingPick</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00361">showFile()</a>, と <a class="el" href="../../de/db0/music_8js_source.html#l00363">showOverlay()</a>.</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00210">initDB()</a>.</p>
<div class="fragment"><pre class="fragment">                               {
  var insertPosition;

  <span class="comment">// If the new file is a video and we&#39;re handling an image pick activity</span>
  <span class="comment">// then we won&#39;t display the new file.</span>
  <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#ab78d90ed7204a602090082e9126dd0d2">pendingPick</a> &amp;&amp; fileinfo.metadata.video)
    <span class="keywordflow">return</span>;

  <span class="comment">// If we were showing the &#39;no pictures&#39; overlay, hide it</span>
  <span class="keywordflow">if</span> (<a class="code" href="../../de/db0/music_8js.html#a113233cca2b0b908dba1be75b9c1f841">currentOverlay</a> === <span class="stringliteral">&#39;emptygallery&#39;</span> || <a class="code" href="../../de/db0/music_8js.html#a113233cca2b0b908dba1be75b9c1f841">currentOverlay</a> === <span class="stringliteral">&#39;scanning&#39;</span>)
    <a class="code" href="../../de/db0/music_8js.html#a06b9f891a17c6f5559d8709267729496">showOverlay</a>(<a class="code" href="../../d1/d04/app__install__manager_8js.html#a66d98f9009f0502b9a5ce70e907f8f27">null</a>);

  <span class="comment">// If this new image is newer than the first one, it goes first</span>
  <span class="comment">// This is the most common case for photos, screenshots, and edits</span>
  <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>.length === 0 || fileinfo.date &gt; <a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>[0].date) {
    insertPosition = 0;
  }
  <span class="keywordflow">else</span> {
    <span class="comment">// Otherwise we have to search for the right insertion spot</span>
    insertPosition = <a class="code" href="../../de/d44/build__stage_2email_2shared_2js_2media_2media__utils_8js.html#a383bbbc6e44855b8bed806ab1ded4c63">MediaUtils</a>.binarySearch(<a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>, fileinfo,
                                             <a class="code" href="../../d0/da2/gallery_8js.html#af0bf2f6ad5f7519cef00440ab733686b">compareFilesByDate</a>);
  }

  <span class="comment">// Insert the image info into the array</span>
  <a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>.splice(insertPosition, 0, fileinfo);

  <span class="comment">// Create a thumbnail for this image and insert it at the right spot</span>
  var thumbnail = <a class="code" href="../../d4/d76/camera_2js_2filmstrip_8js.html#a246682eea904b777ca4d4707f24232f2">createThumbnail</a>(insertPosition);
  var thumbnailElts = thumbnails.querySelectorAll(<span class="stringliteral">&#39;.thumbnail&#39;</span>);
  <span class="keywordflow">if</span> (thumbnailElts.length === 0)
    thumbnails.appendChild(thumbnail);
  <span class="keywordflow">else</span>
    thumbnails.insertBefore(thumbnail, thumbnailElts[insertPosition]);

  <span class="comment">// increment the index of each of the thumbnails after the new one</span>
  <span class="keywordflow">for</span> (var <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a> = insertPosition; <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a> &lt; thumbnailElts.length; <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>++) {
    thumbnailElts[<a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>].dataset.index = <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a> + 1;
  }

  <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#a4c3a1c4e1efc6022bf003bb077daca89">currentFileIndex</a> &gt;= insertPosition)
    <a class="code" href="../../d0/da2/gallery_8js.html#a4c3a1c4e1efc6022bf003bb077daca89">currentFileIndex</a>++;
  <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#abfe5eb1833402ced30625fd6582536d8">editedPhotoIndex</a> &gt;= insertPosition)
    <a class="code" href="../../d0/da2/gallery_8js.html#abfe5eb1833402ced30625fd6582536d8">editedPhotoIndex</a>++;

  <span class="comment">// Redisplay the current photo if we&#39;re in photo view. The current</span>
  <span class="comment">// photo should not change, but the content of the next or previous frame</span>
  <span class="comment">// might. This call will only make changes if the filename to display</span>
  <span class="comment">// in a frame has actually changed.</span>
  <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#a08af05bd40494df0acb6c7ecf8fb25f7">currentView</a> === <a class="code" href="../../d0/da2/gallery_8js.html#a495a99b2d5539eb2ef1cebea1d91710c">fullscreenView</a>) {
    <a class="code" href="../../d8/df0/frames_8js.html#acca2cb5dc9247f573a21f61583c8d81d">showFile</a>(<a class="code" href="../../d0/da2/gallery_8js.html#a4c3a1c4e1efc6022bf003bb077daca89">currentFileIndex</a>);
  }
}
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_a99873e3fc1be38a0caf0999e2a5b6e65_cgraph.svg" width="100%" height="279"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</p>

<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_a99873e3fc1be38a0caf0999e2a5b6e65_icgraph.svg" width="291" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a39586a47f4ee455f04350f3c8248e124"></a><!-- doxytag: member="gallery.js::fileDeleted" ref="a39586a47f4ee455f04350f3c8248e124" args="(filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d0/da2/gallery_8js.html#a39586a47f4ee455f04350f3c8248e124">fileDeleted</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00434">434</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00076">currentFileIndex</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00064">currentView</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00077">editedPhotoIndex</a>, <a class="el" href="../../d2/d7d/jsapi_8h_source.html#l03946">filename</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00074">files</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00053">fullscreenView</a>, <a class="el" href="../../da/d7d/sylvester_8js_source.html#l00308">i</a>, <a class="el" href="../../d2/d7d/jsapi_8h_source.html#l04320">n</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00055">pickView</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00589">setView()</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00361">showFile()</a>, <a class="el" href="../../de/db0/music_8js_source.html#l00363">showOverlay()</a>, と <a class="el" href="../../d0/da2/gallery_8js_source.html#l00051">thumbnailListView</a>.</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00210">initDB()</a>.</p>
<div class="fragment"><pre class="fragment">                               {
  <span class="comment">// Find the deleted file in our files array</span>
  <span class="keywordflow">for</span> (var <a class="code" href="../../d2/d7d/jsapi_8h.html#aa5a8b9a2d5edc8e2e7ba67d7e2ee4e69">n</a> = 0; <a class="code" href="../../d2/d7d/jsapi_8h.html#aa5a8b9a2d5edc8e2e7ba67d7e2ee4e69">n</a> &lt; <a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>.length; <a class="code" href="../../d2/d7d/jsapi_8h.html#aa5a8b9a2d5edc8e2e7ba67d7e2ee4e69">n</a>++) {
    <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>[<a class="code" href="../../d2/d7d/jsapi_8h.html#aa5a8b9a2d5edc8e2e7ba67d7e2ee4e69">n</a>].<a class="code" href="../../d9/d04/expat_8h.html#a4a7cccd86625791f7f2ce3fb477aa9c1">name</a> === <a class="code" href="../../d2/d7d/jsapi_8h.html#a9b61fad0b15688b43345d3f5c3a3d44b">filename</a>)
      <span class="keywordflow">break</span>;
  }

  <span class="keywordflow">if</span> (<a class="code" href="../../d2/d7d/jsapi_8h.html#aa5a8b9a2d5edc8e2e7ba67d7e2ee4e69">n</a> &gt;= <a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>.length)  <span class="comment">// It was a file we didn&#39;t know about</span>
    <span class="keywordflow">return</span>;

  <span class="comment">// Remove the image from the array</span>
  var deletedImageData = <a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>.splice(<a class="code" href="../../d2/d7d/jsapi_8h.html#aa5a8b9a2d5edc8e2e7ba67d7e2ee4e69">n</a>, 1)[0];

  <span class="comment">// Remove the corresponding thumbnail</span>
  var thumbnailElts = thumbnails.querySelectorAll(<span class="stringliteral">&#39;.thumbnail&#39;</span>);
  <a class="code" href="../../d6/dfe/class_u_r_l.html">URL</a>.revokeObjectURL(thumbnailElts[<a class="code" href="../../d2/d7d/jsapi_8h.html#aa5a8b9a2d5edc8e2e7ba67d7e2ee4e69">n</a>].dataset.backgroundImage.slice(5, -2));
  thumbnails.removeChild(thumbnailElts[<a class="code" href="../../d2/d7d/jsapi_8h.html#aa5a8b9a2d5edc8e2e7ba67d7e2ee4e69">n</a>]);

  <span class="comment">// Change the index associated with all the thumbnails after the deleted one</span>
  <span class="comment">// This keeps the data-index attribute of each thumbnail element in sync</span>
  <span class="comment">// with the files[] array.</span>
  <span class="keywordflow">for</span> (var <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a> = n + 1; <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a> &lt; thumbnailElts.length; <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>++) {
    thumbnailElts[<a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>].dataset.index = <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a> - 1;
  }

  <span class="comment">// Adjust currentFileIndex, too, if we have to.</span>
  <span class="keywordflow">if</span> (n &lt; <a class="code" href="../../d0/da2/gallery_8js.html#a4c3a1c4e1efc6022bf003bb077daca89">currentFileIndex</a>)
    <a class="code" href="../../d0/da2/gallery_8js.html#a4c3a1c4e1efc6022bf003bb077daca89">currentFileIndex</a>--;

  <span class="comment">// If we remove the last item in files[],</span>
  <span class="comment">// we need to show the previous image, not the next image.</span>
  <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#a4c3a1c4e1efc6022bf003bb077daca89">currentFileIndex</a> &gt;= <a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>.length)
    <a class="code" href="../../d0/da2/gallery_8js.html#a4c3a1c4e1efc6022bf003bb077daca89">currentFileIndex</a> = <a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>.length - 1;

  <span class="keywordflow">if</span> (n &lt; <a class="code" href="../../d0/da2/gallery_8js.html#abfe5eb1833402ced30625fd6582536d8">editedPhotoIndex</a>)
    <a class="code" href="../../d0/da2/gallery_8js.html#abfe5eb1833402ced30625fd6582536d8">editedPhotoIndex</a>--;

  <span class="comment">// If we&#39;re in fullscreen mode, then the only way this function</span>
  <span class="comment">// gets called is when we delete the currently displayed photo. This means</span>
  <span class="comment">// that we need to redisplay.</span>
  <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#a08af05bd40494df0acb6c7ecf8fb25f7">currentView</a> === <a class="code" href="../../d0/da2/gallery_8js.html#a495a99b2d5539eb2ef1cebea1d91710c">fullscreenView</a> &amp;&amp; <a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>.length &gt; 0) {
    <a class="code" href="../../d8/df0/frames_8js.html#acca2cb5dc9247f573a21f61583c8d81d">showFile</a>(<a class="code" href="../../d0/da2/gallery_8js.html#a4c3a1c4e1efc6022bf003bb077daca89">currentFileIndex</a>);
  }

  <span class="comment">// If there are no more photos show the &quot;no pix&quot; overlay</span>
  <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>.length === 0) {
    <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#a08af05bd40494df0acb6c7ecf8fb25f7">currentView</a> !== <a class="code" href="../../d0/da2/gallery_8js.html#a4020be717e9ac1015b4319904afa2dd6">pickView</a>)
      <a class="code" href="../../d0/da2/gallery_8js.html#a87c564c1396bcdba1067fd5afa2a9815">setView</a>(<a class="code" href="../../d0/da2/gallery_8js.html#a3698d255731771347d7f847313d8aa7f">thumbnailListView</a>);
    <a class="code" href="../../de/db0/music_8js.html#a06b9f891a17c6f5559d8709267729496">showOverlay</a>(<span class="stringliteral">&#39;emptygallery&#39;</span>);
  }
}
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_a39586a47f4ee455f04350f3c8248e124_cgraph.svg" width="100%" height="288"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</p>

<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_a39586a47f4ee455f04350f3c8248e124_icgraph.svg" width="291" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a377c40257a942d42736eccd490acfec4"></a><!-- doxytag: member="gallery.js::getVideoFile" ref="a377c40257a942d42736eccd490acfec4" args="(filename, callback)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d0/da2/gallery_8js.html#a377c40257a942d42736eccd490acfec4">getVideoFile</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00315">315</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../df/d44/permission__manager_8js_source.html#l00186">callback</a>, <a class="el" href="../../d9/d42/caldav__worker_8js_source.html#l00018">console</a>, <a class="el" href="../../d2/d7d/jsapi_8h_source.html#l03946">filename</a>, <a class="el" href="../../d5/dbd/camera_2js_2camera_8js_source.html#l01538">req</a>, と <a class="el" href="../../d0/da2/gallery_8js_source.html#l00091">videostorage</a>.</p>

<p>参照元 <a class="el" href="../../d8/df0/frames_8js_source.html#l00299">setupFrameContent()</a>.</p>
<div class="fragment"><pre class="fragment">                                          {
  <span class="comment">// We get videos directly through the video device storage</span>
  var <a class="code" href="../../d5/dbd/camera_2js_2camera_8js.html#a42c43c76081a7df8ae2954f16ee9338b">req</a> = <a class="code" href="../../d0/da2/gallery_8js.html#ace84f873229174800558862ac30942fd">videostorage</a>.get(<a class="code" href="../../d2/d7d/jsapi_8h.html#a9b61fad0b15688b43345d3f5c3a3d44b">filename</a>);
  req.onsuccess = <span class="keyword">function</span>() {
    <a class="code" href="../../df/d44/permission__manager_8js.html#ab95eebdb2a4acb8510417bf0bdabc3c5">callback</a>(req.result);
  };
  req.onerror = <span class="keyword">function</span>() {
    <a class="code" href="../../d9/d42/caldav__worker_8js.html#ac798a668e63cdb5c7af2b97ab014f85f">console</a>.error(<span class="stringliteral">&#39;Failed to get video file&#39;</span>, <a class="code" href="../../d2/d7d/jsapi_8h.html#a9b61fad0b15688b43345d3f5c3a3d44b">filename</a>);
  };
}
</pre></div>
<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_a377c40257a942d42736eccd490acfec4_icgraph.svg" width="100%" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="af8dc73726eb0578fe44fb98cd2319445"></a><!-- doxytag: member="gallery.js::init" ref="af8dc73726eb0578fe44fb98cd2319445" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d5/d0d/pay_8js.html#af619d0ad365b66772212901ccd40466c">init</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00113">113</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d5/de7/jquery_8js_source.html#l00002">a</a>, <a class="el" href="../../de/dc7/share-receiver_8js_source.html#l00012">activity</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00760">cropAndEndPick()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00064">currentView</a>, <a class="el" href="../../dd/d85/video_8js_source.html#l00346">deleteSelectedItems()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00053">fullscreenView</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00210">initDB()</a>, <a class="el" href="../../dd/d85/video_8js_source.html#l00337">launchCameraApp()</a>, <a class="el" href="../../dd/d09/_prototype_list_8h_source.html#l00214">mozilla::dom::prototypes::id::MozActivity</a>, <a class="el" href="../../d0/d94/tools_2xpcwindow_2lib_2loader_8js_source.html#l00043">navigator</a>, <a class="el" href="../../d1/d04/app__install__manager_8js_source.html#l00420">null</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00026">onclick</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00692">pendingPick</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00086">photodb</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00055">pickView</a>, <a class="el" href="../../db/d0b/_image_editor_8js_source.html#l00042">resizeHandler()</a>, <a class="el" href="../../d5/dbd/camera_2js_2camera_8js_source.html#l01162">section</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00589">setView()</a>, <a class="el" href="../../dd/d85/video_8js_source.html#l00404">shareSelectedItems()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00699">startPick()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00051">thumbnailListView</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00052">thumbnailSelectView</a>, と <a class="el" href="../../dd/d64/apps_2email_2js_2ext_2mailapi_2worker-bootstrap_8js_source.html#l01331">window</a>.</p>
<div class="fragment"><pre class="fragment">                {
  <span class="comment">// Clicking on the select button goes to thumbnail select mode</span>
  $(<span class="stringliteral">&#39;thumbnails-select-button&#39;</span>).<a class="code" href="../../d8/df0/frames_8js.html#a2581b031a10db324ce49c6a804c5f20a">onclick</a> =
    <a class="code" href="../../d0/da2/gallery_8js.html#a87c564c1396bcdba1067fd5afa2a9815">setView</a>.bind(<a class="code" href="../../d1/d04/app__install__manager_8js.html#a66d98f9009f0502b9a5ce70e907f8f27">null</a>, <a class="code" href="../../d0/da2/gallery_8js.html#a98ed4b68cffd3f7a6fe97c3ab40865d5">thumbnailSelectView</a>);

  <span class="comment">// Clicking on the cancel button goes from thumbnail select mode</span>
  <span class="comment">// back to thumbnail list mode</span>
  $(<span class="stringliteral">&#39;thumbnails-cancel-button&#39;</span>).<a class="code" href="../../d8/df0/frames_8js.html#a2581b031a10db324ce49c6a804c5f20a">onclick</a> = <a class="code" href="../../d0/da2/gallery_8js.html#a87c564c1396bcdba1067fd5afa2a9815">setView</a>.bind(<a class="code" href="../../d1/d04/app__install__manager_8js.html#a66d98f9009f0502b9a5ce70e907f8f27">null</a>, <a class="code" href="../../d0/da2/gallery_8js.html#a3698d255731771347d7f847313d8aa7f">thumbnailListView</a>);

  <span class="comment">// Clicking on the pick back button cancels the pick activity.</span>
  $(<span class="stringliteral">&#39;pick-back-button&#39;</span>).<a class="code" href="../../d8/df0/frames_8js.html#a2581b031a10db324ce49c6a804c5f20a">onclick</a> = cancelPick;

  <span class="comment">// In crop view, the back button goes back to pick view</span>
  $(<span class="stringliteral">&#39;crop-back-button&#39;</span>).<a class="code" href="../../d8/df0/frames_8js.html#a2581b031a10db324ce49c6a804c5f20a">onclick</a> = <span class="keyword">function</span>() {
    <a class="code" href="../../d0/da2/gallery_8js.html#a87c564c1396bcdba1067fd5afa2a9815">setView</a>(<a class="code" href="../../d0/da2/gallery_8js.html#a4020be717e9ac1015b4319904afa2dd6">pickView</a>);
    cleanupCrop();
  };

  <span class="comment">// In crop view, the done button finishes the pick</span>
  $(<span class="stringliteral">&#39;crop-done-button&#39;</span>).<a class="code" href="../../d8/df0/frames_8js.html#a2581b031a10db324ce49c6a804c5f20a">onclick</a> = <a class="code" href="../../d0/da2/gallery_8js.html#a7e9da90af1c46280e00745b86da7ff0f">cropAndEndPick</a>;

  <span class="comment">// The camera buttons should launch the camera app</span>
  $(<span class="stringliteral">&#39;fullscreen-camera-button&#39;</span>).<a class="code" href="../../d8/df0/frames_8js.html#a2581b031a10db324ce49c6a804c5f20a">onclick</a> = <a class="code" href="../../dd/d85/video_8js.html#af2e261a1ef7f340a5c693d2b6a1b92ed">launchCameraApp</a>;
  $(<span class="stringliteral">&#39;thumbnails-camera-button&#39;</span>).<a class="code" href="../../d8/df0/frames_8js.html#a2581b031a10db324ce49c6a804c5f20a">onclick</a> = <a class="code" href="../../dd/d85/video_8js.html#af2e261a1ef7f340a5c693d2b6a1b92ed">launchCameraApp</a>;
  $(<span class="stringliteral">&#39;overlay-camera-button&#39;</span>).<a class="code" href="../../d8/df0/frames_8js.html#a2581b031a10db324ce49c6a804c5f20a">onclick</a> = <a class="code" href="../../dd/d85/video_8js.html#af2e261a1ef7f340a5c693d2b6a1b92ed">launchCameraApp</a>;

  <span class="comment">// Clicking on the delete button in thumbnail select mode deletes all</span>
  <span class="comment">// selected items</span>
  $(<span class="stringliteral">&#39;thumbnails-delete-button&#39;</span>).<a class="code" href="../../d8/df0/frames_8js.html#a2581b031a10db324ce49c6a804c5f20a">onclick</a> = <a class="code" href="../../dd/d85/video_8js.html#aebc1dbd30434352ff024a083c75b5b4f">deleteSelectedItems</a>;

  <span class="comment">// Clicking on the share button in select mode shares all selected images</span>
  $(<span class="stringliteral">&#39;thumbnails-share-button&#39;</span>).<a class="code" href="../../d8/df0/frames_8js.html#a2581b031a10db324ce49c6a804c5f20a">onclick</a> = <a class="code" href="../../dd/d85/video_8js.html#aa4d606e25464d76378eb75550ec7663c">shareSelectedItems</a>;

  <span class="comment">// Click to open the media storage panel when the default storage</span>
  <span class="comment">// is unavailable.</span>
  $(<span class="stringliteral">&#39;storage-setting-button&#39;</span>).<a class="code" href="../../d8/df0/frames_8js.html#a2581b031a10db324ce49c6a804c5f20a">onclick</a> = <span class="keyword">function</span>() {
    var <a class="code" href="../../de/dc7/share-receiver_8js.html#add7056b1c8a53d2db94122b6cd76b964">activity</a> = <span class="keyword">new</span> <a class="code" href="../../d0/dfb/namespacemozilla_1_1dom_1_1prototypes_1_1id.html#addcec93baff9084aadf2519231ea4a28ab7e07971d28f2ebf8ff15ee0f268f2e1">MozActivity</a>({
      <a class="code" href="../../d9/d04/expat_8h.html#a4a7cccd86625791f7f2ce3fb477aa9c1">name</a>: <span class="stringliteral">&#39;configure&#39;</span>,
      <a class="code" href="../../d9/d04/expat_8h.html#aa11c5d56dba0976f16f07ea50b1999ba">data</a>: {
        <a class="code" href="../../d9/d04/expat_8h.html#acfcb72e11f425a604663d645d2a4ea80">target</a>: <span class="stringliteral">&#39;device&#39;</span>,
        <a class="code" href="../../d5/dbd/camera_2js_2camera_8js.html#a1df8504e63545f2e6c93c0cde966c060">section</a>: <span class="stringliteral">&#39;mediaStorage&#39;</span>
      }
    });
  };
  $(<span class="stringliteral">&#39;overlay-cancel-button&#39;</span>).<a class="code" href="../../d8/df0/frames_8js.html#a2581b031a10db324ce49c6a804c5f20a">onclick</a> = <span class="keyword">function</span>() {
    cancelPick();
  };
  <span class="comment">// Handle resize events</span>
  <a class="code" href="../../dd/d64/apps_2email_2js_2ext_2mailapi_2worker-bootstrap_8js.html#a1f5517920aaab1f97bda91f10438fb05">window</a>.onresize = <a class="code" href="../../db/d0b/_image_editor_8js.html#a949ea6f42ae029faa03eb19facfa08b0">resizeHandler</a>;

  <span class="comment">// If we were not invoked by an activity, then start off in thumbnail</span>
  <span class="comment">// list mode, and fire up the MediaDB object.</span>
  <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d94/tools_2xpcwindow_2lib_2loader_8js.html#a1ab79c9277f7648d0dfe676bab65dde4">navigator</a>.mozHasPendingMessage(<span class="stringliteral">&#39;activity&#39;</span>)) {
    <a class="code" href="../../d0/da2/gallery_8js.html#aa3ad0f72d51416a18a4336efa0b2b3cf">initDB</a>();
    <a class="code" href="../../d0/da2/gallery_8js.html#a87c564c1396bcdba1067fd5afa2a9815">setView</a>(<a class="code" href="../../d0/da2/gallery_8js.html#a3698d255731771347d7f847313d8aa7f">thumbnailListView</a>);
  }

  <span class="comment">// Register a handler for activities. This will take care of the rest</span>
  <span class="comment">// of the initialization process.</span>
  <a class="code" href="../../d0/d94/tools_2xpcwindow_2lib_2loader_8js.html#a1ab79c9277f7648d0dfe676bab65dde4">navigator</a>.mozSetMessageHandler(<span class="stringliteral">&#39;activity&#39;</span>, <span class="keyword">function</span> activityHandler(<a class="code" href="../../d5/de7/jquery_8js.html#aa4d4888597588a84fd5b1184d00c91f3">a</a>) {
    var activityName = <a class="code" href="../../d5/de7/jquery_8js.html#aa4d4888597588a84fd5b1184d00c91f3">a</a>.source.name;
    <span class="keywordflow">switch</span> (activityName) {
    <span class="keywordflow">case</span> <span class="stringliteral">&#39;browse&#39;</span>:
      <span class="comment">// The &#39;browse&#39; activity is the way we launch Gallery from Camera.</span>
      <span class="comment">// If this was a cold start, then the db needs to be initialized.</span>
      <span class="keywordflow">if</span> (!<a class="code" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a>) {
        <a class="code" href="../../d0/da2/gallery_8js.html#aa3ad0f72d51416a18a4336efa0b2b3cf">initDB</a>();  <span class="comment">// Initialize the media database</span>
        <a class="code" href="../../d0/da2/gallery_8js.html#a87c564c1396bcdba1067fd5afa2a9815">setView</a>(<a class="code" href="../../d0/da2/gallery_8js.html#a3698d255731771347d7f847313d8aa7f">thumbnailListView</a>);
      }
      <span class="keywordflow">else</span> {
        <span class="comment">// If the gallery was already running we we arrived here via a</span>
        <span class="comment">// browse activity, then the user is probably coming to us from the</span>
        <span class="comment">// camera, and she probably wants to see the list of thumbnails.</span>
        <span class="comment">// If we&#39;re currently displaying a single image, switch to the</span>
        <span class="comment">// thumbnails. But if the user left the gallery in the middle of</span>
        <span class="comment">// an edit or in the middle of making a selection, then returning</span>
        <span class="comment">// to the thumbnail list would cause her to lose work, so in those</span>
        <span class="comment">// cases we don&#39;t change anything and let the gallery resume where</span>
        <span class="comment">// the user left it.  See Bug 846220.</span>
        <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#a08af05bd40494df0acb6c7ecf8fb25f7">currentView</a> === <a class="code" href="../../d0/da2/gallery_8js.html#a495a99b2d5539eb2ef1cebea1d91710c">fullscreenView</a>)
          <a class="code" href="../../d0/da2/gallery_8js.html#a87c564c1396bcdba1067fd5afa2a9815">setView</a>(<a class="code" href="../../d0/da2/gallery_8js.html#a3698d255731771347d7f847313d8aa7f">thumbnailListView</a>);
      }
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <span class="stringliteral">&#39;pick&#39;</span>:
      <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#ab78d90ed7204a602090082e9126dd0d2">pendingPick</a>) <span class="comment">// I don&#39;t think this can really happen anymore</span>
        cancelPick();
      <a class="code" href="../../d0/da2/gallery_8js.html#ab78d90ed7204a602090082e9126dd0d2">pendingPick</a> = <a class="code" href="../../d5/de7/jquery_8js.html#aa4d4888597588a84fd5b1184d00c91f3">a</a>; <span class="comment">// We need pendingPick set before calling initDB()</span>
      <span class="keywordflow">if</span> (!<a class="code" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a>)
        <a class="code" href="../../d0/da2/gallery_8js.html#aa3ad0f72d51416a18a4336efa0b2b3cf">initDB</a>();
      <a class="code" href="../../d0/da2/gallery_8js.html#af1ea14645dcd3a1078e952cbde544991">startPick</a>();
      <span class="keywordflow">break</span>;
    }
  });
}
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_af8dc73726eb0578fe44fb98cd2319445_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa3ad0f72d51416a18a4336efa0b2b3cf"></a><!-- doxytag: member="gallery.js::initDB" ref="aa3ad0f72d51416a18a4336efa0b2b3cf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d1/d6b/video_2js_2db_8js.html#aa3ad0f72d51416a18a4336efa0b2b3cf">initDB</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00210">210</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../de/db0/music_8js_source.html#l00349">currentOverlay</a>, <a class="el" href="../../db/d2a/_utility_8h_source.html#l00069">file</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00512">fileCreated()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00434">fileDeleted()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00345">initThumbnails()</a>, <a class="el" href="../../da/ddf/ns_i_d_o_m_progress_event_8idl_source.html#l00030">loaded</a>, <a class="el" href="../../d5/dbd/camera_2js_2camera_8js_source.html#l00003">loader</a>, <a class="el" href="../../d7/de7/build__stage_2email_2shared_2js_2mediadb_8js_source.html#l00362">MediaDB</a>, <a class="el" href="../../df/dcd/apps_2gallery_2js_2metadata__scripts_8js_source.html#l00986">metadataParser</a>, <a class="el" href="../../d0/d94/tools_2xpcwindow_2lib_2loader_8js_source.html#l00043">navigator</a>, <a class="el" href="../../d1/d04/app__install__manager_8js_source.html#l00420">null</a>, <a class="el" href="../../d4/d76/camera_2js_2filmstrip_8js_source.html#l00233">onerror</a>, <a class="el" href="../../d5/dbd/camera_2js_2camera_8js_source.html#l01539">onsuccess</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00043">PAGE_SIZE</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00692">pendingPick</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00086">photodb</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00589">setView()</a>, <a class="el" href="../../de/db0/music_8js_source.html#l00363">showOverlay()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00051">thumbnailListView</a>, と <a class="el" href="../../d0/da2/gallery_8js_source.html#l00091">videostorage</a>.</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00113">init()</a>.</p>
<div class="fragment"><pre class="fragment">                  {
  <a class="code" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a> = <span class="keyword">new</span> <a class="code" href="../../d7/de7/build__stage_2email_2shared_2js_2mediadb_8js.html#a1c7c277e7990f7e2da74163427e0f830">MediaDB</a>(<span class="stringliteral">&#39;pictures&#39;</span>, metadataParserWrapper, {
    <a class="code" href="../../d9/d04/expat_8h.html#aa323a7729fa99ab75ae910c7267ac071">version</a>: 2,
    autoscan: <span class="keyword">false</span>,     <span class="comment">// We&#39;re going to call scan() explicitly</span>
    batchHoldTime: 150,  <span class="comment">// Batch files during scanning</span>
    batchSize: <a class="code" href="../../d0/da2/gallery_8js.html#a998ff3d0b5e9250e5debd83bae7fc2dd">PAGE_SIZE</a> <span class="comment">// Max batch size: one screenful</span>
  });

  <span class="comment">// This is where we find videos once the photodb notifies us that a</span>
  <span class="comment">// new video poster image has been detected. Note that we need this</span>
  <span class="comment">// even during a pick activity when we&#39;re not displaying videos</span>
  <span class="comment">// because we might still might find and parse metadata for new</span>
  <span class="comment">// videos during the scanning process.</span>
  <a class="code" href="../../d0/da2/gallery_8js.html#ace84f873229174800558862ac30942fd">videostorage</a> = <a class="code" href="../../d0/d94/tools_2xpcwindow_2lib_2loader_8js.html#a1ab79c9277f7648d0dfe676bab65dde4">navigator</a>.getDeviceStorage(<span class="stringliteral">&#39;videos&#39;</span>);

  var <a class="code" href="../../da/ddf/ns_i_d_o_m_progress_event_8idl.html#a683cd33cf7f2552e240f57d453a4717d">loaded</a> = <span class="keyword">false</span>;
  <span class="keyword">function</span> metadataParserWrapper(<a class="code" href="../../db/d2a/_utility_8h.html#a5f21914f6755df23fc8ddbf42503beca">file</a>, <a class="code" href="../../d5/dbd/camera_2js_2camera_8js.html#a845d7a743d9d72d08f80a15338dd1099">onsuccess</a>, <a class="code" href="../../d4/d76/camera_2js_2filmstrip_8js.html#a9c95fb48715b0deb285f7bfd8f10df50">onerror</a>, bigFile) {
    <span class="keywordflow">if</span> (loaded) {
      <a class="code" href="../../df/dcd/apps_2gallery_2js_2metadata__scripts_8js.html#a1663d790c01d578b4d59cfe354e836ef">metadataParser</a>(<a class="code" href="../../db/d2a/_utility_8h.html#a5f21914f6755df23fc8ddbf42503beca">file</a>, <a class="code" href="../../d5/dbd/camera_2js_2camera_8js.html#a845d7a743d9d72d08f80a15338dd1099">onsuccess</a>, <a class="code" href="../../d4/d76/camera_2js_2filmstrip_8js.html#a9c95fb48715b0deb285f7bfd8f10df50">onerror</a>, bigFile);
      <span class="keywordflow">return</span>;
    }

    <a class="code" href="../../d5/dbd/camera_2js_2camera_8js.html#a78601e1f2fe929d6470d82a205ad2382">loader</a>.load(<span class="stringliteral">&#39;js/metadata_scripts.js&#39;</span>, <span class="keyword">function</span>() {
      loaded = <span class="keyword">true</span>;
      <a class="code" href="../../df/dcd/apps_2gallery_2js_2metadata__scripts_8js.html#a1663d790c01d578b4d59cfe354e836ef">metadataParser</a>(<a class="code" href="../../db/d2a/_utility_8h.html#a5f21914f6755df23fc8ddbf42503beca">file</a>, <a class="code" href="../../d5/dbd/camera_2js_2camera_8js.html#a845d7a743d9d72d08f80a15338dd1099">onsuccess</a>, <a class="code" href="../../d4/d76/camera_2js_2filmstrip_8js.html#a9c95fb48715b0deb285f7bfd8f10df50">onerror</a>, bigFile);
    });
  }

  <span class="comment">// show dialog in upgradestart, when it finished, it will turned to ready.</span>
  <a class="code" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a>.onupgrading = <span class="keyword">function</span>(evt) {
    <a class="code" href="../../de/db0/music_8js.html#a06b9f891a17c6f5559d8709267729496">showOverlay</a>(<span class="stringliteral">&#39;upgrade&#39;</span>);
  };

  <span class="comment">// This is called when DeviceStorage becomes unavailable because the</span>
  <span class="comment">// sd card is removed or because it is mounted for USB mass storage</span>
  <span class="comment">// This may be called before onready if it is unavailable to begin with</span>
  <span class="comment">// We don&#39;t need one of these handlers for the video db, since both</span>
  <span class="comment">// will get the same event at more or less the same time.</span>
  <a class="code" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a>.onunavailable = <span class="keyword">function</span>(<a class="code" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>) {
    <span class="comment">// Switch back to the thumbnail view. If we were viewing or editing an image</span>
    <span class="comment">// it might not be there anymore when the MediaDB becomes available again.</span>
    <a class="code" href="../../d0/da2/gallery_8js.html#a87c564c1396bcdba1067fd5afa2a9815">setView</a>(<a class="code" href="../../d0/da2/gallery_8js.html#a3698d255731771347d7f847313d8aa7f">thumbnailListView</a>);

    <span class="comment">// If storage becomes unavailble (e.g. the user starts a USB Mass Storage</span>
    <span class="comment">// Lock the user out of the app, and tell them why</span>
    var why = <span class="keyword">event</span>.detail;
    <span class="keywordflow">if</span> (why === <a class="code" href="../../d7/de7/build__stage_2email_2shared_2js_2mediadb_8js.html#a1c7c277e7990f7e2da74163427e0f830">MediaDB</a>.NOCARD)
      <a class="code" href="../../de/db0/music_8js.html#a06b9f891a17c6f5559d8709267729496">showOverlay</a>(<span class="stringliteral">&#39;nocard&#39;</span>);
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (why === <a class="code" href="../../d7/de7/build__stage_2email_2shared_2js_2mediadb_8js.html#a1c7c277e7990f7e2da74163427e0f830">MediaDB</a>.UNMOUNTED)
      <a class="code" href="../../de/db0/music_8js.html#a06b9f891a17c6f5559d8709267729496">showOverlay</a>(<span class="stringliteral">&#39;pluggedin&#39;</span>);
  };

  <a class="code" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a>.onready = <span class="keyword">function</span>() {
    <span class="comment">// Hide the nocard or pluggedin overlay if it is displayed</span>
    <span class="keywordflow">if</span> (<a class="code" href="../../de/db0/music_8js.html#a113233cca2b0b908dba1be75b9c1f841">currentOverlay</a> === <span class="stringliteral">&#39;nocard&#39;</span> || <a class="code" href="../../de/db0/music_8js.html#a113233cca2b0b908dba1be75b9c1f841">currentOverlay</a> === <span class="stringliteral">&#39;pluggedin&#39;</span> ||
        <a class="code" href="../../de/db0/music_8js.html#a113233cca2b0b908dba1be75b9c1f841">currentOverlay</a> === <span class="stringliteral">&#39;upgrade&#39;</span>)
      <a class="code" href="../../de/db0/music_8js.html#a06b9f891a17c6f5559d8709267729496">showOverlay</a>(<a class="code" href="../../d1/d04/app__install__manager_8js.html#a66d98f9009f0502b9a5ce70e907f8f27">null</a>);

    <a class="code" href="../../d0/da2/gallery_8js.html#a6d772599ba184f90212d966f0036bd7f">initThumbnails</a>();
  };

  <a class="code" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a>.onscanstart = <span class="keyword">function</span> onscanstart() {
    <span class="comment">// Show the scanning indicator</span>
    $(<span class="stringliteral">&#39;progress&#39;</span>).classList.remove(<span class="stringliteral">&#39;hidden&#39;</span>);
    $(<span class="stringliteral">&#39;throbber&#39;</span>).classList.add(<span class="stringliteral">&#39;throb&#39;</span>);
  };

  <a class="code" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a>.onscanend = <span class="keyword">function</span> onscanend() {
    <span class="comment">// if we&#39;re still having the scanning overlay there are no photo&#39;s</span>
    <span class="keywordflow">if</span> (<a class="code" href="../../de/db0/music_8js.html#a113233cca2b0b908dba1be75b9c1f841">currentOverlay</a> === <span class="stringliteral">&#39;scanning&#39;</span>)
      <a class="code" href="../../de/db0/music_8js.html#a06b9f891a17c6f5559d8709267729496">showOverlay</a>(<span class="stringliteral">&#39;emptygallery&#39;</span>);

    <span class="comment">// Hide the scanning indicator</span>
    $(<span class="stringliteral">&#39;progress&#39;</span>).classList.add(<span class="stringliteral">&#39;hidden&#39;</span>);
    $(<span class="stringliteral">&#39;throbber&#39;</span>).classList.remove(<span class="stringliteral">&#39;throb&#39;</span>);
  };

  <span class="comment">// On devices with internal and external device storage, this handler is</span>
  <span class="comment">// triggered when the user removes the sdcard. MediaDB remains usable</span>
  <span class="comment">// and we&#39;ll get a bunch of deleted events for the files that are no longer</span>
  <span class="comment">// available. But we need to listen to this event so we can switch back</span>
  <span class="comment">// to the list of thumbnails. We don&#39;t want to be left viewing or editing</span>
  <span class="comment">// a photo that is no longer available.</span>
  <a class="code" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a>.oncardremoved = <span class="keyword">function</span> oncardremoved() {
    <span class="comment">// If the user pulls the sdcard while trying to pick an image, give up</span>
    <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#ab78d90ed7204a602090082e9126dd0d2">pendingPick</a>) {
      cancelPick();
      <span class="keywordflow">return</span>;
    }

    <a class="code" href="../../d0/da2/gallery_8js.html#a87c564c1396bcdba1067fd5afa2a9815">setView</a>(<a class="code" href="../../d0/da2/gallery_8js.html#a3698d255731771347d7f847313d8aa7f">thumbnailListView</a>);
  };

  <span class="comment">// One or more files was created (or was just discovered by a scan)</span>
  <a class="code" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a>.oncreated = <span class="keyword">function</span>(<a class="code" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>) {
    <span class="keyword">event</span>.detail.forEach(<a class="code" href="../../d0/da2/gallery_8js.html#a99873e3fc1be38a0caf0999e2a5b6e65">fileCreated</a>);
  };

  <span class="comment">// One or more files were deleted (or were just discovered missing by a scan)</span>
  <a class="code" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a>.ondeleted = <span class="keyword">function</span>(<a class="code" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>) {
    <span class="keyword">event</span>.detail.forEach(<a class="code" href="../../d0/da2/gallery_8js.html#a39586a47f4ee455f04350f3c8248e124">fileDeleted</a>);
  };
}
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_aa3ad0f72d51416a18a4336efa0b2b3cf_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</p>

<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_aa3ad0f72d51416a18a4336efa0b2b3cf_icgraph.svg" width="158" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6d772599ba184f90212d966f0036bd7f"></a><!-- doxytag: member="gallery.js::initThumbnails" ref="a6d772599ba184f90212d966f0036bd7f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d0/da2/gallery_8js.html#a6d772599ba184f90212d966f0036bd7f">initThumbnails</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00345">345</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d4/d76/camera_2js_2filmstrip_8js_source.html#l00392">createThumbnail()</a>, <a class="el" href="../../d4/daf/video_2js_2view_8js_source.html#l00184">done()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00074">files</a>, <a class="el" href="../../d7/d7e/build__stage_2email_2shared_2js_2visibility__monitor_8js_source.html#l00076">monitorChildVisibility()</a>, <a class="el" href="../../d1/d04/app__install__manager_8js_source.html#l00420">null</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00043">PAGE_SIZE</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00692">pendingPick</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00086">photodb</a>, <a class="el" href="../../de/db0/music_8js_source.html#l00363">showOverlay()</a>, <a class="el" href="../../dd/d85/video_8js_source.html#l00484">thumbnailClickHandler()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00683">thumbnailOffscreen()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00677">thumbnailOnscreen()</a>, と <a class="el" href="../../d0/da2/gallery_8js_source.html#l00093">visibilityMonitor</a>.</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00210">initDB()</a>.</p>
<div class="fragment"><pre class="fragment">                          {
  <span class="comment">// If we&#39;ve already been called once, then we&#39;ve already got thumbnails</span>
  <span class="comment">// displayed. There is no need to re-enumerate them, so we just go</span>
  <span class="comment">// straight to scanning for new files</span>
  <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#ace19037638e4d77c15d6f659d94f5ce7">visibilityMonitor</a>) {
    <a class="code" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a>.scan();
    <span class="keywordflow">return</span>;
  }

  <span class="comment">// Keep track of when thumbnails are onscreen and offscreen</span>
<span class="comment">/*</span>
<span class="comment">  // Tune for low memory usage and small batch jobes to fetch new</span>
<span class="comment">  // images.  Lower fps / frequent but smaller jank.</span>
<span class="comment">  var visibilityMargin = 360;</span>
<span class="comment">  var minimumScrollDelta = 1;</span>
<span class="comment">*/</span>

  <span class="comment">// Tune for fast panning for long distances, which requires larger</span>
  <span class="comment">// batch jobs.  Higher fps / infrequent but larger jank.</span>
  <span class="comment">//</span>
  <span class="comment">// These magic constants were determined as follows</span>
  <span class="comment">//  - keep &quot;a lot&quot; of images loaded:</span>
  <span class="comment">//      max 300 images = 100 rows</span>
  <span class="comment">//       = 10600px on HVGA = (10600 - 480) / 2 margins = 5060</span>
  <span class="comment">//</span>
  <span class="comment">//  - batch up as much work as possible while showing unpainted</span>
  <span class="comment">//    thumbnails as little as possible.  4000px determined by</span>
  <span class="comment">//    experimentation.  (Provides 10 rows&#39; worth loading zone.)</span>
  var visibilityMargin = 5060;
  var minimumScrollDelta = 4000;

  <a class="code" href="../../d0/da2/gallery_8js.html#ace19037638e4d77c15d6f659d94f5ce7">visibilityMonitor</a> =
    <a class="code" href="../../d7/d7e/build__stage_2email_2shared_2js_2visibility__monitor_8js.html#ab0efb05f081609be5307fea87d23e624">monitorChildVisibility</a>(thumbnails,
                           visibilityMargin,    <span class="comment">// extra space top and bottom</span>
                           minimumScrollDelta,  <span class="comment">// min scroll before we do work</span>
                           <a class="code" href="../../d0/da2/gallery_8js.html#a20faf3ee1393446ec53a3fff0f1d8a0e">thumbnailOnscreen</a>,   <span class="comment">// set background image</span>
                           <a class="code" href="../../d0/da2/gallery_8js.html#aa4068f2bdc717b6caa7bdd1260cc6ad4">thumbnailOffscreen</a>); <span class="comment">// remove background image</span>


  <span class="comment">// Handle clicks on the thumbnails we&#39;re about to create</span>
  thumbnails.addEventListener(<span class="stringliteral">&#39;click&#39;</span>, <a class="code" href="../../dd/d85/video_8js.html#a7e53b2a5efd2d199bb7a70417e3d9b75">thumbnailClickHandler</a>);

  <span class="comment">// We need to enumerate both the photo and video dbs and interleave</span>
  <span class="comment">// the files they return so that everything is in chronological order</span>
  <span class="comment">// from most recent to least recent.</span>

  <span class="comment">// Temporary arrays to hold enumerated files</span>
  var batch = [];
  var batchsize = <a class="code" href="../../d0/da2/gallery_8js.html#a998ff3d0b5e9250e5debd83bae7fc2dd">PAGE_SIZE</a>;

  <a class="code" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a>.enumerate(<span class="stringliteral">&#39;date&#39;</span>, <a class="code" href="../../d1/d04/app__install__manager_8js.html#a66d98f9009f0502b9a5ce70e907f8f27">null</a>, <span class="stringliteral">&#39;prev&#39;</span>, <span class="keyword">function</span>(fileinfo) {
    <span class="keywordflow">if</span> (fileinfo) {
      <span class="comment">// For a pick activity, don&#39;t display videos</span>
      <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#ab78d90ed7204a602090082e9126dd0d2">pendingPick</a> &amp;&amp; fileinfo.metadata.video)
        <span class="keywordflow">return</span>;

      batch.push(fileinfo);
      <span class="keywordflow">if</span> (batch.length &gt;= batchsize) {
        flush();
        batchsize *= 2;
      }
    }
    <span class="keywordflow">else</span> {
      <a class="code" href="../../d4/daf/video_2js_2view_8js.html#af9c6eaaef1f3af067f5ea1aff90ff861">done</a>();
    }
  });

  <span class="keyword">function</span> flush() {
    batch.forEach(thumb);
    batch.length = 0;
  }

  <span class="keyword">function</span> thumb(fileinfo) {
    <a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>.push(fileinfo);              <span class="comment">// remember the file</span>
    var thumbnail = <a class="code" href="../../d4/d76/camera_2js_2filmstrip_8js.html#a246682eea904b777ca4d4707f24232f2">createThumbnail</a>(<a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>.length - 1); <span class="comment">// create its thumbnail</span>
    thumbnails.appendChild(thumbnail); <span class="comment">// display the thumbnail</span>
  }

  <span class="keyword">function</span> <a class="code" href="../../d4/daf/video_2js_2view_8js.html#af9c6eaaef1f3af067f5ea1aff90ff861">done</a>() {
    flush();
    <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a>.length === 0) { <span class="comment">// If we didn&#39;t find anything</span>
      <a class="code" href="../../de/db0/music_8js.html#a06b9f891a17c6f5559d8709267729496">showOverlay</a>(<span class="stringliteral">&#39;scanning&#39;</span>);
    }
    <span class="comment">// Now that we&#39;ve enumerated all the photos and videos we already know</span>
    <span class="comment">// about go start looking for new photos and videos.</span>
    <a class="code" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a>.scan();
  }
}
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_a6d772599ba184f90212d966f0036bd7f_cgraph.svg" width="100%" height="366"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</p>

<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_a6d772599ba184f90212d966f0036bd7f_icgraph.svg" width="312" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9acc38ebcd6b6ca58ea505515224d57e"></a><!-- doxytag: member="gallery.js::ready" ref="a9acc38ebcd6b6ca58ea505515224d57e" args="(function showBody(){document.documentElement.lang=navigator.mozL10n.language.code;document.documentElement.dir=navigator.mozL10n.language.direction;document.body.classList.remove('hidden');if(!photodb) init();})" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d94/tools_2xpcwindow_2lib_2loader_8js.html#a1ab79c9277f7648d0dfe676bab65dde4">navigator</a> <a class="el" href="../../df/dc7/viewer_8js.html#abf8c988c23b2b2f5ec3f1149b44bd820">mozL10n</a> <a class="el" href="../../d8/d2f/tests_2python_2gaia-ui-tests_2gaiatest_2resources_2report_2main_8js.html#aef1ea6a0d973b3d3596eee2e910c93dc">ready</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a28338bd953bdf52348c88293ad0c30d1"></a><!-- doxytag: member="gallery.js::scrollToShowThumbnail" ref="a28338bd953bdf52348c88293ad0c30d1" args="(n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d0/da2/gallery_8js.html#a28338bd953bdf52348c88293ad0c30d1">scrollToShowThumbnail</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00566">566</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d2/d7d/jsapi_8h_source.html#l04320">n</a>.</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00589">setView()</a>.</p>
<div class="fragment"><pre class="fragment">                                  {
  var selector = <span class="stringliteral">&#39;li[data-index=&quot;&#39;</span> + <a class="code" href="../../d2/d7d/jsapi_8h.html#aa5a8b9a2d5edc8e2e7ba67d7e2ee4e69">n</a> + <span class="stringliteral">&#39;&quot;]&#39;</span>;
  var thumbnail = thumbnails.querySelector(selector);
  <span class="keywordflow">if</span> (thumbnail) {
    var screenTop = thumbnails.scrollTop;
    var screenBottom = screenTop + thumbnails.clientHeight;
    var thumbnailTop = thumbnail.offsetTop;
    var thumbnailBottom = thumbnailTop + thumbnail.offsetHeight;
    var toolbarHeight = 40; <span class="comment">// compute this dynamically?</span>

    <span class="comment">// Adjust the screen bottom up to be above the overlaid footer</span>
    screenBottom -= toolbarHeight;

    <span class="keywordflow">if</span> (thumbnailTop &lt; screenTop) {            <span class="comment">// If thumbnail is above screen</span>
      thumbnails.scrollTop = thumbnailTop;     <span class="comment">// scroll up to show it.</span>
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (thumbnailBottom &gt; screenBottom) { <span class="comment">// If thumbnail is below screen</span>
      thumbnails.scrollTop =                   <span class="comment">// scroll  down to show it</span>
        thumbnailBottom - thumbnails.clientHeight + toolbarHeight;
    }
  }
}
</pre></div>
<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_a28338bd953bdf52348c88293ad0c30d1_icgraph.svg" width="100%" height="344"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a87c564c1396bcdba1067fd5afa2a9815"></a><!-- doxytag: member="gallery.js::setView" ref="a87c564c1396bcdba1067fd5afa2a9815" args="(view)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d0/da2/gallery_8js.html#a87c564c1396bcdba1067fd5afa2a9815">setView</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>view</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00589">589</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../dd/d85/video_8js_source.html#l00273">clearSelection()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00076">currentFileIndex</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00018">currentFrame</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00064">currentView</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00053">fullscreenView</a>, <a class="el" href="../../da/d7d/sylvester_8js_source.html#l00308">i</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00019">nextFrame</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00055">pickView</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00017">previousFrame</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00566">scrollToShowThumbnail()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00051">thumbnailListView</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00052">thumbnailSelectView</a>, <a class="el" href="../../db/d80/download_8js_source.html#l00066">view()</a>, と <a class="el" href="../../d0/da2/gallery_8js_source.html#l00060">views</a>.</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00716">cropPickedImage()</a>, <a class="el" href="../../db/d0b/_image_editor_8js_source.html#l00047">editPhoto()</a>, <a class="el" href="../../db/d0b/_image_editor_8js_source.html#l00288">exitEditMode()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00434">fileDeleted()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00113">init()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00210">initDB()</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00361">showFile()</a>, と <a class="el" href="../../d0/da2/gallery_8js_source.html#l00699">startPick()</a>.</p>
<div class="fragment"><pre class="fragment">                       {
  <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#a08af05bd40494df0acb6c7ecf8fb25f7">currentView</a> === <a class="code" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>)
    <span class="keywordflow">return</span>;

  <span class="comment">// Do any necessary cleanup of the view we&#39;re exiting</span>
  <span class="keywordflow">switch</span> (<a class="code" href="../../d0/da2/gallery_8js.html#a08af05bd40494df0acb6c7ecf8fb25f7">currentView</a>) {
  <span class="keywordflow">case</span> <a class="code" href="../../d0/da2/gallery_8js.html#a98ed4b68cffd3f7a6fe97c3ab40865d5">thumbnailSelectView</a>:
    <span class="comment">// Clear the selection, if there is one</span>
    Array.forEach(thumbnails.querySelectorAll(<span class="stringliteral">&#39;.selected.thumbnail&#39;</span>),
                  <span class="keyword">function</span>(elt) { elt.classList.remove(<span class="stringliteral">&#39;selected&#39;</span>); });
    <span class="keywordflow">break</span>;
  <span class="keywordflow">case</span> <a class="code" href="../../d0/da2/gallery_8js.html#a495a99b2d5539eb2ef1cebea1d91710c">fullscreenView</a>:
    <span class="comment">// Clear the frames to release the memory they&#39;re holding and</span>
    <span class="comment">// so that we don&#39;t see a flash of the old image when we return</span>
    <span class="comment">// to fullscreen view</span>
    <a class="code" href="../../d8/df0/frames_8js.html#a5d60985775a23d0a9fc6afa50e245ddc">previousFrame</a>.clear();
    <a class="code" href="../../d8/df0/frames_8js.html#a35a1d5b2c11c745f050a319c2940c383">currentFrame</a>.clear();
    <a class="code" href="../../d8/df0/frames_8js.html#a007e837054378566ec403efc4d177e58">nextFrame</a>.clear();
    <span class="keyword">delete</span> <a class="code" href="../../d8/df0/frames_8js.html#a5d60985775a23d0a9fc6afa50e245ddc">previousFrame</a>.filename;
    <span class="keyword">delete</span> <a class="code" href="../../d8/df0/frames_8js.html#a35a1d5b2c11c745f050a319c2940c383">currentFrame</a>.filename;
    <span class="keyword">delete</span> <a class="code" href="../../d8/df0/frames_8js.html#a007e837054378566ec403efc4d177e58">nextFrame</a>.filename;

    <span class="comment">// If we&#39;re leaving fullscreen, then we were just viewing a photo</span>
    <span class="comment">// or video, so make sure its thumbnail is fully on the screen.</span>
    <span class="comment">// XXX: do we need to defer this?</span>
    <a class="code" href="../../d0/da2/gallery_8js.html#a28338bd953bdf52348c88293ad0c30d1">scrollToShowThumbnail</a>(<a class="code" href="../../d0/da2/gallery_8js.html#a4c3a1c4e1efc6022bf003bb077daca89">currentFileIndex</a>);

    <span class="keywordflow">break</span>;
  }

  <span class="comment">// Show the specified view, and hide the others</span>
  <span class="keywordflow">for</span> (var <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a> = 0; <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a> &lt; <a class="code" href="../../d0/da2/gallery_8js.html#a3ec184b947133eb14151f80d3ff05797">views</a>.length; <a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>++) {
    <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#a3ec184b947133eb14151f80d3ff05797">views</a>[<a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>] === <a class="code" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>)
      <a class="code" href="../../d0/da2/gallery_8js.html#a3ec184b947133eb14151f80d3ff05797">views</a>[<a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>].classList.remove(<span class="stringliteral">&#39;hidden&#39;</span>);
    <span class="keywordflow">else</span>
      <a class="code" href="../../d0/da2/gallery_8js.html#a3ec184b947133eb14151f80d3ff05797">views</a>[<a class="code" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>].classList.add(<span class="stringliteral">&#39;hidden&#39;</span>);
  }

  <span class="comment">// Now do setup for the view we&#39;re entering</span>
  <span class="comment">// In particular, we&#39;ve got to set the thumbnail class appropriately</span>
  <span class="comment">// for each view</span>
  <span class="keywordflow">switch</span> (<a class="code" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>) {
  <span class="keywordflow">case</span> <a class="code" href="../../d0/da2/gallery_8js.html#a3698d255731771347d7f847313d8aa7f">thumbnailListView</a>:
    thumbnails.className = <span class="stringliteral">&#39;list&#39;</span>;
    <span class="keywordflow">break</span>;
  <span class="keywordflow">case</span> <a class="code" href="../../d0/da2/gallery_8js.html#a98ed4b68cffd3f7a6fe97c3ab40865d5">thumbnailSelectView</a>:
    thumbnails.className = <span class="stringliteral">&#39;select&#39;</span>;
    <span class="comment">// Set the view header to a localized string</span>
    <a class="code" href="../../dd/d85/video_8js.html#a8504dd9a3990da74a9aa029b26e6fb1c">clearSelection</a>();
    <span class="keywordflow">break</span>;
  <span class="keywordflow">case</span> <a class="code" href="../../d0/da2/gallery_8js.html#a4020be717e9ac1015b4319904afa2dd6">pickView</a>:
    thumbnails.className = <span class="stringliteral">&#39;pick&#39;</span>;
    <span class="keywordflow">break</span>;
  <span class="keywordflow">case</span> <a class="code" href="../../d0/da2/gallery_8js.html#a495a99b2d5539eb2ef1cebea1d91710c">fullscreenView</a>:
    thumbnails.className = <span class="stringliteral">&#39;offscreen&#39;</span>;
    <span class="comment">// Show the toolbar</span>
    <a class="code" href="../../d0/da2/gallery_8js.html#a495a99b2d5539eb2ef1cebea1d91710c">fullscreenView</a>.classList.remove(<span class="stringliteral">&#39;toolbarhidden&#39;</span>);
    <span class="keywordflow">break</span>;
  <span class="keywordflow">default</span>:
    thumbnails.className = <span class="stringliteral">&#39;offscreen&#39;</span>;
    <span class="keywordflow">break</span>;
  }

  <span class="comment">// Remember the current view</span>
  <a class="code" href="../../d0/da2/gallery_8js.html#a08af05bd40494df0acb6c7ecf8fb25f7">currentView</a> = <a class="code" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>;
}
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_a87c564c1396bcdba1067fd5afa2a9815_cgraph.svg" width="542" height="227"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_a87c564c1396bcdba1067fd5afa2a9815_icgraph.svg" width="100%" height="331"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="af1ea14645dcd3a1078e952cbde544991"></a><!-- doxytag: member="gallery.js::startPick" ref="af1ea14645dcd3a1078e952cbde544991" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d0/da2/gallery_8js.html#af1ea14645dcd3a1078e952cbde544991">startPick</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00699">699</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d5/dbd/camera_2js_2camera_8js_source.html#l00003">loader</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00055">pickView</a>, と <a class="el" href="../../d0/da2/gallery_8js_source.html#l00589">setView()</a>.</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00113">init()</a>.</p>
<div class="fragment"><pre class="fragment">                     {
  <a class="code" href="../../d0/da2/gallery_8js.html#a9239ddf9f374c69f3e76ad664f18170a">pickType</a> = <a class="code" href="../../d0/da2/gallery_8js.html#ab78d90ed7204a602090082e9126dd0d2">pendingPick</a>.source.data.type;

  <span class="keywordflow">if</span> (<a class="code" href="../../d0/da2/gallery_8js.html#ab78d90ed7204a602090082e9126dd0d2">pendingPick</a>.source.data.width &amp;&amp; <a class="code" href="../../d0/da2/gallery_8js.html#ab78d90ed7204a602090082e9126dd0d2">pendingPick</a>.source.data.height) {
    <a class="code" href="../../d0/da2/gallery_8js.html#af563e56bf0e3a23b3c8c105348c40856">pickWidth</a> = <a class="code" href="../../d0/da2/gallery_8js.html#ab78d90ed7204a602090082e9126dd0d2">pendingPick</a>.source.data.width;
    <a class="code" href="../../d0/da2/gallery_8js.html#a7f0c497bd222f05f8f5903f30df8847c">pickHeight</a> = <a class="code" href="../../d0/da2/gallery_8js.html#ab78d90ed7204a602090082e9126dd0d2">pendingPick</a>.source.data.height;
  }
  <span class="keywordflow">else</span> {
    <a class="code" href="../../d0/da2/gallery_8js.html#af563e56bf0e3a23b3c8c105348c40856">pickWidth</a> = <a class="code" href="../../d0/da2/gallery_8js.html#a7f0c497bd222f05f8f5903f30df8847c">pickHeight</a> = 0;
  }
  <span class="comment">// We need frame_scripts and ImageEditor for cropping the photo</span>
  <a class="code" href="../../d5/dbd/camera_2js_2camera_8js.html#a78601e1f2fe929d6470d82a205ad2382">loader</a>.load([<span class="stringliteral">&#39;js/frame_scripts.js&#39;</span>, <span class="stringliteral">&#39;js/ImageEditor.js&#39;</span>], <span class="keyword">function</span>() {
    <a class="code" href="../../d0/da2/gallery_8js.html#a87c564c1396bcdba1067fd5afa2a9815">setView</a>(<a class="code" href="../../d0/da2/gallery_8js.html#a4020be717e9ac1015b4319904afa2dd6">pickView</a>);
  });
}
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_af1ea14645dcd3a1078e952cbde544991_cgraph.svg" width="664" height="227"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_af1ea14645dcd3a1078e952cbde544991_icgraph.svg" width="174" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa4068f2bdc717b6caa7bdd1260cc6ad4"></a><!-- doxytag: member="gallery.js::thumbnailOffscreen" ref="aa4068f2bdc717b6caa7bdd1260cc6ad4" args="(thumbnail)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d0/da2/gallery_8js.html#aa4068f2bdc717b6caa7bdd1260cc6ad4">thumbnailOffscreen</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>thumbnail</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00683">683</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d1/d04/app__install__manager_8js_source.html#l00420">null</a>.</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00345">initThumbnails()</a>.</p>
<div class="fragment"><pre class="fragment">                                       {
  <span class="keywordflow">if</span> (thumbnail.dataset.backgroundImage)
    thumbnail.style.backgroundImage = <a class="code" href="../../d1/d04/app__install__manager_8js.html#a66d98f9009f0502b9a5ce70e907f8f27">null</a>;
}
</pre></div>
<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_aa4068f2bdc717b6caa7bdd1260cc6ad4_icgraph.svg" width="496" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a20faf3ee1393446ec53a3fff0f1d8a0e"></a><!-- doxytag: member="gallery.js::thumbnailOnscreen" ref="a20faf3ee1393446ec53a3fff0f1d8a0e" args="(thumbnail)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../d0/da2/gallery_8js.html#a20faf3ee1393446ec53a3fff0f1d8a0e">thumbnailOnscreen</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>thumbnail</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00677">677</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00345">initThumbnails()</a>.</p>
<div class="fragment"><pre class="fragment">                                      {
  <span class="keywordflow">if</span> (thumbnail.dataset.backgroundImage)
    thumbnail.style.backgroundImage = thumbnail.dataset.backgroundImage;
}
</pre></div>
<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/da2/gallery_8js_a20faf3ee1393446ec53a3fff0f1d8a0e_icgraph.svg" width="496" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</p>

</div>
</div>
<hr/><h2>変数</h2>
<a class="anchor" id="aaddfccf9e6aee5cd9a61a1b35e0f38f5"></a><!-- doxytag: member="gallery.js::cropEditor" ref="aaddfccf9e6aee5cd9a61a1b35e0f38f5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#aaddfccf9e6aee5cd9a61a1b35e0f38f5">cropEditor</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00697">697</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00760">cropAndEndPick()</a>.</p>

</div>
</div>
<a class="anchor" id="a26b64dc45471a983faeb5717e6b77ec8"></a><!-- doxytag: member="gallery.js::cropURL" ref="a26b64dc45471a983faeb5717e6b77ec8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#a26b64dc45471a983faeb5717e6b77ec8">cropURL</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00696">696</a> 行で定義されています。</p>

</div>
</div>
<a class="anchor" id="ad4442b6faaf0dee1d52cfe6c9deec24d"></a><!-- doxytag: member="gallery.js::cropView" ref="ad4442b6faaf0dee1d52cfe6c9deec24d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#ad4442b6faaf0dee1d52cfe6c9deec24d">cropView</a> = $('crop-<a class="el" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>')</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00056">56</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00716">cropPickedImage()</a>.</p>

</div>
</div>
<a class="anchor" id="a4c3a1c4e1efc6022bf003bb077daca89"></a><!-- doxytag: member="gallery.js::currentFileIndex" ref="a4c3a1c4e1efc6022bf003bb077daca89" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#a4c3a1c4e1efc6022bf003bb077daca89">currentFileIndex</a> = 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00076">76</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d8/df0/frames_8js_source.html#l00093">deleteSingleItem()</a>, <a class="el" href="../../db/d0b/_image_editor_8js_source.html#l00288">exitEditMode()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00512">fileCreated()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00434">fileDeleted()</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00383">nextFile()</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00169">panHandler()</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00433">previousFile()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00589">setView()</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00361">showFile()</a>, と <a class="el" href="../../d8/df0/frames_8js_source.html#l00218">swipeHandler()</a>.</p>

</div>
</div>
<a class="anchor" id="a08af05bd40494df0acb6c7ecf8fb25f7"></a><!-- doxytag: member="gallery.js::currentView" ref="a08af05bd40494df0acb6c7ecf8fb25f7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../dd/d85/video_8js.html#a08af05bd40494df0acb6c7ecf8fb25f7">currentView</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00064">64</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00512">fileCreated()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00434">fileDeleted()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00113">init()</a>, <a class="el" href="../../d2/d52/contacts_2js_2navigation_8js_source.html#l00003">navigationStack()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00589">setView()</a>, と <a class="el" href="../../d8/df0/frames_8js_source.html#l00141">singletap()</a>.</p>

</div>
</div>
<a class="anchor" id="abfe5eb1833402ced30625fd6582536d8"></a><!-- doxytag: member="gallery.js::editedPhotoIndex" ref="abfe5eb1833402ced30625fd6582536d8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#abfe5eb1833402ced30625fd6582536d8">editedPhotoIndex</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00077">77</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../db/d0b/_image_editor_8js_source.html#l00047">editPhoto()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00512">fileCreated()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00434">fileDeleted()</a>, と <a class="el" href="../../db/d0b/_image_editor_8js_source.html#l00329">saveEditedImage()</a>.</p>

</div>
</div>
<a class="anchor" id="ada4ad1d94e1064761aeda200dbcddd02"></a><!-- doxytag: member="gallery.js::editView" ref="ada4ad1d94e1064761aeda200dbcddd02" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#ada4ad1d94e1064761aeda200dbcddd02">editView</a> = $('<a class="el" href="../../d9/d13/shared_2style_2_r_e_a_d_m_e_8md.html#a1b6362cb1eaf9d23d7ff55da0225251e">edit</a>-<a class="el" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>')</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00054">54</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../db/d0b/_image_editor_8js_source.html#l00047">editPhoto()</a>.</p>

</div>
</div>
<a class="anchor" id="a0742cac2750bccc2d88ac080fb9daa22"></a><!-- doxytag: member="gallery.js::files" ref="a0742cac2750bccc2d88ac080fb9daa22" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#a0742cac2750bccc2d88ac080fb9daa22">files</a> = []</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00074">74</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../dd/d48/_h_t_m_l_input_element_8h_source.html#l00743">mozilla::dom::MOZ_FINAL::ClearFiles()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00659">createThumbnail()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00486">deleteFile()</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00093">deleteSingleItem()</a>, <a class="el" href="../../da/ded/ds-test_8js_source.html#l00702">ds_test_enumerate()</a>, <a class="el" href="../../db/d0b/_image_editor_8js_source.html#l00047">editPhoto()</a>, <a class="el" href="../../db/d0b/_image_editor_8js_source.html#l00026">editPhotoIfCardNotFull()</a>, <a class="el" href="../../dc/d53/optimize-clean_8js_source.html#l00008">execute()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00512">fileCreated()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00434">fileDeleted()</a>, <a class="el" href="../../d5/d87/import-scripts_8js_source.html#l00003">importScripts()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00345">initThumbnails()</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00383">nextFile()</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00169">panHandler()</a>, <a class="el" href="../../db/d0b/_image_editor_8js_source.html#l00329">saveEditedImage()</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00299">setupFrameContent()</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00361">showFile()</a>, と <a class="el" href="../../d8/df0/frames_8js_source.html#l00218">swipeHandler()</a>.</p>

</div>
</div>
<a class="anchor" id="a495a99b2d5539eb2ef1cebea1d91710c"></a><!-- doxytag: member="gallery.js::fullscreenView" ref="a495a99b2d5539eb2ef1cebea1d91710c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#a495a99b2d5539eb2ef1cebea1d91710c">fullscreenView</a> = $('fullscreen-<a class="el" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>')</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00053">53</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00512">fileCreated()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00434">fileDeleted()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00113">init()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00589">setView()</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00361">showFile()</a>, と <a class="el" href="../../d8/df0/frames_8js_source.html#l00141">singletap()</a>.</p>

</div>
</div>
<a class="anchor" id="a82bac0ea52a4192fdf6f4ad005ef687d"></a><!-- doxytag: member="gallery.js::languageDirection" ref="a82bac0ea52a4192fdf6f4ad005ef687d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#a82bac0ea52a4192fdf6f4ad005ef687d">languageDirection</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00067">67</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d8/df0/frames_8js_source.html#l00218">swipeHandler()</a>.</p>

</div>
</div>
<a class="anchor" id="a78601e1f2fe929d6470d82a205ad2382"></a><!-- doxytag: member="gallery.js::loader" ref="a78601e1f2fe929d6470d82a205ad2382" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d8/d30/xpcshell-commonjs_8js.html#a78601e1f2fe929d6470d82a205ad2382">loader</a> = <a class="el" href="../../db/d15/shared_2js_2lazy__loader_8js.html#aaf5eec8afd0243eeb2166f74e472c877">LazyLoader</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00095">95</a> 行で定義されています。</p>

</div>
</div>
<a class="anchor" id="a998ff3d0b5e9250e5debd83bae7fc2dd"></a><!-- doxytag: member="gallery.js::PAGE_SIZE" ref="a998ff3d0b5e9250e5debd83bae7fc2dd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d6/da5/libpinyin_8js.html#a998ff3d0b5e9250e5debd83bae7fc2dd">PAGE_SIZE</a> = 15</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00043">43</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d6/da5/libpinyin_8js_source.html#l02638">_sysconf()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00210">initDB()</a>, と <a class="el" href="../../d0/da2/gallery_8js_source.html#l00345">initThumbnails()</a>.</p>

</div>
</div>
<a class="anchor" id="ab78d90ed7204a602090082e9126dd0d2"></a><!-- doxytag: member="gallery.js::pendingPick" ref="ab78d90ed7204a602090082e9126dd0d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../dd/d85/video_8js.html#ab78d90ed7204a602090082e9126dd0d2">pendingPick</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00692">692</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00760">cropAndEndPick()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00512">fileCreated()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00113">init()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00210">initDB()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00345">initThumbnails()</a>, と <a class="el" href="../../de/db0/music_8js_source.html#l00420">showCurrentView()</a>.</p>

</div>
</div>
<a class="anchor" id="ae763c70dbeeb5adce20b1e06f0cd1a9a"></a><!-- doxytag: member="gallery.js::photodb" ref="ae763c70dbeeb5adce20b1e06f0cd1a9a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#ae763c70dbeeb5adce20b1e06f0cd1a9a">photodb</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00086">86</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00760">cropAndEndPick()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00716">cropPickedImage()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00486">deleteFile()</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00150">doubletapOnPhoto()</a>, <a class="el" href="../../db/d0b/_image_editor_8js_source.html#l00047">editPhoto()</a>, <a class="el" href="../../db/d0b/_image_editor_8js_source.html#l00026">editPhotoIfCardNotFull()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00113">init()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00210">initDB()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00345">initThumbnails()</a>, <a class="el" href="../../db/d0b/_image_editor_8js_source.html#l00329">saveEditedImage()</a>, <a class="el" href="../../d8/df0/frames_8js_source.html#l00299">setupFrameContent()</a>, と <a class="el" href="../../d8/df0/frames_8js_source.html#l00280">transformHandler()</a>.</p>

</div>
</div>
<a class="anchor" id="a8dd2e31a3993ba9ad1d6f5731bd40bc8"></a><!-- doxytag: member="gallery.js::pickedFile" ref="a8dd2e31a3993ba9ad1d6f5731bd40bc8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#a8dd2e31a3993ba9ad1d6f5731bd40bc8">pickedFile</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00695">695</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00760">cropAndEndPick()</a>.</p>

</div>
</div>
<a class="anchor" id="a7f0c497bd222f05f8f5903f30df8847c"></a><!-- doxytag: member="gallery.js::pickHeight" ref="a7f0c497bd222f05f8f5903f30df8847c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#a7f0c497bd222f05f8f5903f30df8847c">pickHeight</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00694">694</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00760">cropAndEndPick()</a>.</p>

</div>
</div>
<a class="anchor" id="a9239ddf9f374c69f3e76ad664f18170a"></a><!-- doxytag: member="gallery.js::pickType" ref="a9239ddf9f374c69f3e76ad664f18170a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#a9239ddf9f374c69f3e76ad664f18170a">pickType</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00693">693</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00760">cropAndEndPick()</a>.</p>

</div>
</div>
<a class="anchor" id="a4020be717e9ac1015b4319904afa2dd6"></a><!-- doxytag: member="gallery.js::pickView" ref="a4020be717e9ac1015b4319904afa2dd6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#a4020be717e9ac1015b4319904afa2dd6">pickView</a> = $('<a class="el" href="../../df/dca/pickvideo_8js.html#ae4565039565fe6fb78f8bfc2479aaefe">pick</a>-<a class="el" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>')</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00055">55</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00434">fileDeleted()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00113">init()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00589">setView()</a>, と <a class="el" href="../../d0/da2/gallery_8js_source.html#l00699">startPick()</a>.</p>

</div>
</div>
<a class="anchor" id="af563e56bf0e3a23b3c8c105348c40856"></a><!-- doxytag: member="gallery.js::pickWidth" ref="af563e56bf0e3a23b3c8c105348c40856" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#af563e56bf0e3a23b3c8c105348c40856">pickWidth</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00694">694</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00760">cropAndEndPick()</a>.</p>

</div>
</div>
<a class="anchor" id="af0fd4e3510447825b3d4ef3034f756d9"></a><!-- doxytag: member="gallery.js::selectedFileNames" ref="af0fd4e3510447825b3d4ef3034f756d9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../dd/d85/video_8js.html#af0fd4e3510447825b3d4ef3034f756d9">selectedFileNames</a> = []</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00082">82</a> 行で定義されています。</p>

</div>
</div>
<a class="anchor" id="a687cffebc743e15f61c94b32f18a7ea5"></a><!-- doxytag: member="gallery.js::selectedFileNamesToBlobs" ref="a687cffebc743e15f61c94b32f18a7ea5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../dd/d85/video_8js.html#a687cffebc743e15f61c94b32f18a7ea5">selectedFileNamesToBlobs</a> = {}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00083">83</a> 行で定義されています。</p>

</div>
</div>
<a class="anchor" id="ae2475e10618961c050dcba04e8c42331"></a><!-- doxytag: member="gallery.js::strict" ref="ae2475e10618961c050dcba04e8c42331" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d1b/test-agent-server_8js.html#aab71dcc804ca4aa3ed2bf7ba887635db">use</a> <a class="el" href="../../de/dc5/jsfriendapi_8h.html#a8cddd7ed2617ebace48da2e8e44f267c">strict</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00004">4</a> 行で定義されています。</p>

</div>
</div>
<a class="anchor" id="a3698d255731771347d7f847313d8aa7f"></a><!-- doxytag: member="gallery.js::thumbnailListView" ref="a3698d255731771347d7f847313d8aa7f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#a3698d255731771347d7f847313d8aa7f">thumbnailListView</a> = $('thumbnail-<a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>-<a class="el" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>')</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00051">51</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../db/d0b/_image_editor_8js_source.html#l00288">exitEditMode()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00434">fileDeleted()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00113">init()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00210">initDB()</a>, と <a class="el" href="../../d0/da2/gallery_8js_source.html#l00589">setView()</a>.</p>

</div>
</div>
<a class="anchor" id="a98ed4b68cffd3f7a6fe97c3ab40865d5"></a><!-- doxytag: member="gallery.js::thumbnailSelectView" ref="a98ed4b68cffd3f7a6fe97c3ab40865d5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#a98ed4b68cffd3f7a6fe97c3ab40865d5">thumbnailSelectView</a> = $('thumbnail-<a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a974637b453a6c3808b55236762181a2f">select</a>-<a class="el" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>')</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00052">52</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00113">init()</a>, と <a class="el" href="../../d0/da2/gallery_8js_source.html#l00589">setView()</a>.</p>

</div>
</div>
<a class="anchor" id="a473a610b53b4a3ebf03fb3ffc7dd43b4"></a><!-- doxytag: member="gallery.js::TRANSITION_FRACTION" ref="a473a610b53b4a3ebf03fb3ffc7dd43b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#a473a610b53b4a3ebf03fb3ffc7dd43b4">TRANSITION_FRACTION</a> = 0.25</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00034">34</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d8/df0/frames_8js_source.html#l00218">swipeHandler()</a>.</p>

</div>
</div>
<a class="anchor" id="ad8d2e967e68a60d54c588d6823984541"></a><!-- doxytag: member="gallery.js::TRANSITION_SPEED" ref="ad8d2e967e68a60d54c588d6823984541" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#ad8d2e967e68a60d54c588d6823984541">TRANSITION_SPEED</a> = 0.75</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00039">39</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d8/df0/frames_8js_source.html#l00218">swipeHandler()</a>.</p>

</div>
</div>
<a class="anchor" id="ace84f873229174800558862ac30942fd"></a><!-- doxytag: member="gallery.js::videostorage" ref="ace84f873229174800558862ac30942fd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#ace84f873229174800558862ac30942fd">videostorage</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00091">91</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00486">deleteFile()</a>, <a class="el" href="../../d0/da2/gallery_8js_source.html#l00315">getVideoFile()</a>, と <a class="el" href="../../d0/da2/gallery_8js_source.html#l00210">initDB()</a>.</p>

</div>
</div>
<a class="anchor" id="a3ec184b947133eb14151f80d3ff05797"></a><!-- doxytag: member="gallery.js::views" ref="a3ec184b947133eb14151f80d3ff05797" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#a3ec184b947133eb14151f80d3ff05797">views</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>初期値:</b><div class="fragment"><pre class="fragment"> [
  <a class="code" href="../../d0/da2/gallery_8js.html#a3698d255731771347d7f847313d8aa7f">thumbnailListView</a>, <a class="code" href="../../d0/da2/gallery_8js.html#a98ed4b68cffd3f7a6fe97c3ab40865d5">thumbnailSelectView</a>, <a class="code" href="../../d0/da2/gallery_8js.html#a495a99b2d5539eb2ef1cebea1d91710c">fullscreenView</a>, <a class="code" href="../../d0/da2/gallery_8js.html#ada4ad1d94e1064761aeda200dbcddd02">editView</a>,
  <a class="code" href="../../d0/da2/gallery_8js.html#a4020be717e9ac1015b4319904afa2dd6">pickView</a>, <a class="code" href="../../d0/da2/gallery_8js.html#ad4442b6faaf0dee1d52cfe6c9deec24d">cropView</a>
]
</pre></div>
<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00060">60</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00589">setView()</a>.</p>

</div>
</div>
<a class="anchor" id="ace19037638e4d77c15d6f659d94f5ce7"></a><!-- doxytag: member="gallery.js::visibilityMonitor" ref="ace19037638e4d77c15d6f659d94f5ce7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">var <a class="el" href="../../d0/da2/gallery_8js.html#ace19037638e4d77c15d6f659d94f5ce7">visibilityMonitor</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/da2/gallery_8js_source.html">gallery.js</a> の <a class="el" href="../../d0/da2/gallery_8js_source.html#l00093">93</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/da2/gallery_8js_source.html#l00345">initThumbnails()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全て</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>データ構造</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>ネームスペース</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>ファイル</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>関数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>変数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>型定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>列挙型</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>列挙型の値</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>フレンド</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>マクロ定義</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../d0/da2/gallery_8js.html">gallery.js</a>      </li>

    <li class="footer">FxOS Code Readingに対してSat Oct 19 2013 00:55:58に生成されました。
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
