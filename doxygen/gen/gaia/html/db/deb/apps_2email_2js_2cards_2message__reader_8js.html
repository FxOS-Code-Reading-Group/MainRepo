<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>FxOS Code Reading: message_reader.js</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">FxOS Code Reading
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- 作成： Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'検索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>メインページ</span></a></li>
      <li><a href="../../pages.html"><span>関連ページ</span></a></li>
      <li><a href="../../modules.html"><span>モジュール</span></a></li>
      <li><a href="../../namespaces.html"><span>パッケージ</span></a></li>
      <li><a href="../../annotated.html"><span>データ構造</span></a></li>
      <li class="current"><a href="../../files.html"><span>ファイル</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>ファイル一覧</span></a></li>
      <li><a href="../../globals.html"><span>グローバル</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('db/deb/apps_2email_2js_2cards_2message__reader_8js.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">関数</a>  </div>
  <div class="headertitle">
<div class="title">message_reader.js</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="../../db/deb/apps_2email_2js_2cards_2message__reader_8js_source.html">ソースコードを見る。</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
関数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/deb/apps_2email_2js_2cards_2message__reader_8js.html#a3b8e24ed5cbd3bd553e63ef069b21880">define</a> (<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>){var <a class="el" href="../../d1/d1f/shared_2js_2mime__mapper_8js.html#a9b930e9b34b95fa32e6b47e7d2442a72">MimeMapper</a>, templateNode=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('tmpl!./message_reader.html'), msgDeleteConfirmNode=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('tmpl!./<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>/delete_confirm.html'), msgContactMenuNode=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('tmpl!./<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>/contact_menu.html'), msgReplyMenuNode=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('tmpl!./<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>/reply_menu.html'), msgBrowseConfirmNode=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('tmpl!./<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>/browse_confirm.html'), msgPeepBubbleNode=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('tmpl!./<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>/peep_bubble.html'), msgAttachmentItemNode=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('tmpl!./<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>/attachment_item.html'), msgAttachmentDisabledConfirmNode=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('tmpl!./<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>/attachment_disabled_confirm.html'), common=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('mail_common'), <a class="el" href="../../d9/d04/expat_8h.html#ac517f0c27408fbd365e7dd34e032faca">model</a>=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('<a class="el" href="../../d9/d04/expat_8h.html#ac517f0c27408fbd365e7dd34e032faca">model</a>'), evt=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('evt'), iframeShims=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('iframe_shims'), Marquee=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('marquee'), <a class="el" href="../../df/dc7/viewer_8js.html#abf8c988c23b2b2f5ec3f1149b44bd820">mozL10n</a>=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('l10n!'), Cards=common.Cards, Toaster=common.Toaster, <a class="el" href="../../d9/d71/system_2camera_2js_2confirm_8js.html#a62ff52c410e9de0d9973e5297755e83c">ConfirmDialog</a>=<a class="el" href="../../d9/d71/system_2camera_2js_2confirm_8js.html#a62ff52c410e9de0d9973e5297755e83c">common.ConfirmDialog</a>, displaySubject=common.displaySubject, prettyDate=common.prettyDate, prettyFileSize=common.prettyFileSize;var CONTENT_TYPES_TO_CLASS_NAMES=[<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>, '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-body-<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a4a1b5640b674da15d6f1b87899e53789">content</a>', '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-body-signature', '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-body-leadin', <a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>, '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-body-disclaimer', '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-body-<a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>', '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-body-product', '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-body-ads'];var CONTENT_QUOTE_CLASS_NAMES=[ '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-body-q1', '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-body-q2', '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-body-q3', '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-body-q4', '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-body-q5', '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-body-q6', '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-body-q7', '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-body-q8', '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-body-q9'];var MAX_QUOTE_CLASS_NAME= '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-body-qmax';<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> MessageReaderCard(domNode, <a class="el" href="../../db/da2/pripcsem_8h.html#a5ffbd19d0a0b87f9ff15e7d0c4410984">mode</a>, <a class="el" href="../../d2/d7d/jsapi_8h.html#a52c9936fee3329d49b2cdede9b0fd7c8">args</a>){<a class="el" href="../../d1/d04/app__install__manager_8js.html#a7345f7c14b7ddbcc9efdc293d79bf303">evt.Emitter.call</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>);this.domNode=domNode;this.messageSuid=args.messageSuid;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(args.header){this._setHeader(args.header);}else{model.latestOnce('folder', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(folder){var messagesSlice=model.api.viewFolderMessages(folder);<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> <a class="el" href="../../da/dab/system_2camera_2js_2filmstrip_8js.html#a30a5f1efdb2e5f6d5981b81ea3205a55">clear</a>(){<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a10a06623d857e96b7da92aac74d62d34">messagesSlice.die</a>();messagesSlice=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>;}messagesSlice.onsplice=(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(<a class="el" href="../../d2/d7d/jsapi_8h.html#aafd95f8c7a99b9189ede7cdf0871ebe8">index</a>, howMany, addedItems, requested, moreExpected){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!messagesSlice) <a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!this.header &amp;&amp;addedItems &amp;&amp;<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">addedItems.length</a>){addedItems.some(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(item){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">item.id</a>===this.messageSuid){this._setHeader(item);<a class="el" href="../../da/dab/system_2camera_2js_2filmstrip_8js.html#a30a5f1efdb2e5f6d5981b81ea3205a55">clear</a>();<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>;}}.<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>));<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(messagesSlice &amp;&amp;messagesSlice.atTop &amp;&amp;!this.header &amp;&amp;args.backOnMissingMessage){<a class="el" href="../../da/dab/system_2camera_2js_2filmstrip_8js.html#a30a5f1efdb2e5f6d5981b81ea3205a55">clear</a>();this.onBack();}}}).<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>);}.<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>));}this.htmlBodyNodes=[];this._on('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-back-btn', 'click', 'onBack', <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>);this._on('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-reply-btn', 'click', 'onReplyMenu');this._on('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-delete-btn', 'click', 'onDelete');this._on('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../da/dce/details__test_8js.html#a6ae307f1c7e49512089a0b8585e8ad83">star</a>-btn', 'click', 'onToggleStar');this._on('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-move-btn', 'click', 'onMove');this._on('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-envelope-bar', 'click', 'onEnvelopeClick');this._on('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-reader-<a class="el" href="../../db/d6b/make__gaia__shared_8js.html#ac5aa547163f784b68be607a47eb170b1">load</a>-infobar', 'click', 'onLoadBarClick');this.disableReply();this.scrollContainer=domNode.getElementsByClassName('scrollregion-below-header')[0];this.handleBodyChange=<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.handleBodyChange.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>);}<a class="el" href="../../d6/dec/mocha-bin_8js.html#a240a06b4dda3a9e2e025ed5792cd5f4e">MessageReaderCard.prototype</a>={_contextMenuType:{VIEW_CONTACT:1, CREATE_CONTACT:2, ADD_TO_CONTACT:4, REPLY:8, NEW_MESSAGE:16}, _on:function(className, eventName, method, skipProtection){this.domNode.getElementsByClassName(className)[0].<a class="el" href="../../d1/d51/test__external__apps_2packstubtest_2js_2app_8js.html#ac189c42168797aa80d7a298a9394ff0b">addEventListener</a>(eventName, <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(evt){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this.header||skipProtection) <a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> <a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>[method](evt);}.<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>), <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);}, _setHeader:function(header){this.header=header.makeCopy();this.hackMutationHeader=header;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!this.header.isRead) this.header.setRead(<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>);<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this.hackMutationHeader.isStarred) this.domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../da/dce/details__test_8js.html#a6ae307f1c7e49512089a0b8585e8ad83">star</a>-btn')[0].<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">classList.add</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-btn-active');<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a77912f28da5efe73d20f6c0c487bac9f">this.emit</a>('header');}, postInsert:function(){this.latestOnce('header', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){this.buildHeaderDom(this.domNode);this.header.getBody({downloadBodyReps:true}, <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(body){this.body=body;<a class="el" href="../../db/d0b/_image_editor_8js.html#a7f35c89c0669debd60f931b98aeffd06">body.onchange</a>=this.handleBodyChange;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(body.bodyRepsDownloaded){this.buildBodyDom();}}.<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>));}.<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>));}, handleBodyChange:function(evt){<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#aba983438655021425112777c0e7ebbe8">switch</a>(evt.changeType){case 'bodyReps':<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this.body.bodyRepsDownloaded){this.buildBodyDom();}<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a91cf6fbebedd86150a36e5ac3d5d3bfc">break</a>;}}, onBack:function(<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>){Cards.removeCardAndSuccessors(this.domNode, 'animate');}, reply:function(){Cards.eatEventsUntilNextCard();var composer=this.header.replyToMessage(<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>, <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){Cards.pushCard('compose', 'default', 'animate',{composer:composer});});}, replyAll:function(){Cards.eatEventsUntilNextCard();var composer=this.header.replyToMessage('all', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){Cards.pushCard('compose', 'default', 'animate',{composer:composer});});}, forward:function(){var needToPrompt=this.header.hasAttachments||this.body.embeddedImageCount &gt; 0;var forwardMessage=(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){Cards.eatEventsUntilNextCard();var composer=this.header.forwardMessage('<a class="el" href="../../d6/d92/cdefs_8h.html#a00d24c7231be28dbaf71f5408f30e44c">inline</a>', <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){Cards.pushCard('compose', 'default', 'animate',{composer:composer});});}.<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>));<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(needToPrompt){var <a class="el" href="../../d1/d04/app__install__manager_8js.html#a888e6068bf00699dfddf2b6ee25e6c7a">dialog</a>=<a class="el" href="../../d2/da5/camera_2test_2unit_2mock__audio_8js.html#a40c9d60cba69319e5d8e135a3b36356e">msgAttachmentDisabledConfirmNode.cloneNode</a>(<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>);<a class="el" href="../../db/df4/geoloc_8js.html#a34b2bb38da6ac84e5708382e03478900">ConfirmDialog.show</a>(<a class="el" href="../../d1/d04/app__install__manager_8js.html#a888e6068bf00699dfddf2b6ee25e6c7a">dialog</a>,{id: '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-attachment-disabled-<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">ok</a>', handler:function(){forwardMessage();}},{id: '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-attachment-disabled-<a class="el" href="../../dc/d35/inline-receiver_8js.html#a01de14b323a40639980004403daa8432">cancel</a>', handler:null});}else{forwardMessage();}}, canReplyAll:function(){var myAddresses=model.account.identities.map(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(ident){<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> <a class="el" href="../../df/d9e/prnetdb_8h.html#a906995422a64396276c50a754ed3d21e">ident.address</a>;});var otherAddresses=(<a class="el" href="../../da/d32/prio_8h.html#a5d467a63df9ff99d33d6749038f6f421">this.header.to</a>||[]).concat(this.header.cc||[]);<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this.header.replyTo){<a class="el" href="../../d5/da4/preferences_8js.html#a04cdfd02512383b1feea0e6fa7f5d3a3">otherAddresses.push</a>(this.header.replyTo.author);}<a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a089b2988a149c0d135aaab57e2231481">for</a>(var <a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>=0;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>&lt; <a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">otherAddresses.length</a>;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>++){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../d4/d23/binary__string__view_8js.html#a78826d1185ecdcfc63deffaedf15c7bd">myAddresses.indexOf</a>(otherAddresses[<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>].<a class="el" href="../../df/d9e/prnetdb_8h.html#a906995422a64396276c50a754ed3d21e">address</a>)==-1){<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>;}}<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>;}, onReplyMenu:function(<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>){var <a class="el" href="../../d2/d7d/jsapi_8h.html#a0b8f0c0e9994662d9e96627991a9cbf1">contents</a>=<a class="el" href="../../d2/da5/camera_2test_2unit_2mock__audio_8js.html#a40c9d60cba69319e5d8e135a3b36356e">msgReplyMenuNode.cloneNode</a>(<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>);document.body.appendChild(<a class="el" href="../../d2/d7d/jsapi_8h.html#a0b8f0c0e9994662d9e96627991a9cbf1">contents</a>);var formSubmit=(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(evt){<a class="el" href="../../d1/d04/app__install__manager_8js.html#a5ebdda199bee63b9cb8dc969a17d4a9e">document.body.removeChild</a>(<a class="el" href="../../d2/d7d/jsapi_8h.html#a0b8f0c0e9994662d9e96627991a9cbf1">contents</a>);<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#aba983438655021425112777c0e7ebbe8">switch</a>(evt.explicitOriginalTarget.className){case '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-reply-menu-reply':this.reply();<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a91cf6fbebedd86150a36e5ac3d5d3bfc">break</a>;case '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-reply-menu-reply-all':this.replyAll();<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a91cf6fbebedd86150a36e5ac3d5d3bfc">break</a>;case '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-reply-menu-<a class="el" href="../../d3/d91/j3d_8js.html#a7aa8677bee3f72e184e70ef89a16ea50">forward</a>':<a class="el" href="../../d3/d91/j3d_8js.html#a7aa8677bee3f72e184e70ef89a16ea50">this.forward</a>();<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a91cf6fbebedd86150a36e5ac3d5d3bfc">break</a>;case '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-reply-menu-<a class="el" href="../../dc/d35/inline-receiver_8js.html#a01de14b323a40639980004403daa8432">cancel</a>':<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a91cf6fbebedd86150a36e5ac3d5d3bfc">break</a>;}<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>;}).<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>);<a class="el" href="../../d1/d51/test__external__apps_2packstubtest_2js_2app_8js.html#ac189c42168797aa80d7a298a9394ff0b">contents.addEventListener</a>('submit', formSubmit);<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!this.canForward()){<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9bd72b771a78ff04c5bb1d670f034005">contents.querySelector</a>('.<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-reply-menu-<a class="el" href="../../d3/d91/j3d_8js.html#a7aa8677bee3f72e184e70ef89a16ea50">forward</a>').<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">classList.add</a>('collapsed');}<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!this.canReplyAll()){<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9bd72b771a78ff04c5bb1d670f034005">contents.querySelector</a>('.<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-reply-menu-reply-all').<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">classList.add</a>('collapsed');}}, onDelete:function(){var <a class="el" href="../../d1/d04/app__install__manager_8js.html#a888e6068bf00699dfddf2b6ee25e6c7a">dialog</a>=<a class="el" href="../../d2/da5/camera_2test_2unit_2mock__audio_8js.html#a40c9d60cba69319e5d8e135a3b36356e">msgDeleteConfirmNode.cloneNode</a>(<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>);<a class="el" href="../../db/df4/geoloc_8js.html#a34b2bb38da6ac84e5708382e03478900">ConfirmDialog.show</a>(<a class="el" href="../../d1/d04/app__install__manager_8js.html#a888e6068bf00699dfddf2b6ee25e6c7a">dialog</a>,{id: '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-delete-<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">ok</a>', handler:function(){var op=this.header.deleteMessage();Toaster.logMutation(op, <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>);Cards.removeCardAndSuccessors(this.domNode, 'animate');}.<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>)},{id: '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-delete-<a class="el" href="../../dc/d35/inline-receiver_8js.html#a01de14b323a40639980004403daa8432">cancel</a>', handler:null});}, onToggleStar:function(){var <a class="el" href="../../d3/d4b/lockscreen_8js.html#a56a6742e738e925221d41ea45da5851d">button</a>=this.domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../da/dce/details__test_8js.html#a6ae307f1c7e49512089a0b8585e8ad83">star</a>-btn')[0];<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!this.hackMutationHeader.isStarred) <a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">button.classList.add</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-btn-active');else <a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">button.classList.remove</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-btn-active');this.hackMutationHeader.isStarred=!this.hackMutationHeader.isStarred;this.header.setStarred(this.hackMutationHeader.isStarred);}, onMove:function(){Cards.folderSelector(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(folder){var op=this.header.moveMessage(folder);Toaster.logMutation(op, <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>);Cards.removeCardAndSuccessors(this.domNode, 'animate');}.<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>));}, onEnvelopeClick:function(<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>){var <a class="el" href="../../d9/d04/expat_8h.html#acfcb72e11f425a604663d645d2a4ea80">target</a>=<a class="el" href="../../de/dc5/jsfriendapi_8h.html#a27a788fa9b193e3d4e5eaccf06f44683">event.target</a>;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!target.classList.contains('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-peep-bubble')){<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;}this.onPeepClick(<a class="el" href="../../d9/d04/expat_8h.html#acfcb72e11f425a604663d645d2a4ea80">target</a>);}, onPeepClick:function(<a class="el" href="../../d9/d04/expat_8h.html#acfcb72e11f425a604663d645d2a4ea80">target</a>){var <a class="el" href="../../d2/d7d/jsapi_8h.html#a0b8f0c0e9994662d9e96627991a9cbf1">contents</a>=<a class="el" href="../../d2/da5/camera_2test_2unit_2mock__audio_8js.html#a40c9d60cba69319e5d8e135a3b36356e">msgContactMenuNode.cloneNode</a>(<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>);var peep=target.peep;var headerNode=contents.getElementsByTagName('header')[0];<a class="el" href="../../da/db6/ime__test_8js.html#a499aeb7e1826da3a383e443025bfc846">Marquee.setup</a>(<a class="el" href="../../df/d9e/prnetdb_8h.html#a906995422a64396276c50a754ed3d21e">peep.address</a>, headerNode);document.body.appendChild(<a class="el" href="../../d2/d7d/jsapi_8h.html#a0b8f0c0e9994662d9e96627991a9cbf1">contents</a>);Marquee.activate('alternate', 'ease');var formSubmit=(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(evt){<a class="el" href="../../d1/d04/app__install__manager_8js.html#a5ebdda199bee63b9cb8dc969a17d4a9e">document.body.removeChild</a>(<a class="el" href="../../d2/d7d/jsapi_8h.html#a0b8f0c0e9994662d9e96627991a9cbf1">contents</a>);<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#aba983438655021425112777c0e7ebbe8">switch</a>(evt.explicitOriginalTarget.className){case '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../da/dce/details__test_8js.html#abbe82a925239cd8211cf7e835d3d20e1">contact</a>-menu-new':Cards.pushCard('compose', 'default', 'animate',{composerData:{message:this.header, onComposer:function(composer){<a class="el" href="../../da/d32/prio_8h.html#a5d467a63df9ff99d33d6749038f6f421">composer.to</a>=[{<a class="el" href="../../df/d9e/prnetdb_8h.html#a906995422a64396276c50a754ed3d21e">address:peep.address</a>, <a class="el" href="../../de/d81/xpt__struct_8h.html#a1956a27e1e0205d6704940d480413e03">name:peep.name</a>}];}}});<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a91cf6fbebedd86150a36e5ac3d5d3bfc">break</a>;case '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../da/dce/details__test_8js.html#abbe82a925239cd8211cf7e835d3d20e1">contact</a>-menu-<a class="el" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>':var <a class="el" href="../../de/dc7/share-receiver_8js.html#add7056b1c8a53d2db94122b6cd76b964">activity</a>=new MozActivity({name: '<a class="el" href="../../da/d84/openvideo_8js.html#a2a6896c38bfcbba014743ee706623b5d">open</a>', data:{type: 'webcontacts/<a class="el" href="../../da/dce/details__test_8js.html#abbe82a925239cd8211cf7e835d3d20e1">contact</a>', params:{ '<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">id</a>':peep.contactId}}});<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a91cf6fbebedd86150a36e5ac3d5d3bfc">break</a>;case '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../da/dce/details__test_8js.html#abbe82a925239cd8211cf7e835d3d20e1">contact</a>-menu-<a class="el" href="../../d1/dce/utils_81_83_8js.html#ab92647390e7481607cad94f9c4cf38f0">create</a>-<a class="el" href="../../da/dce/details__test_8js.html#abbe82a925239cd8211cf7e835d3d20e1">contact</a>':var <a class="el" href="../../d8/d28/prtime_8h.html#a4ad646d0ee2fc69a53b50783ca7465dc">params</a>={ 'email':<a class="el" href="../../df/d9e/prnetdb_8h.html#a906995422a64396276c50a754ed3d21e">peep.address</a>};<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#a1956a27e1e0205d6704940d480413e03">peep.name</a>) params.givenName=<a class="el" href="../../de/d81/xpt__struct_8h.html#a1956a27e1e0205d6704940d480413e03">peep.name</a>;var <a class="el" href="../../de/dc7/share-receiver_8js.html#add7056b1c8a53d2db94122b6cd76b964">activity</a>=new MozActivity({name: 'new', data:{type: 'webcontacts/<a class="el" href="../../da/dce/details__test_8js.html#abbe82a925239cd8211cf7e835d3d20e1">contact</a>', params:params}});<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a91cf6fbebedd86150a36e5ac3d5d3bfc">break</a>;case '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../da/dce/details__test_8js.html#abbe82a925239cd8211cf7e835d3d20e1">contact</a>-menu-<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">add</a>-<a class="el" href="../../da/d32/prio_8h.html#a5d467a63df9ff99d33d6749038f6f421">to</a>-existing-<a class="el" href="../../da/dce/details__test_8js.html#abbe82a925239cd8211cf7e835d3d20e1">contact</a>':var <a class="el" href="../../de/dc7/share-receiver_8js.html#add7056b1c8a53d2db94122b6cd76b964">activity</a>=new MozActivity({name: '<a class="el" href="../../dd/d6d/mock__spinner_8js.html#ab10b009b0da48f61217a18daf8e20cd8">update</a>', data:{type: 'webcontacts/<a class="el" href="../../da/dce/details__test_8js.html#abbe82a925239cd8211cf7e835d3d20e1">contact</a>', params:{ 'email':<a class="el" href="../../df/d9e/prnetdb_8h.html#a906995422a64396276c50a754ed3d21e">peep.address</a>}}});<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a91cf6fbebedd86150a36e5ac3d5d3bfc">break</a>;case '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../da/dce/details__test_8js.html#abbe82a925239cd8211cf7e835d3d20e1">contact</a>-menu-reply':var composer=this.header.replyToMessage(<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>, <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){Cards.pushCard('compose', 'default', 'animate',{composer:composer});});<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a91cf6fbebedd86150a36e5ac3d5d3bfc">break</a>;}<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>;}).<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>);<a class="el" href="../../d1/d51/test__external__apps_2packstubtest_2js_2app_8js.html#ac189c42168797aa80d7a298a9394ff0b">contents.addEventListener</a>('submit', formSubmit);var contextMenuOptions=this._contextMenuType.NEW_MESSAGE;var messageType=<a class="el" href="../../de/d81/xpt__struct_8h.html#ac827fa5fbcdd05dd9ed05984a80679b8">peep.type</a>;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(messageType=== 'from') contextMenuOptions|=this._contextMenuType.REPLY;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(peep.isContact){contextMenuOptions|=this._contextMenuType.VIEW_CONTACT;}else{contextMenuOptions|=this._contextMenuType.CREATE_CONTACT;contextMenuOptions|=this._contextMenuType.ADD_TO_CONTACT;}<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(contextMenuOptions &amp;this._contextMenuType.VIEW_CONTACT) <a class="el" href="../../d1/d04/app__install__manager_8js.html#a9bd72b771a78ff04c5bb1d670f034005">contents.querySelector</a>('.<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../da/dce/details__test_8js.html#abbe82a925239cd8211cf7e835d3d20e1">contact</a>-menu-<a class="el" href="../../db/d80/download_8js.html#acc4e419f5bedc9e697af56e25c615638">view</a>').<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">classList.remove</a>('collapsed');<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(contextMenuOptions &amp;this._contextMenuType.CREATE_CONTACT) <a class="el" href="../../d1/d04/app__install__manager_8js.html#a9bd72b771a78ff04c5bb1d670f034005">contents.querySelector</a>('.<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../da/dce/details__test_8js.html#abbe82a925239cd8211cf7e835d3d20e1">contact</a>-menu-<a class="el" href="../../d1/dce/utils_81_83_8js.html#ab92647390e7481607cad94f9c4cf38f0">create</a>-<a class="el" href="../../da/dce/details__test_8js.html#abbe82a925239cd8211cf7e835d3d20e1">contact</a>').<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">classList.remove</a>('collapsed');<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(contextMenuOptions &amp;this._contextMenuType.ADD_TO_CONTACT) <a class="el" href="../../d1/d04/app__install__manager_8js.html#a9bd72b771a78ff04c5bb1d670f034005">contents.querySelector</a>('.<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../da/dce/details__test_8js.html#abbe82a925239cd8211cf7e835d3d20e1">contact</a>-menu-<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">add</a>-<a class="el" href="../../da/d32/prio_8h.html#a5d467a63df9ff99d33d6749038f6f421">to</a>-existing-<a class="el" href="../../da/dce/details__test_8js.html#abbe82a925239cd8211cf7e835d3d20e1">contact</a>').<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">classList.remove</a>('collapsed');<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(contextMenuOptions &amp;this._contextMenuType.REPLY) <a class="el" href="../../d1/d04/app__install__manager_8js.html#a9bd72b771a78ff04c5bb1d670f034005">contents.querySelector</a>('.<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../da/dce/details__test_8js.html#abbe82a925239cd8211cf7e835d3d20e1">contact</a>-menu-reply').<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">classList.remove</a>('collapsed');<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(contextMenuOptions &amp;this._contextMenuType.NEW_MESSAGE) <a class="el" href="../../d1/d04/app__install__manager_8js.html#a9bd72b771a78ff04c5bb1d670f034005">contents.querySelector</a>('.<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../da/dce/details__test_8js.html#abbe82a925239cd8211cf7e835d3d20e1">contact</a>-menu-new').<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">classList.remove</a>('collapsed');}, onLoadBarClick:function(<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>){var <a class="el" href="../../df/d44/permission__manager_8js.html#a67b9624a73d0c7dbd44bc7b41817b579">self</a>=<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>;var loadBar=this.domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-reader-<a class="el" href="../../db/d6b/make__gaia__shared_8js.html#ac5aa547163f784b68be607a47eb170b1">load</a>-infobar')[0];<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!this.body.embeddedImagesDownloaded){this.body.downloadEmbeddedImages(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!self.domNode) <a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;<a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a089b2988a149c0d135aaab57e2231481">for</a>(var <a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>=0;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>&lt; <a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">self.htmlBodyNodes.length</a>;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>++){self.body.showEmbeddedImages(self.htmlBodyNodes[<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>], self.iframeResizeHandler);}});<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">loadBar.classList.add</a>('collapsed');}else{<a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a089b2988a149c0d135aaab57e2231481">for</a>(var <a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>=0;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>&lt; <a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">this.htmlBodyNodes.length</a>;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>++){this.body.showExternalImages(this.htmlBodyNodes[<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>], this.iframeResizeHandler);}<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">loadBar.classList.add</a>('collapsed');}}, getAttachmentBlob:function(attachment, <a class="el" href="../../de/dc5/jsfriendapi_8h.html#ae9494ad8646a84b50bd3446d72433e82">callback</a>){try{var storageType=attachment._file[0];var <a class="el" href="../../de/d8f/jsdebug_8h.html#abc8430424b9e64b65bfdb1fbeeccc2d3">filename</a>=attachment._file[1];var storage=navigator.getDeviceStorage(storageType);var getreq=<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#a18697261a961b9d0efde405b5a2b244f">storage.get</a>(<a class="el" href="../../de/d8f/jsdebug_8h.html#abc8430424b9e64b65bfdb1fbeeccc2d3">filename</a>);<a class="el" href="../../d5/d35/tools_2xpcwindow_2lib_2window_2window_8js.html#a967fa8bfed0d474ca27756b00f6abf8e">getreq.onerror</a>=<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){console.warn('Could not <a class="el" href="../../da/d84/openvideo_8js.html#a2a6896c38bfcbba014743ee706623b5d">open</a> attachment file: ', <a class="el" href="../../de/d8f/jsdebug_8h.html#abc8430424b9e64b65bfdb1fbeeccc2d3">filename</a>, <a class="el" href="../../de/d81/xpt__struct_8h.html#a1956a27e1e0205d6704940d480413e03">getreq.error.name</a>);};<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a845d7a743d9d72d08f80a15338dd1099">getreq.onsuccess</a>=<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){var blob=<a class="el" href="../../d8/d64/ns_u_r_l_helper_8h.html#ad4dc7d3fd716004895ed4c669af1c61c">getreq.result</a>;<a class="el" href="../../de/dc5/jsfriendapi_8h.html#ae9494ad8646a84b50bd3446d72433e82">callback</a>(blob);};}<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#af39c2275c702dbe367eb69898156da2a">catch</a>(ex){console.warn('Exception getting attachment from device storage:', attachment._file, '\<a class="el" href="../../d2/d7d/jsapi_8h.html#aa5a8b9a2d5edc8e2e7ba67d7e2ee4e69">n</a>', ex, '\<a class="el" href="../../d2/d7d/jsapi_8h.html#aa5a8b9a2d5edc8e2e7ba67d7e2ee4e69">n</a>', <a class="el" href="../../d6/d1b/pprthred_8h.html#afe76c3c951fe40bd646fbf0b89cbcd17">ex.stack</a>);}}, onDownloadAttachmentClick:function(<a class="el" href="../../df/db4/_h_i_s_t_o_r_y_8md.html#a766be2d162a033dbb9c6a21d3a0175d9">node</a>, attachment){<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#aa17b0309120bc464173f9aff7b5ec294">node.setAttribute</a>('<a class="el" href="../../d2/df8/prthread_8h.html#a22ec211475b54a8de0468990ea9654da">state</a>', 'downloading');<a class="el" href="../../d7/d13/mock__updatable_8js.html#ab9b84e146e6d762e377175efdca01924">attachment.download</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> downloaded(){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!attachment._file) <a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#aa17b0309120bc464173f9aff7b5ec294">node.setAttribute</a>('<a class="el" href="../../d2/df8/prthread_8h.html#a22ec211475b54a8de0468990ea9654da">state</a>', 'downloaded');});}, onViewAttachmentClick:function(<a class="el" href="../../df/db4/_h_i_s_t_o_r_y_8md.html#a766be2d162a033dbb9c6a21d3a0175d9">node</a>, attachment){<a class="el" href="../../d9/d43/membuster_8js.html#aad81d14d4c8eea114056d7dc1f18f9b7">console.log</a>('trying <a class="el" href="../../da/d32/prio_8h.html#a5d467a63df9ff99d33d6749038f6f421">to</a> <a class="el" href="../../da/d84/openvideo_8js.html#a2a6896c38bfcbba014743ee706623b5d">open</a>', attachment._file, 'type:', attachment.mimetype);<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!attachment._file) <a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(attachment.isDownloaded){this.getAttachmentBlob(attachment, <a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(blob){try{<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!blob){throw new <a class="el" href="../../dc/d06/calendar_2js_2error_8js.html#abd05c43175d3c93c6889542cefc822f3">Error</a>('Blob does not exist');}var extension=attachment.filename.split('.').pop();var originalType=<a class="el" href="../../de/d81/xpt__struct_8h.html#ac827fa5fbcdd05dd9ed05984a80679b8">blob.type</a>||attachment.mimetype;var mappedType=(MimeMapper.isSupportedType(originalType))?originalType:MimeMapper.guessTypeFromExtension(extension);var <a class="el" href="../../de/dc7/share-receiver_8js.html#add7056b1c8a53d2db94122b6cd76b964">activity</a>=new MozActivity({name: '<a class="el" href="../../da/d84/openvideo_8js.html#a2a6896c38bfcbba014743ee706623b5d">open</a>', data:{type:mappedType, blob:blob}});<a class="el" href="../../d5/d35/tools_2xpcwindow_2lib_2window_2window_8js.html#a967fa8bfed0d474ca27756b00f6abf8e">activity.onerror</a>=<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){console.warn('Problem with&quot;open&quot;activity', <a class="el" href="../../de/d81/xpt__struct_8h.html#a1956a27e1e0205d6704940d480413e03">activity.error.name</a>);};<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a845d7a743d9d72d08f80a15338dd1099">activity.onsuccess</a>=<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){<a class="el" href="../../d9/d43/membuster_8js.html#aad81d14d4c8eea114056d7dc1f18f9b7">console.log</a>('&quot;open&quot;activity allegedly <a class="el" href="../../d2/d7d/jsapi_8h.html#aab768b4377a152e966251e2f159b3d5e">succeeded</a>');};}<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#af39c2275c702dbe367eb69898156da2a">catch</a>(ex){console.warn('Problem creating&quot;open&quot;activity:', ex, '\<a class="el" href="../../d2/d7d/jsapi_8h.html#aa5a8b9a2d5edc8e2e7ba67d7e2ee4e69">n</a>', <a class="el" href="../../d6/d1b/pprthred_8h.html#afe76c3c951fe40bd646fbf0b89cbcd17">ex.stack</a>);}});}}, onHyperlinkClick:function(<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>, linkNode, linkUrl, linkText){var <a class="el" href="../../d1/d04/app__install__manager_8js.html#a888e6068bf00699dfddf2b6ee25e6c7a">dialog</a>=<a class="el" href="../../d2/da5/camera_2test_2unit_2mock__audio_8js.html#a40c9d60cba69319e5d8e135a3b36356e">msgBrowseConfirmNode.cloneNode</a>(<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>);var <a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a4a1b5640b674da15d6f1b87899e53789">content</a>=dialog.getElementsByTagName('<a class="el" href="../../dd/dc2/plarenas_8h.html#a117104b82864d3b23ec174af6d392709">p</a>')[0];<a class="el" href="../../d3/d4b/lockscreen_8js.html#a231b448a4b70e9035748897db2fa1c2a">content.textContent</a>=<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#a18697261a961b9d0efde405b5a2b244f">mozL10n.get</a>('browse-<a class="el" href="../../da/d32/prio_8h.html#a5d467a63df9ff99d33d6749038f6f421">to</a>-<a class="el" href="../../de/d8f/jsdebug_8h.html#a39bb9861b2cb39f94badb5db778de746">url</a>-prompt',{url:linkUrl});<a class="el" href="../../db/df4/geoloc_8js.html#a34b2bb38da6ac84e5708382e03478900">ConfirmDialog.show</a>(<a class="el" href="../../d1/d04/app__install__manager_8js.html#a888e6068bf00699dfddf2b6ee25e6c7a">dialog</a>,{id: '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-browse-<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">ok</a>', handler:function(){<a class="el" href="../../da/d84/openvideo_8js.html#a2a6896c38bfcbba014743ee706623b5d">window.open</a>(linkUrl, '_blank');}.<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>)},{id: '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-browse-<a class="el" href="../../dc/d35/inline-receiver_8js.html#a01de14b323a40639980004403daa8432">cancel</a>', handler:null});}, _populatePlaintextBodyNode:function(bodyNode, rep){<a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a089b2988a149c0d135aaab57e2231481">for</a>(var <a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>=0;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>&lt; <a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">rep.length</a>;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>+=2){var <a class="el" href="../../df/db4/_h_i_s_t_o_r_y_8md.html#a766be2d162a033dbb9c6a21d3a0175d9">node</a>=document.createElement('div'), cname;var etype=rep[<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>]&amp;0xf, rtype=null;if(etype===0x4){var qdepth=(((rep[i] &gt;&gt; 8)&amp;0xff)+1);if(qdepth &gt; 8) cname=MAX_QUOTE_CLASS_NAME;else cname=CONTENT_QUOTE_CLASS_NAMES[qdepth];}else{cname=CONTENT_TYPES_TO_CLASS_NAMES[etype];}if(cname) node.setAttribute('class', cname);var subnodes=model.api.utils.linkifyPlain(rep[i+1], document);for(var iNode=0;iNode&lt; subnodes.length;iNode++){node.appendChild(subnodes[iNode]);}bodyNode.appendChild(node);}}, buildHeaderDom:function(domNode){var header=this.header, body=this.body;function updatePeep(peep){var nameNode=peep.element.getElementsByClassName('msg-peep-content')[0];if(peep.type=== 'from'){domNode.getElementsByClassName('msg-reader-header-label')[0].textContent=peep.name||peep.address;nameNode.textContent=peep.address;nameNode.classList.add('msg-peep-address');}else{nameNode.textContent=peep.name||peep.address;if(!peep.name &amp;&amp;peep.address){nameNode.classList.add('msg-peep-address');}else{nameNode.classList.remove('msg-peep-address');}}}function addHeaderEmails(type, peeps){var lineClass= 'msg-envelope-'+type+ '-line';var lineNode=domNode.getElementsByClassName(lineClass)[0];if(!peeps||!peeps.length){lineNode.classList.add('collapsed');return;}var peepTemplate=msgPeepBubbleNode;for(var i=0;i&lt; peeps.length;i++){var peep=peeps[i];peep.type=type;peep.element=peepTemplate.cloneNode(true);peep.element.peep=peep;peep.onchange=updatePeep;updatePeep(peep);lineNode.appendChild(peep.element);}}addHeaderEmails('from',[header.author]);addHeaderEmails('to', header.to);addHeaderEmails('cc', header.cc);addHeaderEmails('bcc', header.bcc);var dateNode=domNode.getElementsByClassName('msg-envelope-date')[0];dateNode.dataset.time=header.date.valueOf();dateNode.textContent=prettyDate(header.date);displaySubject(domNode.getElementsByClassName('msg-envelope-subject')[0], header);}, buildBodyDom:function(){var body=this.body;var domNode=this.domNode;var rootBodyNode=domNode.getElementsByClassName('msg-body-container')[0], reps=body.bodyReps, hasExternalImages=false, showEmbeddedImages=body.embeddedImageCount &amp;&amp;body.embeddedImagesDownloaded;iframeShims.bindSanitizedClickHandler(rootBodyNode, this.onHyperlinkClick.bind(this), rootBodyNode, null);for(var iRep=0;iRep&lt; reps.length;iRep++){var rep=reps[iRep];if(rep.type=== 'plain'){this._populatePlaintextBodyNode(rootBodyNode, rep.content);}else if(rep.type=== 'html'){var iframeShim=iframeShims.createAndInsertIframeForContent(rep.content, this.scrollContainer, rootBodyNode, null, 'interactive', this.onHyperlinkClick.bind(this));var iframe=iframeShim.iframe;var bodyNode=iframe.contentDocument.body;this.iframeResizeHandler=iframeShim.resizeHandler;model.api.utils.linkifyHTML(iframe.contentDocument);this.htmlBodyNodes.push(bodyNode);if(body.checkForExternalImages(bodyNode)) hasExternalImages=true;if(showEmbeddedImages) body.showEmbeddedImages(bodyNode, this.iframeResizeHandler);}if(iRep===0){var progressNode=rootBodyNode.querySelector('progress');if(progressNode){progressNode.parentNode.removeChild(progressNode);}}}var loadBar=domNode.getElementsByClassName('msg-reader-load-infobar')[0];if(body.embeddedImageCount &amp;&amp;!body.embeddedImagesDownloaded){loadBar.classList.remove('collapsed');loadBar.textContent=mozL10n.get('message-download-images',{n:body.embeddedImageCount});}else if(hasExternalImages){loadBar.classList.remove('collapsed');loadBar.textContent=mozL10n.get('message-show-external-images');}else{loadBar.classList.add('collapsed');}var attachmentsContainer=domNode.getElementsByClassName('msg-attachments-container')[0];if(body.attachments &amp;&amp;body.attachments.length){require(['shared/js/mime_mapper'], function(mapper){if(!MimeMapper) MimeMapper=mapper;var attTemplate=msgAttachmentItemNode, filenameTemplate=attTemplate.getElementsByClassName('msg-attachment-filename')[0], filesizeTemplate=attTemplate.getElementsByClassName('msg-attachment-filesize')[0];for(var iAttach=0;iAttach&lt; body.attachments.length;iAttach++){var attachment=body.attachments[iAttach], state;var extension=attachment.filename.split('.').pop();if(attachment.isDownloaded) state= 'downloaded';else if(MimeMapper.isSupportedType(attachment.mimetype)||MimeMapper.isSupportedExtension(extension)) state= 'downloadable';elsestate= 'nodownload';attTemplate.setAttribute('state', state);filenameTemplate.textContent=attachment.filename;filesizeTemplate.textContent=prettyFileSize(attachment.sizeEstimateInBytes);var attachmentNode=attTemplate.cloneNode(true);attachmentsContainer.appendChild(attachmentNode);attachmentNode.getElementsByClassName('msg-attachment-download')[0].addEventListener('click', this.onDownloadAttachmentClick.bind(this, attachmentNode, attachment));attachmentNode.getElementsByClassName('msg-attachment-view')[0].addEventListener('click', this.onViewAttachmentClick.bind(this, attachmentNode, attachment));this.enableReply();}}.bind(this));}else{attachmentsContainer.classList.add('collapsed');this.enableReply();}}, disableReply:function(){var btn=this.domNode.getElementsByClassName('msg-reply-btn')[0];btn.setAttribute('aria-disabled', true);}, enableReply:function(){var btn=this.domNode.getElementsByClassName('msg-reply-btn')[0];btn.removeAttribute('aria-disabled');}, die:function(){if(this.header){this.header.__die();this.header=null;}if(this.body){this.body.die();this.body=null;}this.domNode=null;}};evt.mix(MessageReaderCard.prototype);Cards.defineCardWithDefaultMode( 'message_reader',{tray:false}, MessageReaderCard, templateNode);return MessageReaderCard;})</td></tr>
</table>
<hr/><h2>関数</h2>
<a class="anchor" id="a3b8e24ed5cbd3bd553e63ef069b21880"></a><!-- doxytag: member="apps/email/js/cards/message_reader.js::define" ref="a3b8e24ed5cbd3bd553e63ef069b21880" args="(function(require){var MimeMapper, templateNode=require('tmpl!./message_reader.html'), msgDeleteConfirmNode=require('tmpl!./msg/delete_confirm.html'), msgContactMenuNode=require('tmpl!./msg/contact_menu.html'), msgReplyMenuNode=require('tmpl!./msg/reply_menu.html'), msgBrowseConfirmNode=require('tmpl!./msg/browse_confirm.html'), msgPeepBubbleNode=require('tmpl!./msg/peep_bubble.html'), msgAttachmentItemNode=require('tmpl!./msg/attachment_item.html'), msgAttachmentDisabledConfirmNode=require('tmpl!./msg/attachment_disabled_confirm.html'), common=require('mail_common'), model=require('model'), evt=require('evt'), iframeShims=require('iframe_shims'), Marquee=require('marquee'), mozL10n=require('l10n!'), Cards=common.Cards, Toaster=common.Toaster, ConfirmDialog=common.ConfirmDialog, displaySubject=common.displaySubject, prettyDate=common.prettyDate, prettyFileSize=common.prettyFileSize;var CONTENT_TYPES_TO_CLASS_NAMES=[null, 'msg&#45;body&#45;content', 'msg&#45;body&#45;signature', 'msg&#45;body&#45;leadin', null, 'msg&#45;body&#45;disclaimer', 'msg&#45;body&#45;list', 'msg&#45;body&#45;product', 'msg&#45;body&#45;ads'];var CONTENT_QUOTE_CLASS_NAMES=[ 'msg&#45;body&#45;q1', 'msg&#45;body&#45;q2', 'msg&#45;body&#45;q3', 'msg&#45;body&#45;q4', 'msg&#45;body&#45;q5', 'msg&#45;body&#45;q6', 'msg&#45;body&#45;q7', 'msg&#45;body&#45;q8', 'msg&#45;body&#45;q9'];var MAX_QUOTE_CLASS_NAME= 'msg&#45;body&#45;qmax';function MessageReaderCard(domNode, mode, args){evt.Emitter.call(this);this.domNode=domNode;this.messageSuid=args.messageSuid;if(args.header){this._setHeader(args.header);}else{model.latestOnce('folder', function(folder){var messagesSlice=model.api.viewFolderMessages(folder);function clear(){messagesSlice.die();messagesSlice=null;}messagesSlice.onsplice=(function(index, howMany, addedItems, requested, moreExpected){if(!messagesSlice) return;if(!this.header &amp;&amp;addedItems &amp;&amp;addedItems.length){addedItems.some(function(item){if(item.id===this.messageSuid){this._setHeader(item);clear();return true;}}.bind(this));if(messagesSlice &amp;&amp;messagesSlice.atTop &amp;&amp;!this.header &amp;&amp;args.backOnMissingMessage){clear();this.onBack();}}}).bind(this);}.bind(this));}this.htmlBodyNodes=[];this._on('msg&#45;back&#45;btn', 'click', 'onBack', true);this._on('msg&#45;reply&#45;btn', 'click', 'onReplyMenu');this._on('msg&#45;delete&#45;btn', 'click', 'onDelete');this._on('msg&#45;star&#45;btn', 'click', 'onToggleStar');this._on('msg&#45;move&#45;btn', 'click', 'onMove');this._on('msg&#45;envelope&#45;bar', 'click', 'onEnvelopeClick');this._on('msg&#45;reader&#45;load&#45;infobar', 'click', 'onLoadBarClick');this.disableReply();this.scrollContainer=domNode.getElementsByClassName('scrollregion&#45;below&#45;header')[0];this.handleBodyChange=this.handleBodyChange.bind(this);}MessageReaderCard.prototype={_contextMenuType:{VIEW_CONTACT:1, CREATE_CONTACT:2, ADD_TO_CONTACT:4, REPLY:8, NEW_MESSAGE:16}, _on:function(className, eventName, method, skipProtection){this.domNode.getElementsByClassName(className)[0].addEventListener(eventName, function(evt){if(this.header||skipProtection) return this[method](evt);}.bind(this), false);}, _setHeader:function(header){this.header=header.makeCopy();this.hackMutationHeader=header;if(!this.header.isRead) this.header.setRead(true);if(this.hackMutationHeader.isStarred) this.domNode.getElementsByClassName('msg&#45;star&#45;btn')[0].classList.add('msg&#45;btn&#45;active');this.emit('header');}, postInsert:function(){this.latestOnce('header', function(){this.buildHeaderDom(this.domNode);this.header.getBody({downloadBodyReps:true}, function(body){this.body=body;body.onchange=this.handleBodyChange;if(body.bodyRepsDownloaded){this.buildBodyDom();}}.bind(this));}.bind(this));}, handleBodyChange:function(evt){switch(evt.changeType){case 'bodyReps':if(this.body.bodyRepsDownloaded){this.buildBodyDom();}break;}}, onBack:function(event){Cards.removeCardAndSuccessors(this.domNode, 'animate');}, reply:function(){Cards.eatEventsUntilNextCard();var composer=this.header.replyToMessage(null, function(){Cards.pushCard('compose', 'default', 'animate',{composer:composer});});}, replyAll:function(){Cards.eatEventsUntilNextCard();var composer=this.header.replyToMessage('all', function(){Cards.pushCard('compose', 'default', 'animate',{composer:composer});});}, forward:function(){var needToPrompt=this.header.hasAttachments||this.body.embeddedImageCount &gt; 0;var forwardMessage=(function(){Cards.eatEventsUntilNextCard();var composer=this.header.forwardMessage('inline', function(){Cards.pushCard('compose', 'default', 'animate',{composer:composer});});}.bind(this));if(needToPrompt){var dialog=msgAttachmentDisabledConfirmNode.cloneNode(true);ConfirmDialog.show(dialog,{id: 'msg&#45;attachment&#45;disabled&#45;ok', handler:function(){forwardMessage();}},{id: 'msg&#45;attachment&#45;disabled&#45;cancel', handler:null});}else{forwardMessage();}}, canReplyAll:function(){var myAddresses=model.account.identities.map(function(ident){return ident.address;});var otherAddresses=(this.header.to||[]).concat(this.header.cc||[]);if(this.header.replyTo){otherAddresses.push(this.header.replyTo.author);}for(var i=0;i&lt; otherAddresses.length;i++){if(myAddresses.indexOf(otherAddresses[i].address)==&#45;1){return true;}}return false;}, onReplyMenu:function(event){var contents=msgReplyMenuNode.cloneNode(true);document.body.appendChild(contents);var formSubmit=(function(evt){document.body.removeChild(contents);switch(evt.explicitOriginalTarget.className){case 'msg&#45;reply&#45;menu&#45;reply':this.reply();break;case 'msg&#45;reply&#45;menu&#45;reply&#45;all':this.replyAll();break;case 'msg&#45;reply&#45;menu&#45;forward':this.forward();break;case 'msg&#45;reply&#45;menu&#45;cancel':break;}return false;}).bind(this);contents.addEventListener('submit', formSubmit);if(!this.canForward()){contents.querySelector('.msg&#45;reply&#45;menu&#45;forward').classList.add('collapsed');}if(!this.canReplyAll()){contents.querySelector('.msg&#45;reply&#45;menu&#45;reply&#45;all').classList.add('collapsed');}}, onDelete:function(){var dialog=msgDeleteConfirmNode.cloneNode(true);ConfirmDialog.show(dialog,{id: 'msg&#45;delete&#45;ok', handler:function(){var op=this.header.deleteMessage();Toaster.logMutation(op, true);Cards.removeCardAndSuccessors(this.domNode, 'animate');}.bind(this)},{id: 'msg&#45;delete&#45;cancel', handler:null});}, onToggleStar:function(){var button=this.domNode.getElementsByClassName('msg&#45;star&#45;btn')[0];if(!this.hackMutationHeader.isStarred) button.classList.add('msg&#45;btn&#45;active');else button.classList.remove('msg&#45;btn&#45;active');this.hackMutationHeader.isStarred=!this.hackMutationHeader.isStarred;this.header.setStarred(this.hackMutationHeader.isStarred);}, onMove:function(){Cards.folderSelector(function(folder){var op=this.header.moveMessage(folder);Toaster.logMutation(op, true);Cards.removeCardAndSuccessors(this.domNode, 'animate');}.bind(this));}, onEnvelopeClick:function(event){var target=event.target;if(!target.classList.contains('msg&#45;peep&#45;bubble')){return;}this.onPeepClick(target);}, onPeepClick:function(target){var contents=msgContactMenuNode.cloneNode(true);var peep=target.peep;var headerNode=contents.getElementsByTagName('header')[0];Marquee.setup(peep.address, headerNode);document.body.appendChild(contents);Marquee.activate('alternate', 'ease');var formSubmit=(function(evt){document.body.removeChild(contents);switch(evt.explicitOriginalTarget.className){case 'msg&#45;contact&#45;menu&#45;new':Cards.pushCard('compose', 'default', 'animate',{composerData:{message:this.header, onComposer:function(composer){composer.to=[{address:peep.address, name:peep.name}];}}});break;case 'msg&#45;contact&#45;menu&#45;view':var activity=new MozActivity({name: 'open', data:{type: 'webcontacts/contact', params:{ 'id':peep.contactId}}});break;case 'msg&#45;contact&#45;menu&#45;create&#45;contact':var params={ 'email':peep.address};if(peep.name) params.givenName=peep.name;var activity=new MozActivity({name: 'new', data:{type: 'webcontacts/contact', params:params}});break;case 'msg&#45;contact&#45;menu&#45;add&#45;to&#45;existing&#45;contact':var activity=new MozActivity({name: 'update', data:{type: 'webcontacts/contact', params:{ 'email':peep.address}}});break;case 'msg&#45;contact&#45;menu&#45;reply':var composer=this.header.replyToMessage(null, function(){Cards.pushCard('compose', 'default', 'animate',{composer:composer});});break;}return false;}).bind(this);contents.addEventListener('submit', formSubmit);var contextMenuOptions=this._contextMenuType.NEW_MESSAGE;var messageType=peep.type;if(messageType=== 'from') contextMenuOptions|=this._contextMenuType.REPLY;if(peep.isContact){contextMenuOptions|=this._contextMenuType.VIEW_CONTACT;}else{contextMenuOptions|=this._contextMenuType.CREATE_CONTACT;contextMenuOptions|=this._contextMenuType.ADD_TO_CONTACT;}if(contextMenuOptions &amp;this._contextMenuType.VIEW_CONTACT) contents.querySelector('.msg&#45;contact&#45;menu&#45;view').classList.remove('collapsed');if(contextMenuOptions &amp;this._contextMenuType.CREATE_CONTACT) contents.querySelector('.msg&#45;contact&#45;menu&#45;create&#45;contact').classList.remove('collapsed');if(contextMenuOptions &amp;this._contextMenuType.ADD_TO_CONTACT) contents.querySelector('.msg&#45;contact&#45;menu&#45;add&#45;to&#45;existing&#45;contact').classList.remove('collapsed');if(contextMenuOptions &amp;this._contextMenuType.REPLY) contents.querySelector('.msg&#45;contact&#45;menu&#45;reply').classList.remove('collapsed');if(contextMenuOptions &amp;this._contextMenuType.NEW_MESSAGE) contents.querySelector('.msg&#45;contact&#45;menu&#45;new').classList.remove('collapsed');}, onLoadBarClick:function(event){var self=this;var loadBar=this.domNode.getElementsByClassName('msg&#45;reader&#45;load&#45;infobar')[0];if(!this.body.embeddedImagesDownloaded){this.body.downloadEmbeddedImages(function(){if(!self.domNode) return;for(var i=0;i&lt; self.htmlBodyNodes.length;i++){self.body.showEmbeddedImages(self.htmlBodyNodes[i], self.iframeResizeHandler);}});loadBar.classList.add('collapsed');}else{for(var i=0;i&lt; this.htmlBodyNodes.length;i++){this.body.showExternalImages(this.htmlBodyNodes[i], this.iframeResizeHandler);}loadBar.classList.add('collapsed');}}, getAttachmentBlob:function(attachment, callback){try{var storageType=attachment._file[0];var filename=attachment._file[1];var storage=navigator.getDeviceStorage(storageType);var getreq=storage.get(filename);getreq.onerror=function(){console.warn('Could not open attachment file: ', filename, getreq.error.name);};getreq.onsuccess=function(){var blob=getreq.result;callback(blob);};}catch(ex){console.warn('Exception getting attachment from device storage:', attachment._file, '\n', ex, '\n', ex.stack);}}, onDownloadAttachmentClick:function(node, attachment){node.setAttribute('state', 'downloading');attachment.download(function downloaded(){if(!attachment._file) return;node.setAttribute('state', 'downloaded');});}, onViewAttachmentClick:function(node, attachment){console.log('trying to open', attachment._file, 'type:', attachment.mimetype);if(!attachment._file) return;if(attachment.isDownloaded){this.getAttachmentBlob(attachment, function(blob){try{if(!blob){throw new Error('Blob does not exist');}var extension=attachment.filename.split('.').pop();var originalType=blob.type||attachment.mimetype;var mappedType=(MimeMapper.isSupportedType(originalType))?originalType:MimeMapper.guessTypeFromExtension(extension);var activity=new MozActivity({name: 'open', data:{type:mappedType, blob:blob}});activity.onerror=function(){console.warn('Problem with&quot;open&quot;activity', activity.error.name);};activity.onsuccess=function(){console.log('&quot;open&quot;activity allegedly succeeded');};}catch(ex){console.warn('Problem creating&quot;open&quot;activity:', ex, '\n', ex.stack);}});}}, onHyperlinkClick:function(event, linkNode, linkUrl, linkText){var dialog=msgBrowseConfirmNode.cloneNode(true);var content=dialog.getElementsByTagName('p')[0];content.textContent=mozL10n.get('browse&#45;to&#45;url&#45;prompt',{url:linkUrl});ConfirmDialog.show(dialog,{id: 'msg&#45;browse&#45;ok', handler:function(){window.open(linkUrl, '_blank');}.bind(this)},{id: 'msg&#45;browse&#45;cancel', handler:null});}, _populatePlaintextBodyNode:function(bodyNode, rep){for(var i=0;i&lt; rep.length;i+=2){var node=document.createElement('div'), cname;var etype=rep[i]&amp;0xf, rtype=null;if(etype===0x4){var qdepth=(((rep[i] &gt;&gt; 8)&amp;0xff)+1);if(qdepth &gt; 8) cname=MAX_QUOTE_CLASS_NAME;else cname=CONTENT_QUOTE_CLASS_NAMES[qdepth];}else{cname=CONTENT_TYPES_TO_CLASS_NAMES[etype];}if(cname) node.setAttribute('class', cname);var subnodes=model.api.utils.linkifyPlain(rep[i+1], document);for(var iNode=0;iNode&lt; subnodes.length;iNode++){node.appendChild(subnodes[iNode]);}bodyNode.appendChild(node);}}, buildHeaderDom:function(domNode){var header=this.header, body=this.body;function updatePeep(peep){var nameNode=peep.element.getElementsByClassName('msg&#45;peep&#45;content')[0];if(peep.type=== 'from'){domNode.getElementsByClassName('msg&#45;reader&#45;header&#45;label')[0].textContent=peep.name||peep.address;nameNode.textContent=peep.address;nameNode.classList.add('msg&#45;peep&#45;address');}else{nameNode.textContent=peep.name||peep.address;if(!peep.name &amp;&amp;peep.address){nameNode.classList.add('msg&#45;peep&#45;address');}else{nameNode.classList.remove('msg&#45;peep&#45;address');}}}function addHeaderEmails(type, peeps){var lineClass= 'msg&#45;envelope&#45;'+type+ '&#45;line';var lineNode=domNode.getElementsByClassName(lineClass)[0];if(!peeps||!peeps.length){lineNode.classList.add('collapsed');return;}var peepTemplate=msgPeepBubbleNode;for(var i=0;i&lt; peeps.length;i++){var peep=peeps[i];peep.type=type;peep.element=peepTemplate.cloneNode(true);peep.element.peep=peep;peep.onchange=updatePeep;updatePeep(peep);lineNode.appendChild(peep.element);}}addHeaderEmails('from',[header.author]);addHeaderEmails('to', header.to);addHeaderEmails('cc', header.cc);addHeaderEmails('bcc', header.bcc);var dateNode=domNode.getElementsByClassName('msg&#45;envelope&#45;date')[0];dateNode.dataset.time=header.date.valueOf();dateNode.textContent=prettyDate(header.date);displaySubject(domNode.getElementsByClassName('msg&#45;envelope&#45;subject')[0], header);}, buildBodyDom:function(){var body=this.body;var domNode=this.domNode;var rootBodyNode=domNode.getElementsByClassName('msg&#45;body&#45;container')[0], reps=body.bodyReps, hasExternalImages=false, showEmbeddedImages=body.embeddedImageCount &amp;&amp;body.embeddedImagesDownloaded;iframeShims.bindSanitizedClickHandler(rootBodyNode, this.onHyperlinkClick.bind(this), rootBodyNode, null);for(var iRep=0;iRep&lt; reps.length;iRep++){var rep=reps[iRep];if(rep.type=== 'plain'){this._populatePlaintextBodyNode(rootBodyNode, rep.content);}else if(rep.type=== 'html'){var iframeShim=iframeShims.createAndInsertIframeForContent(rep.content, this.scrollContainer, rootBodyNode, null, 'interactive', this.onHyperlinkClick.bind(this));var iframe=iframeShim.iframe;var bodyNode=iframe.contentDocument.body;this.iframeResizeHandler=iframeShim.resizeHandler;model.api.utils.linkifyHTML(iframe.contentDocument);this.htmlBodyNodes.push(bodyNode);if(body.checkForExternalImages(bodyNode)) hasExternalImages=true;if(showEmbeddedImages) body.showEmbeddedImages(bodyNode, this.iframeResizeHandler);}if(iRep===0){var progressNode=rootBodyNode.querySelector('progress');if(progressNode){progressNode.parentNode.removeChild(progressNode);}}}var loadBar=domNode.getElementsByClassName('msg&#45;reader&#45;load&#45;infobar')[0];if(body.embeddedImageCount &amp;&amp;!body.embeddedImagesDownloaded){loadBar.classList.remove('collapsed');loadBar.textContent=mozL10n.get('message&#45;download&#45;images',{n:body.embeddedImageCount});}else if(hasExternalImages){loadBar.classList.remove('collapsed');loadBar.textContent=mozL10n.get('message&#45;show&#45;external&#45;images');}else{loadBar.classList.add('collapsed');}var attachmentsContainer=domNode.getElementsByClassName('msg&#45;attachments&#45;container')[0];if(body.attachments &amp;&amp;body.attachments.length){require(['shared/js/mime_mapper'], function(mapper){if(!MimeMapper) MimeMapper=mapper;var attTemplate=msgAttachmentItemNode, filenameTemplate=attTemplate.getElementsByClassName('msg&#45;attachment&#45;filename')[0], filesizeTemplate=attTemplate.getElementsByClassName('msg&#45;attachment&#45;filesize')[0];for(var iAttach=0;iAttach&lt; body.attachments.length;iAttach++){var attachment=body.attachments[iAttach], state;var extension=attachment.filename.split('.').pop();if(attachment.isDownloaded) state= 'downloaded';else if(MimeMapper.isSupportedType(attachment.mimetype)||MimeMapper.isSupportedExtension(extension)) state= 'downloadable';elsestate= 'nodownload';attTemplate.setAttribute('state', state);filenameTemplate.textContent=attachment.filename;filesizeTemplate.textContent=prettyFileSize(attachment.sizeEstimateInBytes);var attachmentNode=attTemplate.cloneNode(true);attachmentsContainer.appendChild(attachmentNode);attachmentNode.getElementsByClassName('msg&#45;attachment&#45;download')[0].addEventListener('click', this.onDownloadAttachmentClick.bind(this, attachmentNode, attachment));attachmentNode.getElementsByClassName('msg&#45;attachment&#45;view')[0].addEventListener('click', this.onViewAttachmentClick.bind(this, attachmentNode, attachment));this.enableReply();}}.bind(this));}else{attachmentsContainer.classList.add('collapsed');this.enableReply();}}, disableReply:function(){var btn=this.domNode.getElementsByClassName('msg&#45;reply&#45;btn')[0];btn.setAttribute('aria&#45;disabled', true);}, enableReply:function(){var btn=this.domNode.getElementsByClassName('msg&#45;reply&#45;btn')[0];btn.removeAttribute('aria&#45;disabled');}, die:function(){if(this.header){this.header.__die();this.header=null;}if(this.body){this.body.die();this.body=null;}this.domNode=null;}};evt.mix(MessageReaderCard.prototype);Cards.defineCardWithDefaultMode( 'message_reader',{tray:false}, MessageReaderCard, templateNode);return MessageReaderCard;})" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d14/build__stage_2email_2js_2mix_8js.html#ae57540f837ee76af1c71776a8f46ae53">define</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全て</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>データ構造</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>ネームスペース</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>ファイル</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>関数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>変数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>型定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>列挙型</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>列挙型の値</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>フレンド</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>マクロ定義</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../db/deb/apps_2email_2js_2cards_2message__reader_8js.html">message_reader.js</a>      </li>

    <li class="footer">FxOS Code Readingに対してSat Oct 19 2013 00:56:16に生成されました。
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
