<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>FxOS Code Reading: message_list.js</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">FxOS Code Reading
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- 作成： Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'検索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>メインページ</span></a></li>
      <li><a href="../../pages.html"><span>関連ページ</span></a></li>
      <li><a href="../../modules.html"><span>モジュール</span></a></li>
      <li><a href="../../namespaces.html"><span>パッケージ</span></a></li>
      <li><a href="../../annotated.html"><span>データ構造</span></a></li>
      <li class="current"><a href="../../files.html"><span>ファイル</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>ファイル一覧</span></a></li>
      <li><a href="../../globals.html"><span>グローバル</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('da/da6/message__list_8js.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">関数</a>  </div>
  <div class="headertitle">
<div class="title">message_list.js</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="../../da/da6/message__list_8js_source.html">ソースコードを見る。</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
関数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da6/message__list_8js.html#a07b333630ce6e3f8816de5b0336ac762">define</a> (<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>){var templateNode=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('tmpl!./message_list.html'), msgHeaderItemNode=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('tmpl!./<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>/header_item.html'), deleteConfirmMsgNode=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('tmpl!./<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>/delete_confirm.html'), common=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('mail_common'), <a class="el" href="../../d9/d04/expat_8h.html#ac517f0c27408fbd365e7dd34e032faca">model</a>=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('<a class="el" href="../../d9/d04/expat_8h.html#ac517f0c27408fbd365e7dd34e032faca">model</a>'), htmlCache=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('html_cache'), MessageListTopbar=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('message_list_topbar'), <a class="el" href="../../df/dc7/viewer_8js.html#abf8c988c23b2b2f5ec3f1149b44bd820">mozL10n</a>=<a class="el" href="../../d6/d71/tests_2performance_2startup__test_8js.html#a84ca4076b522d641b7a0c061671f6924">require</a>('l10n!'), Cards=common.Cards, Toaster=common.Toaster, <a class="el" href="../../d9/d71/system_2camera_2js_2confirm_8js.html#a62ff52c410e9de0d9973e5297755e83c">ConfirmDialog</a>=<a class="el" href="../../d9/d71/system_2camera_2js_2confirm_8js.html#a62ff52c410e9de0d9973e5297755e83c">common.ConfirmDialog</a>, batchAddClass=common.batchAddClass, bindContainerClickAndHold=common.bindContainerClickAndHold, bindContainerHandler=common.bindContainerHandler, appendMatchItemTo=common.appendMatchItemTo, displaySubject=common.displaySubject, prettyDate=common.prettyDate;var SCROLL_MIN_BUFFER_SCREENS=2;var SCROLL_MAX_RETENTION_SCREENS=7;var SCROLL_DELAY=50;var MINIMUM_ITEMS_FOR_SCROLL_CALC=10;var MAXIMUM_MS_BETWEEN_SNIPPET_REQUEST=6000;var MAXIMUM_BYTES_PER_MESSAGE_DURING_SCROLL=4 *1024;<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a> MessageListCard(domNode, <a class="el" href="../../db/da2/pripcsem_8h.html#a5ffbd19d0a0b87f9ff15e7d0c4410984">mode</a>, <a class="el" href="../../d2/d7d/jsapi_8h.html#a52c9936fee3329d49b2cdede9b0fd7c8">args</a>){this.domNode=domNode;<a class="el" href="../../db/da2/pripcsem_8h.html#a5ffbd19d0a0b87f9ff15e7d0c4410984">this.mode</a>=<a class="el" href="../../db/da2/pripcsem_8h.html#a5ffbd19d0a0b87f9ff15e7d0c4410984">mode</a>;this.scrollNode=domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>-scrollouter')[0];<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../db/da2/pripcsem_8h.html#a5ffbd19d0a0b87f9ff15e7d0c4410984">mode</a>=== 'nonsearch') batchAddClass(domNode, '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a86efbc42dbdb988b9a864b83af26e0de">search</a>-only', 'collapsed');else batchAddClass(domNode, '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-nonsearch-only', 'collapsed');this.messagesContainer=domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-messages-<a class="el" href="../../d3/d4b/lockscreen_8js.html#a88e6efb757b9907baa46a5755484f2bd">container</a>')[0];this.messageEmptyContainer=domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>-empty-<a class="el" href="../../d3/d4b/lockscreen_8js.html#a88e6efb757b9907baa46a5755484f2bd">container</a>')[0];bindContainerClickAndHold(this.messagesContainer, <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onClickMessage.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>), <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onHoldMessage.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>));this.scrollContainer=domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>-scrollouter')[0];<a class="el" href="../../d1/d51/test__external__apps_2packstubtest_2js_2app_8js.html#ac189c42168797aa80d7a298a9394ff0b">this.scrollContainer.addEventListener</a>('scroll', <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onScroll.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>), <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);this.syncingNode=domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-messages-syncing')[0];this.syncMoreNode=domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-messages-<a class="el" href="../../db/d6d/mkdirp_8js.html#a303bde7c6fd15c62884d1439cdf55b10">sync</a>-more')[0];<a class="el" href="../../d1/d51/test__external__apps_2packstubtest_2js_2app_8js.html#ac189c42168797aa80d7a298a9394ff0b">this.syncMoreNode.addEventListener</a>('click', <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onGetMoreMessages.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>), <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-folder-<a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>-btn')[0].<a class="el" href="../../d1/d51/test__external__apps_2packstubtest_2js_2app_8js.html#ac189c42168797aa80d7a298a9394ff0b">addEventListener</a>('click', <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onShowFolders.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>), <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-compose-btn')[0].<a class="el" href="../../d1/d51/test__external__apps_2packstubtest_2js_2app_8js.html#ac189c42168797aa80d7a298a9394ff0b">addEventListener</a>('click', <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onCompose.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>), <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);this.toolbar={};this.toolbar.searchBtn=domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a86efbc42dbdb988b9a864b83af26e0de">search</a>-btn')[0];<a class="el" href="../../d1/d51/test__external__apps_2packstubtest_2js_2app_8js.html#ac189c42168797aa80d7a298a9394ff0b">this.toolbar.searchBtn.addEventListener</a>('click', <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onSearchButton.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>), <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);this.toolbar.editBtn=domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../d9/d13/shared_2style_2_r_e_a_d_m_e_8md.html#a1b6362cb1eaf9d23d7ff55da0225251e">edit</a>-btn')[0];<a class="el" href="../../d1/d51/test__external__apps_2packstubtest_2js_2app_8js.html#ac189c42168797aa80d7a298a9394ff0b">this.toolbar.editBtn.addEventListener</a>('click', <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.setEditMode.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>, <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>), <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);this.toolbar.refreshBtn=domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-refresh-btn')[0];<a class="el" href="../../d1/d51/test__external__apps_2packstubtest_2js_2app_8js.html#ac189c42168797aa80d7a298a9394ff0b">this.toolbar.refreshBtn.addEventListener</a>('click', <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onRefresh.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>), <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-listedit-<a class="el" href="../../dc/d35/inline-receiver_8js.html#a01de14b323a40639980004403daa8432">cancel</a>-btn')[0].<a class="el" href="../../d1/d51/test__external__apps_2packstubtest_2js_2app_8js.html#ac189c42168797aa80d7a298a9394ff0b">addEventListener</a>('click', <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.setEditMode.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>, <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>), <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../da/dce/details__test_8js.html#a6ae307f1c7e49512089a0b8585e8ad83">star</a>-btn')[0].<a class="el" href="../../d1/d51/test__external__apps_2packstubtest_2js_2app_8js.html#ac189c42168797aa80d7a298a9394ff0b">addEventListener</a>('click', <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onStarMessages.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>, <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>), <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../dd/dc2/plarenas_8h.html#af34a496b61ba99953cf618a41fc44b0b">mark</a>-read-btn')[0].<a class="el" href="../../d1/d51/test__external__apps_2packstubtest_2js_2app_8js.html#ac189c42168797aa80d7a298a9394ff0b">addEventListener</a>('click', <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onMarkMessagesRead.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>, <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>), <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-delete-btn')[0].<a class="el" href="../../d1/d51/test__external__apps_2packstubtest_2js_2app_8js.html#ac189c42168797aa80d7a298a9394ff0b">addEventListener</a>('click', <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onDeleteMessages.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>, <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>), <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);this.toolbar.moveBtn=domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-move-btn')[0];<a class="el" href="../../d1/d51/test__external__apps_2packstubtest_2js_2app_8js.html#ac189c42168797aa80d7a298a9394ff0b">this.toolbar.moveBtn.addEventListener</a>('click', <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onMoveMessages.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>, <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>), <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../db/da2/pripcsem_8h.html#a5ffbd19d0a0b87f9ff15e7d0c4410984">mode</a>=== 'nonsearch'){domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a86efbc42dbdb988b9a864b83af26e0de">search</a>-<a class="el" href="../../dd/dfa/classtext.html">text</a>-tease')[0].<a class="el" href="../../d1/d51/test__external__apps_2packstubtest_2js_2app_8js.html#ac189c42168797aa80d7a298a9394ff0b">addEventListener</a>('<a class="el" href="../../d3/d4a/mock__recipients_8js.html#a872ddc88b9ec9139cb46823219ad16c8">focus</a>', <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onSearchButton.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>), <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);}else <a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../db/da2/pripcsem_8h.html#a5ffbd19d0a0b87f9ff15e7d0c4410984">mode</a>=== '<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a86efbc42dbdb988b9a864b83af26e0de">search</a>'){domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a86efbc42dbdb988b9a864b83af26e0de">search</a>-<a class="el" href="../../dc/d35/inline-receiver_8js.html#a01de14b323a40639980004403daa8432">cancel</a>')[0].<a class="el" href="../../d1/d51/test__external__apps_2packstubtest_2js_2app_8js.html#ac189c42168797aa80d7a298a9394ff0b">addEventListener</a>('click', <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onCancelSearch.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>), <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);bindContainerHandler(domNode.getElementsByClassName('<a class="el" href="../../de/d11/path_8js.html#a2743b53af000e40d56b193aa76bd4762">filter</a>')[0], 'click', <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onSearchFilterClick.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>));this.searchInput=domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a86efbc42dbdb988b9a864b83af26e0de">search</a>-<a class="el" href="../../dd/dfa/classtext.html">text</a>')[0];<a class="el" href="../../d1/d51/test__external__apps_2packstubtest_2js_2app_8js.html#ac189c42168797aa80d7a298a9394ff0b">this.searchInput.addEventListener</a>( '<a class="el" href="../../d2/d7d/jsapi_8h.html#a8908b6d42ac95ee6387e73b7ac543dae">input</a>', <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onSearchTextChange.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>), <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);}this._onScroll=<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this._onScroll.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>);this.editMode=<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>;this.selectedMessages=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>;this.curFolder=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>;this.messagesSlice=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>;this.isIncomingFolder=<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>;this._boundSliceRequestComplete=<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onSliceRequestComplete.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>);this.usingCachedNode=!!args.cachedNode;this._boundFolderChanged=<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this._folderChanged.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>);model.latest('folder', this._boundFolderChanged);this._boundOnNewMail=<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onNewMail.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>);<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#ac00bf23adf7cb4c5253268889722ca05">model.on</a>('newInboxMessages', this._boundOnNewMail);}<a class="el" href="../../d6/dec/mocha-bin_8js.html#a240a06b4dda3a9e2e025ed5792cd5f4e">MessageListCard.prototype</a>={PROGRESS_CANDYBAR_TIMEOUT_MS:2000, _topbar:null, postInsert:function(){this._hideSearchBoxByScrolling();<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../db/da2/pripcsem_8h.html#a5ffbd19d0a0b87f9ff15e7d0c4410984">this.mode</a>=== '<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a86efbc42dbdb988b9a864b83af26e0de">search</a>') <a class="el" href="../../d3/d4a/mock__recipients_8js.html#a872ddc88b9ec9139cb46823219ad16c8">this.searchInput.focus</a>();}, onSearchButton:function(){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!this.curFolder) <a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;Cards.pushCard( 'message_list', '<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a86efbc42dbdb988b9a864b83af26e0de">search</a>', 'animate',{folder:this.curFolder});}, setEditMode:function(editMode){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!this.curFolder) <a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;var domNode=this.domNode;var normalHeader=domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>-header')[0], searchHeader=domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a86efbc42dbdb988b9a864b83af26e0de">search</a>-header')[0], editHeader=domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-listedit-header')[0], normalToolbar=domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>-<a class="el" href="../../d9/d13/shared_2style_2_r_e_a_d_m_e_8md.html#a6278a97105ce1b352b405dfcbf88da00">action</a>-toolbar')[0], editToolbar=domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-listedit-<a class="el" href="../../d9/d13/shared_2style_2_r_e_a_d_m_e_8md.html#a6278a97105ce1b352b405dfcbf88da00">action</a>-toolbar')[0];this.editMode=editMode;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(editMode){<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">normalHeader.classList.add</a>('collapsed');<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">searchHeader.classList.add</a>('collapsed');<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">normalToolbar.classList.add</a>('collapsed');<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">editHeader.classList.remove</a>('collapsed');<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">editToolbar.classList.remove</a>('collapsed');<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">this.messagesContainer.classList.add</a>('<a class="el" href="../../db/df4/geoloc_8js.html#a34b2bb38da6ac84e5708382e03478900">show</a>-<a class="el" href="../../d9/d13/shared_2style_2_r_e_a_d_m_e_8md.html#a1b6362cb1eaf9d23d7ff55da0225251e">edit</a>');this.selectedMessages=[];var cbs=this.messagesContainer.querySelectorAll('<a class="el" href="../../d2/d7d/jsapi_8h.html#a8908b6d42ac95ee6387e73b7ac543dae">input</a>[<a class="el" href="../../de/d81/xpt__struct_8h.html#ac827fa5fbcdd05dd9ed05984a80679b8">type</a>=checkbox]');<a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a089b2988a149c0d135aaab57e2231481">for</a>(var <a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>=0;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>&lt; <a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">cbs.length</a>;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>++){cbs[<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>].checked=<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>;}this.selectedMessagesUpdated();}else{<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../db/da2/pripcsem_8h.html#a5ffbd19d0a0b87f9ff15e7d0c4410984">this.mode</a>=== 'nonsearch') <a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">normalHeader.classList.remove</a>('collapsed');else <a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">searchHeader.classList.remove</a>('collapsed');<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">normalToolbar.classList.remove</a>('collapsed');<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">editHeader.classList.add</a>('collapsed');<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">editToolbar.classList.add</a>('collapsed');<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">this.messagesContainer.classList.remove</a>('<a class="el" href="../../db/df4/geoloc_8js.html#a34b2bb38da6ac84e5708382e03478900">show</a>-<a class="el" href="../../d9/d13/shared_2style_2_r_e_a_d_m_e_8md.html#a1b6362cb1eaf9d23d7ff55da0225251e">edit</a>');var selectedMsgNodes=domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-item-selected');<a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a089b2988a149c0d135aaab57e2231481">for</a>(var <a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>=<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">selectedMsgNodes.length</a>-1;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a> &gt;=0;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>--){selectedMsgNodes[<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>].<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">classList.remove</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-item-selected');}this.selectedMessages=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>;}}, selectedMessagesUpdated:function(){var headerNode=this.domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-listedit-header-label')[0];<a class="el" href="../../d3/d4b/lockscreen_8js.html#a231b448a4b70e9035748897db2fa1c2a">headerNode.textContent</a>=<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#a18697261a961b9d0efde405b5a2b244f">mozL10n.get</a>('<a class="el" href="../../d2/d7d/jsapi_8h.html#a254bf0858da09c96a48daf64404eb4f8">message</a>-multiedit-header',{<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">n:this.selectedMessages.length</a>});var starBtn=this.domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../da/dce/details__test_8js.html#a6ae307f1c7e49512089a0b8585e8ad83">star</a>-btn')[0], readBtn=this.domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../dd/dc2/plarenas_8h.html#af34a496b61ba99953cf618a41fc44b0b">mark</a>-read-btn')[0];var numStarred=0, numRead=0;<a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a089b2988a149c0d135aaab57e2231481">for</a>(var <a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>=0;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>&lt; <a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">this.selectedMessages.length</a>;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>++){var <a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>=this.selectedMessages[<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>];<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(msg.isStarred) numStarred++;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(msg.isRead) numRead++;}this.setAsStarred=!(numStarred &amp;&amp;numStarred===<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">this.selectedMessages.length</a>);this.setAsRead=(<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">this.selectedMessages.length</a> &amp;&amp;numRead===0);<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!this.setAsStarred) <a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">starBtn.classList.add</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-btn-active');else <a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">starBtn.classList.remove</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-btn-active');<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this.setAsRead) <a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">readBtn.classList.add</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-btn-active');else <a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">readBtn.classList.remove</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-btn-active');}, _hideSearchBoxByScrolling:function(){var searchBar=this.domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a86efbc42dbdb988b9a864b83af26e0de">search</a>-tease-bar')[0];<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">searchBar.classList.remove</a>('collapsed');this.scrollNode.scrollTop=searchBar.offsetHeight;}, onShowFolders:function(){var query=['folder_picker', 'navigation'];<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(Cards.hasCard(query)){Cards.moveToCard(query);}else{Cards.pushCard( 'folder_picker', 'navigation', 'none',{onPushed:function(){<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#adf7ce41cd256eda7ce1f6adeea723bd3">setTimeout</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){Cards.moveToCard(query);}, 50);}.<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>)}, '<a class="el" href="../../d2/d7d/jsapi_8h.html#ad27f9f4708ee464a31e9c01eb21f1b28">left</a>');}}, onCompose:function(){Cards.pushCard('compose', 'default', 'animate');}, showFolder:function(folder, forceNewSlice){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(folder===this.curFolder &amp;&amp;!forceNewSlice) <a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this.messagesSlice){<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a10a06623d857e96b7da92aac74d62d34">this.messagesSlice.die</a>();this.messagesSlice=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>;<a class="el" href="../../d1/d04/app__install__manager_8js.html#acd145aedb51101ac15a526f73673b0b9">this.messagesContainer.innerHTML</a>= '';}this.curFolder=folder;<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#aba983438655021425112777c0e7ebbe8">switch</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#ac827fa5fbcdd05dd9ed05984a80679b8">folder.type</a>){case 'drafts':case 'localdrafts':case 'sent':this.isIncomingFolder=<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>;<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a91cf6fbebedd86150a36e5ac3d5d3bfc">break</a>;default:this.isIncomingFolder=<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>;<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a91cf6fbebedd86150a36e5ac3d5d3bfc">break</a>;}this.domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>-header-folder-label')[0].<a class="el" href="../../d3/d4b/lockscreen_8js.html#a231b448a4b70e9035748897db2fa1c2a">textContent</a>=<a class="el" href="../../de/d81/xpt__struct_8h.html#a1956a27e1e0205d6704940d480413e03">folder.name</a>;this.hideEmptyLayout();<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#ac827fa5fbcdd05dd9ed05984a80679b8">folder.type</a>=== 'localdrafts'){<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">this.toolbar.refreshBtn.classList.add</a>('collapsed');<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">this.toolbar.moveBtn.classList.add</a>('collapsed');}else{<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">this.toolbar.refreshBtn.classList.remove</a>('collapsed');<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">this.toolbar.moveBtn.classList.remove</a>('collapsed');}this._snippetRequestPending=<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>;this.messagesSlice=model.api.viewFolderMessages(folder);this.messagesSlice.onsplice=<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onMessagesSplice.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>);<a class="el" href="../../db/d0b/_image_editor_8js.html#a7f35c89c0669debd60f931b98aeffd06">this.messagesSlice.onchange</a>=<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onMessagesChange.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>);this.messagesSlice.onstatus=<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onStatusChange.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>);this.messagesSlice.oncomplete=this._boundSliceRequestComplete;<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>;}, showSearch:function(folder, phrase, <a class="el" href="../../de/d11/path_8js.html#a2743b53af000e40d56b193aa76bd4762">filter</a>){<a class="el" href="../../d9/d43/membuster_8js.html#aad81d14d4c8eea114056d7dc1f18f9b7">console.log</a>('sf:showSearch.phrase:', phrase, <a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">phrase.length</a>);var tab=this.domNode.getElementsByClassName('<a class="el" href="../../de/d11/path_8js.html#a2743b53af000e40d56b193aa76bd4762">filter</a>')[0];var nodes=tab.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a86efbc42dbdb988b9a864b83af26e0de">search</a>-<a class="el" href="../../de/d11/path_8js.html#a2743b53af000e40d56b193aa76bd4762">filter</a>');<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this.messagesSlice){<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a10a06623d857e96b7da92aac74d62d34">this.messagesSlice.die</a>();this.messagesSlice=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>;<a class="el" href="../../d1/d04/app__install__manager_8js.html#acd145aedb51101ac15a526f73673b0b9">this.messagesContainer.innerHTML</a>= '';}this.curFolder=folder;this.curPhrase=phrase;this.curFilter=<a class="el" href="../../de/d11/path_8js.html#a2743b53af000e40d56b193aa76bd4762">filter</a>;<a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a089b2988a149c0d135aaab57e2231481">for</a>(var <a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>=0;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>&lt; <a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">nodes.length</a>;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>++){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(nodes[<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>].dataset.filter!=this.curFilter){nodes[<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>].<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#aa17b0309120bc464173f9aff7b5ec294">setAttribute</a>('aria-selected', '<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>');continue;}nodes[<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>].<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#aa17b0309120bc464173f9aff7b5ec294">setAttribute</a>('aria-selected', '<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>');}<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">phrase.length</a>&lt; 1) <a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>;this._snippetRequestPending=<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>;this.messagesSlice=model.api.searchFolderMessages(folder, phrase,{author:filter=== 'all'||<a class="el" href="../../de/d11/path_8js.html#a2743b53af000e40d56b193aa76bd4762">filter</a>=== 'author', recipients:filter=== 'all'||<a class="el" href="../../de/d11/path_8js.html#a2743b53af000e40d56b193aa76bd4762">filter</a>=== 'recipients', subject:filter=== 'all'||<a class="el" href="../../de/d11/path_8js.html#a2743b53af000e40d56b193aa76bd4762">filter</a>=== '<a class="el" href="../../d6/da8/facebook__connector__test_8js.html#ab17dfde70922e77b2bbcbd0192a12531">subject</a>', body:filter=== 'all'||<a class="el" href="../../de/d11/path_8js.html#a2743b53af000e40d56b193aa76bd4762">filter</a>=== 'body'});this.messagesSlice.onsplice=<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onMessagesSplice.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>);<a class="el" href="../../db/d0b/_image_editor_8js.html#a7f35c89c0669debd60f931b98aeffd06">this.messagesSlice.onchange</a>=<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.updateMatchedMessageDom.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>, <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);this.messagesSlice.onstatus=<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onStatusChange.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>);this.messagesSlice.oncomplete=this._boundSliceRequestComplete;<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>;}, onSearchFilterClick:function(filterNode, <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>){this.showSearch(this.curFolder, <a class="el" href="../../db/da2/pripcsem_8h.html#a88ff5d30f0f4ac6ee617c663e93ac1ae">this.searchInput.value</a>, <a class="el" href="../../de/d11/path_8js.html#a2743b53af000e40d56b193aa76bd4762">filterNode.dataset.filter</a>);}, onSearchTextChange:function(<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>){<a class="el" href="../../d9/d43/membuster_8js.html#aad81d14d4c8eea114056d7dc1f18f9b7">console.log</a>('sf:typed, now:', <a class="el" href="../../db/da2/pripcsem_8h.html#a88ff5d30f0f4ac6ee617c663e93ac1ae">this.searchInput.value</a>);this.showSearch(this.curFolder, <a class="el" href="../../db/da2/pripcsem_8h.html#a88ff5d30f0f4ac6ee617c663e93ac1ae">this.searchInput.value</a>, this.curFilter);}, onCancelSearch:function(<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>){try{<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this.messagesSlice) <a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a10a06623d857e96b7da92aac74d62d34">this.messagesSlice.die</a>();}<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#af39c2275c702dbe367eb69898156da2a">catch</a>(ex){<a class="el" href="../../db/df4/geoloc_8js.html#ac3dbd5af3a73f4aa69249dd1c6b9c980">console.error</a>('problem killing slice:', ex, '\<a class="el" href="../../d2/d7d/jsapi_8h.html#aa5a8b9a2d5edc8e2e7ba67d7e2ee4e69">n</a>', <a class="el" href="../../d6/d1b/pprthred_8h.html#afe76c3c951fe40bd646fbf0b89cbcd17">ex.stack</a>);}this.messagesSlice=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>;Cards.removeCardAndSuccessors(this.domNode, 'animate');}, onGetMoreMessages:function(){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!this.messagesSlice) <a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;this.messagesSlice.requestGrowth(1, <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>);<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">this.syncMoreNode.classList.add</a>('collapsed');}, onStatusChange:function(newStatus){<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#aba983438655021425112777c0e7ebbe8">switch</a>(newStatus){case 'synchronizing':case 'syncblocked':<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">this.syncingNode.classList.remove</a>('collapsed');<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">this.syncMoreNode.classList.add</a>('collapsed');this.hideEmptyLayout();<a class="el" href="../../d2/df8/prthread_8h.html#a22ec211475b54a8de0468990ea9654da">this.toolbar.refreshBtn.dataset.state</a>= 'synchronizing';<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a91cf6fbebedd86150a36e5ac3d5d3bfc">break</a>;case 'syncfailed':Toaster.logRetryable(newStatus, <a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onRefresh.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>));case 'synced':<a class="el" href="../../d2/df8/prthread_8h.html#a22ec211475b54a8de0468990ea9654da">this.toolbar.refreshBtn.dataset.state</a>= 'synchronized';<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">this.syncingNode.classList.add</a>('collapsed');<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a91cf6fbebedd86150a36e5ac3d5d3bfc">break</a>;}}, showEmptyLayout:function(){var <a class="el" href="../../dd/dfa/classtext.html">text</a>=this.domNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../d3/d87/mock__contact_8js.html#ad08d759db77b6861afcb4729fc620b95">list</a>-empty-<a class="el" href="../../d2/d7d/jsapi_8h.html#a254bf0858da09c96a48daf64404eb4f8">message</a>-<a class="el" href="../../dd/dfa/classtext.html">text</a>')[0];this._clearCachedMessages();<a class="el" href="../../d3/d4b/lockscreen_8js.html#a231b448a4b70e9035748897db2fa1c2a">text.textContent</a>=<a class="el" href="../../db/da2/pripcsem_8h.html#a5ffbd19d0a0b87f9ff15e7d0c4410984">this.mode</a>== '<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a86efbc42dbdb988b9a864b83af26e0de">search</a>'?<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#a18697261a961b9d0efde405b5a2b244f">mozL10n.get</a>('messages-<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a86efbc42dbdb988b9a864b83af26e0de">search</a>-empty'):<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#a18697261a961b9d0efde405b5a2b244f">mozL10n.get</a>('messages-folder-empty');<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">this.messageEmptyContainer.classList.remove</a>('collapsed');<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">this.toolbar.editBtn.classList.add</a>('disabled');<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">this.toolbar.searchBtn.classList.add</a>('disabled');this._hideSearchBoxByScrolling();}, hideEmptyLayout:function(){<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">this.messageEmptyContainer.classList.add</a>('collapsed');<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">this.toolbar.editBtn.classList.remove</a>('disabled');<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">this.toolbar.searchBtn.classList.remove</a>('disabled');}, onSliceRequestComplete:function(newEmailCount){this.messagesSlice.oncomplete=this._boundSliceRequestComplete;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this.messagesSlice.userCanGrowDownwards) <a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">this.syncMoreNode.classList.remove</a>('collapsed');else <a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">this.syncMoreNode.classList.add</a>('collapsed');<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">this.messagesSlice.items.length</a>===0){this.showEmptyLayout();}this.onNewMail(newEmailCount);this._onScroll(<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>);}, onNewMail:function(newEmailCount){var inboxFolder=model.foldersSlice.getFirstFolderWithType('inbox');<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">inboxFolder.id</a>===<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">this.curFolder.id</a> &amp;&amp;newEmailCount &amp;&amp;newEmailCount!==NaN &amp;&amp;newEmailCount!==0){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!Cards.isVisible(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>)){this._whenVisible=<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this.onNewMail.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>, newEmailCount);<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;}<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this._topbar &amp;&amp;this._topbar.getElement()!==<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>){this._topbar.updateNewEmailCount(newEmailCount);}else{this._topbar=new MessageListTopbar(this.scrollContainer, newEmailCount);var el=document.getElementsByClassName(MessageListTopbar.CLASS_NAME)[0];this._topbar.decorate(el);<a class="el" href="../../d3/d91/j3d_8js.html#ae7817194480cfc900873938c8e7dd602">this._topbar.render</a>();}}}, onScroll:function(evt){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this._pendingScrollEvent){<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;}this._pendingScrollEvent=<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>;this._scrollTimer=<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#adf7ce41cd256eda7ce1f6adeea723bd3">setTimeout</a>(this._onScroll, SCROLL_DELAY, evt);}, _onScroll:function(<a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this._pendingScrollEvent){this._pendingScrollEvent=<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>;}<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!this.messagesSlice||this.messagesSlice.pendingRequestCount) <a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!this._hasSnippetRequest()){this._requestSnippets();}var curScrollTop=this.scrollContainer.scrollTop, viewHeight=this.scrollContainer.clientHeight;var preScreens=curScrollTop/viewHeight, postScreens=(this.scrollContainer.scrollHeight-(curScrollTop+viewHeight))/viewHeight;var shrinkLowIncl=0, shrinkHighIncl=<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">this.messagesSlice.items.length</a>-1, messageNode=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>, targOff;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(preScreens&lt; SCROLL_MIN_BUFFER_SCREENS &amp;&amp;!this.messagesSlice.atTop){this.messagesSlice.requestGrowth(-1);<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;}else <a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(preScreens &gt; SCROLL_MAX_RETENTION_SCREENS){targOff=curScrollTop-(viewHeight *(SCROLL_MAX_RETENTION_SCREENS-1));<a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a089b2988a149c0d135aaab57e2231481">for</a>(messageNode=this.messagesContainer.firstElementChild;messageNode.offsetTop+messageNode.clientHeight&lt; targOff;messageNode=messageNode.nextElementSibling){shrinkLowIncl++;}}<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(postScreens&lt; SCROLL_MIN_BUFFER_SCREENS &amp;&amp;!this.messagesSlice.atBottom){this.messagesSlice.requestGrowth(1);}else <a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(postScreens &gt; SCROLL_MAX_RETENTION_SCREENS){targOff=curScrollTop+this.scrollContainer.clientHeight+(viewHeight *(SCROLL_MAX_RETENTION_SCREENS-1));<a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a089b2988a149c0d135aaab57e2231481">for</a>(messageNode=this.messagesContainer.lastElementChild;messageNode.offsetTop &gt; targOff;messageNode=messageNode.previousElementSibling){shrinkHighIncl--;}}<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(shrinkLowIncl!==0||shrinkHighIncl!==<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">this.messagesSlice.items.length</a>-1){this.messagesSlice.requestShrinkage(shrinkLowIncl, shrinkHighIncl);}}, _hasSnippetRequest:function(){var <a class="el" href="../../db/d13/ns_i_d_o_m_device_proximity_event_8idl.html#a0b0ede69e8156eb97acc579b88e883de">max</a>=MAXIMUM_MS_BETWEEN_SNIPPET_REQUEST;var now=Date.now();var beforeTimeout=(this._lastSnippetRequest+<a class="el" href="../../db/d13/ns_i_d_o_m_device_proximity_event_8idl.html#a0b0ede69e8156eb97acc579b88e883de">max</a>) &gt; now;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this._snippetRequestPending &amp;&amp;beforeTimeout){<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>;}<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> <a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>;}, _pendingSnippetRequest:function(){this._snippetRequestPending=<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>;this._lastSnippetRequest=Date.now();}, _clearSnippetRequest:function(){this._snippetRequestPending=<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>;}, _requestSnippets:function(){var items=this.messagesSlice.items;var <a class="el" href="../../d9/d04/expat_8h.html#a5df20ff5bc70fb664abe3912796e90df">len</a>=<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">items.length</a>;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!<a class="el" href="../../d9/d04/expat_8h.html#a5df20ff5bc70fb664abe3912796e90df">len</a>) <a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;var clearSnippets=<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this._clearSnippetRequest.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>);var <a class="el" href="../../dc/df3/plgetopt_8h.html#af88bfb344db31578251e79bdf8cbf4bc">options</a>={maximumBytesToFetch:MAXIMUM_BYTES_PER_MESSAGE_DURING_SCROLL};<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../d9/d04/expat_8h.html#a5df20ff5bc70fb664abe3912796e90df">len</a>&lt; MINIMUM_ITEMS_FOR_SCROLL_CALC){this._pendingSnippetRequest();this.messagesSlice.maybeRequestBodies(0, 9, <a class="el" href="../../dc/df3/plgetopt_8h.html#af88bfb344db31578251e79bdf8cbf4bc">options</a>, clearSnippets);<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;}<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!this._scrollContainerOffset){this._scrollContainerRect=this.scrollContainer.getBoundingClientRect();}var constOffset=<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">this._scrollContainerRect.top</a>;var topOffset=(items[0].element.getBoundingClientRect().<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">top</a>-constOffset);var distance=this._distanceBetweenMessages;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!distance){this._distanceBetweenMessages=distance=Math.abs(topOffset-(items[1].element.getBoundingClientRect().<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">top</a>-constOffset));}var startOffset=Math.floor(Math.abs(topOffset/distance));this._snippetsPerScrollTick=(this._snippetsPerScrollTick||Math.ceil(<a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a99ef05b40c29af68ac3026a597233269">this._scrollContainerRect.height</a>/distance));this._pendingSnippetRequest();this.messagesSlice.maybeRequestBodies(startOffset, startOffset+this._snippetsPerScrollTick, <a class="el" href="../../dc/df3/plgetopt_8h.html#af88bfb344db31578251e79bdf8cbf4bc">options</a>, clearSnippets);}, _cacheListLimit:7, _cacheDomTimeoutId:0, _cacheDom:function(){this._cacheDomTimeoutId=0;var cacheNode=<a class="el" href="../../d2/da5/camera_2test_2unit_2mock__audio_8js.html#a40c9d60cba69319e5d8e135a3b36356e">this.domNode.cloneNode</a>(<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>);var removableCacheNode=<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9bd72b771a78ff04c5bb1d670f034005">cacheNode.querySelector</a>('.<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a86efbc42dbdb988b9a864b83af26e0de">search</a>-tease-bar');<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(removableCacheNode) <a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">removableCacheNode.classList.add</a>('collapsed');removableCacheNode=<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9bd72b771a78ff04c5bb1d670f034005">cacheNode.querySelector</a>('.'+MessageListTopbar.CLASS_NAME);<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(removableCacheNode) <a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">removableCacheNode.classList.add</a>('collapsed');<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">this.messagesContainer.children.length</a> &gt; this._cacheListLimit){var msgContainer=cacheNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-messages-<a class="el" href="../../d3/d4b/lockscreen_8js.html#a88e6efb757b9907baa46a5755484f2bd">container</a>')[0];<a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a089b2988a149c0d135aaab57e2231481">for</a>(var childIndex=<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">msgContainer.children.length</a>-1;childIndex &gt; this._cacheListLimit-1;childIndex--){var childNode=msgContainer.children[childIndex];<a class="el" href="../../d1/d04/app__install__manager_8js.html#a5ebdda199bee63b9cb8dc969a17d4a9e">childNode.parentNode.removeChild</a>(childNode);}}htmlCache.saveFromNode(cacheNode);}, _considerCacheDom:function(<a class="el" href="../../d2/d7d/jsapi_8h.html#aafd95f8c7a99b9189ede7cdf0871ebe8">index</a>){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!this._cacheDomTimeoutId &amp;&amp;this.cacheableFolderId===<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">this.curFolder.id</a> &amp;&amp;this.messagesSlice.atTop &amp;&amp;(<a class="el" href="../../d2/d7d/jsapi_8h.html#aafd95f8c7a99b9189ede7cdf0871ebe8">index</a>||<a class="el" href="../../d2/d7d/jsapi_8h.html#aafd95f8c7a99b9189ede7cdf0871ebe8">index</a>===0)&amp;&amp;<a class="el" href="../../d2/d7d/jsapi_8h.html#aafd95f8c7a99b9189ede7cdf0871ebe8">index</a>&lt; this._cacheListLimit &amp;&amp;<a class="el" href="../../db/da2/pripcsem_8h.html#a5ffbd19d0a0b87f9ff15e7d0c4410984">this.mode</a>=== 'nonsearch'){this._cacheDomTimeoutId=<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#adf7ce41cd256eda7ce1f6adeea723bd3">setTimeout</a>(<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">this._cacheDom.bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>), 600);}}, _clearCachedMessages:function(){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this.usingCachedNode){<a class="el" href="../../d1/d04/app__install__manager_8js.html#acd145aedb51101ac15a526f73673b0b9">this.messagesContainer.innerHTML</a>= '';this.usingCachedNode=<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>;}}, onMessagesSplice:function(<a class="el" href="../../d2/d7d/jsapi_8h.html#aafd95f8c7a99b9189ede7cdf0871ebe8">index</a>, howMany, addedItems, requested, moreExpected, fake){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../d2/d7d/jsapi_8h.html#aafd95f8c7a99b9189ede7cdf0871ebe8">index</a>===0 &amp;&amp;howMany===0 &amp;&amp;!<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">addedItems.length</a>) <a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;var prevHeight;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(howMany){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(fake &amp;&amp;<a class="el" href="../../d2/d7d/jsapi_8h.html#aafd95f8c7a99b9189ede7cdf0871ebe8">index</a>===0 &amp;&amp;<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">this.messagesSlice.items.length</a>===howMany &amp;&amp;!<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">addedItems.length</a>){}else{prevHeight=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this.messagesSlice.items[<a class="el" href="../../d2/d7d/jsapi_8h.html#aafd95f8c7a99b9189ede7cdf0871ebe8">index</a>].element.offsetTop&lt; this.scrollContainer.scrollTop+this.messagesContainer.offsetTop){prevHeight=this.messagesContainer.clientHeight;}<a class="el" href="../../dc/d9e/_playlist_drawer_8js.html#a089b2988a149c0d135aaab57e2231481">for</a>(var <a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>=<a class="el" href="../../d2/d7d/jsapi_8h.html#aafd95f8c7a99b9189ede7cdf0871ebe8">index</a>+howMany-1;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a> &gt;=<a class="el" href="../../d2/d7d/jsapi_8h.html#aafd95f8c7a99b9189ede7cdf0871ebe8">index</a>;<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>--){var <a class="el" href="../../d2/d7d/jsapi_8h.html#a254bf0858da09c96a48daf64404eb4f8">message</a>=this.messagesSlice.items[<a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>];<a class="el" href="../../d1/d04/app__install__manager_8js.html#a5ebdda199bee63b9cb8dc969a17d4a9e">message.element.parentNode.removeChild</a>(message.element);}<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(prevHeight!==<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>){this.scrollContainer.scrollTop-=(prevHeight-this.messagesContainer.clientHeight);}<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">this.messagesContainer.children.length</a>===0){this.showEmptyLayout();}}}this._clearCachedMessages();var insertBuddy, <a class="el" href="../../df/d44/permission__manager_8js.html#a67b9624a73d0c7dbd44bc7b41817b579">self</a>=<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../d2/d7d/jsapi_8h.html#aafd95f8c7a99b9189ede7cdf0871ebe8">index</a> &gt;=this.messagesContainer.childElementCount) insertBuddy=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>;else insertBuddy=this.messagesContainer.children[<a class="el" href="../../d2/d7d/jsapi_8h.html#aafd95f8c7a99b9189ede7cdf0871ebe8">index</a>];<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(insertBuddy &amp;&amp;(insertBuddy.offsetTop&lt; this.scrollContainer.scrollTop+this.messagesContainer.offsetTop)) prevHeight=this.messagesContainer.clientHeight;else prevHeight=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">addedItems.length</a> &gt; 0){this.hideEmptyLayout();}<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#aae3803cf3819ae1182550b783e1ea692">addedItems.forEach</a>(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(<a class="el" href="../../d2/d7d/jsapi_8h.html#a254bf0858da09c96a48daf64404eb4f8">message</a>, <a class="el" href="../../da/d7d/sylvester_8js.html#a091f0effa2d52e9315e1f032073e953b">i</a>){var domMessage;domMessage=message.element=<a class="el" href="../../d2/da5/camera_2test_2unit_2mock__audio_8js.html#a40c9d60cba69319e5d8e135a3b36356e">msgHeaderItemNode.cloneNode</a>(<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>);<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../db/da2/pripcsem_8h.html#a5ffbd19d0a0b87f9ff15e7d0c4410984">self.mode</a>=== 'nonsearch'){<a class="el" href="../../d2/d7d/jsapi_8h.html#a254bf0858da09c96a48daf64404eb4f8">domMessage.message</a>=<a class="el" href="../../d2/d7d/jsapi_8h.html#a254bf0858da09c96a48daf64404eb4f8">message</a>;self.updateMessageDom(<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>, <a class="el" href="../../d2/d7d/jsapi_8h.html#a254bf0858da09c96a48daf64404eb4f8">message</a>);}else{<a class="el" href="../../d2/d7d/jsapi_8h.html#a254bf0858da09c96a48daf64404eb4f8">domMessage.message</a>=message.header;self.updateMatchedMessageDom(<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>, <a class="el" href="../../d2/d7d/jsapi_8h.html#a254bf0858da09c96a48daf64404eb4f8">message</a>);}self.messagesContainer.insertBefore(domMessage, insertBuddy);});<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(prevHeight){this.scrollContainer.scrollTop+=(this.messagesContainer.clientHeight-prevHeight);}<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">addedItems.length</a>||howMany){this._considerCacheDom(<a class="el" href="../../d2/d7d/jsapi_8h.html#aafd95f8c7a99b9189ede7cdf0871ebe8">index</a>);}}, onMessagesChange:function(<a class="el" href="../../d2/d7d/jsapi_8h.html#a254bf0858da09c96a48daf64404eb4f8">message</a>, <a class="el" href="../../d2/d7d/jsapi_8h.html#aafd95f8c7a99b9189ede7cdf0871ebe8">index</a>){this.updateMessageDom(<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>, <a class="el" href="../../d2/d7d/jsapi_8h.html#a254bf0858da09c96a48daf64404eb4f8">message</a>);this._considerCacheDom(<a class="el" href="../../d2/d7d/jsapi_8h.html#aafd95f8c7a99b9189ede7cdf0871ebe8">index</a>);}, _updatePeepDom:function(peep){<a class="el" href="../../d3/d4b/lockscreen_8js.html#a231b448a4b70e9035748897db2fa1c2a">peep.element.textContent</a>=<a class="el" href="../../de/d81/xpt__struct_8h.html#a1956a27e1e0205d6704940d480413e03">peep.name</a>||<a class="el" href="../../df/d9e/prnetdb_8h.html#a906995422a64396276c50a754ed3d21e">peep.address</a>;}, updateMessageDom:function(firstTime, <a class="el" href="../../d2/d7d/jsapi_8h.html#a254bf0858da09c96a48daf64404eb4f8">message</a>){var msgNode=message.element;<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">msgNode.dataset.id</a>=<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">message.id</a>;var dateNode=msgNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-<a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">date</a>')[0];<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(firstTime){var listPerson;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this.isIncomingFolder) listPerson=message.author;else <a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../da/d32/prio_8h.html#a5d467a63df9ff99d33d6749038f6f421">message.to</a> &amp;&amp;<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">message.to.length</a>) listPerson=<a class="el" href="../../da/d32/prio_8h.html#a5d467a63df9ff99d33d6749038f6f421">message.to</a>[0];else <a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(message.cc &amp;&amp;<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">message.cc.length</a>) listPerson=message.cc[0];else <a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(message.bcc &amp;&amp;<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">message.bcc.length</a>) listPerson=message.bcc[0];else listPerson=message.author;listPerson.element=msgNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-author')[0];<a class="el" href="../../db/d0b/_image_editor_8js.html#a7f35c89c0669debd60f931b98aeffd06">listPerson.onchange</a>=this._updatePeepDom;<a class="el" href="../../db/d0b/_image_editor_8js.html#a7f35c89c0669debd60f931b98aeffd06">listPerson.onchange</a>(listPerson);<a class="el" href="../../d3/d91/j3d_8js.html#a4e10274dcc3f346cdbb535933d1d4f27">dateNode.dataset.time</a>=message.date.valueOf();<a class="el" href="../../d3/d4b/lockscreen_8js.html#a231b448a4b70e9035748897db2fa1c2a">dateNode.textContent</a>=prettyDate(<a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">message.date</a>);displaySubject(msgNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-<a class="el" href="../../d6/da8/facebook__connector__test_8js.html#ab17dfde70922e77b2bbcbd0192a12531">subject</a>')[0], <a class="el" href="../../d2/d7d/jsapi_8h.html#a254bf0858da09c96a48daf64404eb4f8">message</a>);<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(message.hasAttachments) msgNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-attachments')[0].<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">classList.add</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-attachments-yes');}msgNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-snippet')[0].<a class="el" href="../../d3/d4b/lockscreen_8js.html#a231b448a4b70e9035748897db2fa1c2a">textContent</a>=message.snippet;var unreadNode=msgNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-unread-<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a1df8504e63545f2e6c93c0cde966c060">section</a>')[0];<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(message.isRead){<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">unreadNode.classList.remove</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-unread-<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a1df8504e63545f2e6c93c0cde966c060">section</a>-unread');<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">dateNode.classList.remove</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-<a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">date</a>-unread');}else{<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">unreadNode.classList.add</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-unread-<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a1df8504e63545f2e6c93c0cde966c060">section</a>-unread');<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">dateNode.classList.add</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-<a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">date</a>-unread');}var starNode=msgNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-<a class="el" href="../../da/dce/details__test_8js.html#a6ae307f1c7e49512089a0b8585e8ad83">star</a>')[0];<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(message.isStarred) <a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">starNode.classList.add</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-<a class="el" href="../../da/dce/details__test_8js.html#a6ae307f1c7e49512089a0b8585e8ad83">star</a>-starred');else <a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">starNode.classList.remove</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-<a class="el" href="../../da/dce/details__test_8js.html#a6ae307f1c7e49512089a0b8585e8ad83">star</a>-starred');}, updateMatchedMessageDom:function(firstTime, matchedHeader){var msgNode=matchedHeader.element, matches=matchedHeader.matches, <a class="el" href="../../d2/d7d/jsapi_8h.html#a254bf0858da09c96a48daf64404eb4f8">message</a>=matchedHeader.header;<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">msgNode.dataset.id</a>=<a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">matchedHeader.id</a>;var dateNode=msgNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-<a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">date</a>')[0];<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(firstTime){var authorNode=msgNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-author')[0];<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(matches.author){appendMatchItemTo(matches.author, authorNode);}else{message.author.element=authorNode;<a class="el" href="../../db/d0b/_image_editor_8js.html#a7f35c89c0669debd60f931b98aeffd06">message.author.onchange</a>=this._updatePeepDom;<a class="el" href="../../db/d0b/_image_editor_8js.html#a7f35c89c0669debd60f931b98aeffd06">message.author.onchange</a>(message.author);}<a class="el" href="../../d3/d91/j3d_8js.html#a4e10274dcc3f346cdbb535933d1d4f27">dateNode.dataset.time</a>=message.date.valueOf();<a class="el" href="../../d3/d4b/lockscreen_8js.html#a231b448a4b70e9035748897db2fa1c2a">dateNode.textContent</a>=prettyDate(<a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">message.date</a>);var subjectNode=msgNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-<a class="el" href="../../d6/da8/facebook__connector__test_8js.html#ab17dfde70922e77b2bbcbd0192a12531">subject</a>')[0];<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../d6/da8/facebook__connector__test_8js.html#ab17dfde70922e77b2bbcbd0192a12531">matches.subject</a>) appendMatchItemTo(<a class="el" href="../../d6/da8/facebook__connector__test_8js.html#ab17dfde70922e77b2bbcbd0192a12531">matches.subject</a>[0], subjectNode);else displaySubject(subjectNode, <a class="el" href="../../d2/d7d/jsapi_8h.html#a254bf0858da09c96a48daf64404eb4f8">message</a>);var snippetNode=msgNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-snippet')[0];<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(matches.body) appendMatchItemTo(matches.body[0], snippetNode);else <a class="el" href="../../d3/d4b/lockscreen_8js.html#a231b448a4b70e9035748897db2fa1c2a">snippetNode.textContent</a>=message.snippet;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(message.hasAttachments) msgNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-attachments')[0].<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">classList.add</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-attachments-yes');}var unreadNode=msgNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-unread-<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a1df8504e63545f2e6c93c0cde966c060">section</a>')[0];<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(message.isRead){<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">unreadNode.classList.remove</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-unread-<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a1df8504e63545f2e6c93c0cde966c060">section</a>-unread');<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">dateNode.classList.remove</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-<a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">date</a>-unread');}else{<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">unreadNode.classList.add</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-unread-<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a1df8504e63545f2e6c93c0cde966c060">section</a>-unread');<a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">dateNode.classList.add</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-<a class="el" href="../../d3/d4b/lockscreen_8js.html#a94ea84d1e418dad15ea65e006b293fdd">date</a>-unread');}var starNode=msgNode.getElementsByClassName('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-<a class="el" href="../../da/dce/details__test_8js.html#a6ae307f1c7e49512089a0b8585e8ad83">star</a>')[0];<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(message.isStarred) <a class="el" href="../../df/d44/permission__manager_8js.html#ae5a9ec7a035c6634f85498958b2c7a12">starNode.classList.add</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-<a class="el" href="../../da/dce/details__test_8js.html#a6ae307f1c7e49512089a0b8585e8ad83">star</a>-starred');else <a class="el" href="../../d1/d04/app__install__manager_8js.html#a9a509fff9fcf53ecd0f73c0d965a7d6b">starNode.classList.remove</a>('<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-header-<a class="el" href="../../da/dce/details__test_8js.html#a6ae307f1c7e49512089a0b8585e8ad83">star</a>-starred');}, onCardVisible:function(){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this._whenVisible){var fn=this._whenVisible;this._whenVisible=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>;fn();}}, onClickMessage:function(messageNode, <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>){var header=<a class="el" href="../../d2/d7d/jsapi_8h.html#a254bf0858da09c96a48daf64404eb4f8">messageNode.message</a>;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this.editMode){var idx=<a class="el" href="../../d4/d23/binary__string__view_8js.html#a78826d1185ecdcfc63deffaedf15c7bd">this.selectedMessages.indexOf</a>(header);var <a class="el" href="../../d2/d7d/jsapi_8h.html#a9c0cec265243907d0da86b92bda26eca">cb</a>=<a class="el" href="../../d1/d04/app__install__manager_8js.html#a9bd72b771a78ff04c5bb1d670f034005">messageNode.querySelector</a>('<a class="el" href="../../d2/d7d/jsapi_8h.html#a8908b6d42ac95ee6387e73b7ac543dae">input</a>[<a class="el" href="../../de/d81/xpt__struct_8h.html#ac827fa5fbcdd05dd9ed05984a80679b8">type</a>=checkbox]');<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(idx!==-1){this.selectedMessages.splice(idx, 1);cb.checked=<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>;}else{<a class="el" href="../../d5/da4/preferences_8js.html#a04cdfd02512383b1feea0e6fa7f5d3a3">this.selectedMessages.push</a>(header);cb.checked=<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>;}this.selectedMessagesUpdated();<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;}<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this.curFolder &amp;&amp;<a class="el" href="../../de/d81/xpt__struct_8h.html#ac827fa5fbcdd05dd9ed05984a80679b8">this.curFolder.type</a>=== 'localdrafts'){var composer=header.editAsDraft(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(){Cards.pushCard('compose', 'default', 'animate',{composer:composer});});<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;}Cards.pushCard( 'message_reader', 'default', 'animate',{header:header, <a class="el" href="../../de/d81/xpt__struct_8h.html#a0ad0ebb641411c0c63079e4440033275">messageSuid:messageNode.dataset.id</a>});}, onHoldMessage:function(messageNode, <a class="el" href="../../df/dea/pkcs11t_8h.html#afaa077e4b9760c92cbaf0d838e743d8c">event</a>){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this.curFolder) this.setEditMode(<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>);}, onRefresh:function(){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!this.messagesSlice) <a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#aba983438655021425112777c0e7ebbe8">switch</a>(<a class="el" href="../../de/d8f/jsdebug_8h.html#a0818854fd36b9ae0fdfe5872464dae94">this.messagesSlice.status</a>){case 'new':case 'synchronizing':<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a91cf6fbebedd86150a36e5ac3d5d3bfc">break</a>;case 'synced':this.messagesSlice.refresh();<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a91cf6fbebedd86150a36e5ac3d5d3bfc">break</a>;case 'syncfailed':<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">this.messagesSlice.items.length</a>) this.messagesSlice.refresh();else this.showFolder(this.curFolder, <a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>);<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a91cf6fbebedd86150a36e5ac3d5d3bfc">break</a>;}}, onStarMessages:function(){var op=model.api.markMessagesStarred(this.selectedMessages, this.setAsStarred);this.setEditMode(<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);Toaster.logMutation(op);}, onMarkMessagesRead:function(){var op=model.api.markMessagesRead(this.selectedMessages, this.setAsRead);this.setEditMode(<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);Toaster.logMutation(op);}, onDeleteMessages:function(){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">this.selectedMessages.length</a>===0) <a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;var <a class="el" href="../../d1/d04/app__install__manager_8js.html#a888e6068bf00699dfddf2b6ee25e6c7a">dialog</a>=<a class="el" href="../../d2/da5/camera_2test_2unit_2mock__audio_8js.html#a40c9d60cba69319e5d8e135a3b36356e">deleteConfirmMsgNode.cloneNode</a>(<a class="el" href="../../df/d49/system_2camera_2js_2camera_8js.html#a930920b2bc42824a5c03be681830f4b2">true</a>);var <a class="el" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a4a1b5640b674da15d6f1b87899e53789">content</a>=dialog.getElementsByTagName('<a class="el" href="../../dd/dc2/plarenas_8h.html#a117104b82864d3b23ec174af6d392709">p</a>')[0];<a class="el" href="../../d3/d4b/lockscreen_8js.html#a231b448a4b70e9035748897db2fa1c2a">content.textContent</a>=<a class="el" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#a18697261a961b9d0efde405b5a2b244f">mozL10n.get</a>('<a class="el" href="../../d2/d7d/jsapi_8h.html#a254bf0858da09c96a48daf64404eb4f8">message</a>-multiedit-delete-<a class="el" href="../../d9/d13/shared_2style_2_r_e_a_d_m_e_8md.html#ab77aa8c2fa705d45d7ff1db3a11306ae">confirm</a>',{<a class="el" href="../../de/d81/xpt__struct_8h.html#a1892eba2086d12ac2b09005aeb09ea3b">n:this.selectedMessages.length</a>});<a class="el" href="../../db/df4/geoloc_8js.html#a34b2bb38da6ac84e5708382e03478900">ConfirmDialog.show</a>(<a class="el" href="../../d1/d04/app__install__manager_8js.html#a888e6068bf00699dfddf2b6ee25e6c7a">dialog</a>,{id: '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-delete-<a class="el" href="../../da/ded/ds-test_8js.html#a96c639e17949eb5b6031072207d80575">ok</a>', handler:function(){var op=model.api.deleteMessages(this.selectedMessages);Toaster.logMutation(op);this.setEditMode(<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);}.<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>)},{id: '<a class="el" href="../../d5/dde/plerror_8h.html#a2c3cb87d009c003069b9a90f020f8a9f">msg</a>-delete-<a class="el" href="../../dc/d35/inline-receiver_8js.html#a01de14b323a40639980004403daa8432">cancel</a>', handler:null});}, onMoveMessages:function(){Cards.folderSelector(<a class="el" href="../../d9/dc4/pralarm_8h.html#a7b570f1c425a05af1046d4e6f37d5a0f">function</a>(folder){var op=model.api.moveMessages(this.selectedMessages, folder);Toaster.logMutation(op);this.setEditMode(<a class="el" href="../../d7/dd2/qcmstypes_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>);}.<a class="el" href="../../d3/d91/j3d_8js.html#a1ad2f17c038f79ef240a44e21a46ef14">bind</a>(<a class="el" href="../../d3/da1/shared_2resources_2apn_2_r_e_a_d_m_e_8md.html#af23f5f9187c304ed6a90a2c49a64fa48">this</a>));}, _folderChanged:function(folder){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(!model.foldersSlice) <a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a>;var inboxFolder=model.foldersSlice.getFirstFolderWithType('inbox');this.cacheableFolderId=model.account===model.acctsSlice.defaultAccount?inboxFolder.id:null;this.folder=folder;<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(<a class="el" href="../../db/da2/pripcsem_8h.html#a5ffbd19d0a0b87f9ff15e7d0c4410984">this.mode</a>== 'nonsearch'){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this.showFolder(folder)){this._hideSearchBoxByScrolling();}}else{this.showSearch(folder, '', 'all');}}, die:function(){<a class="el" href="../../de/dfc/events_8js.html#aa27c1f7f883859f374ef91e69db597bd">if</a>(this.messagesSlice){<a class="el" href="../../d0/d6e/build__stage_2email_2js_2ext_2mailapi_2imap_2probe_8js.html#a10a06623d857e96b7da92aac74d62d34">this.messagesSlice.die</a>();this.messagesSlice=<a class="el" href="../../d3/d52/blanket_8js.html#a24d794dfc756320ffadb905d526299bc">null</a>;}<a class="el" href="../../d1/dce/utils_81_83_8js.html#adf903c90ab06d8b17d367caa55630b30">model.removeListener</a>('folder', this._boundFolderChanged);<a class="el" href="../../d1/dce/utils_81_83_8js.html#adf903c90ab06d8b17d367caa55630b30">model.removeListener</a>('newInboxMessages', this._boundOnNewMail);}};Cards.defineCard({name: 'message_list', modes:{nonsearch:{tray:false}, search:{tray:false}}, constructor:MessageListCard, templateNode:templateNode});<a class="el" href="../../d5/dff/tests_2python_2gaia-ui-tests_2gaiatest_2atoms_2screenshot_8js.html#a6bc243e0e988691de46b9baa46ec6413">return</a> MessageListCard;})</td></tr>
</table>
<hr/><h2>関数</h2>
<a class="anchor" id="a07b333630ce6e3f8816de5b0336ac762"></a><!-- doxytag: member="message_list.js::define" ref="a07b333630ce6e3f8816de5b0336ac762" args="(function(require){var templateNode=require('tmpl!./message_list.html'), msgHeaderItemNode=require('tmpl!./msg/header_item.html'), deleteConfirmMsgNode=require('tmpl!./msg/delete_confirm.html'), common=require('mail_common'), model=require('model'), htmlCache=require('html_cache'), MessageListTopbar=require('message_list_topbar'), mozL10n=require('l10n!'), Cards=common.Cards, Toaster=common.Toaster, ConfirmDialog=common.ConfirmDialog, batchAddClass=common.batchAddClass, bindContainerClickAndHold=common.bindContainerClickAndHold, bindContainerHandler=common.bindContainerHandler, appendMatchItemTo=common.appendMatchItemTo, displaySubject=common.displaySubject, prettyDate=common.prettyDate;var SCROLL_MIN_BUFFER_SCREENS=2;var SCROLL_MAX_RETENTION_SCREENS=7;var SCROLL_DELAY=50;var MINIMUM_ITEMS_FOR_SCROLL_CALC=10;var MAXIMUM_MS_BETWEEN_SNIPPET_REQUEST=6000;var MAXIMUM_BYTES_PER_MESSAGE_DURING_SCROLL=4 *1024;function MessageListCard(domNode, mode, args){this.domNode=domNode;this.mode=mode;this.scrollNode=domNode.getElementsByClassName('msg&#45;list&#45;scrollouter')[0];if(mode=== 'nonsearch') batchAddClass(domNode, 'msg&#45;search&#45;only', 'collapsed');else batchAddClass(domNode, 'msg&#45;nonsearch&#45;only', 'collapsed');this.messagesContainer=domNode.getElementsByClassName('msg&#45;messages&#45;container')[0];this.messageEmptyContainer=domNode.getElementsByClassName('msg&#45;list&#45;empty&#45;container')[0];bindContainerClickAndHold(this.messagesContainer, this.onClickMessage.bind(this), this.onHoldMessage.bind(this));this.scrollContainer=domNode.getElementsByClassName('msg&#45;list&#45;scrollouter')[0];this.scrollContainer.addEventListener('scroll', this.onScroll.bind(this), false);this.syncingNode=domNode.getElementsByClassName('msg&#45;messages&#45;syncing')[0];this.syncMoreNode=domNode.getElementsByClassName('msg&#45;messages&#45;sync&#45;more')[0];this.syncMoreNode.addEventListener('click', this.onGetMoreMessages.bind(this), false);domNode.getElementsByClassName('msg&#45;folder&#45;list&#45;btn')[0].addEventListener('click', this.onShowFolders.bind(this), false);domNode.getElementsByClassName('msg&#45;compose&#45;btn')[0].addEventListener('click', this.onCompose.bind(this), false);this.toolbar={};this.toolbar.searchBtn=domNode.getElementsByClassName('msg&#45;search&#45;btn')[0];this.toolbar.searchBtn.addEventListener('click', this.onSearchButton.bind(this), false);this.toolbar.editBtn=domNode.getElementsByClassName('msg&#45;edit&#45;btn')[0];this.toolbar.editBtn.addEventListener('click', this.setEditMode.bind(this, true), false);this.toolbar.refreshBtn=domNode.getElementsByClassName('msg&#45;refresh&#45;btn')[0];this.toolbar.refreshBtn.addEventListener('click', this.onRefresh.bind(this), false);domNode.getElementsByClassName('msg&#45;listedit&#45;cancel&#45;btn')[0].addEventListener('click', this.setEditMode.bind(this, false), false);domNode.getElementsByClassName('msg&#45;star&#45;btn')[0].addEventListener('click', this.onStarMessages.bind(this, true), false);domNode.getElementsByClassName('msg&#45;mark&#45;read&#45;btn')[0].addEventListener('click', this.onMarkMessagesRead.bind(this, true), false);domNode.getElementsByClassName('msg&#45;delete&#45;btn')[0].addEventListener('click', this.onDeleteMessages.bind(this, true), false);this.toolbar.moveBtn=domNode.getElementsByClassName('msg&#45;move&#45;btn')[0];this.toolbar.moveBtn.addEventListener('click', this.onMoveMessages.bind(this, true), false);if(mode=== 'nonsearch'){domNode.getElementsByClassName('msg&#45;search&#45;text&#45;tease')[0].addEventListener('focus', this.onSearchButton.bind(this), false);}else if(mode=== 'search'){domNode.getElementsByClassName('msg&#45;search&#45;cancel')[0].addEventListener('click', this.onCancelSearch.bind(this), false);bindContainerHandler(domNode.getElementsByClassName('filter')[0], 'click', this.onSearchFilterClick.bind(this));this.searchInput=domNode.getElementsByClassName('msg&#45;search&#45;text')[0];this.searchInput.addEventListener( 'input', this.onSearchTextChange.bind(this), false);}this._onScroll=this._onScroll.bind(this);this.editMode=false;this.selectedMessages=null;this.curFolder=null;this.messagesSlice=null;this.isIncomingFolder=true;this._boundSliceRequestComplete=this.onSliceRequestComplete.bind(this);this.usingCachedNode=!!args.cachedNode;this._boundFolderChanged=this._folderChanged.bind(this);model.latest('folder', this._boundFolderChanged);this._boundOnNewMail=this.onNewMail.bind(this);model.on('newInboxMessages', this._boundOnNewMail);}MessageListCard.prototype={PROGRESS_CANDYBAR_TIMEOUT_MS:2000, _topbar:null, postInsert:function(){this._hideSearchBoxByScrolling();if(this.mode=== 'search') this.searchInput.focus();}, onSearchButton:function(){if(!this.curFolder) return;Cards.pushCard( 'message_list', 'search', 'animate',{folder:this.curFolder});}, setEditMode:function(editMode){if(!this.curFolder) return;var domNode=this.domNode;var normalHeader=domNode.getElementsByClassName('msg&#45;list&#45;header')[0], searchHeader=domNode.getElementsByClassName('msg&#45;search&#45;header')[0], editHeader=domNode.getElementsByClassName('msg&#45;listedit&#45;header')[0], normalToolbar=domNode.getElementsByClassName('msg&#45;list&#45;action&#45;toolbar')[0], editToolbar=domNode.getElementsByClassName('msg&#45;listedit&#45;action&#45;toolbar')[0];this.editMode=editMode;if(editMode){normalHeader.classList.add('collapsed');searchHeader.classList.add('collapsed');normalToolbar.classList.add('collapsed');editHeader.classList.remove('collapsed');editToolbar.classList.remove('collapsed');this.messagesContainer.classList.add('show&#45;edit');this.selectedMessages=[];var cbs=this.messagesContainer.querySelectorAll('input[type=checkbox]');for(var i=0;i&lt; cbs.length;i++){cbs[i].checked=false;}this.selectedMessagesUpdated();}else{if(this.mode=== 'nonsearch') normalHeader.classList.remove('collapsed');else searchHeader.classList.remove('collapsed');normalToolbar.classList.remove('collapsed');editHeader.classList.add('collapsed');editToolbar.classList.add('collapsed');this.messagesContainer.classList.remove('show&#45;edit');var selectedMsgNodes=domNode.getElementsByClassName('msg&#45;header&#45;item&#45;selected');for(var i=selectedMsgNodes.length&#45;1;i &gt;=0;i&#45;&#45;){selectedMsgNodes[i].classList.remove('msg&#45;header&#45;item&#45;selected');}this.selectedMessages=null;}}, selectedMessagesUpdated:function(){var headerNode=this.domNode.getElementsByClassName('msg&#45;listedit&#45;header&#45;label')[0];headerNode.textContent=mozL10n.get('message&#45;multiedit&#45;header',{n:this.selectedMessages.length});var starBtn=this.domNode.getElementsByClassName('msg&#45;star&#45;btn')[0], readBtn=this.domNode.getElementsByClassName('msg&#45;mark&#45;read&#45;btn')[0];var numStarred=0, numRead=0;for(var i=0;i&lt; this.selectedMessages.length;i++){var msg=this.selectedMessages[i];if(msg.isStarred) numStarred++;if(msg.isRead) numRead++;}this.setAsStarred=!(numStarred &amp;&amp;numStarred===this.selectedMessages.length);this.setAsRead=(this.selectedMessages.length &amp;&amp;numRead===0);if(!this.setAsStarred) starBtn.classList.add('msg&#45;btn&#45;active');else starBtn.classList.remove('msg&#45;btn&#45;active');if(this.setAsRead) readBtn.classList.add('msg&#45;btn&#45;active');else readBtn.classList.remove('msg&#45;btn&#45;active');}, _hideSearchBoxByScrolling:function(){var searchBar=this.domNode.getElementsByClassName('msg&#45;search&#45;tease&#45;bar')[0];searchBar.classList.remove('collapsed');this.scrollNode.scrollTop=searchBar.offsetHeight;}, onShowFolders:function(){var query=['folder_picker', 'navigation'];if(Cards.hasCard(query)){Cards.moveToCard(query);}else{Cards.pushCard( 'folder_picker', 'navigation', 'none',{onPushed:function(){setTimeout(function(){Cards.moveToCard(query);}, 50);}.bind(this)}, 'left');}}, onCompose:function(){Cards.pushCard('compose', 'default', 'animate');}, showFolder:function(folder, forceNewSlice){if(folder===this.curFolder &amp;&amp;!forceNewSlice) return false;if(this.messagesSlice){this.messagesSlice.die();this.messagesSlice=null;this.messagesContainer.innerHTML= '';}this.curFolder=folder;switch(folder.type){case 'drafts':case 'localdrafts':case 'sent':this.isIncomingFolder=false;break;default:this.isIncomingFolder=true;break;}this.domNode.getElementsByClassName('msg&#45;list&#45;header&#45;folder&#45;label')[0].textContent=folder.name;this.hideEmptyLayout();if(folder.type=== 'localdrafts'){this.toolbar.refreshBtn.classList.add('collapsed');this.toolbar.moveBtn.classList.add('collapsed');}else{this.toolbar.refreshBtn.classList.remove('collapsed');this.toolbar.moveBtn.classList.remove('collapsed');}this._snippetRequestPending=false;this.messagesSlice=model.api.viewFolderMessages(folder);this.messagesSlice.onsplice=this.onMessagesSplice.bind(this);this.messagesSlice.onchange=this.onMessagesChange.bind(this);this.messagesSlice.onstatus=this.onStatusChange.bind(this);this.messagesSlice.oncomplete=this._boundSliceRequestComplete;return true;}, showSearch:function(folder, phrase, filter){console.log('sf:showSearch.phrase:', phrase, phrase.length);var tab=this.domNode.getElementsByClassName('filter')[0];var nodes=tab.getElementsByClassName('msg&#45;search&#45;filter');if(this.messagesSlice){this.messagesSlice.die();this.messagesSlice=null;this.messagesContainer.innerHTML= '';}this.curFolder=folder;this.curPhrase=phrase;this.curFilter=filter;for(var i=0;i&lt; nodes.length;i++){if(nodes[i].dataset.filter!=this.curFilter){nodes[i].setAttribute('aria&#45;selected', 'false');continue;}nodes[i].setAttribute('aria&#45;selected', 'true');}if(phrase.length&lt; 1) return false;this._snippetRequestPending=false;this.messagesSlice=model.api.searchFolderMessages(folder, phrase,{author:filter=== 'all'||filter=== 'author', recipients:filter=== 'all'||filter=== 'recipients', subject:filter=== 'all'||filter=== 'subject', body:filter=== 'all'||filter=== 'body'});this.messagesSlice.onsplice=this.onMessagesSplice.bind(this);this.messagesSlice.onchange=this.updateMatchedMessageDom.bind(this, false);this.messagesSlice.onstatus=this.onStatusChange.bind(this);this.messagesSlice.oncomplete=this._boundSliceRequestComplete;return true;}, onSearchFilterClick:function(filterNode, event){this.showSearch(this.curFolder, this.searchInput.value, filterNode.dataset.filter);}, onSearchTextChange:function(event){console.log('sf:typed, now:', this.searchInput.value);this.showSearch(this.curFolder, this.searchInput.value, this.curFilter);}, onCancelSearch:function(event){try{if(this.messagesSlice) this.messagesSlice.die();}catch(ex){console.error('problem killing slice:', ex, '\n', ex.stack);}this.messagesSlice=null;Cards.removeCardAndSuccessors(this.domNode, 'animate');}, onGetMoreMessages:function(){if(!this.messagesSlice) return;this.messagesSlice.requestGrowth(1, true);this.syncMoreNode.classList.add('collapsed');}, onStatusChange:function(newStatus){switch(newStatus){case 'synchronizing':case 'syncblocked':this.syncingNode.classList.remove('collapsed');this.syncMoreNode.classList.add('collapsed');this.hideEmptyLayout();this.toolbar.refreshBtn.dataset.state= 'synchronizing';break;case 'syncfailed':Toaster.logRetryable(newStatus, this.onRefresh.bind(this));case 'synced':this.toolbar.refreshBtn.dataset.state= 'synchronized';this.syncingNode.classList.add('collapsed');break;}}, showEmptyLayout:function(){var text=this.domNode.getElementsByClassName('msg&#45;list&#45;empty&#45;message&#45;text')[0];this._clearCachedMessages();text.textContent=this.mode== 'search'?mozL10n.get('messages&#45;search&#45;empty'):mozL10n.get('messages&#45;folder&#45;empty');this.messageEmptyContainer.classList.remove('collapsed');this.toolbar.editBtn.classList.add('disabled');this.toolbar.searchBtn.classList.add('disabled');this._hideSearchBoxByScrolling();}, hideEmptyLayout:function(){this.messageEmptyContainer.classList.add('collapsed');this.toolbar.editBtn.classList.remove('disabled');this.toolbar.searchBtn.classList.remove('disabled');}, onSliceRequestComplete:function(newEmailCount){this.messagesSlice.oncomplete=this._boundSliceRequestComplete;if(this.messagesSlice.userCanGrowDownwards) this.syncMoreNode.classList.remove('collapsed');else this.syncMoreNode.classList.add('collapsed');if(this.messagesSlice.items.length===0){this.showEmptyLayout();}this.onNewMail(newEmailCount);this._onScroll(null);}, onNewMail:function(newEmailCount){var inboxFolder=model.foldersSlice.getFirstFolderWithType('inbox');if(inboxFolder.id===this.curFolder.id &amp;&amp;newEmailCount &amp;&amp;newEmailCount!==NaN &amp;&amp;newEmailCount!==0){if(!Cards.isVisible(this)){this._whenVisible=this.onNewMail.bind(this, newEmailCount);return;}if(this._topbar &amp;&amp;this._topbar.getElement()!==null){this._topbar.updateNewEmailCount(newEmailCount);}else{this._topbar=new MessageListTopbar(this.scrollContainer, newEmailCount);var el=document.getElementsByClassName(MessageListTopbar.CLASS_NAME)[0];this._topbar.decorate(el);this._topbar.render();}}}, onScroll:function(evt){if(this._pendingScrollEvent){return;}this._pendingScrollEvent=true;this._scrollTimer=setTimeout(this._onScroll, SCROLL_DELAY, evt);}, _onScroll:function(event){if(this._pendingScrollEvent){this._pendingScrollEvent=false;}if(!this.messagesSlice||this.messagesSlice.pendingRequestCount) return;if(!this._hasSnippetRequest()){this._requestSnippets();}var curScrollTop=this.scrollContainer.scrollTop, viewHeight=this.scrollContainer.clientHeight;var preScreens=curScrollTop/viewHeight, postScreens=(this.scrollContainer.scrollHeight&#45;(curScrollTop+viewHeight))/viewHeight;var shrinkLowIncl=0, shrinkHighIncl=this.messagesSlice.items.length&#45;1, messageNode=null, targOff;if(preScreens&lt; SCROLL_MIN_BUFFER_SCREENS &amp;&amp;!this.messagesSlice.atTop){this.messagesSlice.requestGrowth(&#45;1);return;}else if(preScreens &gt; SCROLL_MAX_RETENTION_SCREENS){targOff=curScrollTop&#45;(viewHeight *(SCROLL_MAX_RETENTION_SCREENS&#45;1));for(messageNode=this.messagesContainer.firstElementChild;messageNode.offsetTop+messageNode.clientHeight&lt; targOff;messageNode=messageNode.nextElementSibling){shrinkLowIncl++;}}if(postScreens&lt; SCROLL_MIN_BUFFER_SCREENS &amp;&amp;!this.messagesSlice.atBottom){this.messagesSlice.requestGrowth(1);}else if(postScreens &gt; SCROLL_MAX_RETENTION_SCREENS){targOff=curScrollTop+this.scrollContainer.clientHeight+(viewHeight *(SCROLL_MAX_RETENTION_SCREENS&#45;1));for(messageNode=this.messagesContainer.lastElementChild;messageNode.offsetTop &gt; targOff;messageNode=messageNode.previousElementSibling){shrinkHighIncl&#45;&#45;;}}if(shrinkLowIncl!==0||shrinkHighIncl!==this.messagesSlice.items.length&#45;1){this.messagesSlice.requestShrinkage(shrinkLowIncl, shrinkHighIncl);}}, _hasSnippetRequest:function(){var max=MAXIMUM_MS_BETWEEN_SNIPPET_REQUEST;var now=Date.now();var beforeTimeout=(this._lastSnippetRequest+max) &gt; now;if(this._snippetRequestPending &amp;&amp;beforeTimeout){return true;}return false;}, _pendingSnippetRequest:function(){this._snippetRequestPending=true;this._lastSnippetRequest=Date.now();}, _clearSnippetRequest:function(){this._snippetRequestPending=false;}, _requestSnippets:function(){var items=this.messagesSlice.items;var len=items.length;if(!len) return;var clearSnippets=this._clearSnippetRequest.bind(this);var options={maximumBytesToFetch:MAXIMUM_BYTES_PER_MESSAGE_DURING_SCROLL};if(len&lt; MINIMUM_ITEMS_FOR_SCROLL_CALC){this._pendingSnippetRequest();this.messagesSlice.maybeRequestBodies(0, 9, options, clearSnippets);return;}if(!this._scrollContainerOffset){this._scrollContainerRect=this.scrollContainer.getBoundingClientRect();}var constOffset=this._scrollContainerRect.top;var topOffset=(items[0].element.getBoundingClientRect().top&#45;constOffset);var distance=this._distanceBetweenMessages;if(!distance){this._distanceBetweenMessages=distance=Math.abs(topOffset&#45;(items[1].element.getBoundingClientRect().top&#45;constOffset));}var startOffset=Math.floor(Math.abs(topOffset/distance));this._snippetsPerScrollTick=(this._snippetsPerScrollTick||Math.ceil(this._scrollContainerRect.height/distance));this._pendingSnippetRequest();this.messagesSlice.maybeRequestBodies(startOffset, startOffset+this._snippetsPerScrollTick, options, clearSnippets);}, _cacheListLimit:7, _cacheDomTimeoutId:0, _cacheDom:function(){this._cacheDomTimeoutId=0;var cacheNode=this.domNode.cloneNode(true);var removableCacheNode=cacheNode.querySelector('.msg&#45;search&#45;tease&#45;bar');if(removableCacheNode) removableCacheNode.classList.add('collapsed');removableCacheNode=cacheNode.querySelector('.'+MessageListTopbar.CLASS_NAME);if(removableCacheNode) removableCacheNode.classList.add('collapsed');if(this.messagesContainer.children.length &gt; this._cacheListLimit){var msgContainer=cacheNode.getElementsByClassName('msg&#45;messages&#45;container')[0];for(var childIndex=msgContainer.children.length&#45;1;childIndex &gt; this._cacheListLimit&#45;1;childIndex&#45;&#45;){var childNode=msgContainer.children[childIndex];childNode.parentNode.removeChild(childNode);}}htmlCache.saveFromNode(cacheNode);}, _considerCacheDom:function(index){if(!this._cacheDomTimeoutId &amp;&amp;this.cacheableFolderId===this.curFolder.id &amp;&amp;this.messagesSlice.atTop &amp;&amp;(index||index===0)&amp;&amp;index&lt; this._cacheListLimit &amp;&amp;this.mode=== 'nonsearch'){this._cacheDomTimeoutId=setTimeout(this._cacheDom.bind(this), 600);}}, _clearCachedMessages:function(){if(this.usingCachedNode){this.messagesContainer.innerHTML= '';this.usingCachedNode=false;}}, onMessagesSplice:function(index, howMany, addedItems, requested, moreExpected, fake){if(index===0 &amp;&amp;howMany===0 &amp;&amp;!addedItems.length) return;var prevHeight;if(howMany){if(fake &amp;&amp;index===0 &amp;&amp;this.messagesSlice.items.length===howMany &amp;&amp;!addedItems.length){}else{prevHeight=null;if(this.messagesSlice.items[index].element.offsetTop&lt; this.scrollContainer.scrollTop+this.messagesContainer.offsetTop){prevHeight=this.messagesContainer.clientHeight;}for(var i=index+howMany&#45;1;i &gt;=index;i&#45;&#45;){var message=this.messagesSlice.items[i];message.element.parentNode.removeChild(message.element);}if(prevHeight!==null){this.scrollContainer.scrollTop&#45;=(prevHeight&#45;this.messagesContainer.clientHeight);}if(this.messagesContainer.children.length===0){this.showEmptyLayout();}}}this._clearCachedMessages();var insertBuddy, self=this;if(index &gt;=this.messagesContainer.childElementCount) insertBuddy=null;else insertBuddy=this.messagesContainer.children[index];if(insertBuddy &amp;&amp;(insertBuddy.offsetTop&lt; this.scrollContainer.scrollTop+this.messagesContainer.offsetTop)) prevHeight=this.messagesContainer.clientHeight;else prevHeight=null;if(addedItems.length &gt; 0){this.hideEmptyLayout();}addedItems.forEach(function(message, i){var domMessage;domMessage=message.element=msgHeaderItemNode.cloneNode(true);if(self.mode=== 'nonsearch'){domMessage.message=message;self.updateMessageDom(true, message);}else{domMessage.message=message.header;self.updateMatchedMessageDom(true, message);}self.messagesContainer.insertBefore(domMessage, insertBuddy);});if(prevHeight){this.scrollContainer.scrollTop+=(this.messagesContainer.clientHeight&#45;prevHeight);}if(addedItems.length||howMany){this._considerCacheDom(index);}}, onMessagesChange:function(message, index){this.updateMessageDom(false, message);this._considerCacheDom(index);}, _updatePeepDom:function(peep){peep.element.textContent=peep.name||peep.address;}, updateMessageDom:function(firstTime, message){var msgNode=message.element;msgNode.dataset.id=message.id;var dateNode=msgNode.getElementsByClassName('msg&#45;header&#45;date')[0];if(firstTime){var listPerson;if(this.isIncomingFolder) listPerson=message.author;else if(message.to &amp;&amp;message.to.length) listPerson=message.to[0];else if(message.cc &amp;&amp;message.cc.length) listPerson=message.cc[0];else if(message.bcc &amp;&amp;message.bcc.length) listPerson=message.bcc[0];else listPerson=message.author;listPerson.element=msgNode.getElementsByClassName('msg&#45;header&#45;author')[0];listPerson.onchange=this._updatePeepDom;listPerson.onchange(listPerson);dateNode.dataset.time=message.date.valueOf();dateNode.textContent=prettyDate(message.date);displaySubject(msgNode.getElementsByClassName('msg&#45;header&#45;subject')[0], message);if(message.hasAttachments) msgNode.getElementsByClassName('msg&#45;header&#45;attachments')[0].classList.add('msg&#45;header&#45;attachments&#45;yes');}msgNode.getElementsByClassName('msg&#45;header&#45;snippet')[0].textContent=message.snippet;var unreadNode=msgNode.getElementsByClassName('msg&#45;header&#45;unread&#45;section')[0];if(message.isRead){unreadNode.classList.remove('msg&#45;header&#45;unread&#45;section&#45;unread');dateNode.classList.remove('msg&#45;header&#45;date&#45;unread');}else{unreadNode.classList.add('msg&#45;header&#45;unread&#45;section&#45;unread');dateNode.classList.add('msg&#45;header&#45;date&#45;unread');}var starNode=msgNode.getElementsByClassName('msg&#45;header&#45;star')[0];if(message.isStarred) starNode.classList.add('msg&#45;header&#45;star&#45;starred');else starNode.classList.remove('msg&#45;header&#45;star&#45;starred');}, updateMatchedMessageDom:function(firstTime, matchedHeader){var msgNode=matchedHeader.element, matches=matchedHeader.matches, message=matchedHeader.header;msgNode.dataset.id=matchedHeader.id;var dateNode=msgNode.getElementsByClassName('msg&#45;header&#45;date')[0];if(firstTime){var authorNode=msgNode.getElementsByClassName('msg&#45;header&#45;author')[0];if(matches.author){appendMatchItemTo(matches.author, authorNode);}else{message.author.element=authorNode;message.author.onchange=this._updatePeepDom;message.author.onchange(message.author);}dateNode.dataset.time=message.date.valueOf();dateNode.textContent=prettyDate(message.date);var subjectNode=msgNode.getElementsByClassName('msg&#45;header&#45;subject')[0];if(matches.subject) appendMatchItemTo(matches.subject[0], subjectNode);else displaySubject(subjectNode, message);var snippetNode=msgNode.getElementsByClassName('msg&#45;header&#45;snippet')[0];if(matches.body) appendMatchItemTo(matches.body[0], snippetNode);else snippetNode.textContent=message.snippet;if(message.hasAttachments) msgNode.getElementsByClassName('msg&#45;header&#45;attachments')[0].classList.add('msg&#45;header&#45;attachments&#45;yes');}var unreadNode=msgNode.getElementsByClassName('msg&#45;header&#45;unread&#45;section')[0];if(message.isRead){unreadNode.classList.remove('msg&#45;header&#45;unread&#45;section&#45;unread');dateNode.classList.remove('msg&#45;header&#45;date&#45;unread');}else{unreadNode.classList.add('msg&#45;header&#45;unread&#45;section&#45;unread');dateNode.classList.add('msg&#45;header&#45;date&#45;unread');}var starNode=msgNode.getElementsByClassName('msg&#45;header&#45;star')[0];if(message.isStarred) starNode.classList.add('msg&#45;header&#45;star&#45;starred');else starNode.classList.remove('msg&#45;header&#45;star&#45;starred');}, onCardVisible:function(){if(this._whenVisible){var fn=this._whenVisible;this._whenVisible=null;fn();}}, onClickMessage:function(messageNode, event){var header=messageNode.message;if(this.editMode){var idx=this.selectedMessages.indexOf(header);var cb=messageNode.querySelector('input[type=checkbox]');if(idx!==&#45;1){this.selectedMessages.splice(idx, 1);cb.checked=false;}else{this.selectedMessages.push(header);cb.checked=true;}this.selectedMessagesUpdated();return;}if(this.curFolder &amp;&amp;this.curFolder.type=== 'localdrafts'){var composer=header.editAsDraft(function(){Cards.pushCard('compose', 'default', 'animate',{composer:composer});});return;}Cards.pushCard( 'message_reader', 'default', 'animate',{header:header, messageSuid:messageNode.dataset.id});}, onHoldMessage:function(messageNode, event){if(this.curFolder) this.setEditMode(true);}, onRefresh:function(){if(!this.messagesSlice) return;switch(this.messagesSlice.status){case 'new':case 'synchronizing':break;case 'synced':this.messagesSlice.refresh();break;case 'syncfailed':if(this.messagesSlice.items.length) this.messagesSlice.refresh();else this.showFolder(this.curFolder, true);break;}}, onStarMessages:function(){var op=model.api.markMessagesStarred(this.selectedMessages, this.setAsStarred);this.setEditMode(false);Toaster.logMutation(op);}, onMarkMessagesRead:function(){var op=model.api.markMessagesRead(this.selectedMessages, this.setAsRead);this.setEditMode(false);Toaster.logMutation(op);}, onDeleteMessages:function(){if(this.selectedMessages.length===0) return;var dialog=deleteConfirmMsgNode.cloneNode(true);var content=dialog.getElementsByTagName('p')[0];content.textContent=mozL10n.get('message&#45;multiedit&#45;delete&#45;confirm',{n:this.selectedMessages.length});ConfirmDialog.show(dialog,{id: 'msg&#45;delete&#45;ok', handler:function(){var op=model.api.deleteMessages(this.selectedMessages);Toaster.logMutation(op);this.setEditMode(false);}.bind(this)},{id: 'msg&#45;delete&#45;cancel', handler:null});}, onMoveMessages:function(){Cards.folderSelector(function(folder){var op=model.api.moveMessages(this.selectedMessages, folder);Toaster.logMutation(op);this.setEditMode(false);}.bind(this));}, _folderChanged:function(folder){if(!model.foldersSlice) return;var inboxFolder=model.foldersSlice.getFirstFolderWithType('inbox');this.cacheableFolderId=model.account===model.acctsSlice.defaultAccount?inboxFolder.id:null;this.folder=folder;if(this.mode== 'nonsearch'){if(this.showFolder(folder)){this._hideSearchBoxByScrolling();}}else{this.showSearch(folder, '', 'all');}}, die:function(){if(this.messagesSlice){this.messagesSlice.die();this.messagesSlice=null;}model.removeListener('folder', this._boundFolderChanged);model.removeListener('newInboxMessages', this._boundOnNewMail);}};Cards.defineCard({name: 'message_list', modes:{nonsearch:{tray:false}, search:{tray:false}}, constructor:MessageListCard, templateNode:templateNode});return MessageListCard;})" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d14/build__stage_2email_2js_2mix_8js.html#ae57540f837ee76af1c71776a8f46ae53">define</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全て</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>データ構造</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>ネームスペース</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>ファイル</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>関数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>変数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>型定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>列挙型</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>列挙型の値</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>フレンド</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>マクロ定義</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../da/da6/message__list_8js.html">message_list.js</a>      </li>

    <li class="footer">FxOS Code Readingに対してSat Oct 19 2013 00:56:16に生成されました。
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
