<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>FxOS Code Reading: GrContext.h ソースファイル</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">FxOS Code Reading
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- 作成： Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'検索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>メインページ</span></a></li>
      <li><a href="../../pages.html"><span>関連ページ</span></a></li>
      <li><a href="../../modules.html"><span>モジュール</span></a></li>
      <li><a href="../../namespaces.html"><span>パッケージ</span></a></li>
      <li><a href="../../annotated.html"><span>データ構造</span></a></li>
      <li class="current"><a href="../../files.html"><span>ファイル</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>ファイル一覧</span></a></li>
      <li><a href="../../globals.html"><span>グローバル</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('df/d56/_gr_context_8h.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">GrContext.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../df/d56/_gr_context_8h.html">説明を見る。</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="comment">/*</span>
<a name="l00003"></a>00003 <span class="comment"> * Copyright 2010 Google Inc.</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * Use of this source code is governed by a BSD-style license that can be</span>
<a name="l00006"></a>00006 <span class="comment"> * found in the LICENSE file.</span>
<a name="l00007"></a>00007 <span class="comment"> */</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <span class="preprocessor">#ifndef GrContext_DEFINED</span>
<a name="l00011"></a>00011 <span class="preprocessor"></span><span class="preprocessor">#define GrContext_DEFINED</span>
<a name="l00012"></a>00012 <span class="preprocessor"></span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &quot;<a class="code" href="../../d5/de4/_gr_color_8h.html">GrColor.h</a>&quot;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &quot;<a class="code" href="../../d5/db8/_gr_a_a_rect_renderer_8h.html">GrAARectRenderer.h</a>&quot;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d71/_gr_clip_data_8h.html">GrClipData.h</a>&quot;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &quot;<a class="code" href="../../da/d71/_sk_matrix_8h.html">SkMatrix.h</a>&quot;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/dfe/_gr_paint_8h.html">GrPaint.h</a>&quot;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/d5d/_gr_path_renderer_chain_8h.html">GrPathRendererChain.h</a>&quot;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;<a class="code" href="../../db/d27/_gr_render_target_8h.html">GrRenderTarget.h</a>&quot;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;<a class="code" href="../../d5/d5a/_gr_ref_cnt_8h.html">GrRefCnt.h</a>&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/d0e/_gr_texture_8h.html">GrTexture.h</a>&quot;</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="keyword">class </span><a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html">GrAutoScratchTexture</a>;
<a name="l00024"></a>00024 <span class="keyword">class </span>GrDrawState;
<a name="l00025"></a>00025 <span class="keyword">class </span>GrDrawTarget;
<a name="l00026"></a>00026 <span class="keyword">class </span><a class="code" href="../../d6/d68/class_gr_effect.html">GrEffect</a>;
<a name="l00027"></a>00027 <span class="keyword">class </span>GrFontCache;
<a name="l00028"></a>00028 <span class="keyword">class </span>GrGpu;
<a name="l00029"></a>00029 <span class="keyword">class </span>GrIndexBuffer;
<a name="l00030"></a>00030 <span class="keyword">class </span>GrIndexBufferAllocPool;
<a name="l00031"></a>00031 <span class="keyword">class </span>GrInOrderDrawBuffer;
<a name="l00032"></a>00032 <span class="keyword">class </span>GrOvalRenderer;
<a name="l00033"></a>00033 <span class="keyword">class </span>GrPathRenderer;
<a name="l00034"></a>00034 <span class="keyword">class </span>GrResourceEntry;
<a name="l00035"></a>00035 <span class="keyword">class </span>GrResourceCache;
<a name="l00036"></a>00036 <span class="keyword">class </span>GrStencilBuffer;
<a name="l00037"></a>00037 <span class="keyword">class </span><a class="code" href="../../d1/d13/class_gr_texture_params.html">GrTextureParams</a>;
<a name="l00038"></a>00038 <span class="keyword">class </span>GrVertexBuffer;
<a name="l00039"></a>00039 <span class="keyword">class </span>GrVertexBufferAllocPool;
<a name="l00040"></a>00040 <span class="keyword">class </span>GrSoftwarePathRenderer;
<a name="l00041"></a>00041 <span class="keyword">class </span><a class="code" href="../../d3/ddb/class_sk_stroke_rec.html">SkStrokeRec</a>;
<a name="l00042"></a>00042 
<a name="l00043"></a><a class="code" href="../../da/d02/class_gr_context.html">00043</a> <span class="keyword">class </span><a class="code" href="../../dd/d22/_gr_config_8h.html#a93c8b97e429911296d3e1698c3fb14b3">GR_API</a> <a class="code" href="../../da/d02/class_gr_context.html">GrContext</a> : <span class="keyword">public</span> <a class="code" href="../../da/dec/class_sk_ref_cnt.html">GrRefCnt</a> {
<a name="l00044"></a>00044 <span class="keyword">public</span>:
<a name="l00045"></a>00045     <a class="code" href="../../dd/dac/_sk_inst_cnt_8h.html#a95287114455fa59e7b245b2def40b0ef">SK_DECLARE_INST_COUNT</a>(<a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>)
<a name="l00046"></a>00046 
<a name="l00047"></a>00047     
<a name="l00050"></a>00050     <span class="keyword">static</span> <a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>* <a class="code" href="../../d3/df6/namespacemozilla_1_1layers_1_1_compositable_map.html#aa82599b1b1ccdeb4aa199b742a63322b">Create</a>(<a class="code" href="../../d8/de6/_gr_types_8h.html#a6341434082767cb86a896ee4408d16bc">GrBackend</a>, <a class="code" href="../../d8/de6/_gr_types_8h.html#af2fb6b647dc43d23aaeea71ffef47324">GrBackendContext</a>);
<a name="l00051"></a>00051 
<a name="l00055"></a>00055     <span class="keyword">static</span> <span class="keywordtype">int</span> GetThreadInstanceCount();
<a name="l00056"></a>00056 
<a name="l00057"></a>00057     <span class="keyword">virtual</span> ~<a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>();
<a name="l00058"></a>00058 
<a name="l00065"></a>00065     <span class="keywordtype">void</span> resetContext();
<a name="l00066"></a>00066 
<a name="l00071"></a><a class="code" href="../../da/d02/class_gr_context.html#a583d0fcefcaa0f8a41bf3b9d7bbb436c">00071</a>     <span class="keyword">typedef</span> <a class="code" href="../../d4/da9/png_8h.html#ab30926da86712184b070e550789f8bf7">void</a> (*PFCleanUpFunc)(<span class="keyword">const</span> <a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>* <a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>, <span class="keywordtype">void</span>* <a class="code" href="../../d9/d04/expat_8h.html#ad737df79bb5419e4bac72f823f6fdec9">info</a>);
<a name="l00072"></a>00072 
<a name="l00078"></a><a class="code" href="../../da/d02/class_gr_context.html#a44077bfde74b5f357dd0460c734311cc">00078</a>     <span class="keywordtype">void</span> <a class="code" href="../../da/d02/class_gr_context.html#a44077bfde74b5f357dd0460c734311cc">addCleanUp</a>(PFCleanUpFunc cleanUp, <span class="keywordtype">void</span>* <a class="code" href="../../d9/d04/expat_8h.html#ad737df79bb5419e4bac72f823f6fdec9">info</a>) {
<a name="l00079"></a>00079         CleanUpData* entry = fCleanUpData.push();
<a name="l00080"></a>00080 
<a name="l00081"></a>00081         entry-&gt;fFunc = cleanUp;
<a name="l00082"></a>00082         entry-&gt;fInfo = <a class="code" href="../../d9/d04/expat_8h.html#ad737df79bb5419e4bac72f823f6fdec9">info</a>;
<a name="l00083"></a>00083     }
<a name="l00084"></a>00084 
<a name="l00096"></a>00096     <span class="keywordtype">void</span> contextLost();
<a name="l00097"></a>00097 
<a name="l00103"></a>00103     <span class="keywordtype">void</span> contextDestroyed();
<a name="l00104"></a>00104 
<a name="l00109"></a>00109     <span class="keywordtype">void</span> freeGpuResources();
<a name="l00110"></a>00110 
<a name="l00114"></a>00114     <span class="keywordtype">size_t</span> getGpuTextureCacheBytes() <span class="keyword">const</span>;
<a name="l00115"></a>00115 
<a name="l00117"></a>00117     <span class="comment">// Textures</span>
<a name="l00118"></a>00118 
<a name="l00133"></a>00133     <a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* createTexture(<span class="keyword">const</span> <a class="code" href="../../d1/d13/class_gr_texture_params.html">GrTextureParams</a>* <a class="code" href="../../d6/d54/parameters_8js.html#a4ad646d0ee2fc69a53b50783ca7465dc">params</a>,
<a name="l00134"></a>00134                              <span class="keyword">const</span> <a class="code" href="../../d5/d17/struct_gr_texture_desc.html">GrTextureDesc</a>&amp; <a class="code" href="../../d8/dd0/extension__set_8h.html#a348efe6592512f937a672d5f5ec7d76a">desc</a>,
<a name="l00135"></a>00135                              <span class="keyword">const</span> <a class="code" href="../../de/d07/struct_gr_cache_i_d.html">GrCacheID</a>&amp; cacheID,
<a name="l00136"></a>00136                              <span class="keywordtype">void</span>* srcData, <span class="keywordtype">size_t</span> rowBytes);
<a name="l00137"></a>00137 
<a name="l00149"></a>00149     <a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* findAndRefTexture(<span class="keyword">const</span> <a class="code" href="../../d5/d17/struct_gr_texture_desc.html">GrTextureDesc</a>&amp; <a class="code" href="../../d8/dd0/extension__set_8h.html#a348efe6592512f937a672d5f5ec7d76a">desc</a>,
<a name="l00150"></a>00150                                  <span class="keyword">const</span> <a class="code" href="../../de/d07/struct_gr_cache_i_d.html">GrCacheID</a>&amp; cacheID,
<a name="l00151"></a>00151                                  <span class="keyword">const</span> <a class="code" href="../../d1/d13/class_gr_texture_params.html">GrTextureParams</a>* <a class="code" href="../../d6/d54/parameters_8js.html#a4ad646d0ee2fc69a53b50783ca7465dc">params</a>);
<a name="l00157"></a>00157     <span class="keywordtype">bool</span> isTextureInCache(<span class="keyword">const</span> <a class="code" href="../../d5/d17/struct_gr_texture_desc.html">GrTextureDesc</a>&amp; <a class="code" href="../../d8/dd0/extension__set_8h.html#a348efe6592512f937a672d5f5ec7d76a">desc</a>,
<a name="l00158"></a>00158                           <span class="keyword">const</span> <a class="code" href="../../de/d07/struct_gr_cache_i_d.html">GrCacheID</a>&amp; cacheID,
<a name="l00159"></a>00159                           <span class="keyword">const</span> <a class="code" href="../../d1/d13/class_gr_texture_params.html">GrTextureParams</a>* <a class="code" href="../../d6/d54/parameters_8js.html#a4ad646d0ee2fc69a53b50783ca7465dc">params</a>) <span class="keyword">const</span>;
<a name="l00160"></a>00160 
<a name="l00165"></a><a class="code" href="../../da/d02/class_gr_context.html#ade660a0c6a7d216ea222b545131b467a">00165</a>     <span class="keyword">enum</span> <a class="code" href="../../da/d02/class_gr_context.html#ade660a0c6a7d216ea222b545131b467a">ScratchTexMatch</a> {
<a name="l00169"></a><a class="code" href="../../da/d02/class_gr_context.html#ade660a0c6a7d216ea222b545131b467aa7789e7c11b6b330137a04d4efabb83be">00169</a>         <a class="code" href="../../da/d02/class_gr_context.html#ade660a0c6a7d216ea222b545131b467aa7789e7c11b6b330137a04d4efabb83be">kExact_ScratchTexMatch</a>,
<a name="l00178"></a><a class="code" href="../../da/d02/class_gr_context.html#ade660a0c6a7d216ea222b545131b467aad009c3de90411b3347f1dd8e5c6878cf">00178</a>         kApprox_ScratchTexMatch
<a name="l00179"></a>00179     };
<a name="l00180"></a>00180 
<a name="l00194"></a>00194     <a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* lockAndRefScratchTexture(<span class="keyword">const</span> <a class="code" href="../../d5/d17/struct_gr_texture_desc.html">GrTextureDesc</a>&amp;, ScratchTexMatch <a class="code" href="../../d2/d7d/jsapi_8h.html#a99e36b20cb6cf83fe7c1f4bff6902ab6">match</a>);
<a name="l00195"></a>00195 
<a name="l00200"></a>00200     <span class="keywordtype">void</span> unlockScratchTexture(<a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* texture);
<a name="l00201"></a>00201 
<a name="l00209"></a>00209     <span class="keywordtype">void</span> purgeCache();
<a name="l00210"></a>00210 
<a name="l00215"></a>00215     <a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* createUncachedTexture(<span class="keyword">const</span> <a class="code" href="../../d5/d17/struct_gr_texture_desc.html">GrTextureDesc</a>&amp; <a class="code" href="../../d8/dd0/extension__set_8h.html#a348efe6592512f937a672d5f5ec7d76a">desc</a>,
<a name="l00216"></a>00216                                      <span class="keywordtype">void</span>* srcData,
<a name="l00217"></a>00217                                      <span class="keywordtype">size_t</span> rowBytes);
<a name="l00218"></a>00218 
<a name="l00225"></a>00225     <span class="keywordtype">bool</span> supportsIndex8PixelConfig(<span class="keyword">const</span> <a class="code" href="../../d1/d13/class_gr_texture_params.html">GrTextureParams</a>*,
<a name="l00226"></a>00226                                    <span class="keywordtype">int</span> <a class="code" href="../../d4/d8c/viewphoto_8js.html#adb90f9ed3668a895cc5b90a19bcdee13">width</a>,
<a name="l00227"></a>00227                                    <span class="keywordtype">int</span> <a class="code" href="../../d4/d8c/viewphoto_8js.html#a06f7a63ceb91351a4c31800c9a7af42f">height</a>) <span class="keyword">const</span>;
<a name="l00228"></a>00228 
<a name="l00237"></a>00237     <span class="keywordtype">void</span> getTextureCacheLimits(<span class="keywordtype">int</span>* maxTextures, <span class="keywordtype">size_t</span>* maxTextureBytes) <span class="keyword">const</span>;
<a name="l00238"></a>00238 
<a name="l00248"></a>00248     <span class="keywordtype">void</span> setTextureCacheLimits(<span class="keywordtype">int</span> maxTextures, <span class="keywordtype">size_t</span> maxTextureBytes);
<a name="l00249"></a>00249 
<a name="l00253"></a>00253     <span class="keywordtype">int</span> getMaxTextureSize() <span class="keyword">const</span>;
<a name="l00254"></a>00254 
<a name="l00256"></a>00256     <span class="comment">// Render targets</span>
<a name="l00257"></a>00257 
<a name="l00262"></a>00262     <span class="keywordtype">void</span> setRenderTarget(<a class="code" href="../../d6/d74/class_gr_render_target.html">GrRenderTarget</a>* <a class="code" href="../../d9/d04/expat_8h.html#acfcb72e11f425a604663d645d2a4ea80">target</a>);
<a name="l00263"></a>00263 
<a name="l00268"></a>00268     <span class="keyword">const</span> <a class="code" href="../../d6/d74/class_gr_render_target.html">GrRenderTarget</a>* getRenderTarget() <span class="keyword">const</span>;
<a name="l00269"></a>00269     <a class="code" href="../../d6/d74/class_gr_render_target.html">GrRenderTarget</a>* getRenderTarget();
<a name="l00270"></a>00270 
<a name="l00271"></a><a class="code" href="../../da/d02/class_gr_context.html#ac98fd0850d3042c69944bf1a3c013e53">00271</a>     <a class="code" href="../../df/d9c/class_gr_a_a_rect_renderer.html">GrAARectRenderer</a>* <a class="code" href="../../da/d02/class_gr_context.html#ac98fd0850d3042c69944bf1a3c013e53">getAARectRenderer</a>() { <span class="keywordflow">return</span> fAARectRenderer; }
<a name="l00272"></a>00272 
<a name="l00276"></a>00276     <span class="keywordtype">bool</span> isConfigRenderable(<a class="code" href="../../d8/de6/_gr_types_8h.html#a82326e1fcae74e5cd5857d86bc648277">GrPixelConfig</a> <a class="code" href="../../d1/d0b/fb__init_8js.html#aeac120c9ce32d189166215752b0b1a76">config</a>) <span class="keyword">const</span>;
<a name="l00277"></a>00277 
<a name="l00282"></a>00282     <span class="keywordtype">int</span> getMaxRenderTargetSize() <span class="keyword">const</span>;
<a name="l00283"></a>00283 
<a name="l00288"></a>00288     <span class="keywordtype">int</span> getMaxSampleCount() <span class="keyword">const</span>;
<a name="l00289"></a>00289 
<a name="l00291"></a>00291     <span class="comment">// Backend Surfaces</span>
<a name="l00292"></a>00292 
<a name="l00303"></a>00303     <a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* wrapBackendTexture(<span class="keyword">const</span> <a class="code" href="../../dd/d6c/struct_gr_backend_texture_desc.html">GrBackendTextureDesc</a>&amp; <a class="code" href="../../d8/dd0/extension__set_8h.html#a348efe6592512f937a672d5f5ec7d76a">desc</a>);
<a name="l00304"></a>00304 
<a name="l00315"></a>00315      <a class="code" href="../../d6/d74/class_gr_render_target.html">GrRenderTarget</a>* wrapBackendRenderTarget(<span class="keyword">const</span> <a class="code" href="../../db/d82/struct_gr_backend_render_target_desc.html">GrBackendRenderTargetDesc</a>&amp; <a class="code" href="../../d8/dd0/extension__set_8h.html#a348efe6592512f937a672d5f5ec7d76a">desc</a>);
<a name="l00316"></a>00316 
<a name="l00318"></a>00318     <span class="comment">// Matrix state</span>
<a name="l00319"></a>00319 
<a name="l00324"></a>00324     <span class="keyword">const</span> <a class="code" href="../../db/dd6/class_sk_matrix.html">SkMatrix</a>&amp; getMatrix() <span class="keyword">const</span>;
<a name="l00325"></a>00325 
<a name="l00330"></a>00330     <span class="keywordtype">void</span> setMatrix(<span class="keyword">const</span> <a class="code" href="../../db/dd6/class_sk_matrix.html">SkMatrix</a>&amp; m);
<a name="l00331"></a>00331 
<a name="l00335"></a>00335     <span class="keywordtype">void</span> setIdentityMatrix();
<a name="l00336"></a>00336 
<a name="l00342"></a>00342     <span class="keywordtype">void</span> concatMatrix(<span class="keyword">const</span> <a class="code" href="../../db/dd6/class_sk_matrix.html">SkMatrix</a>&amp; m) <span class="keyword">const</span>;
<a name="l00343"></a>00343 
<a name="l00344"></a>00344 
<a name="l00346"></a>00346     <span class="comment">// Clip state</span>
<a name="l00351"></a>00351 <span class="comment"></span>    <span class="keyword">const</span> <a class="code" href="../../d7/de6/class_gr_clip_data.html">GrClipData</a>* getClip() <span class="keyword">const</span>;
<a name="l00352"></a>00352 
<a name="l00357"></a>00357     <span class="keywordtype">void</span> setClip(<span class="keyword">const</span> <a class="code" href="../../d7/de6/class_gr_clip_data.html">GrClipData</a>* clipData);
<a name="l00358"></a>00358 
<a name="l00360"></a>00360     <span class="comment">// Draws</span>
<a name="l00361"></a>00361 
<a name="l00369"></a>00369     <span class="keywordtype">void</span> <a class="code" href="../../d6/d40/build__stage_2email_2shared_2js_2media_2media__frame_8js.html#a1ac2b96f3c890c1170f3be034398a81d">clear</a>(<span class="keyword">const</span> <a class="code" href="../../d4/dd5/struct_sk_i_rect.html">GrIRect</a>* rect, <a class="code" href="../../d5/de4/_gr_color_8h.html#ace51258abd72ce65ad212de44691a9eb">GrColor</a> <a class="code" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#aacb3a46fbd7c29fc555a0260d22f938c">color</a>,
<a name="l00370"></a>00370                <a class="code" href="../../d6/d74/class_gr_render_target.html">GrRenderTarget</a>* <a class="code" href="../../d9/d04/expat_8h.html#acfcb72e11f425a604663d645d2a4ea80">target</a> = <a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00371"></a>00371 
<a name="l00375"></a>00375     <span class="keywordtype">void</span> drawPaint(<span class="keyword">const</span> <a class="code" href="../../d8/d89/class_gr_paint.html">GrPaint</a>&amp; paint);
<a name="l00376"></a>00376 
<a name="l00388"></a>00388     <span class="keywordtype">void</span> drawRect(<span class="keyword">const</span> <a class="code" href="../../d8/d89/class_gr_paint.html">GrPaint</a>&amp; paint,
<a name="l00389"></a>00389                   <span class="keyword">const</span> <a class="code" href="../../df/dfb/struct_sk_rect.html">GrRect</a>&amp;,
<a name="l00390"></a>00390                   <a class="code" href="../../d5/d8a/_sk_scalar_8h.html#ad0774e85c5aecc2c583888e41323443b">SkScalar</a> strokeWidth = -1,
<a name="l00391"></a>00391                   <span class="keyword">const</span> <a class="code" href="../../db/dd6/class_sk_matrix.html">SkMatrix</a>* matrix = <a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00392"></a>00392 
<a name="l00406"></a>00406     <span class="keywordtype">void</span> drawRectToRect(<span class="keyword">const</span> <a class="code" href="../../d8/d89/class_gr_paint.html">GrPaint</a>&amp; paint,
<a name="l00407"></a>00407                         <span class="keyword">const</span> <a class="code" href="../../df/dfb/struct_sk_rect.html">GrRect</a>&amp; dstRect,
<a name="l00408"></a>00408                         <span class="keyword">const</span> <a class="code" href="../../df/dfb/struct_sk_rect.html">GrRect</a>&amp; localRect,
<a name="l00409"></a>00409                         <span class="keyword">const</span> <a class="code" href="../../db/dd6/class_sk_matrix.html">SkMatrix</a>* dstMatrix = <a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,
<a name="l00410"></a>00410                         <span class="keyword">const</span> <a class="code" href="../../db/dd6/class_sk_matrix.html">SkMatrix</a>* localMatrix = <a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00411"></a>00411 
<a name="l00419"></a>00419     <span class="keywordtype">void</span> drawPath(<span class="keyword">const</span> <a class="code" href="../../d8/d89/class_gr_paint.html">GrPaint</a>&amp; paint, <span class="keyword">const</span> <a class="code" href="../../de/d98/class_sk_path.html">SkPath</a>&amp; <a class="code" href="../../db/d6d/mkdirp_8js.html#aa72e0c8a20e6bcc571d3a1c51846e627">path</a>, <span class="keyword">const</span> <a class="code" href="../../d3/ddb/class_sk_stroke_rec.html">SkStrokeRec</a>&amp; <a class="code" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#ad249d6638507ad849b72620e31304a5a">stroke</a>);
<a name="l00420"></a>00420 
<a name="l00437"></a>00437     <span class="keywordtype">void</span> drawVertices(<span class="keyword">const</span> <a class="code" href="../../d8/d89/class_gr_paint.html">GrPaint</a>&amp; paint,
<a name="l00438"></a>00438                       <a class="code" href="../../d8/de6/_gr_types_8h.html#a4f708c18e437ab9b7557fd4d5fd10cd8">GrPrimitiveType</a> primitiveType,
<a name="l00439"></a>00439                       <span class="keywordtype">int</span> vertexCount,
<a name="l00440"></a>00440                       <span class="keyword">const</span> <a class="code" href="../../d5/d2b/_gr_point_8h.html#a8e0ffa1b410bd51f7d8e06f3bb9b0435">GrPoint</a> positions[],
<a name="l00441"></a>00441                       <span class="keyword">const</span> <a class="code" href="../../d5/d2b/_gr_point_8h.html#a8e0ffa1b410bd51f7d8e06f3bb9b0435">GrPoint</a> texs[],
<a name="l00442"></a>00442                       <span class="keyword">const</span> <a class="code" href="../../d5/de4/_gr_color_8h.html#ace51258abd72ce65ad212de44691a9eb">GrColor</a> <a class="code" href="../../d4/d00/tools_2xpcwindow_2lib_2modules_2debug_8js.html#a205bb968a83c85324e6b50fecdb4b630">colors</a>[],
<a name="l00443"></a>00443                       <span class="keyword">const</span> uint16_t indices[],
<a name="l00444"></a>00444                       <span class="keywordtype">int</span> indexCount);
<a name="l00445"></a>00445 
<a name="l00453"></a>00453     <span class="keywordtype">void</span> drawOval(<span class="keyword">const</span> <a class="code" href="../../d8/d89/class_gr_paint.html">GrPaint</a>&amp; paint,
<a name="l00454"></a>00454                   <span class="keyword">const</span> <a class="code" href="../../df/dfb/struct_sk_rect.html">GrRect</a>&amp; oval,
<a name="l00455"></a>00455                   <span class="keyword">const</span> <a class="code" href="../../d3/ddb/class_sk_stroke_rec.html">SkStrokeRec</a>&amp; <a class="code" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#ad249d6638507ad849b72620e31304a5a">stroke</a>);
<a name="l00456"></a>00456 
<a name="l00458"></a>00458     <span class="comment">// Misc.</span>
<a name="l00459"></a>00459 
<a name="l00463"></a><a class="code" href="../../da/d02/class_gr_context.html#afd1b26665e152121f633772a5c52f640">00463</a>     <span class="keyword">enum</span> <a class="code" href="../../da/d02/class_gr_context.html#afd1b26665e152121f633772a5c52f640">FlushBits</a> {
<a name="l00471"></a><a class="code" href="../../da/d02/class_gr_context.html#afd1b26665e152121f633772a5c52f640ae8dead2d329298e17a400bc0d0f2a637">00471</a>         kForceCurrentRenderTarget_FlushBit   = 0x1,
<a name="l00478"></a><a class="code" href="../../da/d02/class_gr_context.html#afd1b26665e152121f633772a5c52f640a56af900f414d35843f57a10734e8e1b2">00478</a>         kDiscard_FlushBit                    = 0x2,
<a name="l00479"></a>00479     };
<a name="l00480"></a>00480 
<a name="l00487"></a>00487     <span class="keywordtype">void</span> flush(<span class="keywordtype">int</span> flagsBitfield = 0);
<a name="l00488"></a>00488 
<a name="l00492"></a><a class="code" href="../../da/d02/class_gr_context.html#a4ba6de176c5e0d3f4cf82e42e8074da5">00492</a>     <span class="keyword">enum</span> <a class="code" href="../../da/d02/class_gr_context.html#a4ba6de176c5e0d3f4cf82e42e8074da5">PixelOpsFlags</a> {
<a name="l00495"></a><a class="code" href="../../da/d02/class_gr_context.html#a4ba6de176c5e0d3f4cf82e42e8074da5a4413a3e0f3651d71df1d98ac288b7c57">00495</a>         kDontFlush_PixelOpsFlag = 0x1,
<a name="l00498"></a><a class="code" href="../../da/d02/class_gr_context.html#a4ba6de176c5e0d3f4cf82e42e8074da5a31eebfbdb34e7c9885b145ab2a966b17">00498</a>         kUnpremul_PixelOpsFlag  = 0x2,
<a name="l00499"></a>00499     };
<a name="l00500"></a>00500 
<a name="l00518"></a>00518     <span class="keywordtype">bool</span> readRenderTargetPixels(<a class="code" href="../../d6/d74/class_gr_render_target.html">GrRenderTarget</a>* <a class="code" href="../../d9/d04/expat_8h.html#acfcb72e11f425a604663d645d2a4ea80">target</a>,
<a name="l00519"></a>00519                                 <span class="keywordtype">int</span> <a class="code" href="../../d3/d91/j3d_8js.html#a47b6aed05bc344861b52fe3ffb7a1edd">left</a>, <span class="keywordtype">int</span> <a class="code" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">top</a>, <span class="keywordtype">int</span> <a class="code" href="../../d4/d8c/viewphoto_8js.html#adb90f9ed3668a895cc5b90a19bcdee13">width</a>, <span class="keywordtype">int</span> <a class="code" href="../../d4/d8c/viewphoto_8js.html#a06f7a63ceb91351a4c31800c9a7af42f">height</a>,
<a name="l00520"></a>00520                                 <a class="code" href="../../d8/de6/_gr_types_8h.html#a82326e1fcae74e5cd5857d86bc648277">GrPixelConfig</a> <a class="code" href="../../d1/d0b/fb__init_8js.html#aeac120c9ce32d189166215752b0b1a76">config</a>, <span class="keywordtype">void</span>* <a class="code" href="../../d6/da5/libpinyin_8js.html#abd91b1aab0a10c5027ca2eb5577f759f">buffer</a>,
<a name="l00521"></a>00521                                 <span class="keywordtype">size_t</span> rowBytes = 0,
<a name="l00522"></a>00522                                 uint32_t pixelOpsFlags = 0);
<a name="l00523"></a>00523 
<a name="l00541"></a>00541     <span class="keywordtype">bool</span> writeRenderTargetPixels(<a class="code" href="../../d6/d74/class_gr_render_target.html">GrRenderTarget</a>* <a class="code" href="../../d9/d04/expat_8h.html#acfcb72e11f425a604663d645d2a4ea80">target</a>,
<a name="l00542"></a>00542                                  <span class="keywordtype">int</span> <a class="code" href="../../d3/d91/j3d_8js.html#a47b6aed05bc344861b52fe3ffb7a1edd">left</a>, <span class="keywordtype">int</span> <a class="code" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">top</a>, <span class="keywordtype">int</span> <a class="code" href="../../d4/d8c/viewphoto_8js.html#adb90f9ed3668a895cc5b90a19bcdee13">width</a>, <span class="keywordtype">int</span> <a class="code" href="../../d4/d8c/viewphoto_8js.html#a06f7a63ceb91351a4c31800c9a7af42f">height</a>,
<a name="l00543"></a>00543                                  <a class="code" href="../../d8/de6/_gr_types_8h.html#a82326e1fcae74e5cd5857d86bc648277">GrPixelConfig</a> <a class="code" href="../../d1/d0b/fb__init_8js.html#aeac120c9ce32d189166215752b0b1a76">config</a>, <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="../../d6/da5/libpinyin_8js.html#abd91b1aab0a10c5027ca2eb5577f759f">buffer</a>,
<a name="l00544"></a>00544                                  <span class="keywordtype">size_t</span> rowBytes = 0,
<a name="l00545"></a>00545                                  uint32_t pixelOpsFlags = 0);
<a name="l00546"></a>00546 
<a name="l00563"></a>00563     <span class="keywordtype">bool</span> readTexturePixels(<a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* texture,
<a name="l00564"></a>00564                            <span class="keywordtype">int</span> <a class="code" href="../../d3/d91/j3d_8js.html#a47b6aed05bc344861b52fe3ffb7a1edd">left</a>, <span class="keywordtype">int</span> <a class="code" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">top</a>, <span class="keywordtype">int</span> <a class="code" href="../../d4/d8c/viewphoto_8js.html#adb90f9ed3668a895cc5b90a19bcdee13">width</a>, <span class="keywordtype">int</span> <a class="code" href="../../d4/d8c/viewphoto_8js.html#a06f7a63ceb91351a4c31800c9a7af42f">height</a>,
<a name="l00565"></a>00565                            <a class="code" href="../../d8/de6/_gr_types_8h.html#a82326e1fcae74e5cd5857d86bc648277">GrPixelConfig</a> <a class="code" href="../../d1/d0b/fb__init_8js.html#aeac120c9ce32d189166215752b0b1a76">config</a>, <span class="keywordtype">void</span>* <a class="code" href="../../d6/da5/libpinyin_8js.html#abd91b1aab0a10c5027ca2eb5577f759f">buffer</a>,
<a name="l00566"></a>00566                            <span class="keywordtype">size_t</span> rowBytes = 0,
<a name="l00567"></a>00567                            uint32_t pixelOpsFlags = 0);
<a name="l00568"></a>00568 
<a name="l00584"></a>00584     <span class="keywordtype">bool</span> writeTexturePixels(<a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* texture,
<a name="l00585"></a>00585                             <span class="keywordtype">int</span> <a class="code" href="../../d3/d91/j3d_8js.html#a47b6aed05bc344861b52fe3ffb7a1edd">left</a>, <span class="keywordtype">int</span> <a class="code" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#a2d367ff48e26f53b84f9b2fe7d6065d6">top</a>, <span class="keywordtype">int</span> <a class="code" href="../../d4/d8c/viewphoto_8js.html#adb90f9ed3668a895cc5b90a19bcdee13">width</a>, <span class="keywordtype">int</span> <a class="code" href="../../d4/d8c/viewphoto_8js.html#a06f7a63ceb91351a4c31800c9a7af42f">height</a>,
<a name="l00586"></a>00586                             <a class="code" href="../../d8/de6/_gr_types_8h.html#a82326e1fcae74e5cd5857d86bc648277">GrPixelConfig</a> <a class="code" href="../../d1/d0b/fb__init_8js.html#aeac120c9ce32d189166215752b0b1a76">config</a>, <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="../../d6/da5/libpinyin_8js.html#abd91b1aab0a10c5027ca2eb5577f759f">buffer</a>,
<a name="l00587"></a>00587                             <span class="keywordtype">size_t</span> rowBytes,
<a name="l00588"></a>00588                             uint32_t pixelOpsFlags = 0);
<a name="l00589"></a>00589 
<a name="l00590"></a>00590 
<a name="l00600"></a>00600     <span class="keywordtype">void</span> copyTexture(<a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* src, <a class="code" href="../../d6/d74/class_gr_render_target.html">GrRenderTarget</a>* dst, <span class="keyword">const</span> <a class="code" href="../../dd/d7a/struct_sk_i_point.html">SkIPoint</a>* topLeft = <a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00601"></a>00601 
<a name="l00613"></a>00613     <span class="keywordtype">void</span> resolveRenderTarget(<a class="code" href="../../d6/d74/class_gr_render_target.html">GrRenderTarget</a>* <a class="code" href="../../d9/d04/expat_8h.html#acfcb72e11f425a604663d645d2a4ea80">target</a>);
<a name="l00614"></a>00614 
<a name="l00626"></a>00626      <a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* gaussianBlur(<a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* srcTexture,
<a name="l00627"></a>00627                              <span class="keywordtype">bool</span> canClobberSrc,
<a name="l00628"></a>00628                              <span class="keyword">const</span> <a class="code" href="../../df/dfb/struct_sk_rect.html">SkRect</a>&amp; rect,
<a name="l00629"></a>00629                              <span class="keywordtype">float</span> sigmaX, <span class="keywordtype">float</span> sigmaY);
<a name="l00630"></a>00630 
<a name="l00632"></a>00632     <span class="comment">// Helpers</span>
<a name="l00633"></a>00633 
<a name="l00634"></a><a class="code" href="../../de/d77/class_gr_context_1_1_auto_render_target.html">00634</a>     <span class="keyword">class </span><a class="code" href="../../de/d77/class_gr_context_1_1_auto_render_target.html">AutoRenderTarget</a> : <span class="keyword">public</span> ::<a class="code" href="../../de/da3/class_gr_noncopyable.html">GrNoncopyable</a> {
<a name="l00635"></a>00635     <span class="keyword">public</span>:
<a name="l00636"></a><a class="code" href="../../de/d77/class_gr_context_1_1_auto_render_target.html#a0c3f329c8cfd531b239dfaf36a026ed2">00636</a>         <a class="code" href="../../de/d77/class_gr_context_1_1_auto_render_target.html#a0c3f329c8cfd531b239dfaf36a026ed2">AutoRenderTarget</a>(<a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>* <a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>, <a class="code" href="../../d6/d74/class_gr_render_target.html">GrRenderTarget</a>* <a class="code" href="../../d9/d04/expat_8h.html#acfcb72e11f425a604663d645d2a4ea80">target</a>) {
<a name="l00637"></a>00637             fPrevTarget = context-&gt;<a class="code" href="../../da/d02/class_gr_context.html#a749b1a43e247acd691a64cd8f3053084">getRenderTarget</a>();
<a name="l00638"></a>00638             <a class="code" href="../../d5/d5a/_gr_ref_cnt_8h.html#a50c8d5859f48e3990ca9c846cc847e9d">GrSafeRef</a>(fPrevTarget);
<a name="l00639"></a>00639             context-&gt;<a class="code" href="../../da/d02/class_gr_context.html#abdcc45177f91e1f59f7a39ec653622bc">setRenderTarget</a>(target);
<a name="l00640"></a>00640             fContext = <a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>;
<a name="l00641"></a>00641         }
<a name="l00642"></a><a class="code" href="../../de/d77/class_gr_context_1_1_auto_render_target.html#ad29fd1c5558bf0e19063feb32ed5eb00">00642</a>         <a class="code" href="../../de/d77/class_gr_context_1_1_auto_render_target.html#ad29fd1c5558bf0e19063feb32ed5eb00">AutoRenderTarget</a>(<a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>* <a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>) {
<a name="l00643"></a>00643             fPrevTarget = context-&gt;<a class="code" href="../../da/d02/class_gr_context.html#a749b1a43e247acd691a64cd8f3053084">getRenderTarget</a>();
<a name="l00644"></a>00644             <a class="code" href="../../d5/d5a/_gr_ref_cnt_8h.html#a50c8d5859f48e3990ca9c846cc847e9d">GrSafeRef</a>(fPrevTarget);
<a name="l00645"></a>00645             fContext = <a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>;
<a name="l00646"></a>00646         }
<a name="l00647"></a><a class="code" href="../../de/d77/class_gr_context_1_1_auto_render_target.html#a41792f53ef1d3fe46201b3510db6dc99">00647</a>         <a class="code" href="../../de/d77/class_gr_context_1_1_auto_render_target.html#a41792f53ef1d3fe46201b3510db6dc99">~AutoRenderTarget</a>() {
<a name="l00648"></a>00648             <span class="keywordflow">if</span> (<a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != fContext) {
<a name="l00649"></a>00649                 fContext-&gt;setRenderTarget(fPrevTarget);
<a name="l00650"></a>00650             }
<a name="l00651"></a>00651             <a class="code" href="../../d5/d5a/_gr_ref_cnt_8h.html#a1f0cb20f1b625837768247db2f16f808">GrSafeUnref</a>(fPrevTarget);
<a name="l00652"></a>00652         }
<a name="l00653"></a>00653     <span class="keyword">private</span>:
<a name="l00654"></a>00654         <a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>*      fContext;
<a name="l00655"></a>00655         <a class="code" href="../../d6/d74/class_gr_render_target.html">GrRenderTarget</a>* fPrevTarget;
<a name="l00656"></a>00656     };
<a name="l00657"></a>00657 
<a name="l00672"></a><a class="code" href="../../d8/d6d/class_gr_context_1_1_auto_matrix.html">00672</a>     <span class="keyword">class </span><a class="code" href="../../d8/d6d/class_gr_context_1_1_auto_matrix.html">AutoMatrix</a> : <a class="code" href="../../de/da3/class_gr_noncopyable.html">GrNoncopyable</a> {
<a name="l00673"></a>00673     <span class="keyword">public</span>:
<a name="l00674"></a><a class="code" href="../../d8/d6d/class_gr_context_1_1_auto_matrix.html#a09b45618ba9bf70e2ac0f78a66fc5dec">00674</a>         <a class="code" href="../../d8/d6d/class_gr_context_1_1_auto_matrix.html#a09b45618ba9bf70e2ac0f78a66fc5dec">AutoMatrix</a>() : fContext(<a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {}
<a name="l00675"></a>00675 
<a name="l00676"></a><a class="code" href="../../d8/d6d/class_gr_context_1_1_auto_matrix.html#a4ba30d7b8c50b9ce780aa2796396e8f3">00676</a>         <a class="code" href="../../d8/d6d/class_gr_context_1_1_auto_matrix.html#a4ba30d7b8c50b9ce780aa2796396e8f3">~AutoMatrix</a>() { this-&gt;<a class="code" href="../../d2/dc5/homescreen__launcher__test_8js.html#a19c66abfee1b46609f11c5320d6b0843">restore</a>(); }
<a name="l00677"></a>00677 
<a name="l00681"></a><a class="code" href="../../d8/d6d/class_gr_context_1_1_auto_matrix.html#a63e58ee859b009bd4e529fc632da2339">00681</a>         <span class="keywordtype">void</span> <a class="code" href="../../d8/d6d/class_gr_context_1_1_auto_matrix.html#a63e58ee859b009bd4e529fc632da2339">setPreConcat</a>(<a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>* <a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>, <span class="keyword">const</span> <a class="code" href="../../db/dd6/class_sk_matrix.html">SkMatrix</a>&amp; preConcat, <a class="code" href="../../d8/d89/class_gr_paint.html">GrPaint</a>* paint = <a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00682"></a>00682             <a class="code" href="../../dd/d22/_gr_config_8h.html#a78b10761a5e21dacac1842ed99c14aed">GrAssert</a>(<a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != context);
<a name="l00683"></a>00683 
<a name="l00684"></a>00684             this-&gt;<a class="code" href="../../d2/dc5/homescreen__launcher__test_8js.html#a19c66abfee1b46609f11c5320d6b0843">restore</a>();
<a name="l00685"></a>00685 
<a name="l00686"></a>00686             fContext = <a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>;
<a name="l00687"></a>00687             fMatrix = context-&gt;<a class="code" href="../../da/d02/class_gr_context.html#aedfaf07dd2691097400cad9c13f72843">getMatrix</a>();
<a name="l00688"></a>00688             this-&gt;preConcat(preConcat, paint);
<a name="l00689"></a>00689         }
<a name="l00690"></a>00690 
<a name="l00695"></a><a class="code" href="../../d8/d6d/class_gr_context_1_1_auto_matrix.html#a61c0e4f0e5ab322cf08d24f79dc36424">00695</a>         <span class="keywordtype">bool</span> <a class="code" href="../../d8/d6d/class_gr_context_1_1_auto_matrix.html#a61c0e4f0e5ab322cf08d24f79dc36424">setIdentity</a>(<a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>* <a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>, <a class="code" href="../../d8/d89/class_gr_paint.html">GrPaint</a>* paint = <a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00696"></a>00696             <a class="code" href="../../dd/d22/_gr_config_8h.html#a78b10761a5e21dacac1842ed99c14aed">GrAssert</a>(<a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != context);
<a name="l00697"></a>00697 
<a name="l00698"></a>00698             this-&gt;<a class="code" href="../../d2/dc5/homescreen__launcher__test_8js.html#a19c66abfee1b46609f11c5320d6b0843">restore</a>();
<a name="l00699"></a>00699 
<a name="l00700"></a>00700             <span class="keywordflow">if</span> (<a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != paint) {
<a name="l00701"></a>00701                 <span class="keywordflow">if</span> (!paint-&gt;localCoordChangeInverse(context-&gt;<a class="code" href="../../da/d02/class_gr_context.html#aedfaf07dd2691097400cad9c13f72843">getMatrix</a>())) {
<a name="l00702"></a>00702                     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00703"></a>00703                 }
<a name="l00704"></a>00704             }
<a name="l00705"></a>00705             fMatrix = context-&gt;<a class="code" href="../../da/d02/class_gr_context.html#aedfaf07dd2691097400cad9c13f72843">getMatrix</a>();
<a name="l00706"></a>00706             fContext = <a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>;
<a name="l00707"></a>00707             context-&gt;<a class="code" href="../../da/d02/class_gr_context.html#a67ed60e6d94ec6a18db65f99889e8803">setIdentityMatrix</a>();
<a name="l00708"></a>00708             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00709"></a>00709         }
<a name="l00710"></a>00710 
<a name="l00715"></a><a class="code" href="../../d8/d6d/class_gr_context_1_1_auto_matrix.html#a0f6db2ee7439521847acedbd6ed8aca7">00715</a>         <span class="keywordtype">bool</span> <span class="keyword">set</span>(<a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>* <a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>, <span class="keyword">const</span> <a class="code" href="../../db/dd6/class_sk_matrix.html">SkMatrix</a>&amp; newMatrix, <a class="code" href="../../d8/d89/class_gr_paint.html">GrPaint</a>* paint = <a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00716"></a>00716             <span class="keywordflow">if</span> (<a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != paint) {
<a name="l00717"></a>00717                 <span class="keywordflow">if</span> (!this-&gt;setIdentity(<a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>, paint)) {
<a name="l00718"></a>00718                     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00719"></a>00719                 }
<a name="l00720"></a>00720                 this-&gt;preConcat(newMatrix, paint);
<a name="l00721"></a>00721             } <span class="keywordflow">else</span> {
<a name="l00722"></a>00722                 this-&gt;<a class="code" href="../../d2/dc5/homescreen__launcher__test_8js.html#a19c66abfee1b46609f11c5320d6b0843">restore</a>();
<a name="l00723"></a>00723                 fContext = <a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>;
<a name="l00724"></a>00724                 fMatrix = <a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>-&gt;getMatrix();
<a name="l00725"></a>00725                 <a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>-&gt;setMatrix(newMatrix);
<a name="l00726"></a>00726             }
<a name="l00727"></a>00727             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00728"></a>00728         }
<a name="l00729"></a>00729 
<a name="l00737"></a><a class="code" href="../../d8/d6d/class_gr_context_1_1_auto_matrix.html#a3e29e2204b658dea2bbcaef8ff221afa">00737</a>         <span class="keywordtype">void</span> <a class="code" href="../../d8/d6d/class_gr_context_1_1_auto_matrix.html#a3e29e2204b658dea2bbcaef8ff221afa">preConcat</a>(<span class="keyword">const</span> <a class="code" href="../../db/dd6/class_sk_matrix.html">SkMatrix</a>&amp; preConcat, <a class="code" href="../../d8/d89/class_gr_paint.html">GrPaint</a>* paint = <a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00738"></a>00738             <span class="keywordflow">if</span> (<a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != paint) {
<a name="l00739"></a>00739                 paint-&gt;localCoordChange(preConcat);
<a name="l00740"></a>00740             }
<a name="l00741"></a>00741             fContext-&gt;concatMatrix(preConcat);
<a name="l00742"></a>00742         }
<a name="l00743"></a>00743 
<a name="l00748"></a><a class="code" href="../../d8/d6d/class_gr_context_1_1_auto_matrix.html#a1403609603abf4c35dc71c04b5fbf4ec">00748</a>         <span class="keywordtype">bool</span> <a class="code" href="../../d8/d6d/class_gr_context_1_1_auto_matrix.html#a1403609603abf4c35dc71c04b5fbf4ec">succeeded</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != fContext; }
<a name="l00749"></a>00749 
<a name="l00753"></a><a class="code" href="../../d8/d6d/class_gr_context_1_1_auto_matrix.html#afd06ddad0eebb64bb956d9b82a2563b6">00753</a>         <span class="keywordtype">void</span> <a class="code" href="../../d8/d6d/class_gr_context_1_1_auto_matrix.html#afd06ddad0eebb64bb956d9b82a2563b6">restore</a>() {
<a name="l00754"></a>00754             <span class="keywordflow">if</span> (<a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != fContext) {
<a name="l00755"></a>00755                 fContext-&gt;setMatrix(fMatrix);
<a name="l00756"></a>00756                 fContext = <a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00757"></a>00757             }
<a name="l00758"></a>00758         }
<a name="l00759"></a>00759 
<a name="l00760"></a>00760     <span class="keyword">private</span>:
<a name="l00761"></a>00761         <a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>*  fContext;
<a name="l00762"></a>00762         <a class="code" href="../../db/dd6/class_sk_matrix.html">SkMatrix</a>    fMatrix;
<a name="l00763"></a>00763     };
<a name="l00764"></a>00764 
<a name="l00765"></a><a class="code" href="../../dc/df0/class_gr_context_1_1_auto_clip.html">00765</a>     <span class="keyword">class </span><a class="code" href="../../dc/df0/class_gr_context_1_1_auto_clip.html">AutoClip</a> : <a class="code" href="../../de/da3/class_gr_noncopyable.html">GrNoncopyable</a> {
<a name="l00766"></a>00766     <span class="keyword">public</span>:
<a name="l00767"></a>00767         <span class="comment">// This enum exists to require a caller of the constructor to acknowledge that the clip will</span>
<a name="l00768"></a>00768         <span class="comment">// initially be wide open. It also could be extended if there are other desirable initial</span>
<a name="l00769"></a>00769         <span class="comment">// clip states.</span>
<a name="l00770"></a><a class="code" href="../../dc/df0/class_gr_context_1_1_auto_clip.html#a527ba49ec64445332ccc393903f29508">00770</a>         <span class="keyword">enum</span> <a class="code" href="../../dc/df0/class_gr_context_1_1_auto_clip.html#a527ba49ec64445332ccc393903f29508">InitialClip</a> {
<a name="l00771"></a><a class="code" href="../../dc/df0/class_gr_context_1_1_auto_clip.html#a527ba49ec64445332ccc393903f29508aede65515a74c33359d5e31f402681443">00771</a>             <a class="code" href="../../dc/df0/class_gr_context_1_1_auto_clip.html#a527ba49ec64445332ccc393903f29508aede65515a74c33359d5e31f402681443">kWideOpen_InitialClip</a>,
<a name="l00772"></a>00772         };
<a name="l00773"></a>00773 
<a name="l00774"></a><a class="code" href="../../dc/df0/class_gr_context_1_1_auto_clip.html#af0bb150249ef5ba68f4bba5d4c6cedf5">00774</a>         <a class="code" href="../../dc/df0/class_gr_context_1_1_auto_clip.html">AutoClip</a>(<a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>* <a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>, <a class="code" href="../../dc/df0/class_gr_context_1_1_auto_clip.html#a527ba49ec64445332ccc393903f29508">InitialClip</a> initialState)
<a name="l00775"></a>00775         : fContext(context) {
<a name="l00776"></a>00776             <a class="code" href="../../dd/d22/_gr_config_8h.html#a78b10761a5e21dacac1842ed99c14aed">GrAssert</a>(kWideOpen_InitialClip == initialState);
<a name="l00777"></a>00777             fNewClipData.fClipStack = &amp;fNewClipStack;
<a name="l00778"></a>00778 
<a name="l00779"></a>00779             fOldClip = context-&gt;<a class="code" href="../../da/d02/class_gr_context.html#a567013ad6146b141daa817b5647a7470">getClip</a>();
<a name="l00780"></a>00780             context-&gt;<a class="code" href="../../da/d02/class_gr_context.html#a1a9074ecd664752f9860c5b1be1457f0">setClip</a>(&amp;fNewClipData);
<a name="l00781"></a>00781         }
<a name="l00782"></a>00782 
<a name="l00783"></a><a class="code" href="../../dc/df0/class_gr_context_1_1_auto_clip.html#a4845618b2ba8eb5794f607aa7697d7e5">00783</a>         <a class="code" href="../../dc/df0/class_gr_context_1_1_auto_clip.html">AutoClip</a>(<a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>* <a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>, <span class="keyword">const</span> <a class="code" href="../../df/dfb/struct_sk_rect.html">GrRect</a>&amp; newClipRect)
<a name="l00784"></a>00784         : fContext(context)
<a name="l00785"></a>00785         , fNewClipStack(newClipRect) {
<a name="l00786"></a>00786             fNewClipData.fClipStack = &amp;fNewClipStack;
<a name="l00787"></a>00787 
<a name="l00788"></a>00788             fOldClip = fContext-&gt;getClip();
<a name="l00789"></a>00789             fContext-&gt;setClip(&amp;fNewClipData);
<a name="l00790"></a>00790         }
<a name="l00791"></a>00791 
<a name="l00792"></a><a class="code" href="../../dc/df0/class_gr_context_1_1_auto_clip.html#a2a158a8c9b296351c0df7aeb21177d41">00792</a>         <a class="code" href="../../dc/df0/class_gr_context_1_1_auto_clip.html#a2a158a8c9b296351c0df7aeb21177d41">~AutoClip</a>() {
<a name="l00793"></a>00793             <span class="keywordflow">if</span> (<a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != fContext) {
<a name="l00794"></a>00794                 fContext-&gt;setClip(fOldClip);
<a name="l00795"></a>00795             }
<a name="l00796"></a>00796         }
<a name="l00797"></a>00797     <span class="keyword">private</span>:
<a name="l00798"></a>00798         <a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>*        fContext;
<a name="l00799"></a>00799         <span class="keyword">const</span> <a class="code" href="../../d7/de6/class_gr_clip_data.html">GrClipData</a>* fOldClip;
<a name="l00800"></a>00800 
<a name="l00801"></a>00801         <a class="code" href="../../d1/da5/class_sk_clip_stack.html">SkClipStack</a>       fNewClipStack;
<a name="l00802"></a>00802         <a class="code" href="../../d7/de6/class_gr_clip_data.html">GrClipData</a>        fNewClipData;
<a name="l00803"></a>00803     };
<a name="l00804"></a>00804 
<a name="l00805"></a><a class="code" href="../../d6/d95/class_gr_context_1_1_auto_wide_open_identity_draw.html">00805</a>     <span class="keyword">class </span><a class="code" href="../../d6/d95/class_gr_context_1_1_auto_wide_open_identity_draw.html">AutoWideOpenIdentityDraw</a> {
<a name="l00806"></a>00806     <span class="keyword">public</span>:
<a name="l00807"></a><a class="code" href="../../d6/d95/class_gr_context_1_1_auto_wide_open_identity_draw.html#a20e4ecf774b7d101b118992751578a54">00807</a>         <a class="code" href="../../d6/d95/class_gr_context_1_1_auto_wide_open_identity_draw.html">AutoWideOpenIdentityDraw</a>(<a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>* ctx, <a class="code" href="../../d6/d74/class_gr_render_target.html">GrRenderTarget</a>* <a class="code" href="../../d2/d7d/jsapi_8h.html#a3ba489a976915ca6161baede3c439066">rt</a>)
<a name="l00808"></a>00808             : fAutoClip(ctx, <a class="code" href="../../dc/df0/class_gr_context_1_1_auto_clip.html">AutoClip</a>::kWideOpen_InitialClip)
<a name="l00809"></a>00809             , fAutoRT(ctx, rt) {
<a name="l00810"></a>00810             fAutoMatrix.setIdentity(ctx);
<a name="l00811"></a>00811             <span class="comment">// should never fail with no paint param.</span>
<a name="l00812"></a>00812             <a class="code" href="../../dd/d22/_gr_config_8h.html#a78b10761a5e21dacac1842ed99c14aed">GrAssert</a>(fAutoMatrix.succeeded());
<a name="l00813"></a>00813         }
<a name="l00814"></a>00814 
<a name="l00815"></a>00815     <span class="keyword">private</span>:
<a name="l00816"></a>00816         <a class="code" href="../../dc/df0/class_gr_context_1_1_auto_clip.html">AutoClip</a> fAutoClip;
<a name="l00817"></a>00817         <a class="code" href="../../de/d77/class_gr_context_1_1_auto_render_target.html">AutoRenderTarget</a> fAutoRT;
<a name="l00818"></a>00818         <a class="code" href="../../d8/d6d/class_gr_context_1_1_auto_matrix.html">AutoMatrix</a> fAutoMatrix;
<a name="l00819"></a>00819     };
<a name="l00820"></a>00820 
<a name="l00822"></a>00822     <span class="comment">// Functions intended for internal use only.</span>
<a name="l00823"></a><a class="code" href="../../da/d02/class_gr_context.html#ae2c0a0cf665bc7dc1b5518f77e25c8bf">00823</a>     GrGpu* <a class="code" href="../../da/d02/class_gr_context.html#ae2c0a0cf665bc7dc1b5518f77e25c8bf">getGpu</a>() { <span class="keywordflow">return</span> fGpu; }
<a name="l00824"></a><a class="code" href="../../da/d02/class_gr_context.html#ab0f57e1d491651fc18d733b14675053d">00824</a>     <span class="keyword">const</span> GrGpu* <a class="code" href="../../da/d02/class_gr_context.html#ab0f57e1d491651fc18d733b14675053d">getGpu</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fGpu; }
<a name="l00825"></a><a class="code" href="../../da/d02/class_gr_context.html#aed4e0242117210efc7224f4374ff6f69">00825</a>     GrFontCache* <a class="code" href="../../da/d02/class_gr_context.html#aed4e0242117210efc7224f4374ff6f69">getFontCache</a>() { <span class="keywordflow">return</span> fFontCache; }
<a name="l00826"></a>00826     GrDrawTarget* getTextTarget(<span class="keyword">const</span> <a class="code" href="../../d8/d89/class_gr_paint.html">GrPaint</a>&amp; paint);
<a name="l00827"></a>00827     <span class="keyword">const</span> GrIndexBuffer* getQuadIndexBuffer() <span class="keyword">const</span>;
<a name="l00828"></a>00828 
<a name="l00833"></a>00833     <span class="keywordtype">void</span> addStencilBuffer(GrStencilBuffer* sb);
<a name="l00834"></a>00834     GrStencilBuffer* findStencilBuffer(<span class="keywordtype">int</span> <a class="code" href="../../d4/d8c/viewphoto_8js.html#adb90f9ed3668a895cc5b90a19bcdee13">width</a>, <span class="keywordtype">int</span> <a class="code" href="../../d4/d8c/viewphoto_8js.html#a06f7a63ceb91351a4c31800c9a7af42f">height</a>, <span class="keywordtype">int</span> sampleCnt);
<a name="l00835"></a>00835 
<a name="l00836"></a>00836     GrPathRenderer* getPathRenderer(
<a name="l00837"></a>00837                     <span class="keyword">const</span> <a class="code" href="../../de/d98/class_sk_path.html">SkPath</a>&amp; <a class="code" href="../../db/d6d/mkdirp_8js.html#aa72e0c8a20e6bcc571d3a1c51846e627">path</a>,
<a name="l00838"></a>00838                     <span class="keyword">const</span> <a class="code" href="../../d3/ddb/class_sk_stroke_rec.html">SkStrokeRec</a>&amp; <a class="code" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#ad249d6638507ad849b72620e31304a5a">stroke</a>,
<a name="l00839"></a>00839                     <span class="keyword">const</span> GrDrawTarget* <a class="code" href="../../d9/d04/expat_8h.html#acfcb72e11f425a604663d645d2a4ea80">target</a>,
<a name="l00840"></a>00840                     <span class="keywordtype">bool</span> allowSW,
<a name="l00841"></a>00841                     <a class="code" href="../../dc/dba/class_gr_path_renderer_chain.html#a1bf8a3ec194817a0fc023596f274ed93">GrPathRendererChain::DrawType</a> drawType = <a class="code" href="../../dc/dba/class_gr_path_renderer_chain.html#a1bf8a3ec194817a0fc023596f274ed93abe09b3c055bddc1653d3d68fdea4fd39">GrPathRendererChain::kColor_DrawType</a>,
<a name="l00842"></a>00842                     <a class="code" href="../../dc/dba/class_gr_path_renderer_chain.html#a7e629387c4a8f681dd8b149990d95961">GrPathRendererChain::StencilSupport</a>* stencilSupport = <a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00843"></a>00843 
<a name="l00844"></a>00844 <span class="preprocessor">#if GR_CACHE_STATS</span>
<a name="l00845"></a>00845 <span class="preprocessor"></span>    <span class="keywordtype">void</span> printCacheStats() <span class="keyword">const</span>;
<a name="l00846"></a>00846 <span class="preprocessor">#endif</span>
<a name="l00847"></a>00847 <span class="preprocessor"></span>
<a name="l00848"></a>00848 <span class="keyword">private</span>:
<a name="l00849"></a>00849     <span class="comment">// Used to indicate whether a draw should be performed immediately or queued in fDrawBuffer.</span>
<a name="l00850"></a>00850     <span class="keyword">enum</span> BufferedDraw {
<a name="l00851"></a>00851         kYes_BufferedDraw,
<a name="l00852"></a>00852         kNo_BufferedDraw,
<a name="l00853"></a>00853     };
<a name="l00854"></a>00854     BufferedDraw fLastDrawWasBuffered;
<a name="l00855"></a>00855 
<a name="l00856"></a>00856     GrGpu*              fGpu;
<a name="l00857"></a>00857     GrDrawState*        fDrawState;
<a name="l00858"></a>00858 
<a name="l00859"></a>00859     GrResourceCache*    fTextureCache;
<a name="l00860"></a>00860     GrFontCache*        fFontCache;
<a name="l00861"></a>00861 
<a name="l00862"></a>00862     <a class="code" href="../../dc/dba/class_gr_path_renderer_chain.html">GrPathRendererChain</a>*        fPathRendererChain;
<a name="l00863"></a>00863     GrSoftwarePathRenderer*     fSoftwarePathRenderer;
<a name="l00864"></a>00864 
<a name="l00865"></a>00865     GrVertexBufferAllocPool*    fDrawBufferVBAllocPool;
<a name="l00866"></a>00866     GrIndexBufferAllocPool*     fDrawBufferIBAllocPool;
<a name="l00867"></a>00867     GrInOrderDrawBuffer*        fDrawBuffer;
<a name="l00868"></a>00868 
<a name="l00869"></a>00869     <a class="code" href="../../df/d9c/class_gr_a_a_rect_renderer.html">GrAARectRenderer</a>*           fAARectRenderer;
<a name="l00870"></a>00870     GrOvalRenderer*             fOvalRenderer;
<a name="l00871"></a>00871 
<a name="l00872"></a>00872     <span class="keywordtype">bool</span>                        fDidTestPMConversions;
<a name="l00873"></a>00873     <span class="keywordtype">int</span>                         fPMToUPMConversion;
<a name="l00874"></a>00874     <span class="keywordtype">int</span>                         fUPMToPMConversion;
<a name="l00875"></a>00875 
<a name="l00876"></a>00876     <span class="keyword">struct </span>CleanUpData {
<a name="l00877"></a>00877         PFCleanUpFunc fFunc;
<a name="l00878"></a>00878         <span class="keywordtype">void</span>*         fInfo;
<a name="l00879"></a>00879     };
<a name="l00880"></a>00880 
<a name="l00881"></a>00881     <a class="code" href="../../d2/d18/class_sk_t_d_array.html">SkTDArray&lt;CleanUpData&gt;</a>      fCleanUpData;
<a name="l00882"></a>00882 
<a name="l00883"></a>00883     <a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>(); <span class="comment">// init must be called after the constructor.</span>
<a name="l00884"></a>00884     <span class="keywordtype">bool</span> <a class="code" href="../../db/dc0/mock__fb_8js.html#ae9b28e7b58edd8f38cd717eed7b3deb4">init</a>(<a class="code" href="../../d8/de6/_gr_types_8h.html#a6341434082767cb86a896ee4408d16bc">GrBackend</a>, <a class="code" href="../../d8/de6/_gr_types_8h.html#af2fb6b647dc43d23aaeea71ffef47324">GrBackendContext</a>);
<a name="l00885"></a>00885 
<a name="l00886"></a>00886     <span class="keywordtype">void</span> setupDrawBuffer();
<a name="l00887"></a>00887 
<a name="l00888"></a>00888     <span class="keywordtype">void</span> flushDrawBuffer();
<a name="l00889"></a>00889 
<a name="l00892"></a>00892     GrDrawTarget* prepareToDraw(<span class="keyword">const</span> <a class="code" href="../../d8/d89/class_gr_paint.html">GrPaint</a>*, BufferedDraw);
<a name="l00893"></a>00893 
<a name="l00894"></a>00894     <span class="keywordtype">void</span> internalDrawPath(GrDrawTarget* <a class="code" href="../../d9/d04/expat_8h.html#acfcb72e11f425a604663d645d2a4ea80">target</a>, <span class="keyword">const</span> <a class="code" href="../../d8/d89/class_gr_paint.html">GrPaint</a>&amp; paint, <span class="keyword">const</span> <a class="code" href="../../de/d98/class_sk_path.html">SkPath</a>&amp; <a class="code" href="../../db/d6d/mkdirp_8js.html#aa72e0c8a20e6bcc571d3a1c51846e627">path</a>,
<a name="l00895"></a>00895                           <span class="keyword">const</span> <a class="code" href="../../d3/ddb/class_sk_stroke_rec.html">SkStrokeRec</a>&amp; <a class="code" href="../../d8/dd4/ns_c_s_s_prop_list_8h.html#ad249d6638507ad849b72620e31304a5a">stroke</a>);
<a name="l00896"></a>00896 
<a name="l00897"></a>00897     <a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* createResizedTexture(<span class="keyword">const</span> <a class="code" href="../../d5/d17/struct_gr_texture_desc.html">GrTextureDesc</a>&amp; <a class="code" href="../../d8/dd0/extension__set_8h.html#a348efe6592512f937a672d5f5ec7d76a">desc</a>,
<a name="l00898"></a>00898                                     <span class="keyword">const</span> <a class="code" href="../../de/d07/struct_gr_cache_i_d.html">GrCacheID</a>&amp; cacheID,
<a name="l00899"></a>00899                                     <span class="keywordtype">void</span>* srcData,
<a name="l00900"></a>00900                                     <span class="keywordtype">size_t</span> rowBytes,
<a name="l00901"></a>00901                                     <span class="keywordtype">bool</span> needsFiltering);
<a name="l00902"></a>00902 
<a name="l00903"></a>00903     <span class="comment">// Needed so GrTexture&#39;s returnToCache helper function can call</span>
<a name="l00904"></a>00904     <span class="comment">// addExistingTextureToCache</span>
<a name="l00905"></a><a class="code" href="../../da/d02/class_gr_context.html#a40783b8923b0a8a0253e33542533d6db">00905</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>;
<a name="l00906"></a>00906 
<a name="l00907"></a>00907     <span class="comment">// Add an existing texture to the texture cache. This is intended solely</span>
<a name="l00908"></a>00908     <span class="comment">// for use with textures released from an GrAutoScratchTexture.</span>
<a name="l00909"></a>00909     <span class="keywordtype">void</span> addExistingTextureToCache(<a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* texture);
<a name="l00910"></a>00910 
<a name="l00916"></a>00916     <span class="keyword">const</span> <a class="code" href="../../da/dac/class_gr_effect_ref.html">GrEffectRef</a>* createPMToUPMEffect(<a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* texture,
<a name="l00917"></a>00917                                            <span class="keywordtype">bool</span> swapRAndB,
<a name="l00918"></a>00918                                            <span class="keyword">const</span> <a class="code" href="../../db/dd6/class_sk_matrix.html">SkMatrix</a>&amp; matrix);
<a name="l00919"></a>00919     <span class="keyword">const</span> <a class="code" href="../../da/dac/class_gr_effect_ref.html">GrEffectRef</a>* createUPMToPMEffect(<a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* texture,
<a name="l00920"></a>00920                                            <span class="keywordtype">bool</span> swapRAndB,
<a name="l00921"></a>00921                                            <span class="keyword">const</span> <a class="code" href="../../db/dd6/class_sk_matrix.html">SkMatrix</a>&amp; matrix);
<a name="l00922"></a>00922 
<a name="l00923"></a>00923     <span class="keyword">typedef</span> <a class="code" href="../../da/dec/class_sk_ref_cnt.html">GrRefCnt</a> <a class="code" href="../../da/dec/class_sk_ref_cnt.html">INHERITED</a>;
<a name="l00924"></a>00924 };
<a name="l00925"></a>00925 
<a name="l00930"></a><a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html">00930</a> <span class="keyword">class </span><a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html">GrAutoScratchTexture</a> : ::<a class="code" href="../../de/da3/class_gr_noncopyable.html">GrNoncopyable</a> {
<a name="l00931"></a>00931 <span class="keyword">public</span>:
<a name="l00932"></a><a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html#a824f81f3e0e46df75f4ba96772241e4c">00932</a>     <a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html#a824f81f3e0e46df75f4ba96772241e4c">GrAutoScratchTexture</a>()
<a name="l00933"></a>00933         : fContext(<a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00934"></a>00934         , fTexture(<a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00935"></a>00935     }
<a name="l00936"></a>00936 
<a name="l00937"></a><a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html#a17afa9dbe9554f5497dc88a9680dc4be">00937</a>     <a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html#a824f81f3e0e46df75f4ba96772241e4c">GrAutoScratchTexture</a>(<a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>* <a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>,
<a name="l00938"></a>00938                          <span class="keyword">const</span> <a class="code" href="../../d5/d17/struct_gr_texture_desc.html">GrTextureDesc</a>&amp; <a class="code" href="../../d8/dd0/extension__set_8h.html#a348efe6592512f937a672d5f5ec7d76a">desc</a>,
<a name="l00939"></a>00939                          <a class="code" href="../../da/d02/class_gr_context.html#ade660a0c6a7d216ea222b545131b467a">GrContext::ScratchTexMatch</a> <a class="code" href="../../d2/d7d/jsapi_8h.html#a99e36b20cb6cf83fe7c1f4bff6902ab6">match</a> = <a class="code" href="../../da/d02/class_gr_context.html#ade660a0c6a7d216ea222b545131b467aad009c3de90411b3347f1dd8e5c6878cf">GrContext::kApprox_ScratchTexMatch</a>)
<a name="l00940"></a>00940       : fContext(<a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00941"></a>00941       , fTexture(<a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00942"></a>00942       this-&gt;<span class="keyword">set</span>(<a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>, <a class="code" href="../../d8/dd0/extension__set_8h.html#a348efe6592512f937a672d5f5ec7d76a">desc</a>, <a class="code" href="../../d2/d7d/jsapi_8h.html#a99e36b20cb6cf83fe7c1f4bff6902ab6">match</a>);
<a name="l00943"></a>00943     }
<a name="l00944"></a>00944 
<a name="l00945"></a><a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html#a28cf65c22f03be45f91603fd559bdf1b">00945</a>     <a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html#a28cf65c22f03be45f91603fd559bdf1b">~GrAutoScratchTexture</a>() {
<a name="l00946"></a>00946         this-&gt;<a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html#a412ae6167b7eebe873c3ae8dfe1695b8">reset</a>();
<a name="l00947"></a>00947     }
<a name="l00948"></a>00948 
<a name="l00949"></a><a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html#a412ae6167b7eebe873c3ae8dfe1695b8">00949</a>     <span class="keywordtype">void</span> <a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html#a412ae6167b7eebe873c3ae8dfe1695b8">reset</a>() {
<a name="l00950"></a>00950         <span class="keywordflow">if</span> (<a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != fContext &amp;&amp; <a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != fTexture) {
<a name="l00951"></a>00951             fContext-&gt;<a class="code" href="../../da/d02/class_gr_context.html#a378029cdbb7ef2b10c659ac2a9fe65fa">unlockScratchTexture</a>(fTexture);
<a name="l00952"></a>00952             fTexture-&gt;<a class="code" href="../../da/dec/class_sk_ref_cnt.html#a38af7c1c38a521154b2f7e0a73e69bc4">unref</a>();
<a name="l00953"></a>00953             fTexture = <a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00954"></a>00954         }
<a name="l00955"></a>00955     }
<a name="l00956"></a>00956 
<a name="l00957"></a>00957     <span class="comment">/*</span>
<a name="l00958"></a>00958 <span class="comment">     * When detaching a texture we do not unlock it in the texture cache but</span>
<a name="l00959"></a>00959 <span class="comment">     * we do set the returnToCache flag. In this way the texture remains</span>
<a name="l00960"></a>00960 <span class="comment">     * &quot;locked&quot; in the texture cache until it is freed and recycled in</span>
<a name="l00961"></a>00961 <span class="comment">     * GrTexture::internal_dispose. In reality, the texture has been removed</span>
<a name="l00962"></a>00962 <span class="comment">     * from the cache (because this is in AutoScratchTexture) and by not</span>
<a name="l00963"></a>00963 <span class="comment">     * calling unlockScratchTexture we simply don&#39;t re-add it. It will be</span>
<a name="l00964"></a>00964 <span class="comment">     * reattached in GrTexture::internal_dispose.</span>
<a name="l00965"></a>00965 <span class="comment">     *</span>
<a name="l00966"></a>00966 <span class="comment">     * Note that the caller is assumed to accept and manage the ref to the</span>
<a name="l00967"></a>00967 <span class="comment">     * returned texture.</span>
<a name="l00968"></a>00968 <span class="comment">     */</span>
<a name="l00969"></a><a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html#a1ad32392a36b22e32481c1ff70d2a921">00969</a>     <a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* <a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html#a1ad32392a36b22e32481c1ff70d2a921">detach</a>() {
<a name="l00970"></a>00970         <a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* <a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html#a0b519fe41c3f574daea60322ab44a87a">texture</a> = fTexture;
<a name="l00971"></a>00971         fTexture = <a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00972"></a>00972 
<a name="l00973"></a>00973         <span class="comment">// This GrAutoScratchTexture has a ref from lockAndRefScratchTexture, which we give up now.</span>
<a name="l00974"></a>00974         <span class="comment">// The cache also has a ref which we are lending to the caller of detach(). When the caller</span>
<a name="l00975"></a>00975         <span class="comment">// lets go of the ref and the ref count goes to 0 internal_dispose will see this flag is</span>
<a name="l00976"></a>00976         <span class="comment">// set and re-ref the texture, thereby restoring the cache&#39;s ref.</span>
<a name="l00977"></a>00977         <a class="code" href="../../dd/d22/_gr_config_8h.html#a78b10761a5e21dacac1842ed99c14aed">GrAssert</a>(texture-&gt;<a class="code" href="../../da/dec/class_sk_ref_cnt.html#a404b73a3ab2521f020f0ff1db9c1b6b2">getRefCnt</a>() &gt; 1);
<a name="l00978"></a>00978         texture-&gt;<a class="code" href="../../d6/de9/class_gr_texture.html#a10fa82dce3f791261636d12603082fac">setFlag</a>((<a class="code" href="../../d8/de6/_gr_types_8h.html#a50eca13863e1dd8d76fc33fab066fa27">GrTextureFlags</a>) <a class="code" href="../../d6/de9/class_gr_texture.html#a197c084d39ec16ac225a3a1989dbf59da3d8f35c5a9253cadcceda1b34abc8e74">GrTexture::kReturnToCache_FlagBit</a>);
<a name="l00979"></a>00979         texture-&gt;<a class="code" href="../../da/dec/class_sk_ref_cnt.html#a38af7c1c38a521154b2f7e0a73e69bc4">unref</a>();
<a name="l00980"></a>00980         <a class="code" href="../../dd/d22/_gr_config_8h.html#a78b10761a5e21dacac1842ed99c14aed">GrAssert</a>(<a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != texture-&gt;<a class="code" href="../../d0/d18/class_gr_resource.html#aa1b0397f3570ff87c9a7b43e0b66dab9">getCacheEntry</a>());
<a name="l00981"></a>00981 
<a name="l00982"></a>00982         <span class="keywordflow">return</span> <a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html#a0b519fe41c3f574daea60322ab44a87a">texture</a>;
<a name="l00983"></a>00983     }
<a name="l00984"></a>00984 
<a name="l00985"></a><a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html#a498325d8a611d8b487d19a9a2fd3ae11">00985</a>     <a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* <span class="keyword">set</span>(<a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>* <a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>,
<a name="l00986"></a>00986                    <span class="keyword">const</span> <a class="code" href="../../d5/d17/struct_gr_texture_desc.html">GrTextureDesc</a>&amp; <a class="code" href="../../d8/dd0/extension__set_8h.html#a348efe6592512f937a672d5f5ec7d76a">desc</a>,
<a name="l00987"></a>00987                    <a class="code" href="../../da/d02/class_gr_context.html#ade660a0c6a7d216ea222b545131b467a">GrContext::ScratchTexMatch</a> <a class="code" href="../../d2/d7d/jsapi_8h.html#a99e36b20cb6cf83fe7c1f4bff6902ab6">match</a> = <a class="code" href="../../da/d02/class_gr_context.html#ade660a0c6a7d216ea222b545131b467aad009c3de90411b3347f1dd8e5c6878cf">GrContext::kApprox_ScratchTexMatch</a>) {
<a name="l00988"></a>00988         this-&gt;<a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html#a412ae6167b7eebe873c3ae8dfe1695b8">reset</a>();
<a name="l00989"></a>00989 
<a name="l00990"></a>00990         fContext = <a class="code" href="../../d9/d04/expat_8h.html#afe0934df1732463fe5378d8c8724edc6">context</a>;
<a name="l00991"></a>00991         <span class="keywordflow">if</span> (<a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != fContext) {
<a name="l00992"></a>00992             fTexture = fContext-&gt;<a class="code" href="../../da/d02/class_gr_context.html#a9651994561e8b0cf3d524e2d9cdc702b">lockAndRefScratchTexture</a>(<a class="code" href="../../d8/dd0/extension__set_8h.html#a348efe6592512f937a672d5f5ec7d76a">desc</a>, <a class="code" href="../../d2/d7d/jsapi_8h.html#a99e36b20cb6cf83fe7c1f4bff6902ab6">match</a>);
<a name="l00993"></a>00993             <span class="keywordflow">if</span> (<a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> == fTexture) {
<a name="l00994"></a>00994                 fContext = <a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00995"></a>00995             }
<a name="l00996"></a>00996             <span class="keywordflow">return</span> fTexture;
<a name="l00997"></a>00997         } <span class="keywordflow">else</span> {
<a name="l00998"></a>00998             <span class="keywordflow">return</span> <a class="code" href="../../db/df5/ncompat_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00999"></a>00999         }
<a name="l01000"></a>01000     }
<a name="l01001"></a>01001 
<a name="l01002"></a><a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html#a0b519fe41c3f574daea60322ab44a87a">01002</a>     <a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>* <a class="code" href="../../de/d55/class_gr_auto_scratch_texture.html#a0b519fe41c3f574daea60322ab44a87a">texture</a>() { <span class="keywordflow">return</span> fTexture; }
<a name="l01003"></a>01003 
<a name="l01004"></a>01004 <span class="keyword">private</span>:
<a name="l01005"></a>01005     <a class="code" href="../../da/d02/class_gr_context.html">GrContext</a>*                    fContext;
<a name="l01006"></a>01006     <a class="code" href="../../d6/de9/class_gr_texture.html">GrTexture</a>*                    fTexture;
<a name="l01007"></a>01007 };
<a name="l01008"></a>01008 
<a name="l01009"></a>01009 <span class="preprocessor">#endif</span>
</pre></div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全て</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>データ構造</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>ネームスペース</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>ファイル</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>関数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>変数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>型定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>列挙型</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>列挙型の値</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>フレンド</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>マクロ定義</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../df/d56/_gr_context_8h.html">GrContext.h</a>      </li>

    <li class="footer">FxOS Code Readingに対してSat Oct 19 2013 00:52:07に生成されました。
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
