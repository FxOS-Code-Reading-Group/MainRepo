<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>FxOS Code Reading: b2g-info.cpp</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">FxOS Code Reading
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- 作成： Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'検索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>メインページ</span></a></li>
      <li><a href="../../namespaces.html"><span>パッケージ</span></a></li>
      <li><a href="../../annotated.html"><span>データ構造</span></a></li>
      <li class="current"><a href="../../files.html"><span>ファイル</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>ファイル一覧</span></a></li>
      <li><a href="../../globals.html"><span>グローバル</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('d0/d91/b2g-info_8cpp.html','../../');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">マクロ定義</a> &#124;
<a href="#func-members">関数</a>  </div>
  <div class="headertitle">
<div class="title">b2g-info.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../dd/d98/table_8h_source.html">table.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../da/d42/process_8h_source.html">process.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d5/d32/processlist_8h_source.html">processlist.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">utils.h</a>&quot;</code><br/>
<code>#include &lt;assert.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;fcntl.h&gt;</code><br/>
<code>#include &lt;string&gt;</code><br/>
<code>#include &lt;sstream&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
b2g-info.cppのインクルード依存関係図</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dd/d80/b2g-info_8cpp__incl.svg" width="100%" height="244"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</div>
<p><a href="../../d0/d91/b2g-info_8cpp_source.html">ソースコードを見る。</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
マクロ定義</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d91/b2g-info_8cpp.html#a6cd11aa7a5c243af09404c856769743b">LMK_DIR</a>&#160;&#160;&#160;&quot;/sys/module/lowmemorykiller/parameters/&quot;</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
関数</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d91/b2g-info_8cpp.html#aa3b05aa6e9f0537dd025e601f102491d">print_b2g_pids</a> (bool main_process_only, bool child_processes_only)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d91/b2g-info_8cpp.html#a4955454c83f8a998c0d85dee9ed28883">read_whole_file</a> (const char *filename)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d91/b2g-info_8cpp.html#a21a526f63654418c49b074caf7feb59d">print_system_meminfo</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d91/b2g-info_8cpp.html#ad94350f1cec145d9fd41ae522c6c45ed">print_lmk_params</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d91/b2g-info_8cpp.html#ac34fe09044970be2eb915ce7cf2398a7">b2g_ps_add_table_headers</a> (<a class="el" href="../../d2/d8f/class_table.html">Table</a> &amp;t, bool show_threads)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d91/b2g-info_8cpp.html#a72987403ed81c976534491e6e4cb7533">print_b2g_info</a> (bool show_threads)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d91/b2g-info_8cpp.html#a2ef30c42cbc289d899a8be5d2d8f77d0">usage</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d91/b2g-info_8cpp.html#a217dbf8b442f20279ea00b898af96f52">main</a> (int argc, const char **argv)</td></tr>
</table>
<hr/><h2>マクロ定義</h2>
<a class="anchor" id="a6cd11aa7a5c243af09404c856769743b"></a><!-- doxytag: member="b2g&#45;info.cpp::LMK_DIR" ref="a6cd11aa7a5c243af09404c856769743b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="../../d0/d91/b2g-info_8cpp.html#a6cd11aa7a5c243af09404c856769743b">LMK_DIR</a>&#160;&#160;&#160;&quot;/sys/module/lowmemorykiller/parameters/&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>参照元 <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00185">print_lmk_params()</a>.</p>

</div>
</div>
<hr/><h2>関数</h2>
<a class="anchor" id="ac34fe09044970be2eb915ce7cf2398a7"></a><!-- doxytag: member="b2g&#45;info.cpp::b2g_ps_add_table_headers" ref="ac34fe09044970be2eb915ce7cf2398a7" args="(Table &amp;t, bool show_threads)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d0/d91/b2g-info_8cpp.html#ac34fe09044970be2eb915ce7cf2398a7">b2g_ps_add_table_headers</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d8f/class_table.html">Table</a> &amp;&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>show_threads</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html">b2g-info.cpp</a> の <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00239">239</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d6/dd0/table_8cpp_source.html#l00048">Table::add()</a>, <a class="el" href="../../dd/d98/table_8h_source.html#l00064">Table::ALIGN_LEFT</a>, と <a class="el" href="../../d6/dd0/table_8cpp_source.html#l00033">Table::start_row()</a>.</p>

<p>参照元 <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00254">print_b2g_info()</a>.</p>
<div class="fragment"><pre class="fragment">{
  t.<a class="code" href="../../d2/d8f/class_table.html#aaa79e859aad704c4650914889b9e5598">start_row</a>();
  t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;NAME&quot;</span>);
  t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(show_threads ? <span class="stringliteral">&quot;TID&quot;</span> : <span class="stringliteral">&quot;PID&quot;</span>);
  t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;NICE&quot;</span>);
  t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;USS&quot;</span>);
  t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;PSS&quot;</span>);
  t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;RSS&quot;</span>);
  t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;VSIZE&quot;</span>);
  t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;OOM_ADJ&quot;</span>);
  t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;USER&quot;</span>, <a class="code" href="../../d2/d8f/class_table.html#a9e5e89437ce6a08ff3a2e5e27cf2cb0daec5ccd6e567534ecd974b2cda10b4bfb">Table::ALIGN_LEFT</a>);
}
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/d91/b2g-info_8cpp_ac34fe09044970be2eb915ce7cf2398a7_cgraph.svg" width="550" height="94"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/d91/b2g-info_8cpp_ac34fe09044970be2eb915ce7cf2398a7_icgraph.svg" width="443" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a217dbf8b442f20279ea00b898af96f52"></a><!-- doxytag: member="b2g&#45;info.cpp::main" ref="a217dbf8b442f20279ea00b898af96f52" args="(int argc, const char **argv)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d8/d83/killer_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html">b2g-info.cpp</a> の <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00331">331</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00254">print_b2g_info()</a>, <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00055">print_b2g_pids()</a>, と <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00317">usage()</a>.</p>
<div class="fragment"><pre class="fragment">{
  cmd_name = argv[0];

  <span class="comment">// We could use an option-parsing library, but this is easier for now.</span>
  <span class="keywordflow">if</span> (argc &gt; 2) {
    fputs(<span class="stringliteral">&quot;Too many arguments.\n&quot;</span>, stderr);
    <a class="code" href="../../d0/d91/b2g-info_8cpp.html#a2ef30c42cbc289d899a8be5d2d8f77d0">usage</a>();
    <span class="keywordflow">return</span> 1;
  }

  <span class="keywordtype">bool</span> threads = <span class="keyword">false</span>;
  <span class="keywordtype">bool</span> pids_only = <span class="keyword">false</span>;
  <span class="keywordtype">bool</span> main_pid_only = <span class="keyword">false</span>;
  <span class="keywordtype">bool</span> child_pids_only = <span class="keyword">false</span>;

  <span class="keywordflow">if</span> (argc &gt; 1) {
    <span class="keywordflow">if</span> (!strcmp(argv[1], <span class="stringliteral">&quot;--help&quot;</span>) || !strcmp(argv[1], <span class="stringliteral">&quot;-h&quot;</span>) || !strcmp(argv[1], <span class="stringliteral">&quot;help&quot;</span>)) {
      <a class="code" href="../../d0/d91/b2g-info_8cpp.html#a2ef30c42cbc289d899a8be5d2d8f77d0">usage</a>();
      <span class="keywordflow">return</span> 0;
    }

    <span class="keywordflow">if</span> (!(threads = !strcmp(argv[1], <span class="stringliteral">&quot;-t&quot;</span>) || !strcmp(argv[1], <span class="stringliteral">&quot;--threads&quot;</span>)) &amp;&amp;
        !(pids_only = !strcmp(argv[1], <span class="stringliteral">&quot;-p&quot;</span>) || !strcmp(argv[1], <span class="stringliteral">&quot;--pids&quot;</span>)) &amp;&amp;
        !(main_pid_only = !strcmp(argv[1], <span class="stringliteral">&quot;-m&quot;</span>) || !strcmp(argv[1], <span class="stringliteral">&quot;--main-pid&quot;</span>)) &amp;&amp;
        !(child_pids_only = !strcmp(argv[1], <span class="stringliteral">&quot;-c&quot;</span>) || !strcmp(argv[1], <span class="stringliteral">&quot;--child-pids&quot;</span>))) {

      fprintf(stderr, <span class="stringliteral">&quot;Unknown argument %s.\n&quot;</span>, argv[1]);
      <a class="code" href="../../d0/d91/b2g-info_8cpp.html#a2ef30c42cbc289d899a8be5d2d8f77d0">usage</a>();
      <span class="keywordflow">return</span> 1;
    }
  }

  <span class="keywordflow">if</span> (pids_only || main_pid_only || child_pids_only) {
    <a class="code" href="../../d0/d91/b2g-info_8cpp.html#aa3b05aa6e9f0537dd025e601f102491d">print_b2g_pids</a>(main_pid_only, child_pids_only);
    <span class="keywordflow">return</span> 0;
  }

  <span class="keywordflow">return</span> <a class="code" href="../../d0/d91/b2g-info_8cpp.html#a72987403ed81c976534491e6e4cb7533">print_b2g_info</a>(threads);
}
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/d91/b2g-info_8cpp_a217dbf8b442f20279ea00b898af96f52_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a72987403ed81c976534491e6e4cb7533"></a><!-- doxytag: member="b2g&#45;info.cpp::print_b2g_info" ref="a72987403ed81c976534491e6e4cb7533" args="(bool show_threads)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../d0/d91/b2g-info_8cpp.html#a72987403ed81c976534491e6e4cb7533">print_b2g_info</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>show_threads</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html">b2g-info.cpp</a> の <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00254">254</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d6/dd0/table_8cpp_source.html#l00048">Table::add()</a>, <a class="el" href="../../d6/dd0/table_8cpp_source.html#l00098">Table::add_delimiter()</a>, <a class="el" href="../../d6/dd0/table_8cpp_source.html#l00066">Table::add_fmt()</a>, <a class="el" href="../../dd/d98/table_8h_source.html#l00064">Table::ALIGN_LEFT</a>, <a class="el" href="../../d1/d7b/processlist_8cpp_source.html#l00126">ProcessList::b2g_processes()</a>, <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00239">b2g_ps_add_table_headers()</a>, <a class="el" href="../../d6/dd0/table_8cpp_source.html#l00039">Table::multi_col_header()</a>, <a class="el" href="../../d0/d4c/process_8cpp_source.html#l00062">Task::name()</a>, <a class="el" href="../../d0/d4c/process_8cpp_source.html#l00069">Task::nice()</a>, <a class="el" href="../../d0/d4c/process_8cpp_source.html#l00273">Process::oom_adj()</a>, <a class="el" href="../../d0/d4c/process_8cpp_source.html#l00177">Process::pid()</a>, <a class="el" href="../../d6/dd0/table_8cpp_source.html#l00104">Table::print()</a>, <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00185">print_lmk_params()</a>, <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00104">print_system_meminfo()</a>, <a class="el" href="../../da/d42/process_8h_source.html#l00112">Process::pss_mb()</a>, <a class="el" href="../../da/d42/process_8h_source.html#l00109">Process::rss_mb()</a>, <a class="el" href="../../d1/d7b/processlist_8cpp_source.html#l00030">ProcessList::singleton()</a>, <a class="el" href="../../d6/dd0/table_8cpp_source.html#l00033">Table::start_row()</a>, <a class="el" href="../../d0/d4c/process_8cpp_source.html#l00183">Process::threads()</a>, <a class="el" href="../../d0/d4c/process_8cpp_source.html#l00159">Thread::tid()</a>, <a class="el" href="../../d0/d4c/process_8cpp_source.html#l00354">Process::user()</a>, <a class="el" href="../../da/d42/process_8h_source.html#l00115">Process::uss_mb()</a>, と <a class="el" href="../../da/d42/process_8h_source.html#l00106">Process::vsize_mb()</a>.</p>

<p>参照元 <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00331">main()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">// TODO: switch between kb and mb for RSS etc.</span>
  <span class="comment">// TODO: Sort processes?</span>

  <a class="code" href="../../d2/d8f/class_table.html">Table</a> t;

  <span class="comment">// This sits atop USS/PSS/RSS/VSIZE.</span>
  t.<a class="code" href="../../d2/d8f/class_table.html#ac0fe0911280d47b403b52c6082938a52">multi_col_header</a>(<span class="stringliteral">&quot;megabytes&quot;</span>, 3, 7);

  <span class="keywordflow">if</span> (!show_threads) {
    <a class="code" href="../../d0/d91/b2g-info_8cpp.html#ac34fe09044970be2eb915ce7cf2398a7">b2g_ps_add_table_headers</a>(t, <span class="comment">/* show_threads */</span> <span class="keyword">false</span>);
  }

  <span class="keywordflow">for</span> (vector&lt;Process*&gt;::const_iterator it =
         <a class="code" href="../../de/daf/class_process_list.html#a7ec48f71aab61004f16e35e12f583f99">ProcessList::singleton</a>().b2g_processes().begin();
       it != <a class="code" href="../../de/daf/class_process_list.html#a7ec48f71aab61004f16e35e12f583f99">ProcessList::singleton</a>().<a class="code" href="../../de/daf/class_process_list.html#a50e6f4206a8d67e3639f8af25cff4395">b2g_processes</a>().end(); ++it) {

    <span class="keywordflow">if</span> (show_threads) {
      <a class="code" href="../../d0/d91/b2g-info_8cpp.html#ac34fe09044970be2eb915ce7cf2398a7">b2g_ps_add_table_headers</a>(t, <span class="comment">/* show_threads */</span> <span class="keyword">true</span>);
    }

    <a class="code" href="../../d1/d41/class_process.html">Process</a>* p = *it;
    t.<a class="code" href="../../d2/d8f/class_table.html#aaa79e859aad704c4650914889b9e5598">start_row</a>();
    t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(p-&gt;<a class="code" href="../../d7/d6d/class_task.html#a75d6a9e53bd83d443dff2b4a9d1faf7e">name</a>());
    t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(p-&gt;<a class="code" href="../../d1/d41/class_process.html#a4be0403d5862318cde4444476eac0c7b">pid</a>());
    t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(p-&gt;<a class="code" href="../../d7/d6d/class_task.html#ac7b46fd963ad1e0f7bc8c260ba31121c">nice</a>());
    t.<a class="code" href="../../d2/d8f/class_table.html#aae5a04f4d32ac6f8f293d45c97992853">add_fmt</a>(<span class="stringliteral">&quot;%0.1f&quot;</span>, p-&gt;<a class="code" href="../../d1/d41/class_process.html#affcdf07d032c70295f1f49bf3caa81d0">uss_mb</a>());
    t.<a class="code" href="../../d2/d8f/class_table.html#aae5a04f4d32ac6f8f293d45c97992853">add_fmt</a>(<span class="stringliteral">&quot;%0.1f&quot;</span>, p-&gt;<a class="code" href="../../d1/d41/class_process.html#a8d5342e6338a7baba3c991465b0fc81d">pss_mb</a>());
    t.<a class="code" href="../../d2/d8f/class_table.html#aae5a04f4d32ac6f8f293d45c97992853">add_fmt</a>(<span class="stringliteral">&quot;%0.1f&quot;</span>, p-&gt;<a class="code" href="../../d1/d41/class_process.html#a4b6fa50eea085f44801a70d77732911e">rss_mb</a>());
    t.<a class="code" href="../../d2/d8f/class_table.html#aae5a04f4d32ac6f8f293d45c97992853">add_fmt</a>(<span class="stringliteral">&quot;%0.1f&quot;</span>, p-&gt;<a class="code" href="../../d1/d41/class_process.html#a5c0a5eabbeac51b40e7d691da2e74852">vsize_mb</a>());
    t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(p-&gt;<a class="code" href="../../d1/d41/class_process.html#a564adaff3c401aa19bf673af81344b4f">oom_adj</a>());
    t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(p-&gt;<a class="code" href="../../d1/d41/class_process.html#aa223046bc6b2f974ecf5c29fcef3db5b">user</a>(), <a class="code" href="../../d2/d8f/class_table.html#a9e5e89437ce6a08ff3a2e5e27cf2cb0daec5ccd6e567534ecd974b2cda10b4bfb">Table::ALIGN_LEFT</a>);

    <span class="keywordflow">if</span> (show_threads) {
      <span class="keywordflow">for</span> (vector&lt;Thread*&gt;::const_iterator thread_it =
             p-&gt;<a class="code" href="../../d1/d41/class_process.html#add7d75128dca5994f9b93709d7273037">threads</a>().begin();
           thread_it != p-&gt;<a class="code" href="../../d1/d41/class_process.html#add7d75128dca5994f9b93709d7273037">threads</a>().end(); ++thread_it) {
        t.<a class="code" href="../../d2/d8f/class_table.html#aaa79e859aad704c4650914889b9e5598">start_row</a>();

        <a class="code" href="../../d8/d18/class_thread.html">Thread</a>* thread = *thread_it;
        t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(thread-&gt;<a class="code" href="../../d7/d6d/class_task.html#a75d6a9e53bd83d443dff2b4a9d1faf7e">name</a>());
        t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(thread-&gt;<a class="code" href="../../d8/d18/class_thread.html#a534615d23524caac8270febc60d297ed">tid</a>());
        t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(thread-&gt;<a class="code" href="../../d7/d6d/class_task.html#ac7b46fd963ad1e0f7bc8c260ba31121c">nice</a>());
      }

      <span class="keywordflow">if</span> (it + 1 != <a class="code" href="../../de/daf/class_process_list.html#a7ec48f71aab61004f16e35e12f583f99">ProcessList::singleton</a>().<a class="code" href="../../de/daf/class_process_list.html#a50e6f4206a8d67e3639f8af25cff4395">b2g_processes</a>().end()) {
        t.<a class="code" href="../../d2/d8f/class_table.html#aaeec241cb19d85082765f6c577724854">add_delimiter</a>();
      }
    }
  }

  t.<a class="code" href="../../d2/d8f/class_table.html#a0de5a9ca880b662ec7d608de686e309a">print</a>();
  putchar(<span class="charliteral">&#39;\n&#39;</span>);

  <a class="code" href="../../d0/d91/b2g-info_8cpp.html#a21a526f63654418c49b074caf7feb59d">print_system_meminfo</a>();
  putchar(<span class="charliteral">&#39;\n&#39;</span>);

  <a class="code" href="../../d0/d91/b2g-info_8cpp.html#ad94350f1cec145d9fd41ae522c6c45ed">print_lmk_params</a>();

  <span class="keywordflow">return</span> 0;
}
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/d91/b2g-info_8cpp_a72987403ed81c976534491e6e4cb7533_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/d91/b2g-info_8cpp_a72987403ed81c976534491e6e4cb7533_icgraph.svg" width="214" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa3b05aa6e9f0537dd025e601f102491d"></a><!-- doxytag: member="b2g&#45;info.cpp::print_b2g_pids" ref="aa3b05aa6e9f0537dd025e601f102491d" args="(bool main_process_only, bool child_processes_only)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d0/d91/b2g-info_8cpp.html#aa3b05aa6e9f0537dd025e601f102491d">print_b2g_pids</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>main_process_only</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>child_processes_only</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Prints the pids of B2G processes. </p>

<p> <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html">b2g-info.cpp</a> の <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00055">55</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d1/d7b/processlist_8cpp_source.html#l00100">ProcessList::child_processes()</a>, と <a class="el" href="../../d1/d7b/processlist_8cpp_source.html#l00030">ProcessList::singleton()</a>.</p>

<p>参照元 <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00331">main()</a>.</p>
<div class="fragment"><pre class="fragment">{
  assert(!(main_process_only &amp;&amp; child_processes_only));

  <span class="keywordflow">if</span> (!child_processes_only) {
    printf(<span class="stringliteral">&quot;%d &quot;</span>, <a class="code" href="../../de/daf/class_process_list.html#a7ec48f71aab61004f16e35e12f583f99">ProcessList::singleton</a>().main_process()-&gt;pid());
  }

  <span class="keywordflow">if</span> (!main_process_only) {
    <span class="keywordflow">for</span> (vector&lt;Process*&gt;::const_iterator it =
           <a class="code" href="../../de/daf/class_process_list.html#a7ec48f71aab61004f16e35e12f583f99">ProcessList::singleton</a>().child_processes().begin();
         it != <a class="code" href="../../de/daf/class_process_list.html#a7ec48f71aab61004f16e35e12f583f99">ProcessList::singleton</a>().<a class="code" href="../../de/daf/class_process_list.html#a16274094db38de453fa0d79f9c837704">child_processes</a>().end(); ++it) {
      printf(<span class="stringliteral">&quot;%d &quot;</span>, (*it)-&gt;pid());
    }
  }

  putchar(<span class="charliteral">&#39;\n&#39;</span>);
}
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/d91/b2g-info_8cpp_aa3b05aa6e9f0537dd025e601f102491d_cgraph.svg" width="100%" height="130"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/d91/b2g-info_8cpp_aa3b05aa6e9f0537dd025e601f102491d_icgraph.svg" width="216" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad94350f1cec145d9fd41ae522c6c45ed"></a><!-- doxytag: member="b2g&#45;info.cpp::print_lmk_params" ref="ad94350f1cec145d9fd41ae522c6c45ed" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d0/d91/b2g-info_8cpp.html#ad94350f1cec145d9fd41ae522c6c45ed">print_lmk_params</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html">b2g-info.cpp</a> の <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00185">185</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d6/dd0/table_8cpp_source.html#l00048">Table::add()</a>, <a class="el" href="../../d6/dd0/table_8cpp_source.html#l00066">Table::add_fmt()</a>, <a class="el" href="../../dd/d98/table_8h_source.html#l00064">Table::ALIGN_LEFT</a>, <a class="el" href="../../d0/d91/b2g-info_8cpp.html#a6cd11aa7a5c243af09404c856769743b">LMK_DIR</a>, <a class="el" href="../../de/d06/utils_8cpp_source.html#l00040">pages_to_kb()</a>, <a class="el" href="../../d6/dd0/table_8cpp_source.html#l00118">Table::print_with_indent()</a>, <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00075">read_whole_file()</a>, <a class="el" href="../../d6/dd0/table_8cpp_source.html#l00033">Table::start_row()</a>, と <a class="el" href="../../de/d06/utils_8cpp_source.html#l00089">str_to_int()</a>.</p>

<p>参照元 <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00254">print_b2g_info()</a>.</p>
<div class="fragment"><pre class="fragment">{
<span class="preprocessor">#define LMK_DIR &quot;/sys/module/lowmemorykiller/parameters/&quot;</span>
<span class="preprocessor"></span>
  puts(<span class="stringliteral">&quot;Low-memory killer parameters:\n&quot;</span>);

  <span class="keywordtype">int</span> notify_pages = <a class="code" href="../../de/d06/utils_8cpp.html#a5394673b22982035151b16fbf475e422">str_to_int</a>(<a class="code" href="../../d0/d91/b2g-info_8cpp.html#a4955454c83f8a998c0d85dee9ed28883">read_whole_file</a>(LMK_DIR <span class="stringliteral">&quot;notify_trigger&quot;</span>), -1);
  printf(<span class="stringliteral">&quot;  notify_trigger %d KB\n&quot;</span>, <a class="code" href="../../de/d06/utils_8cpp.html#a8dfb30005f01c1cabee86220ab29945d">pages_to_kb</a>(notify_pages));
  putchar(<span class="charliteral">&#39;\n&#39;</span>);

  vector&lt;int&gt; oom_adjs;
  {
    stringstream ss(<a class="code" href="../../d0/d91/b2g-info_8cpp.html#a4955454c83f8a998c0d85dee9ed28883">read_whole_file</a>(LMK_DIR <span class="stringliteral">&quot;adj&quot;</span>));
    <span class="keywordtype">string</span> item;
    <span class="keywordflow">while</span> (getline(ss, item, <span class="charliteral">&#39;,&#39;</span>)) {
      oom_adjs.push_back(<a class="code" href="../../de/d06/utils_8cpp.html#a5394673b22982035151b16fbf475e422">str_to_int</a>(item, -1));
    }
  }

  vector&lt;int&gt; minfrees;
  {
    stringstream ss(<a class="code" href="../../d0/d91/b2g-info_8cpp.html#a4955454c83f8a998c0d85dee9ed28883">read_whole_file</a>(LMK_DIR <span class="stringliteral">&quot;minfree&quot;</span>));
    <span class="keywordtype">string</span> item;
    <span class="keywordflow">while</span> (getline(ss, item, <span class="charliteral">&#39;,&#39;</span>)) {
      minfrees.push_back(<a class="code" href="../../de/d06/utils_8cpp.html#a8dfb30005f01c1cabee86220ab29945d">pages_to_kb</a>(<a class="code" href="../../de/d06/utils_8cpp.html#a5394673b22982035151b16fbf475e422">str_to_int</a>(item, -1)));
    }
  }

  <a class="code" href="../../d2/d8f/class_table.html">Table</a> t;
  t.<a class="code" href="../../d2/d8f/class_table.html#aaa79e859aad704c4650914889b9e5598">start_row</a>();
  t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;oom_adj&quot;</span>);
  t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;min_free&quot;</span>, <a class="code" href="../../d2/d8f/class_table.html#a9e5e89437ce6a08ff3a2e5e27cf2cb0daec5ccd6e567534ecd974b2cda10b4bfb">Table::ALIGN_LEFT</a>);

  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; max(oom_adjs.size(), minfrees.size()); i++) {
    t.<a class="code" href="../../d2/d8f/class_table.html#aaa79e859aad704c4650914889b9e5598">start_row</a>();
    <span class="keywordflow">if</span> (i &lt; oom_adjs.size()) {
      t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(oom_adjs[i]);
    } <span class="keywordflow">else</span> {
      t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;&quot;</span>);
    }

    <span class="keywordflow">if</span> (i &lt; minfrees.size()) {
      t.<a class="code" href="../../d2/d8f/class_table.html#aae5a04f4d32ac6f8f293d45c97992853">add_fmt</a>(<span class="stringliteral">&quot;%d KB&quot;</span>, minfrees[i]);
    } <span class="keywordflow">else</span> {
      t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;&quot;</span>);
    }
  }

  t.<a class="code" href="../../d2/d8f/class_table.html#abbad1eb4d9f6c06b5fa6c0cea209ab6a">print_with_indent</a>(2);

<span class="preprocessor">#undef LMK_DIR</span>
<span class="preprocessor"></span>}
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/d91/b2g-info_8cpp_ad94350f1cec145d9fd41ae522c6c45ed_cgraph.svg" width="536" height="360"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/d91/b2g-info_8cpp_ad94350f1cec145d9fd41ae522c6c45ed_icgraph.svg" width="387" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a21a526f63654418c49b074caf7feb59d"></a><!-- doxytag: member="b2g&#45;info.cpp::print_system_meminfo" ref="a21a526f63654418c49b074caf7feb59d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d0/d91/b2g-info_8cpp.html#a21a526f63654418c49b074caf7feb59d">print_system_meminfo</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html">b2g-info.cpp</a> の <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00104">104</a> 行で定義されています。</p>

<p>参照先 <a class="el" href="../../d6/dd0/table_8cpp_source.html#l00048">Table::add()</a>, <a class="el" href="../../d6/dd0/table_8cpp_source.html#l00066">Table::add_fmt()</a>, <a class="el" href="../../d1/d7b/processlist_8cpp_source.html#l00126">ProcessList::b2g_processes()</a>, <a class="el" href="../../de/d06/utils_8cpp_source.html#l00054">kb_to_mb()</a>, <a class="el" href="../../d6/dd0/table_8cpp_source.html#l00118">Table::print_with_indent()</a>, <a class="el" href="../../d1/d7b/processlist_8cpp_source.html#l00030">ProcessList::singleton()</a>, と <a class="el" href="../../d6/dd0/table_8cpp_source.html#l00033">Table::start_row()</a>.</p>

<p>参照元 <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00254">print_b2g_info()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="comment">// We can&#39;t use sysinfo() here because iit doesn&#39;t tell us how much cached</span>
  <span class="comment">// memory we&#39;re using.  (On B2G, this is often upwards of 30mb.)</span>
  <span class="comment">//</span>
  <span class="comment">// Instead, we have to parse /proc/meminfo.</span>

  FILE* meminfo = fopen(<span class="stringliteral">&quot;/proc/meminfo&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>);
  <span class="keywordflow">if</span> (!meminfo) {
    perror(<span class="stringliteral">&quot;Couldn&#39;t open /proc/meminfo&quot;</span>);
    <span class="keywordflow">return</span>;
  }

  <span class="comment">// These are all in kb.</span>
  <span class="keywordtype">int</span> total = -1;
  <span class="keywordtype">int</span> free = -1;
  <span class="keywordtype">int</span> buffers = -1;
  <span class="keywordtype">int</span> cached = -1;

  <span class="keywordtype">char</span> line[256];
  <span class="keywordflow">while</span>(fgets(line, <span class="keyword">sizeof</span>(line), meminfo)) {
    <span class="keywordflow">if</span> (sscanf(line, <span class="stringliteral">&quot;MemTotal: %d kB&quot;</span>, &amp;total) == 0 &amp;&amp;
        sscanf(line, <span class="stringliteral">&quot;MemFree: %d kB&quot;</span>, &amp;free) == 0 &amp;&amp;
        sscanf(line, <span class="stringliteral">&quot;Buffers: %d kB&quot;</span>, &amp;buffers) == 0 &amp;&amp;
        sscanf(line, <span class="stringliteral">&quot;Cached: %d kB&quot;</span>, &amp;cached)) {
      <span class="comment">// These four values should appear first in meminfo, so if this line</span>
      <span class="comment">// doesn&#39;t match any of them, we&#39;re done parsing.</span>
      <span class="keywordflow">break</span>;
    }
  }

  fclose(meminfo);

  <span class="keywordflow">if</span> (total == -1 || free == -1 || buffers == -1 || cached == -1) {
    fprintf(stderr, <span class="stringliteral">&quot;Unable to parse /proc/meminfo.\n&quot;</span>);
    <span class="keywordflow">return</span>;
  }

  <span class="keywordtype">int</span> actually_used = total - free - buffers - cached;

  puts(<span class="stringliteral">&quot;System memory info:\n&quot;</span>);

  <a class="code" href="../../d2/d8f/class_table.html">Table</a> t;

  t.<a class="code" href="../../d2/d8f/class_table.html#aaa79e859aad704c4650914889b9e5598">start_row</a>();
  t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;Total&quot;</span>);
  t.<a class="code" href="../../d2/d8f/class_table.html#aae5a04f4d32ac6f8f293d45c97992853">add_fmt</a>(<span class="stringliteral">&quot;%0.1f MB&quot;</span>, <a class="code" href="../../de/d06/utils_8cpp.html#abc844f60102de1fc70d50005ffb97735">kb_to_mb</a>(total));

  t.<a class="code" href="../../d2/d8f/class_table.html#aaa79e859aad704c4650914889b9e5598">start_row</a>();
  t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;Used - cache&quot;</span>);
  t.<a class="code" href="../../d2/d8f/class_table.html#aae5a04f4d32ac6f8f293d45c97992853">add_fmt</a>(<span class="stringliteral">&quot;%0.1f MB&quot;</span>, <a class="code" href="../../de/d06/utils_8cpp.html#abc844f60102de1fc70d50005ffb97735">kb_to_mb</a>(total - free - buffers - cached));

  t.<a class="code" href="../../d2/d8f/class_table.html#aaa79e859aad704c4650914889b9e5598">start_row</a>();
  t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;B2G procs (PSS)&quot;</span>);

  <span class="keywordtype">int</span> b2g_mem_kb = 0;
  <span class="keywordflow">for</span> (vector&lt;Process*&gt;::const_iterator it = <a class="code" href="../../de/daf/class_process_list.html#a7ec48f71aab61004f16e35e12f583f99">ProcessList::singleton</a>().b2g_processes().begin();
       it != <a class="code" href="../../de/daf/class_process_list.html#a7ec48f71aab61004f16e35e12f583f99">ProcessList::singleton</a>().<a class="code" href="../../de/daf/class_process_list.html#a50e6f4206a8d67e3639f8af25cff4395">b2g_processes</a>().end(); ++it) {
    b2g_mem_kb += (*it)-&gt;pss_kb();
  }
  t.<a class="code" href="../../d2/d8f/class_table.html#aae5a04f4d32ac6f8f293d45c97992853">add_fmt</a>(<span class="stringliteral">&quot;%0.1f MB&quot;</span>, b2g_mem_kb / 1024.0);

  t.<a class="code" href="../../d2/d8f/class_table.html#aaa79e859aad704c4650914889b9e5598">start_row</a>();
  t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;Non-B2G procs&quot;</span>);
  t.<a class="code" href="../../d2/d8f/class_table.html#aae5a04f4d32ac6f8f293d45c97992853">add_fmt</a>(<span class="stringliteral">&quot;%0.1f MB&quot;</span>, <a class="code" href="../../de/d06/utils_8cpp.html#abc844f60102de1fc70d50005ffb97735">kb_to_mb</a>(total - free - buffers - cached - b2g_mem_kb));

  t.<a class="code" href="../../d2/d8f/class_table.html#aaa79e859aad704c4650914889b9e5598">start_row</a>();
  t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;Free + cache&quot;</span>);
  t.<a class="code" href="../../d2/d8f/class_table.html#aae5a04f4d32ac6f8f293d45c97992853">add_fmt</a>(<span class="stringliteral">&quot;%0.1f MB&quot;</span>, <a class="code" href="../../de/d06/utils_8cpp.html#abc844f60102de1fc70d50005ffb97735">kb_to_mb</a>(free + buffers + cached));

  t.<a class="code" href="../../d2/d8f/class_table.html#aaa79e859aad704c4650914889b9e5598">start_row</a>();
  t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;Free&quot;</span>);
  t.<a class="code" href="../../d2/d8f/class_table.html#aae5a04f4d32ac6f8f293d45c97992853">add_fmt</a>(<span class="stringliteral">&quot;%0.1f MB&quot;</span>, <a class="code" href="../../de/d06/utils_8cpp.html#abc844f60102de1fc70d50005ffb97735">kb_to_mb</a>(free));

  t.<a class="code" href="../../d2/d8f/class_table.html#aaa79e859aad704c4650914889b9e5598">start_row</a>();
  t.<a class="code" href="../../d2/d8f/class_table.html#ae9bd2e6532ab16a8f3f2a4a73786160b">add</a>(<span class="stringliteral">&quot;Cache&quot;</span>);
  t.<a class="code" href="../../d2/d8f/class_table.html#aae5a04f4d32ac6f8f293d45c97992853">add_fmt</a>(<span class="stringliteral">&quot;%0.1f MB&quot;</span>, <a class="code" href="../../de/d06/utils_8cpp.html#abc844f60102de1fc70d50005ffb97735">kb_to_mb</a>(buffers + cached));

  t.<a class="code" href="../../d2/d8f/class_table.html#abbad1eb4d9f6c06b5fa6c0cea209ab6a">print_with_indent</a>(2);
}
</pre></div>
<p><div class="dynheader">
関数の呼び出しグラフ:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/d91/b2g-info_8cpp_a21a526f63654418c49b074caf7feb59d_cgraph.svg" width="100%" height="310"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
</p>

<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/d91/b2g-info_8cpp_a21a526f63654418c49b074caf7feb59d_icgraph.svg" width="416" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4955454c83f8a998c0d85dee9ed28883"></a><!-- doxytag: member="b2g&#45;info.cpp::read_whole_file" ref="a4955454c83f8a998c0d85dee9ed28883" args="(const char *filename)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string <a class="el" href="../../d0/d91/b2g-info_8cpp.html#a4955454c83f8a998c0d85dee9ed28883">read_whole_file</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html">b2g-info.cpp</a> の <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00075">75</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00185">print_lmk_params()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">char</span> buf[1024];
  <span class="keywordtype">int</span> fd = TEMP_FAILURE_RETRY(open(filename, O_RDONLY));
  <span class="keywordflow">if</span> (fd == -1) {
    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
  }

  ssize_t total_read = 0;
  ssize_t num_remaining = <span class="keyword">sizeof</span>(buf) - 1;
  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {
    <span class="comment">// No more room in the buffer; we&#39;re done.</span>
    <span class="keywordflow">if</span> (num_remaining &lt;= 0) {
      <span class="keywordflow">break</span>;
    }

    ssize_t nread = TEMP_FAILURE_RETRY(read(fd, buf + total_read, num_remaining));
    <span class="keywordflow">if</span> (nread == 0 || nread == -1) {
      <span class="keywordflow">break</span>;
    }

    num_remaining -= nread;
    total_read += nread;
  }

  buf[total_read] = <span class="charliteral">&#39;\0&#39;</span>;
  <span class="keywordflow">return</span> buf;
}
</pre></div>
<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/d91/b2g-info_8cpp_a4955454c83f8a998c0d85dee9ed28883_icgraph.svg" width="547" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2ef30c42cbc289d899a8be5d2d8f77d0"></a><!-- doxytag: member="b2g&#45;info.cpp::usage" ref="a2ef30c42cbc289d899a8be5d2d8f77d0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d8/d83/killer_8cpp.html#a53ec00d25dd1e351b7f781e5a638dcba">usage</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p> <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html">b2g-info.cpp</a> の <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00317">317</a> 行で定義されています。</p>

<p>参照元 <a class="el" href="../../d0/d91/b2g-info_8cpp_source.html#l00331">main()</a>.</p>
<div class="fragment"><pre class="fragment">{
  printf(<span class="stringliteral">&quot;usage: %s [args]\n&quot;</span>, cmd_name);
  printf(<span class="stringliteral">&quot;\n&quot;</span>);
  printf(<span class="stringliteral">&quot;Options:\n&quot;</span>);
  printf(<span class="stringliteral">&quot;  -t, --threads      Display information about threads.\n&quot;</span>);
  printf(<span class="stringliteral">&quot;  -p, --pids         Print a list of all B2G PIDs.\n&quot;</span>);
  printf(<span class="stringliteral">&quot;  -m, --main-pid     Print only the main B2G process&#39;s PID.\n&quot;</span>);
  printf(<span class="stringliteral">&quot;  -c, --child-pids   Print only the child B2G processes&#39; PIDs.\n&quot;</span>);
  printf(<span class="stringliteral">&quot;  -h, --help         Display this message.\n&quot;</span>);
  printf(<span class="stringliteral">&quot;\n&quot;</span>);
  printf(<span class="stringliteral">&quot;Note that all of these options are mutually-exclusive.\n&quot;</span>);
}
</pre></div>
<p><div class="dynheader">
呼出しグラフ:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/d91/b2g-info_8cpp_a2ef30c42cbc289d899a8be5d2d8f77d0_icgraph.svg" width="168" height="40"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全て</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>データ構造</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>ネームスペース</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>ファイル</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>関数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>変数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>型定義</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>列挙型</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>列挙型の値</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>マクロ定義</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../d0/d91/b2g-info_8cpp.html">b2g-info.cpp</a>      </li>

    <li class="footer">FxOS Code Readingに対してSat Oct 19 2013 01:04:01に生成されました。
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
